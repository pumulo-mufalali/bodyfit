var xD=Object.defineProperty;var _w=t=>{throw TypeError(t)};var _D=(t,e,n)=>e in t?xD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Y=(t,e,n)=>_D(t,typeof e!="symbol"?e+"":e,n),Gp=(t,e,n)=>e.has(t)||_w("Cannot "+n);var O=(t,e,n)=>(Gp(t,e,"read from private field"),n?n.call(t):e.get(t)),ae=(t,e,n)=>e.has(t)?_w("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),K=(t,e,n,r)=>(Gp(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),ve=(t,e,n)=>(Gp(t,e,"access private method"),n);var qd=(t,e,n,r)=>({set _(s){K(t,e,s,n)},get _(){return O(t,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function bD(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var l2={exports:{}},Im={},c2={exports:{}},be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nd=Symbol.for("react.element"),wD=Symbol.for("react.portal"),kD=Symbol.for("react.fragment"),ED=Symbol.for("react.strict_mode"),TD=Symbol.for("react.profiler"),SD=Symbol.for("react.provider"),ID=Symbol.for("react.context"),CD=Symbol.for("react.forward_ref"),AD=Symbol.for("react.suspense"),PD=Symbol.for("react.memo"),ND=Symbol.for("react.lazy"),bw=Symbol.iterator;function RD(t){return t===null||typeof t!="object"?null:(t=bw&&t[bw]||t["@@iterator"],typeof t=="function"?t:null)}var u2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},d2=Object.assign,h2={};function Tl(t,e,n){this.props=t,this.context=e,this.refs=h2,this.updater=n||u2}Tl.prototype.isReactComponent={};Tl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Tl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function f2(){}f2.prototype=Tl.prototype;function kv(t,e,n){this.props=t,this.context=e,this.refs=h2,this.updater=n||u2}var Ev=kv.prototype=new f2;Ev.constructor=kv;d2(Ev,Tl.prototype);Ev.isPureReactComponent=!0;var ww=Array.isArray,m2=Object.prototype.hasOwnProperty,Tv={current:null},p2={key:!0,ref:!0,__self:!0,__source:!0};function g2(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)m2.call(e,r)&&!p2.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:nd,type:t,key:i,ref:o,props:s,_owner:Tv.current}}function MD(t,e){return{$$typeof:nd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Sv(t){return typeof t=="object"&&t!==null&&t.$$typeof===nd}function DD(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var kw=/\/+/g;function Qp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?DD(""+t.key):e.toString(36)}function Dh(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case nd:case wD:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Qp(o,0):r,ww(s)?(n="",t!=null&&(n=t.replace(kw,"$&/")+"/"),Dh(s,e,n,"",function(c){return c})):s!=null&&(Sv(s)&&(s=MD(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(kw,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",ww(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Qp(i,a);o+=Dh(i,e,n,l,s)}else if(l=RD(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Qp(i,a++),o+=Dh(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Kd(t,e,n){if(t==null)return t;var r=[],s=0;return Dh(t,r,"","",function(i){return e.call(n,i,s++)}),r}function jD(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var fn={current:null},jh={transition:null},OD={ReactCurrentDispatcher:fn,ReactCurrentBatchConfig:jh,ReactCurrentOwner:Tv};function y2(){throw Error("act(...) is not supported in production builds of React.")}be.Children={map:Kd,forEach:function(t,e,n){Kd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Kd(t,function(){e++}),e},toArray:function(t){return Kd(t,function(e){return e})||[]},only:function(t){if(!Sv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};be.Component=Tl;be.Fragment=kD;be.Profiler=TD;be.PureComponent=kv;be.StrictMode=ED;be.Suspense=AD;be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OD;be.act=y2;be.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=d2({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Tv.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)m2.call(e,l)&&!p2.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:nd,type:t.type,key:s,ref:i,props:r,_owner:o}};be.createContext=function(t){return t={$$typeof:ID,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:SD,_context:t},t.Consumer=t};be.createElement=g2;be.createFactory=function(t){var e=g2.bind(null,t);return e.type=t,e};be.createRef=function(){return{current:null}};be.forwardRef=function(t){return{$$typeof:CD,render:t}};be.isValidElement=Sv;be.lazy=function(t){return{$$typeof:ND,_payload:{_status:-1,_result:t},_init:jD}};be.memo=function(t,e){return{$$typeof:PD,type:t,compare:e===void 0?null:e}};be.startTransition=function(t){var e=jh.transition;jh.transition={};try{t()}finally{jh.transition=e}};be.unstable_act=y2;be.useCallback=function(t,e){return fn.current.useCallback(t,e)};be.useContext=function(t){return fn.current.useContext(t)};be.useDebugValue=function(){};be.useDeferredValue=function(t){return fn.current.useDeferredValue(t)};be.useEffect=function(t,e){return fn.current.useEffect(t,e)};be.useId=function(){return fn.current.useId()};be.useImperativeHandle=function(t,e,n){return fn.current.useImperativeHandle(t,e,n)};be.useInsertionEffect=function(t,e){return fn.current.useInsertionEffect(t,e)};be.useLayoutEffect=function(t,e){return fn.current.useLayoutEffect(t,e)};be.useMemo=function(t,e){return fn.current.useMemo(t,e)};be.useReducer=function(t,e,n){return fn.current.useReducer(t,e,n)};be.useRef=function(t){return fn.current.useRef(t)};be.useState=function(t){return fn.current.useState(t)};be.useSyncExternalStore=function(t,e,n){return fn.current.useSyncExternalStore(t,e,n)};be.useTransition=function(){return fn.current.useTransition()};be.version="18.3.1";c2.exports=be;var j=c2.exports;const Nt=bD(j);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LD=j,VD=Symbol.for("react.element"),FD=Symbol.for("react.fragment"),UD=Object.prototype.hasOwnProperty,BD=LD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zD={key:!0,ref:!0,__self:!0,__source:!0};function v2(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)UD.call(e,r)&&!zD.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:VD,type:t,key:i,ref:o,props:s,_owner:BD.current}}Im.Fragment=FD;Im.jsx=v2;Im.jsxs=v2;l2.exports=Im;var d=l2.exports,a0={},x2={exports:{}},Vn={},_2={exports:{}},b2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,W){var te=F.length;F.push(W);e:for(;0<te;){var we=te-1>>>1,ce=F[we];if(0<s(ce,W))F[we]=W,F[te]=ce,te=we;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var W=F[0],te=F.pop();if(te!==W){F[0]=te;e:for(var we=0,ce=F.length,q=ce>>>1;we<q;){var de=2*(we+1)-1,Ne=F[de],je=de+1,Be=F[je];if(0>s(Ne,te))je<ce&&0>s(Be,Ne)?(F[we]=Be,F[je]=te,we=je):(F[we]=Ne,F[de]=te,we=de);else if(je<ce&&0>s(Be,te))F[we]=Be,F[je]=te,we=je;else break e}}return W}function s(F,W){var te=F.sortIndex-W.sortIndex;return te!==0?te:F.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,m=3,p=!1,y=!1,v=!1,E=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(F){for(var W=n(c);W!==null;){if(W.callback===null)r(c);else if(W.startTime<=F)r(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(c)}}function P(F){if(v=!1,w(F),!y)if(n(l)!==null)y=!0,J(C);else{var W=n(c);W!==null&&Q(P,W.startTime-F)}}function C(F,W){y=!1,v&&(v=!1,x(k),k=-1),p=!0;var te=m;try{for(w(W),f=n(l);f!==null&&(!(f.expirationTime>W)||F&&!N());){var we=f.callback;if(typeof we=="function"){f.callback=null,m=f.priorityLevel;var ce=we(f.expirationTime<=W);W=t.unstable_now(),typeof ce=="function"?f.callback=ce:f===n(l)&&r(l),w(W)}else r(l);f=n(l)}if(f!==null)var q=!0;else{var de=n(c);de!==null&&Q(P,de.startTime-W),q=!1}return q}finally{f=null,m=te,p=!1}}var R=!1,T=null,k=-1,S=5,I=-1;function N(){return!(t.unstable_now()-I<S)}function D(){if(T!==null){var F=t.unstable_now();I=F;var W=!0;try{W=T(!0,F)}finally{W?M():(R=!1,T=null)}}else R=!1}var M;if(typeof _=="function")M=function(){_(D)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,se=Z.port2;Z.port1.onmessage=D,M=function(){se.postMessage(null)}}else M=function(){E(D,0)};function J(F){T=F,R||(R=!0,M())}function Q(F,W){k=E(function(){F(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,J(C))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(m){case 1:case 2:case 3:var W=3;break;default:W=m}var te=m;m=W;try{return F()}finally{m=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,W){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var te=m;m=F;try{return W()}finally{m=te}},t.unstable_scheduleCallback=function(F,W,te){var we=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?we+te:we):te=we,F){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=te+ce,F={id:u++,callback:W,priorityLevel:F,startTime:te,expirationTime:ce,sortIndex:-1},te>we?(F.sortIndex=te,e(c,F),n(l)===null&&F===n(c)&&(v?(x(k),k=-1):v=!0,Q(P,te-we))):(F.sortIndex=ce,e(l,F),y||p||(y=!0,J(C))),F},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(F){var W=m;return function(){var te=m;m=W;try{return F.apply(this,arguments)}finally{m=te}}}})(b2);_2.exports=b2;var $D=_2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WD=j,On=$D;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var w2=new Set,iu={};function Wo(t,e){el(t,e),el(t+"Capture",e)}function el(t,e){for(iu[t]=e,t=0;t<e.length;t++)w2.add(e[t])}var fs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l0=Object.prototype.hasOwnProperty,HD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ew={},Tw={};function qD(t){return l0.call(Tw,t)?!0:l0.call(Ew,t)?!1:HD.test(t)?Tw[t]=!0:(Ew[t]=!0,!1)}function KD(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function GD(t,e,n,r){if(e===null||typeof e>"u"||KD(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function mn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ot[t]=new mn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ot[e]=new mn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ot[t]=new mn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ot[t]=new mn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ot[t]=new mn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ot[t]=new mn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ot[t]=new mn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ot[t]=new mn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ot[t]=new mn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Iv=/[\-:]([a-z])/g;function Cv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Iv,Cv);Ot[e]=new mn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Iv,Cv);Ot[e]=new mn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Iv,Cv);Ot[e]=new mn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ot[t]=new mn(t,1,!1,t.toLowerCase(),null,!1,!1)});Ot.xlinkHref=new mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ot[t]=new mn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Av(t,e,n,r){var s=Ot.hasOwnProperty(e)?Ot[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(GD(e,n,s,r)&&(n=null),r||s===null?qD(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Es=WD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gd=Symbol.for("react.element"),ua=Symbol.for("react.portal"),da=Symbol.for("react.fragment"),Pv=Symbol.for("react.strict_mode"),c0=Symbol.for("react.profiler"),k2=Symbol.for("react.provider"),E2=Symbol.for("react.context"),Nv=Symbol.for("react.forward_ref"),u0=Symbol.for("react.suspense"),d0=Symbol.for("react.suspense_list"),Rv=Symbol.for("react.memo"),js=Symbol.for("react.lazy"),T2=Symbol.for("react.offscreen"),Sw=Symbol.iterator;function Zl(t){return t===null||typeof t!="object"?null:(t=Sw&&t[Sw]||t["@@iterator"],typeof t=="function"?t:null)}var nt=Object.assign,Yp;function mc(t){if(Yp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Yp=e&&e[1]||""}return`
`+Yp+t}var Xp=!1;function Zp(t,e){if(!t||Xp)return"";Xp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Xp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?mc(t):""}function QD(t){switch(t.tag){case 5:return mc(t.type);case 16:return mc("Lazy");case 13:return mc("Suspense");case 19:return mc("SuspenseList");case 0:case 2:case 15:return t=Zp(t.type,!1),t;case 11:return t=Zp(t.type.render,!1),t;case 1:return t=Zp(t.type,!0),t;default:return""}}function h0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case da:return"Fragment";case ua:return"Portal";case c0:return"Profiler";case Pv:return"StrictMode";case u0:return"Suspense";case d0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case E2:return(t.displayName||"Context")+".Consumer";case k2:return(t._context.displayName||"Context")+".Provider";case Nv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Rv:return e=t.displayName||null,e!==null?e:h0(t.type)||"Memo";case js:e=t._payload,t=t._init;try{return h0(t(e))}catch{}}return null}function YD(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return h0(e);case 8:return e===Pv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function wi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function S2(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function XD(t){var e=S2(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Qd(t){t._valueTracker||(t._valueTracker=XD(t))}function I2(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=S2(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function df(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function f0(t,e){var n=e.checked;return nt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Iw(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=wi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function C2(t,e){e=e.checked,e!=null&&Av(t,"checked",e,!1)}function m0(t,e){C2(t,e);var n=wi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?p0(t,e.type,n):e.hasOwnProperty("defaultValue")&&p0(t,e.type,wi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Cw(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function p0(t,e,n){(e!=="number"||df(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var pc=Array.isArray;function Aa(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+wi(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function g0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return nt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Aw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(pc(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:wi(n)}}function A2(t,e){var n=wi(e.value),r=wi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Pw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function P2(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function y0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?P2(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Yd,N2=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Yd=Yd||document.createElement("div"),Yd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Yd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ou(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Mc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ZD=["Webkit","ms","Moz","O"];Object.keys(Mc).forEach(function(t){ZD.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Mc[e]=Mc[t]})});function R2(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Mc.hasOwnProperty(t)&&Mc[t]?(""+e).trim():e+"px"}function M2(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=R2(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var JD=nt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function v0(t,e){if(e){if(JD[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function x0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _0=null;function Mv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var b0=null,Pa=null,Na=null;function Nw(t){if(t=id(t)){if(typeof b0!="function")throw Error(z(280));var e=t.stateNode;e&&(e=Rm(e),b0(t.stateNode,t.type,e))}}function D2(t){Pa?Na?Na.push(t):Na=[t]:Pa=t}function j2(){if(Pa){var t=Pa,e=Na;if(Na=Pa=null,Nw(t),e)for(t=0;t<e.length;t++)Nw(e[t])}}function O2(t,e){return t(e)}function L2(){}var Jp=!1;function V2(t,e,n){if(Jp)return t(e,n);Jp=!0;try{return O2(t,e,n)}finally{Jp=!1,(Pa!==null||Na!==null)&&(L2(),j2())}}function au(t,e){var n=t.stateNode;if(n===null)return null;var r=Rm(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var w0=!1;if(fs)try{var Jl={};Object.defineProperty(Jl,"passive",{get:function(){w0=!0}}),window.addEventListener("test",Jl,Jl),window.removeEventListener("test",Jl,Jl)}catch{w0=!1}function ej(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Dc=!1,hf=null,ff=!1,k0=null,tj={onError:function(t){Dc=!0,hf=t}};function nj(t,e,n,r,s,i,o,a,l){Dc=!1,hf=null,ej.apply(tj,arguments)}function rj(t,e,n,r,s,i,o,a,l){if(nj.apply(this,arguments),Dc){if(Dc){var c=hf;Dc=!1,hf=null}else throw Error(z(198));ff||(ff=!0,k0=c)}}function Ho(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function F2(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Rw(t){if(Ho(t)!==t)throw Error(z(188))}function sj(t){var e=t.alternate;if(!e){if(e=Ho(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Rw(s),t;if(i===r)return Rw(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function U2(t){return t=sj(t),t!==null?B2(t):null}function B2(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=B2(t);if(e!==null)return e;t=t.sibling}return null}var z2=On.unstable_scheduleCallback,Mw=On.unstable_cancelCallback,ij=On.unstable_shouldYield,oj=On.unstable_requestPaint,dt=On.unstable_now,aj=On.unstable_getCurrentPriorityLevel,Dv=On.unstable_ImmediatePriority,$2=On.unstable_UserBlockingPriority,mf=On.unstable_NormalPriority,lj=On.unstable_LowPriority,W2=On.unstable_IdlePriority,Cm=null,Nr=null;function cj(t){if(Nr&&typeof Nr.onCommitFiberRoot=="function")try{Nr.onCommitFiberRoot(Cm,t,void 0,(t.current.flags&128)===128)}catch{}}var mr=Math.clz32?Math.clz32:hj,uj=Math.log,dj=Math.LN2;function hj(t){return t>>>=0,t===0?32:31-(uj(t)/dj|0)|0}var Xd=64,Zd=4194304;function gc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function pf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=gc(a):(i&=o,i!==0&&(r=gc(i)))}else o=n&~s,o!==0?r=gc(o):i!==0&&(r=gc(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-mr(e),s=1<<n,r|=t[n],e&=~s;return r}function fj(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mj(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-mr(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=fj(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function E0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function H2(){var t=Xd;return Xd<<=1,!(Xd&4194240)&&(Xd=64),t}function eg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function rd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-mr(e),t[e]=n}function pj(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-mr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function jv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-mr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Fe=0;function q2(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var K2,Ov,G2,Q2,Y2,T0=!1,Jd=[],ii=null,oi=null,ai=null,lu=new Map,cu=new Map,Vs=[],gj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dw(t,e){switch(t){case"focusin":case"focusout":ii=null;break;case"dragenter":case"dragleave":oi=null;break;case"mouseover":case"mouseout":ai=null;break;case"pointerover":case"pointerout":lu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":cu.delete(e.pointerId)}}function ec(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=id(e),e!==null&&Ov(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function yj(t,e,n,r,s){switch(e){case"focusin":return ii=ec(ii,t,e,n,r,s),!0;case"dragenter":return oi=ec(oi,t,e,n,r,s),!0;case"mouseover":return ai=ec(ai,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return lu.set(i,ec(lu.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,cu.set(i,ec(cu.get(i)||null,t,e,n,r,s)),!0}return!1}function X2(t){var e=ro(t.target);if(e!==null){var n=Ho(e);if(n!==null){if(e=n.tag,e===13){if(e=F2(n),e!==null){t.blockedOn=e,Y2(t.priority,function(){G2(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Oh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=S0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);_0=r,n.target.dispatchEvent(r),_0=null}else return e=id(n),e!==null&&Ov(e),t.blockedOn=n,!1;e.shift()}return!0}function jw(t,e,n){Oh(t)&&n.delete(e)}function vj(){T0=!1,ii!==null&&Oh(ii)&&(ii=null),oi!==null&&Oh(oi)&&(oi=null),ai!==null&&Oh(ai)&&(ai=null),lu.forEach(jw),cu.forEach(jw)}function tc(t,e){t.blockedOn===e&&(t.blockedOn=null,T0||(T0=!0,On.unstable_scheduleCallback(On.unstable_NormalPriority,vj)))}function uu(t){function e(s){return tc(s,t)}if(0<Jd.length){tc(Jd[0],t);for(var n=1;n<Jd.length;n++){var r=Jd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ii!==null&&tc(ii,t),oi!==null&&tc(oi,t),ai!==null&&tc(ai,t),lu.forEach(e),cu.forEach(e),n=0;n<Vs.length;n++)r=Vs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Vs.length&&(n=Vs[0],n.blockedOn===null);)X2(n),n.blockedOn===null&&Vs.shift()}var Ra=Es.ReactCurrentBatchConfig,gf=!0;function xj(t,e,n,r){var s=Fe,i=Ra.transition;Ra.transition=null;try{Fe=1,Lv(t,e,n,r)}finally{Fe=s,Ra.transition=i}}function _j(t,e,n,r){var s=Fe,i=Ra.transition;Ra.transition=null;try{Fe=4,Lv(t,e,n,r)}finally{Fe=s,Ra.transition=i}}function Lv(t,e,n,r){if(gf){var s=S0(t,e,n,r);if(s===null)ug(t,e,r,yf,n),Dw(t,r);else if(yj(s,t,e,n,r))r.stopPropagation();else if(Dw(t,r),e&4&&-1<gj.indexOf(t)){for(;s!==null;){var i=id(s);if(i!==null&&K2(i),i=S0(t,e,n,r),i===null&&ug(t,e,r,yf,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else ug(t,e,r,null,n)}}var yf=null;function S0(t,e,n,r){if(yf=null,t=Mv(r),t=ro(t),t!==null)if(e=Ho(t),e===null)t=null;else if(n=e.tag,n===13){if(t=F2(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return yf=t,null}function Z2(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(aj()){case Dv:return 1;case $2:return 4;case mf:case lj:return 16;case W2:return 536870912;default:return 16}default:return 16}}var Js=null,Vv=null,Lh=null;function J2(){if(Lh)return Lh;var t,e=Vv,n=e.length,r,s="value"in Js?Js.value:Js.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Lh=s.slice(t,1<r?1-r:void 0)}function Vh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function eh(){return!0}function Ow(){return!1}function Fn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?eh:Ow,this.isPropagationStopped=Ow,this}return nt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=eh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=eh)},persist:function(){},isPersistent:eh}),e}var Sl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fv=Fn(Sl),sd=nt({},Sl,{view:0,detail:0}),bj=Fn(sd),tg,ng,nc,Am=nt({},sd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==nc&&(nc&&t.type==="mousemove"?(tg=t.screenX-nc.screenX,ng=t.screenY-nc.screenY):ng=tg=0,nc=t),tg)},movementY:function(t){return"movementY"in t?t.movementY:ng}}),Lw=Fn(Am),wj=nt({},Am,{dataTransfer:0}),kj=Fn(wj),Ej=nt({},sd,{relatedTarget:0}),rg=Fn(Ej),Tj=nt({},Sl,{animationName:0,elapsedTime:0,pseudoElement:0}),Sj=Fn(Tj),Ij=nt({},Sl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Cj=Fn(Ij),Aj=nt({},Sl,{data:0}),Vw=Fn(Aj),Pj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mj(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Rj[t])?!!e[t]:!1}function Uv(){return Mj}var Dj=nt({},sd,{key:function(t){if(t.key){var e=Pj[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Vh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Nj[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uv,charCode:function(t){return t.type==="keypress"?Vh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),jj=Fn(Dj),Oj=nt({},Am,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fw=Fn(Oj),Lj=nt({},sd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uv}),Vj=Fn(Lj),Fj=nt({},Sl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Uj=Fn(Fj),Bj=nt({},Am,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),zj=Fn(Bj),$j=[9,13,27,32],Bv=fs&&"CompositionEvent"in window,jc=null;fs&&"documentMode"in document&&(jc=document.documentMode);var Wj=fs&&"TextEvent"in window&&!jc,eI=fs&&(!Bv||jc&&8<jc&&11>=jc),Uw=" ",Bw=!1;function tI(t,e){switch(t){case"keyup":return $j.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ha=!1;function Hj(t,e){switch(t){case"compositionend":return nI(e);case"keypress":return e.which!==32?null:(Bw=!0,Uw);case"textInput":return t=e.data,t===Uw&&Bw?null:t;default:return null}}function qj(t,e){if(ha)return t==="compositionend"||!Bv&&tI(t,e)?(t=J2(),Lh=Vv=Js=null,ha=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return eI&&e.locale!=="ko"?null:e.data;default:return null}}var Kj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Kj[t.type]:e==="textarea"}function rI(t,e,n,r){D2(r),e=vf(e,"onChange"),0<e.length&&(n=new Fv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Oc=null,du=null;function Gj(t){mI(t,0)}function Pm(t){var e=pa(t);if(I2(e))return t}function Qj(t,e){if(t==="change")return e}var sI=!1;if(fs){var sg;if(fs){var ig="oninput"in document;if(!ig){var $w=document.createElement("div");$w.setAttribute("oninput","return;"),ig=typeof $w.oninput=="function"}sg=ig}else sg=!1;sI=sg&&(!document.documentMode||9<document.documentMode)}function Ww(){Oc&&(Oc.detachEvent("onpropertychange",iI),du=Oc=null)}function iI(t){if(t.propertyName==="value"&&Pm(du)){var e=[];rI(e,du,t,Mv(t)),V2(Gj,e)}}function Yj(t,e,n){t==="focusin"?(Ww(),Oc=e,du=n,Oc.attachEvent("onpropertychange",iI)):t==="focusout"&&Ww()}function Xj(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Pm(du)}function Zj(t,e){if(t==="click")return Pm(e)}function Jj(t,e){if(t==="input"||t==="change")return Pm(e)}function eO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gr=typeof Object.is=="function"?Object.is:eO;function hu(t,e){if(gr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!l0.call(e,s)||!gr(t[s],e[s]))return!1}return!0}function Hw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function qw(t,e){var n=Hw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Hw(n)}}function oI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?oI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function aI(){for(var t=window,e=df();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=df(t.document)}return e}function zv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function tO(t){var e=aI(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&oI(n.ownerDocument.documentElement,n)){if(r!==null&&zv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=qw(n,i);var o=qw(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var nO=fs&&"documentMode"in document&&11>=document.documentMode,fa=null,I0=null,Lc=null,C0=!1;function Kw(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;C0||fa==null||fa!==df(r)||(r=fa,"selectionStart"in r&&zv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Lc&&hu(Lc,r)||(Lc=r,r=vf(I0,"onSelect"),0<r.length&&(e=new Fv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=fa)))}function th(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ma={animationend:th("Animation","AnimationEnd"),animationiteration:th("Animation","AnimationIteration"),animationstart:th("Animation","AnimationStart"),transitionend:th("Transition","TransitionEnd")},og={},lI={};fs&&(lI=document.createElement("div").style,"AnimationEvent"in window||(delete ma.animationend.animation,delete ma.animationiteration.animation,delete ma.animationstart.animation),"TransitionEvent"in window||delete ma.transitionend.transition);function Nm(t){if(og[t])return og[t];if(!ma[t])return t;var e=ma[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in lI)return og[t]=e[n];return t}var cI=Nm("animationend"),uI=Nm("animationiteration"),dI=Nm("animationstart"),hI=Nm("transitionend"),fI=new Map,Gw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mi(t,e){fI.set(t,e),Wo(e,[t])}for(var ag=0;ag<Gw.length;ag++){var lg=Gw[ag],rO=lg.toLowerCase(),sO=lg[0].toUpperCase()+lg.slice(1);Mi(rO,"on"+sO)}Mi(cI,"onAnimationEnd");Mi(uI,"onAnimationIteration");Mi(dI,"onAnimationStart");Mi("dblclick","onDoubleClick");Mi("focusin","onFocus");Mi("focusout","onBlur");Mi(hI,"onTransitionEnd");el("onMouseEnter",["mouseout","mouseover"]);el("onMouseLeave",["mouseout","mouseover"]);el("onPointerEnter",["pointerout","pointerover"]);el("onPointerLeave",["pointerout","pointerover"]);Wo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iO=new Set("cancel close invalid load scroll toggle".split(" ").concat(yc));function Qw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,rj(r,e,void 0,t),t.currentTarget=null}function mI(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Qw(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Qw(s,a,c),i=l}}}if(ff)throw t=k0,ff=!1,k0=null,t}function qe(t,e){var n=e[M0];n===void 0&&(n=e[M0]=new Set);var r=t+"__bubble";n.has(r)||(pI(e,t,2,!1),n.add(r))}function cg(t,e,n){var r=0;e&&(r|=4),pI(n,t,r,e)}var nh="_reactListening"+Math.random().toString(36).slice(2);function fu(t){if(!t[nh]){t[nh]=!0,w2.forEach(function(n){n!=="selectionchange"&&(iO.has(n)||cg(n,!1,t),cg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[nh]||(e[nh]=!0,cg("selectionchange",!1,e))}}function pI(t,e,n,r){switch(Z2(e)){case 1:var s=xj;break;case 4:s=_j;break;default:s=Lv}n=s.bind(null,e,n,t),s=void 0,!w0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function ug(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=ro(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}V2(function(){var c=i,u=Mv(n),f=[];e:{var m=fI.get(t);if(m!==void 0){var p=Fv,y=t;switch(t){case"keypress":if(Vh(n)===0)break e;case"keydown":case"keyup":p=jj;break;case"focusin":y="focus",p=rg;break;case"focusout":y="blur",p=rg;break;case"beforeblur":case"afterblur":p=rg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Lw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=kj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Vj;break;case cI:case uI:case dI:p=Sj;break;case hI:p=Uj;break;case"scroll":p=bj;break;case"wheel":p=zj;break;case"copy":case"cut":case"paste":p=Cj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Fw}var v=(e&4)!==0,E=!v&&t==="scroll",x=v?m!==null?m+"Capture":null:m;v=[];for(var _=c,w;_!==null;){w=_;var P=w.stateNode;if(w.tag===5&&P!==null&&(w=P,x!==null&&(P=au(_,x),P!=null&&v.push(mu(_,P,w)))),E)break;_=_.return}0<v.length&&(m=new p(m,y,null,n,u),f.push({event:m,listeners:v}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",m&&n!==_0&&(y=n.relatedTarget||n.fromElement)&&(ro(y)||y[ms]))break e;if((p||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,p?(y=n.relatedTarget||n.toElement,p=c,y=y?ro(y):null,y!==null&&(E=Ho(y),y!==E||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=c),p!==y)){if(v=Lw,P="onMouseLeave",x="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(v=Fw,P="onPointerLeave",x="onPointerEnter",_="pointer"),E=p==null?m:pa(p),w=y==null?m:pa(y),m=new v(P,_+"leave",p,n,u),m.target=E,m.relatedTarget=w,P=null,ro(u)===c&&(v=new v(x,_+"enter",y,n,u),v.target=w,v.relatedTarget=E,P=v),E=P,p&&y)t:{for(v=p,x=y,_=0,w=v;w;w=ra(w))_++;for(w=0,P=x;P;P=ra(P))w++;for(;0<_-w;)v=ra(v),_--;for(;0<w-_;)x=ra(x),w--;for(;_--;){if(v===x||x!==null&&v===x.alternate)break t;v=ra(v),x=ra(x)}v=null}else v=null;p!==null&&Yw(f,m,p,v,!1),y!==null&&E!==null&&Yw(f,E,y,v,!0)}}e:{if(m=c?pa(c):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var C=Qj;else if(zw(m))if(sI)C=Jj;else{C=Xj;var R=Yj}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(C=Zj);if(C&&(C=C(t,c))){rI(f,C,n,u);break e}R&&R(t,m,c),t==="focusout"&&(R=m._wrapperState)&&R.controlled&&m.type==="number"&&p0(m,"number",m.value)}switch(R=c?pa(c):window,t){case"focusin":(zw(R)||R.contentEditable==="true")&&(fa=R,I0=c,Lc=null);break;case"focusout":Lc=I0=fa=null;break;case"mousedown":C0=!0;break;case"contextmenu":case"mouseup":case"dragend":C0=!1,Kw(f,n,u);break;case"selectionchange":if(nO)break;case"keydown":case"keyup":Kw(f,n,u)}var T;if(Bv)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else ha?tI(t,n)&&(k="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(eI&&n.locale!=="ko"&&(ha||k!=="onCompositionStart"?k==="onCompositionEnd"&&ha&&(T=J2()):(Js=u,Vv="value"in Js?Js.value:Js.textContent,ha=!0)),R=vf(c,k),0<R.length&&(k=new Vw(k,t,null,n,u),f.push({event:k,listeners:R}),T?k.data=T:(T=nI(n),T!==null&&(k.data=T)))),(T=Wj?Hj(t,n):qj(t,n))&&(c=vf(c,"onBeforeInput"),0<c.length&&(u=new Vw("onBeforeInput","beforeinput",null,n,u),f.push({event:u,listeners:c}),u.data=T))}mI(f,e)})}function mu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function vf(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=au(t,n),i!=null&&r.unshift(mu(t,i,s)),i=au(t,e),i!=null&&r.push(mu(t,i,s))),t=t.return}return r}function ra(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Yw(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=au(n,i),l!=null&&o.unshift(mu(n,l,a))):s||(l=au(n,i),l!=null&&o.push(mu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var oO=/\r\n?/g,aO=/\u0000|\uFFFD/g;function Xw(t){return(typeof t=="string"?t:""+t).replace(oO,`
`).replace(aO,"")}function rh(t,e,n){if(e=Xw(e),Xw(t)!==e&&n)throw Error(z(425))}function xf(){}var A0=null,P0=null;function N0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var R0=typeof setTimeout=="function"?setTimeout:void 0,lO=typeof clearTimeout=="function"?clearTimeout:void 0,Zw=typeof Promise=="function"?Promise:void 0,cO=typeof queueMicrotask=="function"?queueMicrotask:typeof Zw<"u"?function(t){return Zw.resolve(null).then(t).catch(uO)}:R0;function uO(t){setTimeout(function(){throw t})}function dg(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),uu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);uu(e)}function li(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Jw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Il=Math.random().toString(36).slice(2),Ar="__reactFiber$"+Il,pu="__reactProps$"+Il,ms="__reactContainer$"+Il,M0="__reactEvents$"+Il,dO="__reactListeners$"+Il,hO="__reactHandles$"+Il;function ro(t){var e=t[Ar];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ms]||n[Ar]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Jw(t);t!==null;){if(n=t[Ar])return n;t=Jw(t)}return e}t=n,n=t.parentNode}return null}function id(t){return t=t[Ar]||t[ms],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function pa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function Rm(t){return t[pu]||null}var D0=[],ga=-1;function Di(t){return{current:t}}function Qe(t){0>ga||(t.current=D0[ga],D0[ga]=null,ga--)}function $e(t,e){ga++,D0[ga]=t.current,t.current=e}var ki={},Zt=Di(ki),Tn=Di(!1),Co=ki;function tl(t,e){var n=t.type.contextTypes;if(!n)return ki;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Sn(t){return t=t.childContextTypes,t!=null}function _f(){Qe(Tn),Qe(Zt)}function ek(t,e,n){if(Zt.current!==ki)throw Error(z(168));$e(Zt,e),$e(Tn,n)}function gI(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,YD(t)||"Unknown",s));return nt({},n,r)}function bf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ki,Co=Zt.current,$e(Zt,t),$e(Tn,Tn.current),!0}function tk(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=gI(t,e,Co),r.__reactInternalMemoizedMergedChildContext=t,Qe(Tn),Qe(Zt),$e(Zt,t)):Qe(Tn),$e(Tn,n)}var Yr=null,Mm=!1,hg=!1;function yI(t){Yr===null?Yr=[t]:Yr.push(t)}function fO(t){Mm=!0,yI(t)}function ji(){if(!hg&&Yr!==null){hg=!0;var t=0,e=Fe;try{var n=Yr;for(Fe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Yr=null,Mm=!1}catch(s){throw Yr!==null&&(Yr=Yr.slice(t+1)),z2(Dv,ji),s}finally{Fe=e,hg=!1}}return null}var ya=[],va=0,wf=null,kf=0,qn=[],Kn=0,Ao=null,ns=1,rs="";function Xi(t,e){ya[va++]=kf,ya[va++]=wf,wf=t,kf=e}function vI(t,e,n){qn[Kn++]=ns,qn[Kn++]=rs,qn[Kn++]=Ao,Ao=t;var r=ns;t=rs;var s=32-mr(r)-1;r&=~(1<<s),n+=1;var i=32-mr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,ns=1<<32-mr(e)+s|n<<s|r,rs=i+t}else ns=1<<i|n<<s|r,rs=t}function $v(t){t.return!==null&&(Xi(t,1),vI(t,1,0))}function Wv(t){for(;t===wf;)wf=ya[--va],ya[va]=null,kf=ya[--va],ya[va]=null;for(;t===Ao;)Ao=qn[--Kn],qn[Kn]=null,rs=qn[--Kn],qn[Kn]=null,ns=qn[--Kn],qn[Kn]=null}var Dn=null,Rn=null,Ye=!1,fr=null;function xI(t,e){var n=Gn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function nk(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Dn=t,Rn=li(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Dn=t,Rn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ao!==null?{id:ns,overflow:rs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Gn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Dn=t,Rn=null,!0):!1;default:return!1}}function j0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function O0(t){if(Ye){var e=Rn;if(e){var n=e;if(!nk(t,e)){if(j0(t))throw Error(z(418));e=li(n.nextSibling);var r=Dn;e&&nk(t,e)?xI(r,n):(t.flags=t.flags&-4097|2,Ye=!1,Dn=t)}}else{if(j0(t))throw Error(z(418));t.flags=t.flags&-4097|2,Ye=!1,Dn=t}}}function rk(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Dn=t}function sh(t){if(t!==Dn)return!1;if(!Ye)return rk(t),Ye=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!N0(t.type,t.memoizedProps)),e&&(e=Rn)){if(j0(t))throw _I(),Error(z(418));for(;e;)xI(t,e),e=li(e.nextSibling)}if(rk(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Rn=li(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Rn=null}}else Rn=Dn?li(t.stateNode.nextSibling):null;return!0}function _I(){for(var t=Rn;t;)t=li(t.nextSibling)}function nl(){Rn=Dn=null,Ye=!1}function Hv(t){fr===null?fr=[t]:fr.push(t)}var mO=Es.ReactCurrentBatchConfig;function rc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function ih(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function sk(t){var e=t._init;return e(t._payload)}function bI(t){function e(x,_){if(t){var w=x.deletions;w===null?(x.deletions=[_],x.flags|=16):w.push(_)}}function n(x,_){if(!t)return null;for(;_!==null;)e(x,_),_=_.sibling;return null}function r(x,_){for(x=new Map;_!==null;)_.key!==null?x.set(_.key,_):x.set(_.index,_),_=_.sibling;return x}function s(x,_){return x=hi(x,_),x.index=0,x.sibling=null,x}function i(x,_,w){return x.index=w,t?(w=x.alternate,w!==null?(w=w.index,w<_?(x.flags|=2,_):w):(x.flags|=2,_)):(x.flags|=1048576,_)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,_,w,P){return _===null||_.tag!==6?(_=xg(w,x.mode,P),_.return=x,_):(_=s(_,w),_.return=x,_)}function l(x,_,w,P){var C=w.type;return C===da?u(x,_,w.props.children,P,w.key):_!==null&&(_.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===js&&sk(C)===_.type)?(P=s(_,w.props),P.ref=rc(x,_,w),P.return=x,P):(P=Hh(w.type,w.key,w.props,null,x.mode,P),P.ref=rc(x,_,w),P.return=x,P)}function c(x,_,w,P){return _===null||_.tag!==4||_.stateNode.containerInfo!==w.containerInfo||_.stateNode.implementation!==w.implementation?(_=_g(w,x.mode,P),_.return=x,_):(_=s(_,w.children||[]),_.return=x,_)}function u(x,_,w,P,C){return _===null||_.tag!==7?(_=ko(w,x.mode,P,C),_.return=x,_):(_=s(_,w),_.return=x,_)}function f(x,_,w){if(typeof _=="string"&&_!==""||typeof _=="number")return _=xg(""+_,x.mode,w),_.return=x,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Gd:return w=Hh(_.type,_.key,_.props,null,x.mode,w),w.ref=rc(x,null,_),w.return=x,w;case ua:return _=_g(_,x.mode,w),_.return=x,_;case js:var P=_._init;return f(x,P(_._payload),w)}if(pc(_)||Zl(_))return _=ko(_,x.mode,w,null),_.return=x,_;ih(x,_)}return null}function m(x,_,w,P){var C=_!==null?_.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return C!==null?null:a(x,_,""+w,P);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Gd:return w.key===C?l(x,_,w,P):null;case ua:return w.key===C?c(x,_,w,P):null;case js:return C=w._init,m(x,_,C(w._payload),P)}if(pc(w)||Zl(w))return C!==null?null:u(x,_,w,P,null);ih(x,w)}return null}function p(x,_,w,P,C){if(typeof P=="string"&&P!==""||typeof P=="number")return x=x.get(w)||null,a(_,x,""+P,C);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Gd:return x=x.get(P.key===null?w:P.key)||null,l(_,x,P,C);case ua:return x=x.get(P.key===null?w:P.key)||null,c(_,x,P,C);case js:var R=P._init;return p(x,_,w,R(P._payload),C)}if(pc(P)||Zl(P))return x=x.get(w)||null,u(_,x,P,C,null);ih(_,P)}return null}function y(x,_,w,P){for(var C=null,R=null,T=_,k=_=0,S=null;T!==null&&k<w.length;k++){T.index>k?(S=T,T=null):S=T.sibling;var I=m(x,T,w[k],P);if(I===null){T===null&&(T=S);break}t&&T&&I.alternate===null&&e(x,T),_=i(I,_,k),R===null?C=I:R.sibling=I,R=I,T=S}if(k===w.length)return n(x,T),Ye&&Xi(x,k),C;if(T===null){for(;k<w.length;k++)T=f(x,w[k],P),T!==null&&(_=i(T,_,k),R===null?C=T:R.sibling=T,R=T);return Ye&&Xi(x,k),C}for(T=r(x,T);k<w.length;k++)S=p(T,x,k,w[k],P),S!==null&&(t&&S.alternate!==null&&T.delete(S.key===null?k:S.key),_=i(S,_,k),R===null?C=S:R.sibling=S,R=S);return t&&T.forEach(function(N){return e(x,N)}),Ye&&Xi(x,k),C}function v(x,_,w,P){var C=Zl(w);if(typeof C!="function")throw Error(z(150));if(w=C.call(w),w==null)throw Error(z(151));for(var R=C=null,T=_,k=_=0,S=null,I=w.next();T!==null&&!I.done;k++,I=w.next()){T.index>k?(S=T,T=null):S=T.sibling;var N=m(x,T,I.value,P);if(N===null){T===null&&(T=S);break}t&&T&&N.alternate===null&&e(x,T),_=i(N,_,k),R===null?C=N:R.sibling=N,R=N,T=S}if(I.done)return n(x,T),Ye&&Xi(x,k),C;if(T===null){for(;!I.done;k++,I=w.next())I=f(x,I.value,P),I!==null&&(_=i(I,_,k),R===null?C=I:R.sibling=I,R=I);return Ye&&Xi(x,k),C}for(T=r(x,T);!I.done;k++,I=w.next())I=p(T,x,k,I.value,P),I!==null&&(t&&I.alternate!==null&&T.delete(I.key===null?k:I.key),_=i(I,_,k),R===null?C=I:R.sibling=I,R=I);return t&&T.forEach(function(D){return e(x,D)}),Ye&&Xi(x,k),C}function E(x,_,w,P){if(typeof w=="object"&&w!==null&&w.type===da&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Gd:e:{for(var C=w.key,R=_;R!==null;){if(R.key===C){if(C=w.type,C===da){if(R.tag===7){n(x,R.sibling),_=s(R,w.props.children),_.return=x,x=_;break e}}else if(R.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===js&&sk(C)===R.type){n(x,R.sibling),_=s(R,w.props),_.ref=rc(x,R,w),_.return=x,x=_;break e}n(x,R);break}else e(x,R);R=R.sibling}w.type===da?(_=ko(w.props.children,x.mode,P,w.key),_.return=x,x=_):(P=Hh(w.type,w.key,w.props,null,x.mode,P),P.ref=rc(x,_,w),P.return=x,x=P)}return o(x);case ua:e:{for(R=w.key;_!==null;){if(_.key===R)if(_.tag===4&&_.stateNode.containerInfo===w.containerInfo&&_.stateNode.implementation===w.implementation){n(x,_.sibling),_=s(_,w.children||[]),_.return=x,x=_;break e}else{n(x,_);break}else e(x,_);_=_.sibling}_=_g(w,x.mode,P),_.return=x,x=_}return o(x);case js:return R=w._init,E(x,_,R(w._payload),P)}if(pc(w))return y(x,_,w,P);if(Zl(w))return v(x,_,w,P);ih(x,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,_!==null&&_.tag===6?(n(x,_.sibling),_=s(_,w),_.return=x,x=_):(n(x,_),_=xg(w,x.mode,P),_.return=x,x=_),o(x)):n(x,_)}return E}var rl=bI(!0),wI=bI(!1),Ef=Di(null),Tf=null,xa=null,qv=null;function Kv(){qv=xa=Tf=null}function Gv(t){var e=Ef.current;Qe(Ef),t._currentValue=e}function L0(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ma(t,e){Tf=t,qv=xa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(kn=!0),t.firstContext=null)}function er(t){var e=t._currentValue;if(qv!==t)if(t={context:t,memoizedValue:e,next:null},xa===null){if(Tf===null)throw Error(z(308));xa=t,Tf.dependencies={lanes:0,firstContext:t}}else xa=xa.next=t;return e}var so=null;function Qv(t){so===null?so=[t]:so.push(t)}function kI(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Qv(e)):(n.next=s.next,s.next=n),e.interleaved=n,ps(t,r)}function ps(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Os=!1;function Yv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function EI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function cs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ci(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ae&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ps(t,n)}return s=r.interleaved,s===null?(e.next=e,Qv(r)):(e.next=s.next,s.next=e),r.interleaved=e,ps(t,n)}function Fh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jv(t,n)}}function ik(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Sf(t,e,n,r){var s=t.updateQueue;Os=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,u=c=l=null,a=i;do{var m=a.lane,p=a.eventTime;if((r&m)===m){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,v=a;switch(m=e,p=n,v.tag){case 1:if(y=v.payload,typeof y=="function"){f=y.call(p,f,m);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,m=typeof y=="function"?y.call(p,f,m):y,m==null)break e;f=nt({},f,m);break e;case 2:Os=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else p={eventTime:p,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=f):u=u.next=p,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(u===null&&(l=f),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);No|=o,t.lanes=o,t.memoizedState=f}}function ok(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var od={},Rr=Di(od),gu=Di(od),yu=Di(od);function io(t){if(t===od)throw Error(z(174));return t}function Xv(t,e){switch($e(yu,e),$e(gu,t),$e(Rr,od),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:y0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=y0(e,t)}Qe(Rr),$e(Rr,e)}function sl(){Qe(Rr),Qe(gu),Qe(yu)}function TI(t){io(yu.current);var e=io(Rr.current),n=y0(e,t.type);e!==n&&($e(gu,t),$e(Rr,n))}function Zv(t){gu.current===t&&(Qe(Rr),Qe(gu))}var Ze=Di(0);function If(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var fg=[];function Jv(){for(var t=0;t<fg.length;t++)fg[t]._workInProgressVersionPrimary=null;fg.length=0}var Uh=Es.ReactCurrentDispatcher,mg=Es.ReactCurrentBatchConfig,Po=0,tt=null,vt=null,St=null,Cf=!1,Vc=!1,vu=0,pO=0;function zt(){throw Error(z(321))}function ex(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!gr(t[n],e[n]))return!1;return!0}function tx(t,e,n,r,s,i){if(Po=i,tt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Uh.current=t===null||t.memoizedState===null?xO:_O,t=n(r,s),Vc){i=0;do{if(Vc=!1,vu=0,25<=i)throw Error(z(301));i+=1,St=vt=null,e.updateQueue=null,Uh.current=bO,t=n(r,s)}while(Vc)}if(Uh.current=Af,e=vt!==null&&vt.next!==null,Po=0,St=vt=tt=null,Cf=!1,e)throw Error(z(300));return t}function nx(){var t=vu!==0;return vu=0,t}function kr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?tt.memoizedState=St=t:St=St.next=t,St}function tr(){if(vt===null){var t=tt.alternate;t=t!==null?t.memoizedState:null}else t=vt.next;var e=St===null?tt.memoizedState:St.next;if(e!==null)St=e,vt=t;else{if(t===null)throw Error(z(310));vt=t,t={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},St===null?tt.memoizedState=St=t:St=St.next=t}return St}function xu(t,e){return typeof e=="function"?e(t):e}function pg(t){var e=tr(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=vt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((Po&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,tt.lanes|=u,No|=u}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,gr(r,e.memoizedState)||(kn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,tt.lanes|=i,No|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function gg(t){var e=tr(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);gr(i,e.memoizedState)||(kn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function SI(){}function II(t,e){var n=tt,r=tr(),s=e(),i=!gr(r.memoizedState,s);if(i&&(r.memoizedState=s,kn=!0),r=r.queue,rx(PI.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||St!==null&&St.memoizedState.tag&1){if(n.flags|=2048,_u(9,AI.bind(null,n,r,s,e),void 0,null),It===null)throw Error(z(349));Po&30||CI(n,e,s)}return s}function CI(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=tt.updateQueue,e===null?(e={lastEffect:null,stores:null},tt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function AI(t,e,n,r){e.value=n,e.getSnapshot=r,NI(e)&&RI(t)}function PI(t,e,n){return n(function(){NI(e)&&RI(t)})}function NI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!gr(t,n)}catch{return!0}}function RI(t){var e=ps(t,1);e!==null&&pr(e,t,1,-1)}function ak(t){var e=kr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xu,lastRenderedState:t},e.queue=t,t=t.dispatch=vO.bind(null,tt,t),[e.memoizedState,t]}function _u(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=tt.updateQueue,e===null?(e={lastEffect:null,stores:null},tt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function MI(){return tr().memoizedState}function Bh(t,e,n,r){var s=kr();tt.flags|=t,s.memoizedState=_u(1|e,n,void 0,r===void 0?null:r)}function Dm(t,e,n,r){var s=tr();r=r===void 0?null:r;var i=void 0;if(vt!==null){var o=vt.memoizedState;if(i=o.destroy,r!==null&&ex(r,o.deps)){s.memoizedState=_u(e,n,i,r);return}}tt.flags|=t,s.memoizedState=_u(1|e,n,i,r)}function lk(t,e){return Bh(8390656,8,t,e)}function rx(t,e){return Dm(2048,8,t,e)}function DI(t,e){return Dm(4,2,t,e)}function jI(t,e){return Dm(4,4,t,e)}function OI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function LI(t,e,n){return n=n!=null?n.concat([t]):null,Dm(4,4,OI.bind(null,e,t),n)}function sx(){}function VI(t,e){var n=tr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ex(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function FI(t,e){var n=tr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ex(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function UI(t,e,n){return Po&21?(gr(n,e)||(n=H2(),tt.lanes|=n,No|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,kn=!0),t.memoizedState=n)}function gO(t,e){var n=Fe;Fe=n!==0&&4>n?n:4,t(!0);var r=mg.transition;mg.transition={};try{t(!1),e()}finally{Fe=n,mg.transition=r}}function BI(){return tr().memoizedState}function yO(t,e,n){var r=di(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},zI(t))$I(e,n);else if(n=kI(t,e,n,r),n!==null){var s=dn();pr(n,t,r,s),WI(n,e,r)}}function vO(t,e,n){var r=di(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(zI(t))$I(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,gr(a,o)){var l=e.interleaved;l===null?(s.next=s,Qv(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=kI(t,e,s,r),n!==null&&(s=dn(),pr(n,t,r,s),WI(n,e,r))}}function zI(t){var e=t.alternate;return t===tt||e!==null&&e===tt}function $I(t,e){Vc=Cf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function WI(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jv(t,n)}}var Af={readContext:er,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useInsertionEffect:zt,useLayoutEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useMutableSource:zt,useSyncExternalStore:zt,useId:zt,unstable_isNewReconciler:!1},xO={readContext:er,useCallback:function(t,e){return kr().memoizedState=[t,e===void 0?null:e],t},useContext:er,useEffect:lk,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Bh(4194308,4,OI.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Bh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Bh(4,2,t,e)},useMemo:function(t,e){var n=kr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=kr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=yO.bind(null,tt,t),[r.memoizedState,t]},useRef:function(t){var e=kr();return t={current:t},e.memoizedState=t},useState:ak,useDebugValue:sx,useDeferredValue:function(t){return kr().memoizedState=t},useTransition:function(){var t=ak(!1),e=t[0];return t=gO.bind(null,t[1]),kr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=tt,s=kr();if(Ye){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),It===null)throw Error(z(349));Po&30||CI(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,lk(PI.bind(null,r,i,t),[t]),r.flags|=2048,_u(9,AI.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=kr(),e=It.identifierPrefix;if(Ye){var n=rs,r=ns;n=(r&~(1<<32-mr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=vu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=pO++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},_O={readContext:er,useCallback:VI,useContext:er,useEffect:rx,useImperativeHandle:LI,useInsertionEffect:DI,useLayoutEffect:jI,useMemo:FI,useReducer:pg,useRef:MI,useState:function(){return pg(xu)},useDebugValue:sx,useDeferredValue:function(t){var e=tr();return UI(e,vt.memoizedState,t)},useTransition:function(){var t=pg(xu)[0],e=tr().memoizedState;return[t,e]},useMutableSource:SI,useSyncExternalStore:II,useId:BI,unstable_isNewReconciler:!1},bO={readContext:er,useCallback:VI,useContext:er,useEffect:rx,useImperativeHandle:LI,useInsertionEffect:DI,useLayoutEffect:jI,useMemo:FI,useReducer:gg,useRef:MI,useState:function(){return gg(xu)},useDebugValue:sx,useDeferredValue:function(t){var e=tr();return vt===null?e.memoizedState=t:UI(e,vt.memoizedState,t)},useTransition:function(){var t=gg(xu)[0],e=tr().memoizedState;return[t,e]},useMutableSource:SI,useSyncExternalStore:II,useId:BI,unstable_isNewReconciler:!1};function lr(t,e){if(t&&t.defaultProps){e=nt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function V0(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:nt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var jm={isMounted:function(t){return(t=t._reactInternals)?Ho(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=dn(),s=di(t),i=cs(r,s);i.payload=e,n!=null&&(i.callback=n),e=ci(t,i,s),e!==null&&(pr(e,t,s,r),Fh(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=dn(),s=di(t),i=cs(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ci(t,i,s),e!==null&&(pr(e,t,s,r),Fh(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=dn(),r=di(t),s=cs(n,r);s.tag=2,e!=null&&(s.callback=e),e=ci(t,s,r),e!==null&&(pr(e,t,r,n),Fh(e,t,r))}};function ck(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!hu(n,r)||!hu(s,i):!0}function HI(t,e,n){var r=!1,s=ki,i=e.contextType;return typeof i=="object"&&i!==null?i=er(i):(s=Sn(e)?Co:Zt.current,r=e.contextTypes,i=(r=r!=null)?tl(t,s):ki),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=jm,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function uk(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&jm.enqueueReplaceState(e,e.state,null)}function F0(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Yv(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=er(i):(i=Sn(e)?Co:Zt.current,s.context=tl(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(V0(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&jm.enqueueReplaceState(s,s.state,null),Sf(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function il(t,e){try{var n="",r=e;do n+=QD(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function yg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function U0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var wO=typeof WeakMap=="function"?WeakMap:Map;function qI(t,e,n){n=cs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Nf||(Nf=!0,Y0=r),U0(t,e)},n}function KI(t,e,n){n=cs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){U0(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){U0(t,e),typeof r!="function"&&(ui===null?ui=new Set([this]):ui.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function dk(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new wO;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=OO.bind(null,t,e,n),e.then(t,t))}function hk(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function fk(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=cs(-1,1),e.tag=2,ci(n,e,1))),n.lanes|=1),t)}var kO=Es.ReactCurrentOwner,kn=!1;function on(t,e,n,r){e.child=t===null?wI(e,null,n,r):rl(e,t.child,n,r)}function mk(t,e,n,r,s){n=n.render;var i=e.ref;return Ma(e,s),r=tx(t,e,n,r,i,s),n=nx(),t!==null&&!kn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,gs(t,e,s)):(Ye&&n&&$v(e),e.flags|=1,on(t,e,r,s),e.child)}function pk(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!hx(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,GI(t,e,i,r,s)):(t=Hh(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:hu,n(o,r)&&t.ref===e.ref)return gs(t,e,s)}return e.flags|=1,t=hi(i,r),t.ref=e.ref,t.return=e,e.child=t}function GI(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(hu(i,r)&&t.ref===e.ref)if(kn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(kn=!0);else return e.lanes=t.lanes,gs(t,e,s)}return B0(t,e,n,r,s)}function QI(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(ba,Pn),Pn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$e(ba,Pn),Pn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,$e(ba,Pn),Pn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,$e(ba,Pn),Pn|=r;return on(t,e,s,n),e.child}function YI(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function B0(t,e,n,r,s){var i=Sn(n)?Co:Zt.current;return i=tl(e,i),Ma(e,s),n=tx(t,e,n,r,i,s),r=nx(),t!==null&&!kn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,gs(t,e,s)):(Ye&&r&&$v(e),e.flags|=1,on(t,e,n,s),e.child)}function gk(t,e,n,r,s){if(Sn(n)){var i=!0;bf(e)}else i=!1;if(Ma(e,s),e.stateNode===null)zh(t,e),HI(e,n,r),F0(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=er(c):(c=Sn(n)?Co:Zt.current,c=tl(e,c));var u=n.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&uk(e,o,r,c),Os=!1;var m=e.memoizedState;o.state=m,Sf(e,r,o,s),l=e.memoizedState,a!==r||m!==l||Tn.current||Os?(typeof u=="function"&&(V0(e,n,u,r),l=e.memoizedState),(a=Os||ck(e,n,a,r,m,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,EI(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:lr(e.type,a),o.props=c,f=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=er(l):(l=Sn(n)?Co:Zt.current,l=tl(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==l)&&uk(e,o,r,l),Os=!1,m=e.memoizedState,o.state=m,Sf(e,r,o,s);var y=e.memoizedState;a!==f||m!==y||Tn.current||Os?(typeof p=="function"&&(V0(e,n,p,r),y=e.memoizedState),(c=Os||ck(e,n,c,r,m,y,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return z0(t,e,n,r,i,s)}function z0(t,e,n,r,s,i){YI(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&tk(e,n,!1),gs(t,e,i);r=e.stateNode,kO.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=rl(e,t.child,null,i),e.child=rl(e,null,a,i)):on(t,e,a,i),e.memoizedState=r.state,s&&tk(e,n,!0),e.child}function XI(t){var e=t.stateNode;e.pendingContext?ek(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ek(t,e.context,!1),Xv(t,e.containerInfo)}function yk(t,e,n,r,s){return nl(),Hv(s),e.flags|=256,on(t,e,n,r),e.child}var $0={dehydrated:null,treeContext:null,retryLane:0};function W0(t){return{baseLanes:t,cachePool:null,transitions:null}}function ZI(t,e,n){var r=e.pendingProps,s=Ze.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),$e(Ze,s&1),t===null)return O0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Vm(o,r,0,null),t=ko(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=W0(n),e.memoizedState=$0,t):ix(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return EO(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=hi(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=hi(a,i):(i=ko(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?W0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=$0,r}return i=t.child,t=i.sibling,r=hi(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ix(t,e){return e=Vm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function oh(t,e,n,r){return r!==null&&Hv(r),rl(e,t.child,null,n),t=ix(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function EO(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=yg(Error(z(422))),oh(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Vm({mode:"visible",children:r.children},s,0,null),i=ko(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&rl(e,t.child,null,o),e.child.memoizedState=W0(o),e.memoizedState=$0,i);if(!(e.mode&1))return oh(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(z(419)),r=yg(i,r,void 0),oh(t,e,o,r)}if(a=(o&t.childLanes)!==0,kn||a){if(r=It,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ps(t,s),pr(r,t,s,-1))}return dx(),r=yg(Error(z(421))),oh(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=LO.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Rn=li(s.nextSibling),Dn=e,Ye=!0,fr=null,t!==null&&(qn[Kn++]=ns,qn[Kn++]=rs,qn[Kn++]=Ao,ns=t.id,rs=t.overflow,Ao=e),e=ix(e,r.children),e.flags|=4096,e)}function vk(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),L0(t.return,e,n)}function vg(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function JI(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(on(t,e,r.children,n),r=Ze.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&vk(t,n,e);else if(t.tag===19)vk(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if($e(Ze,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&If(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),vg(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&If(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}vg(e,!0,n,null,i);break;case"together":vg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function zh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function gs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),No|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=hi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=hi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function TO(t,e,n){switch(e.tag){case 3:XI(e),nl();break;case 5:TI(e);break;case 1:Sn(e.type)&&bf(e);break;case 4:Xv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;$e(Ef,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?($e(Ze,Ze.current&1),e.flags|=128,null):n&e.child.childLanes?ZI(t,e,n):($e(Ze,Ze.current&1),t=gs(t,e,n),t!==null?t.sibling:null);$e(Ze,Ze.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return JI(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),$e(Ze,Ze.current),r)break;return null;case 22:case 23:return e.lanes=0,QI(t,e,n)}return gs(t,e,n)}var eC,H0,tC,nC;eC=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};H0=function(){};tC=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,io(Rr.current);var i=null;switch(n){case"input":s=f0(t,s),r=f0(t,r),i=[];break;case"select":s=nt({},s,{value:void 0}),r=nt({},r,{value:void 0}),i=[];break;case"textarea":s=g0(t,s),r=g0(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=xf)}v0(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(iu.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(iu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&qe("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};nC=function(t,e,n,r){n!==r&&(e.flags|=4)};function sc(t,e){if(!Ye)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function $t(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function SO(t,e,n){var r=e.pendingProps;switch(Wv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(e),null;case 1:return Sn(e.type)&&_f(),$t(e),null;case 3:return r=e.stateNode,sl(),Qe(Tn),Qe(Zt),Jv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(sh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,fr!==null&&(J0(fr),fr=null))),H0(t,e),$t(e),null;case 5:Zv(e);var s=io(yu.current);if(n=e.type,t!==null&&e.stateNode!=null)tC(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return $t(e),null}if(t=io(Rr.current),sh(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Ar]=e,r[pu]=i,t=(e.mode&1)!==0,n){case"dialog":qe("cancel",r),qe("close",r);break;case"iframe":case"object":case"embed":qe("load",r);break;case"video":case"audio":for(s=0;s<yc.length;s++)qe(yc[s],r);break;case"source":qe("error",r);break;case"img":case"image":case"link":qe("error",r),qe("load",r);break;case"details":qe("toggle",r);break;case"input":Iw(r,i),qe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},qe("invalid",r);break;case"textarea":Aw(r,i),qe("invalid",r)}v0(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&rh(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&rh(r.textContent,a,t),s=["children",""+a]):iu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&qe("scroll",r)}switch(n){case"input":Qd(r),Cw(r,i,!0);break;case"textarea":Qd(r),Pw(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=xf)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=P2(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ar]=e,t[pu]=r,eC(t,e,!1,!1),e.stateNode=t;e:{switch(o=x0(n,r),n){case"dialog":qe("cancel",t),qe("close",t),s=r;break;case"iframe":case"object":case"embed":qe("load",t),s=r;break;case"video":case"audio":for(s=0;s<yc.length;s++)qe(yc[s],t);s=r;break;case"source":qe("error",t),s=r;break;case"img":case"image":case"link":qe("error",t),qe("load",t),s=r;break;case"details":qe("toggle",t),s=r;break;case"input":Iw(t,r),s=f0(t,r),qe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=nt({},r,{value:void 0}),qe("invalid",t);break;case"textarea":Aw(t,r),s=g0(t,r),qe("invalid",t);break;default:s=r}v0(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?M2(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&N2(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ou(t,l):typeof l=="number"&&ou(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(iu.hasOwnProperty(i)?l!=null&&i==="onScroll"&&qe("scroll",t):l!=null&&Av(t,i,l,o))}switch(n){case"input":Qd(t),Cw(t,r,!1);break;case"textarea":Qd(t),Pw(t);break;case"option":r.value!=null&&t.setAttribute("value",""+wi(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Aa(t,!!r.multiple,i,!1):r.defaultValue!=null&&Aa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=xf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return $t(e),null;case 6:if(t&&e.stateNode!=null)nC(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=io(yu.current),io(Rr.current),sh(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ar]=e,(i=r.nodeValue!==n)&&(t=Dn,t!==null))switch(t.tag){case 3:rh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&rh(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ar]=e,e.stateNode=r}return $t(e),null;case 13:if(Qe(Ze),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ye&&Rn!==null&&e.mode&1&&!(e.flags&128))_I(),nl(),e.flags|=98560,i=!1;else if(i=sh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[Ar]=e}else nl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;$t(e),i=!1}else fr!==null&&(J0(fr),fr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ze.current&1?bt===0&&(bt=3):dx())),e.updateQueue!==null&&(e.flags|=4),$t(e),null);case 4:return sl(),H0(t,e),t===null&&fu(e.stateNode.containerInfo),$t(e),null;case 10:return Gv(e.type._context),$t(e),null;case 17:return Sn(e.type)&&_f(),$t(e),null;case 19:if(Qe(Ze),i=e.memoizedState,i===null)return $t(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)sc(i,!1);else{if(bt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=If(t),o!==null){for(e.flags|=128,sc(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return $e(Ze,Ze.current&1|2),e.child}t=t.sibling}i.tail!==null&&dt()>ol&&(e.flags|=128,r=!0,sc(i,!1),e.lanes=4194304)}else{if(!r)if(t=If(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),sc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ye)return $t(e),null}else 2*dt()-i.renderingStartTime>ol&&n!==1073741824&&(e.flags|=128,r=!0,sc(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=dt(),e.sibling=null,n=Ze.current,$e(Ze,r?n&1|2:n&1),e):($t(e),null);case 22:case 23:return ux(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Pn&1073741824&&($t(e),e.subtreeFlags&6&&(e.flags|=8192)):$t(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function IO(t,e){switch(Wv(e),e.tag){case 1:return Sn(e.type)&&_f(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return sl(),Qe(Tn),Qe(Zt),Jv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Zv(e),null;case 13:if(Qe(Ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));nl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Qe(Ze),null;case 4:return sl(),null;case 10:return Gv(e.type._context),null;case 22:case 23:return ux(),null;case 24:return null;default:return null}}var ah=!1,Gt=!1,CO=typeof WeakSet=="function"?WeakSet:Set,ee=null;function _a(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){at(t,e,r)}else n.current=null}function q0(t,e,n){try{n()}catch(r){at(t,e,r)}}var xk=!1;function AO(t,e){if(A0=gf,t=aI(),zv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,f=t,m=null;t:for(;;){for(var p;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(p=f.firstChild)!==null;)m=f,f=p;for(;;){if(f===t)break t;if(m===n&&++c===s&&(a=o),m===i&&++u===r&&(l=o),(p=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(P0={focusedElem:t,selectionRange:n},gf=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,E=y.memoizedState,x=e.stateNode,_=x.getSnapshotBeforeUpdate(e.elementType===e.type?v:lr(e.type,v),E);x.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(P){at(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return y=xk,xk=!1,y}function Fc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&q0(e,n,i)}s=s.next}while(s!==r)}}function Om(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function K0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function rC(t){var e=t.alternate;e!==null&&(t.alternate=null,rC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ar],delete e[pu],delete e[M0],delete e[dO],delete e[hO])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sC(t){return t.tag===5||t.tag===3||t.tag===4}function _k(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||sC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function G0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=xf));else if(r!==4&&(t=t.child,t!==null))for(G0(t,e,n),t=t.sibling;t!==null;)G0(t,e,n),t=t.sibling}function Q0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Q0(t,e,n),t=t.sibling;t!==null;)Q0(t,e,n),t=t.sibling}var At=null,dr=!1;function Ps(t,e,n){for(n=n.child;n!==null;)iC(t,e,n),n=n.sibling}function iC(t,e,n){if(Nr&&typeof Nr.onCommitFiberUnmount=="function")try{Nr.onCommitFiberUnmount(Cm,n)}catch{}switch(n.tag){case 5:Gt||_a(n,e);case 6:var r=At,s=dr;At=null,Ps(t,e,n),At=r,dr=s,At!==null&&(dr?(t=At,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):At.removeChild(n.stateNode));break;case 18:At!==null&&(dr?(t=At,n=n.stateNode,t.nodeType===8?dg(t.parentNode,n):t.nodeType===1&&dg(t,n),uu(t)):dg(At,n.stateNode));break;case 4:r=At,s=dr,At=n.stateNode.containerInfo,dr=!0,Ps(t,e,n),At=r,dr=s;break;case 0:case 11:case 14:case 15:if(!Gt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&q0(n,e,o),s=s.next}while(s!==r)}Ps(t,e,n);break;case 1:if(!Gt&&(_a(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){at(n,e,a)}Ps(t,e,n);break;case 21:Ps(t,e,n);break;case 22:n.mode&1?(Gt=(r=Gt)||n.memoizedState!==null,Ps(t,e,n),Gt=r):Ps(t,e,n);break;default:Ps(t,e,n)}}function bk(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new CO),e.forEach(function(r){var s=VO.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function or(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:At=a.stateNode,dr=!1;break e;case 3:At=a.stateNode.containerInfo,dr=!0;break e;case 4:At=a.stateNode.containerInfo,dr=!0;break e}a=a.return}if(At===null)throw Error(z(160));iC(i,o,s),At=null,dr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){at(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)oC(e,t),e=e.sibling}function oC(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(or(e,t),_r(t),r&4){try{Fc(3,t,t.return),Om(3,t)}catch(v){at(t,t.return,v)}try{Fc(5,t,t.return)}catch(v){at(t,t.return,v)}}break;case 1:or(e,t),_r(t),r&512&&n!==null&&_a(n,n.return);break;case 5:if(or(e,t),_r(t),r&512&&n!==null&&_a(n,n.return),t.flags&32){var s=t.stateNode;try{ou(s,"")}catch(v){at(t,t.return,v)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&C2(s,i),x0(a,o);var c=x0(a,i);for(o=0;o<l.length;o+=2){var u=l[o],f=l[o+1];u==="style"?M2(s,f):u==="dangerouslySetInnerHTML"?N2(s,f):u==="children"?ou(s,f):Av(s,u,f,c)}switch(a){case"input":m0(s,i);break;case"textarea":A2(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Aa(s,!!i.multiple,p,!1):m!==!!i.multiple&&(i.defaultValue!=null?Aa(s,!!i.multiple,i.defaultValue,!0):Aa(s,!!i.multiple,i.multiple?[]:"",!1))}s[pu]=i}catch(v){at(t,t.return,v)}}break;case 6:if(or(e,t),_r(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(v){at(t,t.return,v)}}break;case 3:if(or(e,t),_r(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{uu(e.containerInfo)}catch(v){at(t,t.return,v)}break;case 4:or(e,t),_r(t);break;case 13:or(e,t),_r(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(lx=dt())),r&4&&bk(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Gt=(c=Gt)||u,or(e,t),Gt=c):or(e,t),_r(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(ee=t,u=t.child;u!==null;){for(f=ee=u;ee!==null;){switch(m=ee,p=m.child,m.tag){case 0:case 11:case 14:case 15:Fc(4,m,m.return);break;case 1:_a(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){at(r,n,v)}}break;case 5:_a(m,m.return);break;case 22:if(m.memoizedState!==null){kk(f);continue}}p!==null?(p.return=m,ee=p):kk(f)}u=u.sibling}e:for(u=null,f=t;;){if(f.tag===5){if(u===null){u=f;try{s=f.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=R2("display",o))}catch(v){at(t,t.return,v)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(v){at(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:or(e,t),_r(t),r&4&&bk(t);break;case 21:break;default:or(e,t),_r(t)}}function _r(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(sC(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ou(s,""),r.flags&=-33);var i=_k(t);Q0(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=_k(t);G0(t,a,o);break;default:throw Error(z(161))}}catch(l){at(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function PO(t,e,n){ee=t,aC(t)}function aC(t,e,n){for(var r=(t.mode&1)!==0;ee!==null;){var s=ee,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ah;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Gt;a=ah;var c=Gt;if(ah=o,(Gt=l)&&!c)for(ee=s;ee!==null;)o=ee,l=o.child,o.tag===22&&o.memoizedState!==null?Ek(s):l!==null?(l.return=o,ee=l):Ek(s);for(;i!==null;)ee=i,aC(i),i=i.sibling;ee=s,ah=a,Gt=c}wk(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ee=i):wk(t)}}function wk(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Gt||Om(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Gt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:lr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&ok(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ok(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&uu(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Gt||e.flags&512&&K0(e)}catch(m){at(e,e.return,m)}}if(e===t){ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}}function kk(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ee=n;break}ee=e.return}}function Ek(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Om(4,e)}catch(l){at(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){at(e,s,l)}}var i=e.return;try{K0(e)}catch(l){at(e,i,l)}break;case 5:var o=e.return;try{K0(e)}catch(l){at(e,o,l)}}}catch(l){at(e,e.return,l)}if(e===t){ee=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ee=a;break}ee=e.return}}var NO=Math.ceil,Pf=Es.ReactCurrentDispatcher,ox=Es.ReactCurrentOwner,Xn=Es.ReactCurrentBatchConfig,Ae=0,It=null,gt=null,Dt=0,Pn=0,ba=Di(0),bt=0,bu=null,No=0,Lm=0,ax=0,Uc=null,_n=null,lx=0,ol=1/0,Qr=null,Nf=!1,Y0=null,ui=null,lh=!1,ei=null,Rf=0,Bc=0,X0=null,$h=-1,Wh=0;function dn(){return Ae&6?dt():$h!==-1?$h:$h=dt()}function di(t){return t.mode&1?Ae&2&&Dt!==0?Dt&-Dt:mO.transition!==null?(Wh===0&&(Wh=H2()),Wh):(t=Fe,t!==0||(t=window.event,t=t===void 0?16:Z2(t.type)),t):1}function pr(t,e,n,r){if(50<Bc)throw Bc=0,X0=null,Error(z(185));rd(t,n,r),(!(Ae&2)||t!==It)&&(t===It&&(!(Ae&2)&&(Lm|=n),bt===4&&Fs(t,Dt)),In(t,r),n===1&&Ae===0&&!(e.mode&1)&&(ol=dt()+500,Mm&&ji()))}function In(t,e){var n=t.callbackNode;mj(t,e);var r=pf(t,t===It?Dt:0);if(r===0)n!==null&&Mw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Mw(n),e===1)t.tag===0?fO(Tk.bind(null,t)):yI(Tk.bind(null,t)),cO(function(){!(Ae&6)&&ji()}),n=null;else{switch(q2(r)){case 1:n=Dv;break;case 4:n=$2;break;case 16:n=mf;break;case 536870912:n=W2;break;default:n=mf}n=pC(n,lC.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function lC(t,e){if($h=-1,Wh=0,Ae&6)throw Error(z(327));var n=t.callbackNode;if(Da()&&t.callbackNode!==n)return null;var r=pf(t,t===It?Dt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Mf(t,r);else{e=r;var s=Ae;Ae|=2;var i=uC();(It!==t||Dt!==e)&&(Qr=null,ol=dt()+500,wo(t,e));do try{DO();break}catch(a){cC(t,a)}while(!0);Kv(),Pf.current=i,Ae=s,gt!==null?e=0:(It=null,Dt=0,e=bt)}if(e!==0){if(e===2&&(s=E0(t),s!==0&&(r=s,e=Z0(t,s))),e===1)throw n=bu,wo(t,0),Fs(t,r),In(t,dt()),n;if(e===6)Fs(t,r);else{if(s=t.current.alternate,!(r&30)&&!RO(s)&&(e=Mf(t,r),e===2&&(i=E0(t),i!==0&&(r=i,e=Z0(t,i))),e===1))throw n=bu,wo(t,0),Fs(t,r),In(t,dt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:Zi(t,_n,Qr);break;case 3:if(Fs(t,r),(r&130023424)===r&&(e=lx+500-dt(),10<e)){if(pf(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){dn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=R0(Zi.bind(null,t,_n,Qr),e);break}Zi(t,_n,Qr);break;case 4:if(Fs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-mr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=dt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*NO(r/1960))-r,10<r){t.timeoutHandle=R0(Zi.bind(null,t,_n,Qr),r);break}Zi(t,_n,Qr);break;case 5:Zi(t,_n,Qr);break;default:throw Error(z(329))}}}return In(t,dt()),t.callbackNode===n?lC.bind(null,t):null}function Z0(t,e){var n=Uc;return t.current.memoizedState.isDehydrated&&(wo(t,e).flags|=256),t=Mf(t,e),t!==2&&(e=_n,_n=n,e!==null&&J0(e)),t}function J0(t){_n===null?_n=t:_n.push.apply(_n,t)}function RO(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!gr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Fs(t,e){for(e&=~ax,e&=~Lm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-mr(e),r=1<<n;t[n]=-1,e&=~r}}function Tk(t){if(Ae&6)throw Error(z(327));Da();var e=pf(t,0);if(!(e&1))return In(t,dt()),null;var n=Mf(t,e);if(t.tag!==0&&n===2){var r=E0(t);r!==0&&(e=r,n=Z0(t,r))}if(n===1)throw n=bu,wo(t,0),Fs(t,e),In(t,dt()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Zi(t,_n,Qr),In(t,dt()),null}function cx(t,e){var n=Ae;Ae|=1;try{return t(e)}finally{Ae=n,Ae===0&&(ol=dt()+500,Mm&&ji())}}function Ro(t){ei!==null&&ei.tag===0&&!(Ae&6)&&Da();var e=Ae;Ae|=1;var n=Xn.transition,r=Fe;try{if(Xn.transition=null,Fe=1,t)return t()}finally{Fe=r,Xn.transition=n,Ae=e,!(Ae&6)&&ji()}}function ux(){Pn=ba.current,Qe(ba)}function wo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,lO(n)),gt!==null)for(n=gt.return;n!==null;){var r=n;switch(Wv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&_f();break;case 3:sl(),Qe(Tn),Qe(Zt),Jv();break;case 5:Zv(r);break;case 4:sl();break;case 13:Qe(Ze);break;case 19:Qe(Ze);break;case 10:Gv(r.type._context);break;case 22:case 23:ux()}n=n.return}if(It=t,gt=t=hi(t.current,null),Dt=Pn=e,bt=0,bu=null,ax=Lm=No=0,_n=Uc=null,so!==null){for(e=0;e<so.length;e++)if(n=so[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}so=null}return t}function cC(t,e){do{var n=gt;try{if(Kv(),Uh.current=Af,Cf){for(var r=tt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Cf=!1}if(Po=0,St=vt=tt=null,Vc=!1,vu=0,ox.current=null,n===null||n.return===null){bt=1,bu=e,gt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Dt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=hk(o);if(p!==null){p.flags&=-257,fk(p,o,a,i,e),p.mode&1&&dk(i,c,e),e=p,l=c;var y=e.updateQueue;if(y===null){var v=new Set;v.add(l),e.updateQueue=v}else y.add(l);break e}else{if(!(e&1)){dk(i,c,e),dx();break e}l=Error(z(426))}}else if(Ye&&a.mode&1){var E=hk(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),fk(E,o,a,i,e),Hv(il(l,a));break e}}i=l=il(l,a),bt!==4&&(bt=2),Uc===null?Uc=[i]:Uc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=qI(i,l,e);ik(i,x);break e;case 1:a=l;var _=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ui===null||!ui.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var P=KI(i,a,e);ik(i,P);break e}}i=i.return}while(i!==null)}hC(n)}catch(C){e=C,gt===n&&n!==null&&(gt=n=n.return);continue}break}while(!0)}function uC(){var t=Pf.current;return Pf.current=Af,t===null?Af:t}function dx(){(bt===0||bt===3||bt===2)&&(bt=4),It===null||!(No&268435455)&&!(Lm&268435455)||Fs(It,Dt)}function Mf(t,e){var n=Ae;Ae|=2;var r=uC();(It!==t||Dt!==e)&&(Qr=null,wo(t,e));do try{MO();break}catch(s){cC(t,s)}while(!0);if(Kv(),Ae=n,Pf.current=r,gt!==null)throw Error(z(261));return It=null,Dt=0,bt}function MO(){for(;gt!==null;)dC(gt)}function DO(){for(;gt!==null&&!ij();)dC(gt)}function dC(t){var e=mC(t.alternate,t,Pn);t.memoizedProps=t.pendingProps,e===null?hC(t):gt=e,ox.current=null}function hC(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=IO(n,e),n!==null){n.flags&=32767,gt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{bt=6,gt=null;return}}else if(n=SO(n,e,Pn),n!==null){gt=n;return}if(e=e.sibling,e!==null){gt=e;return}gt=e=t}while(e!==null);bt===0&&(bt=5)}function Zi(t,e,n){var r=Fe,s=Xn.transition;try{Xn.transition=null,Fe=1,jO(t,e,n,r)}finally{Xn.transition=s,Fe=r}return null}function jO(t,e,n,r){do Da();while(ei!==null);if(Ae&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(pj(t,i),t===It&&(gt=It=null,Dt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||lh||(lh=!0,pC(mf,function(){return Da(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Xn.transition,Xn.transition=null;var o=Fe;Fe=1;var a=Ae;Ae|=4,ox.current=null,AO(t,n),oC(n,t),tO(P0),gf=!!A0,P0=A0=null,t.current=n,PO(n),oj(),Ae=a,Fe=o,Xn.transition=i}else t.current=n;if(lh&&(lh=!1,ei=t,Rf=s),i=t.pendingLanes,i===0&&(ui=null),cj(n.stateNode),In(t,dt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Nf)throw Nf=!1,t=Y0,Y0=null,t;return Rf&1&&t.tag!==0&&Da(),i=t.pendingLanes,i&1?t===X0?Bc++:(Bc=0,X0=t):Bc=0,ji(),null}function Da(){if(ei!==null){var t=q2(Rf),e=Xn.transition,n=Fe;try{if(Xn.transition=null,Fe=16>t?16:t,ei===null)var r=!1;else{if(t=ei,ei=null,Rf=0,Ae&6)throw Error(z(331));var s=Ae;for(Ae|=4,ee=t.current;ee!==null;){var i=ee,o=i.child;if(ee.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ee=c;ee!==null;){var u=ee;switch(u.tag){case 0:case 11:case 15:Fc(8,u,i)}var f=u.child;if(f!==null)f.return=u,ee=f;else for(;ee!==null;){u=ee;var m=u.sibling,p=u.return;if(rC(u),u===c){ee=null;break}if(m!==null){m.return=p,ee=m;break}ee=p}}}var y=i.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var E=v.sibling;v.sibling=null,v=E}while(v!==null)}}ee=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ee=o;else e:for(;ee!==null;){if(i=ee,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Fc(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,ee=x;break e}ee=i.return}}var _=t.current;for(ee=_;ee!==null;){o=ee;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,ee=w;else e:for(o=_;ee!==null;){if(a=ee,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Om(9,a)}}catch(C){at(a,a.return,C)}if(a===o){ee=null;break e}var P=a.sibling;if(P!==null){P.return=a.return,ee=P;break e}ee=a.return}}if(Ae=s,ji(),Nr&&typeof Nr.onPostCommitFiberRoot=="function")try{Nr.onPostCommitFiberRoot(Cm,t)}catch{}r=!0}return r}finally{Fe=n,Xn.transition=e}}return!1}function Sk(t,e,n){e=il(n,e),e=qI(t,e,1),t=ci(t,e,1),e=dn(),t!==null&&(rd(t,1,e),In(t,e))}function at(t,e,n){if(t.tag===3)Sk(t,t,n);else for(;e!==null;){if(e.tag===3){Sk(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ui===null||!ui.has(r))){t=il(n,t),t=KI(e,t,1),e=ci(e,t,1),t=dn(),e!==null&&(rd(e,1,t),In(e,t));break}}e=e.return}}function OO(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=dn(),t.pingedLanes|=t.suspendedLanes&n,It===t&&(Dt&n)===n&&(bt===4||bt===3&&(Dt&130023424)===Dt&&500>dt()-lx?wo(t,0):ax|=n),In(t,e)}function fC(t,e){e===0&&(t.mode&1?(e=Zd,Zd<<=1,!(Zd&130023424)&&(Zd=4194304)):e=1);var n=dn();t=ps(t,e),t!==null&&(rd(t,e,n),In(t,n))}function LO(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),fC(t,n)}function VO(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),fC(t,n)}var mC;mC=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Tn.current)kn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return kn=!1,TO(t,e,n);kn=!!(t.flags&131072)}else kn=!1,Ye&&e.flags&1048576&&vI(e,kf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;zh(t,e),t=e.pendingProps;var s=tl(e,Zt.current);Ma(e,n),s=tx(null,e,r,t,s,n);var i=nx();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Sn(r)?(i=!0,bf(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Yv(e),s.updater=jm,e.stateNode=s,s._reactInternals=e,F0(e,r,t,n),e=z0(null,e,r,!0,i,n)):(e.tag=0,Ye&&i&&$v(e),on(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(zh(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=UO(r),t=lr(r,t),s){case 0:e=B0(null,e,r,t,n);break e;case 1:e=gk(null,e,r,t,n);break e;case 11:e=mk(null,e,r,t,n);break e;case 14:e=pk(null,e,r,lr(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:lr(r,s),B0(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:lr(r,s),gk(t,e,r,s,n);case 3:e:{if(XI(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,EI(t,e),Sf(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=il(Error(z(423)),e),e=yk(t,e,r,n,s);break e}else if(r!==s){s=il(Error(z(424)),e),e=yk(t,e,r,n,s);break e}else for(Rn=li(e.stateNode.containerInfo.firstChild),Dn=e,Ye=!0,fr=null,n=wI(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(nl(),r===s){e=gs(t,e,n);break e}on(t,e,r,n)}e=e.child}return e;case 5:return TI(e),t===null&&O0(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,N0(r,s)?o=null:i!==null&&N0(r,i)&&(e.flags|=32),YI(t,e),on(t,e,o,n),e.child;case 6:return t===null&&O0(e),null;case 13:return ZI(t,e,n);case 4:return Xv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=rl(e,null,r,n):on(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:lr(r,s),mk(t,e,r,s,n);case 7:return on(t,e,e.pendingProps,n),e.child;case 8:return on(t,e,e.pendingProps.children,n),e.child;case 12:return on(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,$e(Ef,r._currentValue),r._currentValue=o,i!==null)if(gr(i.value,o)){if(i.children===s.children&&!Tn.current){e=gs(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=cs(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),L0(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(z(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),L0(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}on(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ma(e,n),s=er(s),r=r(s),e.flags|=1,on(t,e,r,n),e.child;case 14:return r=e.type,s=lr(r,e.pendingProps),s=lr(r.type,s),pk(t,e,r,s,n);case 15:return GI(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:lr(r,s),zh(t,e),e.tag=1,Sn(r)?(t=!0,bf(e)):t=!1,Ma(e,n),HI(e,r,s),F0(e,r,s,n),z0(null,e,r,!0,t,n);case 19:return JI(t,e,n);case 22:return QI(t,e,n)}throw Error(z(156,e.tag))};function pC(t,e){return z2(t,e)}function FO(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(t,e,n,r){return new FO(t,e,n,r)}function hx(t){return t=t.prototype,!(!t||!t.isReactComponent)}function UO(t){if(typeof t=="function")return hx(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Nv)return 11;if(t===Rv)return 14}return 2}function hi(t,e){var n=t.alternate;return n===null?(n=Gn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Hh(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")hx(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case da:return ko(n.children,s,i,e);case Pv:o=8,s|=8;break;case c0:return t=Gn(12,n,e,s|2),t.elementType=c0,t.lanes=i,t;case u0:return t=Gn(13,n,e,s),t.elementType=u0,t.lanes=i,t;case d0:return t=Gn(19,n,e,s),t.elementType=d0,t.lanes=i,t;case T2:return Vm(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case k2:o=10;break e;case E2:o=9;break e;case Nv:o=11;break e;case Rv:o=14;break e;case js:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=Gn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ko(t,e,n,r){return t=Gn(7,t,r,e),t.lanes=n,t}function Vm(t,e,n,r){return t=Gn(22,t,r,e),t.elementType=T2,t.lanes=n,t.stateNode={isHidden:!1},t}function xg(t,e,n){return t=Gn(6,t,null,e),t.lanes=n,t}function _g(t,e,n){return e=Gn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function BO(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=eg(0),this.expirationTimes=eg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=eg(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function fx(t,e,n,r,s,i,o,a,l){return t=new BO(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Gn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yv(i),t}function zO(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ua,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function gC(t){if(!t)return ki;t=t._reactInternals;e:{if(Ho(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Sn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Sn(n))return gI(t,n,e)}return e}function yC(t,e,n,r,s,i,o,a,l){return t=fx(n,r,!0,t,s,i,o,a,l),t.context=gC(null),n=t.current,r=dn(),s=di(n),i=cs(r,s),i.callback=e??null,ci(n,i,s),t.current.lanes=s,rd(t,s,r),In(t,r),t}function Fm(t,e,n,r){var s=e.current,i=dn(),o=di(s);return n=gC(n),e.context===null?e.context=n:e.pendingContext=n,e=cs(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ci(s,e,o),t!==null&&(pr(t,s,o,i),Fh(t,s,o)),o}function Df(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ik(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function mx(t,e){Ik(t,e),(t=t.alternate)&&Ik(t,e)}function $O(){return null}var vC=typeof reportError=="function"?reportError:function(t){console.error(t)};function px(t){this._internalRoot=t}Um.prototype.render=px.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Fm(t,e,null,null)};Um.prototype.unmount=px.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ro(function(){Fm(null,t,null,null)}),e[ms]=null}};function Um(t){this._internalRoot=t}Um.prototype.unstable_scheduleHydration=function(t){if(t){var e=Q2();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Vs.length&&e!==0&&e<Vs[n].priority;n++);Vs.splice(n,0,t),n===0&&X2(t)}};function gx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Bm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ck(){}function WO(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Df(o);i.call(c)}}var o=yC(e,r,t,0,null,!1,!1,"",Ck);return t._reactRootContainer=o,t[ms]=o.current,fu(t.nodeType===8?t.parentNode:t),Ro(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Df(l);a.call(c)}}var l=fx(t,0,!1,null,null,!1,!1,"",Ck);return t._reactRootContainer=l,t[ms]=l.current,fu(t.nodeType===8?t.parentNode:t),Ro(function(){Fm(e,l,n,r)}),l}function zm(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Df(o);a.call(l)}}Fm(e,o,t,s)}else o=WO(n,e,t,s,r);return Df(o)}K2=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=gc(e.pendingLanes);n!==0&&(jv(e,n|1),In(e,dt()),!(Ae&6)&&(ol=dt()+500,ji()))}break;case 13:Ro(function(){var r=ps(t,1);if(r!==null){var s=dn();pr(r,t,1,s)}}),mx(t,1)}};Ov=function(t){if(t.tag===13){var e=ps(t,134217728);if(e!==null){var n=dn();pr(e,t,134217728,n)}mx(t,134217728)}};G2=function(t){if(t.tag===13){var e=di(t),n=ps(t,e);if(n!==null){var r=dn();pr(n,t,e,r)}mx(t,e)}};Q2=function(){return Fe};Y2=function(t,e){var n=Fe;try{return Fe=t,e()}finally{Fe=n}};b0=function(t,e,n){switch(e){case"input":if(m0(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Rm(r);if(!s)throw Error(z(90));I2(r),m0(r,s)}}}break;case"textarea":A2(t,n);break;case"select":e=n.value,e!=null&&Aa(t,!!n.multiple,e,!1)}};O2=cx;L2=Ro;var HO={usingClientEntryPoint:!1,Events:[id,pa,Rm,D2,j2,cx]},ic={findFiberByHostInstance:ro,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qO={bundleType:ic.bundleType,version:ic.version,rendererPackageName:ic.rendererPackageName,rendererConfig:ic.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Es.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=U2(t),t===null?null:t.stateNode},findFiberByHostInstance:ic.findFiberByHostInstance||$O,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ch=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ch.isDisabled&&ch.supportsFiber)try{Cm=ch.inject(qO),Nr=ch}catch{}}Vn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HO;Vn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gx(e))throw Error(z(200));return zO(t,e,null,n)};Vn.createRoot=function(t,e){if(!gx(t))throw Error(z(299));var n=!1,r="",s=vC;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=fx(t,1,!1,null,null,n,!1,r,s),t[ms]=e.current,fu(t.nodeType===8?t.parentNode:t),new px(e)};Vn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=U2(e),t=t===null?null:t.stateNode,t};Vn.flushSync=function(t){return Ro(t)};Vn.hydrate=function(t,e,n){if(!Bm(e))throw Error(z(200));return zm(null,t,e,!0,n)};Vn.hydrateRoot=function(t,e,n){if(!gx(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=vC;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=yC(e,null,t,1,n??null,s,!1,i,o),t[ms]=e.current,fu(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Um(e)};Vn.render=function(t,e,n){if(!Bm(e))throw Error(z(200));return zm(null,t,e,!1,n)};Vn.unmountComponentAtNode=function(t){if(!Bm(t))throw Error(z(40));return t._reactRootContainer?(Ro(function(){zm(null,null,t,!1,function(){t._reactRootContainer=null,t[ms]=null})}),!0):!1};Vn.unstable_batchedUpdates=cx;Vn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Bm(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return zm(t,e,n,!1,r)};Vn.version="18.3.1-next-f1338f8080-20240426";function xC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xC)}catch(t){console.error(t)}}xC(),x2.exports=Vn;var KO=x2.exports,Ak=KO;a0.createRoot=Ak.createRoot,a0.hydrateRoot=Ak.hydrateRoot;var Cl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},GO={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Ws,wv,XS,QO=(XS=class{constructor(){ae(this,Ws,GO);ae(this,wv,!1)}setTimeoutProvider(t){K(this,Ws,t)}setTimeout(t,e){return O(this,Ws).setTimeout(t,e)}clearTimeout(t){O(this,Ws).clearTimeout(t)}setInterval(t,e){return O(this,Ws).setInterval(t,e)}clearInterval(t){O(this,Ws).clearInterval(t)}},Ws=new WeakMap,wv=new WeakMap,XS),oo=new QO;function YO(t){setTimeout(t,0)}var Mo=typeof window>"u"||"Deno"in globalThis;function an(){}function XO(t,e){return typeof t=="function"?t(e):t}function ey(t){return typeof t=="number"&&t>=0&&t!==1/0}function _C(t,e){return Math.max(t+(e||0)-Date.now(),0)}function fi(t,e){return typeof t=="function"?t(e):t}function Hn(t,e){return typeof t=="function"?t(e):t}function Pk(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==yx(o,e.options))return!1}else if(!wu(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function Nk(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Do(e.options.mutationKey)!==Do(i))return!1}else if(!wu(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function yx(t,e){return((e==null?void 0:e.queryKeyHashFn)||Do)(t)}function Do(t){return JSON.stringify(t,(e,n)=>ty(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function wu(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>wu(t[n],e[n])):!1}var ZO=Object.prototype.hasOwnProperty;function bC(t,e){if(t===e)return t;const n=Rk(t)&&Rk(e);if(!n&&!(ty(t)&&ty(e)))return e;const s=(n?t:Object.keys(t)).length,i=n?e:Object.keys(e),o=i.length,a=n?new Array(o):{};let l=0;for(let c=0;c<o;c++){const u=n?c:i[c],f=t[u],m=e[u];if(f===m){a[u]=f,(n?c<s:ZO.call(t,u))&&l++;continue}if(f===null||m===null||typeof f!="object"||typeof m!="object"){a[u]=m;continue}const p=bC(f,m);a[u]=p,p===f&&l++}return s===o&&l===s?t:a}function jf(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function Rk(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function ty(t){if(!Mk(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Mk(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Mk(t){return Object.prototype.toString.call(t)==="[object Object]"}function JO(t){return new Promise(e=>{oo.setTimeout(e,t)})}function ny(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?bC(t,e):e}function e4(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function t4(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var vx=Symbol();function wC(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===vx?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function kC(t,e){return typeof t=="function"?t(...e):!!t}var fo,Hs,za,ZS,n4=(ZS=class extends Cl{constructor(){super();ae(this,fo);ae(this,Hs);ae(this,za);K(this,za,e=>{if(!Mo&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){O(this,Hs)||this.setEventListener(O(this,za))}onUnsubscribe(){var e;this.hasListeners()||((e=O(this,Hs))==null||e.call(this),K(this,Hs,void 0))}setEventListener(e){var n;K(this,za,e),(n=O(this,Hs))==null||n.call(this),K(this,Hs,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){O(this,fo)!==e&&(K(this,fo,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof O(this,fo)=="boolean"?O(this,fo):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},fo=new WeakMap,Hs=new WeakMap,za=new WeakMap,ZS),xx=new n4;function ry(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}var r4=YO;function s4(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=r4;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var xt=s4(),$a,qs,Wa,JS,i4=(JS=class extends Cl{constructor(){super();ae(this,$a,!0);ae(this,qs);ae(this,Wa);K(this,Wa,e=>{if(!Mo&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){O(this,qs)||this.setEventListener(O(this,Wa))}onUnsubscribe(){var e;this.hasListeners()||((e=O(this,qs))==null||e.call(this),K(this,qs,void 0))}setEventListener(e){var n;K(this,Wa,e),(n=O(this,qs))==null||n.call(this),K(this,qs,e(this.setOnline.bind(this)))}setOnline(e){O(this,$a)!==e&&(K(this,$a,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return O(this,$a)}},$a=new WeakMap,qs=new WeakMap,Wa=new WeakMap,JS),Of=new i4;function o4(t){return Math.min(1e3*2**t,3e4)}function EC(t){return(t??"online")==="online"?Of.isOnline():!0}var sy=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function TC(t){let e=!1,n=0,r;const s=ry(),i=()=>s.status!=="pending",o=v=>{var E;if(!i()){const x=new sy(v);m(x),(E=t.onCancel)==null||E.call(t,x)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>xx.isFocused()&&(t.networkMode==="always"||Of.isOnline())&&t.canRun(),u=()=>EC(t.networkMode)&&t.canRun(),f=v=>{i()||(r==null||r(),s.resolve(v))},m=v=>{i()||(r==null||r(),s.reject(v))},p=()=>new Promise(v=>{var E;r=x=>{(i()||c())&&v(x)},(E=t.onPause)==null||E.call(t)}).then(()=>{var v;r=void 0,i()||(v=t.onContinue)==null||v.call(t)}),y=()=>{if(i())return;let v;const E=n===0?t.initialPromise:void 0;try{v=E??t.fn()}catch(x){v=Promise.reject(x)}Promise.resolve(v).then(f).catch(x=>{var R;if(i())return;const _=t.retry??(Mo?0:3),w=t.retryDelay??o4,P=typeof w=="function"?w(n,x):w,C=_===!0||typeof _=="number"&&n<_||typeof _=="function"&&_(n,x);if(e||!C){m(x);return}n++,(R=t.onFail)==null||R.call(t,n,x),JO(P).then(()=>c()?void 0:p()).then(()=>{e?m(x):y()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?y():p().then(y),s)}}var mo,e2,SC=(e2=class{constructor(){ae(this,mo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ey(this.gcTime)&&K(this,mo,oo.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Mo?1/0:5*60*1e3))}clearGcTimeout(){O(this,mo)&&(oo.clearTimeout(O(this,mo)),K(this,mo,void 0))}},mo=new WeakMap,e2),po,Ha,Wn,go,Et,Xu,yo,cr,qr,t2,a4=(t2=class extends SC{constructor(n){super();ae(this,cr);ae(this,po);ae(this,Ha);ae(this,Wn);ae(this,go);ae(this,Et);ae(this,Xu);ae(this,yo);K(this,yo,!1),K(this,Xu,n.defaultOptions),this.setOptions(n.options),this.observers=[],K(this,go,n.client),K(this,Wn,O(this,go).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,K(this,po,Dk(this.options)),this.state=n.state??O(this,po),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=O(this,Et))==null?void 0:n.promise}setOptions(n){if(this.options={...O(this,Xu),...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=Dk(this.options);r.data!==void 0&&(this.setData(r.data,{updatedAt:r.dataUpdatedAt,manual:!0}),K(this,po,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&O(this,Wn).remove(this)}setData(n,r){const s=ny(this.state.data,n,this.options);return ve(this,cr,qr).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){ve(this,cr,qr).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=O(this,Et))==null?void 0:s.promise;return(i=O(this,Et))==null||i.cancel(n),r?r.then(an).catch(an):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(O(this,po))}isActive(){return this.observers.some(n=>Hn(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===vx||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>fi(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!_C(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=O(this,Et))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=O(this,Et))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),O(this,Wn).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(O(this,Et)&&(O(this,yo)?O(this,Et).cancel({revert:!0}):O(this,Et).cancelRetry()),this.scheduleGc()),O(this,Wn).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ve(this,cr,qr).call(this,{type:"invalidate"})}async fetch(n,r){var c,u,f,m,p,y,v,E,x,_,w,P;if(this.state.fetchStatus!=="idle"&&((c=O(this,Et))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(O(this,Et))return O(this,Et).continueRetry(),O(this,Et).promise}if(n&&this.setOptions(n),!this.options.queryFn){const C=this.observers.find(R=>R.options.queryFn);C&&this.setOptions(C.options)}const s=new AbortController,i=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(K(this,yo,!0),s.signal)})},o=()=>{const C=wC(this.options,r),T=(()=>{const k={client:O(this,go),queryKey:this.queryKey,meta:this.meta};return i(k),k})();return K(this,yo,!1),this.options.persister?this.options.persister(C,T,this):C(T)},l=(()=>{const C={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:O(this,go),state:this.state,fetchFn:o};return i(C),C})();(u=this.options.behavior)==null||u.onFetch(l,this),K(this,Ha,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&ve(this,cr,qr).call(this,{type:"fetch",meta:(m=l.fetchOptions)==null?void 0:m.meta}),K(this,Et,TC({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:C=>{C instanceof sy&&C.revert&&this.setState({...O(this,Ha),fetchStatus:"idle"}),s.abort()},onFail:(C,R)=>{ve(this,cr,qr).call(this,{type:"failed",failureCount:C,error:R})},onPause:()=>{ve(this,cr,qr).call(this,{type:"pause"})},onContinue:()=>{ve(this,cr,qr).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const C=await O(this,Et).start();if(C===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(C),(y=(p=O(this,Wn).config).onSuccess)==null||y.call(p,C,this),(E=(v=O(this,Wn).config).onSettled)==null||E.call(v,C,this.state.error,this),C}catch(C){if(C instanceof sy){if(C.silent)return O(this,Et).promise;if(C.revert){if(this.state.data===void 0)throw C;return this.state.data}}throw ve(this,cr,qr).call(this,{type:"error",error:C}),(_=(x=O(this,Wn).config).onError)==null||_.call(x,C,this),(P=(w=O(this,Wn).config).onSettled)==null||P.call(w,this.state.data,C,this),C}finally{this.scheduleGc()}}},po=new WeakMap,Ha=new WeakMap,Wn=new WeakMap,go=new WeakMap,Et=new WeakMap,Xu=new WeakMap,yo=new WeakMap,cr=new WeakSet,qr=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...IC(s.data,this.options),fetchMeta:n.meta??null};case"success":const i={...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return K(this,Ha,n.manual?i:void 0),i;case"error":const o=n.error;return{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),xt.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),O(this,Wn).notify({query:this,type:"updated",action:n})})},t2);function IC(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:EC(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Dk(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var vn,Te,Zu,rn,vo,qa,Zr,Ks,Ju,Ka,Ga,xo,_o,Gs,Qa,Oe,vc,iy,oy,ay,ly,cy,uy,dy,CC,n2,l4=(n2=class extends Cl{constructor(e,n){super();ae(this,Oe);ae(this,vn);ae(this,Te);ae(this,Zu);ae(this,rn);ae(this,vo);ae(this,qa);ae(this,Zr);ae(this,Ks);ae(this,Ju);ae(this,Ka);ae(this,Ga);ae(this,xo);ae(this,_o);ae(this,Gs);ae(this,Qa,new Set);this.options=n,K(this,vn,e),K(this,Ks,null),K(this,Zr,ry()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(O(this,Te).addObserver(this),jk(O(this,Te),this.options)?ve(this,Oe,vc).call(this):this.updateResult(),ve(this,Oe,ly).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return hy(O(this,Te),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return hy(O(this,Te),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ve(this,Oe,cy).call(this),ve(this,Oe,uy).call(this),O(this,Te).removeObserver(this)}setOptions(e){const n=this.options,r=O(this,Te);if(this.options=O(this,vn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Hn(this.options.enabled,O(this,Te))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ve(this,Oe,dy).call(this),O(this,Te).setOptions(this.options),n._defaulted&&!jf(this.options,n)&&O(this,vn).getQueryCache().notify({type:"observerOptionsUpdated",query:O(this,Te),observer:this});const s=this.hasListeners();s&&Ok(O(this,Te),r,this.options,n)&&ve(this,Oe,vc).call(this),this.updateResult(),s&&(O(this,Te)!==r||Hn(this.options.enabled,O(this,Te))!==Hn(n.enabled,O(this,Te))||fi(this.options.staleTime,O(this,Te))!==fi(n.staleTime,O(this,Te)))&&ve(this,Oe,iy).call(this);const i=ve(this,Oe,oy).call(this);s&&(O(this,Te)!==r||Hn(this.options.enabled,O(this,Te))!==Hn(n.enabled,O(this,Te))||i!==O(this,Gs))&&ve(this,Oe,ay).call(this,i)}getOptimisticResult(e){const n=O(this,vn).getQueryCache().build(O(this,vn),e),r=this.createResult(n,e);return u4(this,r)&&(K(this,rn,r),K(this,qa,this.options),K(this,vo,O(this,Te).state)),r}getCurrentResult(){return O(this,rn)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&O(this,Zr).status==="pending"&&O(this,Zr).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,s))})}trackProp(e){O(this,Qa).add(e)}getCurrentQuery(){return O(this,Te)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=O(this,vn).defaultQueryOptions(e),r=O(this,vn).getQueryCache().build(O(this,vn),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return ve(this,Oe,vc).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),O(this,rn)))}createResult(e,n){var S;const r=O(this,Te),s=this.options,i=O(this,rn),o=O(this,vo),a=O(this,qa),c=e!==r?e.state:O(this,Zu),{state:u}=e;let f={...u},m=!1,p;if(n._optimisticResults){const I=this.hasListeners(),N=!I&&jk(e,n),D=I&&Ok(e,r,n,s);(N||D)&&(f={...f,...IC(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:y,errorUpdatedAt:v,status:E}=f;p=f.data;let x=!1;if(n.placeholderData!==void 0&&p===void 0&&E==="pending"){let I;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(I=i.data,x=!0):I=typeof n.placeholderData=="function"?n.placeholderData((S=O(this,Ga))==null?void 0:S.state.data,O(this,Ga)):n.placeholderData,I!==void 0&&(E="success",p=ny(i==null?void 0:i.data,I,n),m=!0)}if(n.select&&p!==void 0&&!x)if(i&&p===(o==null?void 0:o.data)&&n.select===O(this,Ju))p=O(this,Ka);else try{K(this,Ju,n.select),p=n.select(p),p=ny(i==null?void 0:i.data,p,n),K(this,Ka,p),K(this,Ks,null)}catch(I){K(this,Ks,I)}O(this,Ks)&&(y=O(this,Ks),p=O(this,Ka),v=Date.now(),E="error");const _=f.fetchStatus==="fetching",w=E==="pending",P=E==="error",C=w&&_,R=p!==void 0,k={status:E,fetchStatus:f.fetchStatus,isPending:w,isSuccess:E==="success",isError:P,isInitialLoading:C,isLoading:C,data:p,dataUpdatedAt:f.dataUpdatedAt,error:y,errorUpdatedAt:v,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>c.dataUpdateCount||f.errorUpdateCount>c.errorUpdateCount,isFetching:_,isRefetching:_&&!w,isLoadingError:P&&!R,isPaused:f.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:P&&R,isStale:_x(e,n),refetch:this.refetch,promise:O(this,Zr),isEnabled:Hn(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const I=M=>{k.status==="error"?M.reject(k.error):k.data!==void 0&&M.resolve(k.data)},N=()=>{const M=K(this,Zr,k.promise=ry());I(M)},D=O(this,Zr);switch(D.status){case"pending":e.queryHash===r.queryHash&&I(D);break;case"fulfilled":(k.status==="error"||k.data!==D.value)&&N();break;case"rejected":(k.status!=="error"||k.error!==D.reason)&&N();break}}return k}updateResult(){const e=O(this,rn),n=this.createResult(O(this,Te),this.options);if(K(this,vo,O(this,Te).state),K(this,qa,this.options),O(this,vo).data!==void 0&&K(this,Ga,O(this,Te)),jf(n,e))return;K(this,rn,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!O(this,Qa).size)return!0;const o=new Set(i??O(this,Qa));return this.options.throwOnError&&o.add("error"),Object.keys(O(this,rn)).some(a=>{const l=a;return O(this,rn)[l]!==e[l]&&o.has(l)})};ve(this,Oe,CC).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ve(this,Oe,ly).call(this)}},vn=new WeakMap,Te=new WeakMap,Zu=new WeakMap,rn=new WeakMap,vo=new WeakMap,qa=new WeakMap,Zr=new WeakMap,Ks=new WeakMap,Ju=new WeakMap,Ka=new WeakMap,Ga=new WeakMap,xo=new WeakMap,_o=new WeakMap,Gs=new WeakMap,Qa=new WeakMap,Oe=new WeakSet,vc=function(e){ve(this,Oe,dy).call(this);let n=O(this,Te).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(an)),n},iy=function(){ve(this,Oe,cy).call(this);const e=fi(this.options.staleTime,O(this,Te));if(Mo||O(this,rn).isStale||!ey(e))return;const r=_C(O(this,rn).dataUpdatedAt,e)+1;K(this,xo,oo.setTimeout(()=>{O(this,rn).isStale||this.updateResult()},r))},oy=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(O(this,Te)):this.options.refetchInterval)??!1},ay=function(e){ve(this,Oe,uy).call(this),K(this,Gs,e),!(Mo||Hn(this.options.enabled,O(this,Te))===!1||!ey(O(this,Gs))||O(this,Gs)===0)&&K(this,_o,oo.setInterval(()=>{(this.options.refetchIntervalInBackground||xx.isFocused())&&ve(this,Oe,vc).call(this)},O(this,Gs)))},ly=function(){ve(this,Oe,iy).call(this),ve(this,Oe,ay).call(this,ve(this,Oe,oy).call(this))},cy=function(){O(this,xo)&&(oo.clearTimeout(O(this,xo)),K(this,xo,void 0))},uy=function(){O(this,_o)&&(oo.clearInterval(O(this,_o)),K(this,_o,void 0))},dy=function(){const e=O(this,vn).getQueryCache().build(O(this,vn),this.options);if(e===O(this,Te))return;const n=O(this,Te);K(this,Te,e),K(this,Zu,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},CC=function(e){xt.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(O(this,rn))}),O(this,vn).getQueryCache().notify({query:O(this,Te),type:"observerResultsUpdated"})})},n2);function c4(t,e){return Hn(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function jk(t,e){return c4(t,e)||t.state.data!==void 0&&hy(t,e,e.refetchOnMount)}function hy(t,e,n){if(Hn(e.enabled,t)!==!1&&fi(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&_x(t,e)}return!1}function Ok(t,e,n,r){return(t!==e||Hn(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&_x(t,n)}function _x(t,e){return Hn(e.enabled,t)!==!1&&t.isStaleByTime(fi(e.staleTime,t))}function u4(t,e){return!jf(t.getCurrentResult(),e)}function Lk(t){return{onFetch:(e,n)=>{var u,f,m,p,y;const r=e.options,s=(m=(f=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,i=((p=e.state.data)==null?void 0:p.pages)||[],o=((y=e.state.data)==null?void 0:y.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let v=!1;const E=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},x=wC(e.options,e.fetchOptions),_=async(w,P,C)=>{if(v)return Promise.reject();if(P==null&&w.pages.length)return Promise.resolve(w);const T=(()=>{const N={client:e.client,queryKey:e.queryKey,pageParam:P,direction:C?"backward":"forward",meta:e.options.meta};return E(N),N})(),k=await x(T),{maxPages:S}=e.options,I=C?t4:e4;return{pages:I(w.pages,k,S),pageParams:I(w.pageParams,P,S)}};if(s&&i.length){const w=s==="backward",P=w?d4:Vk,C={pages:i,pageParams:o},R=P(r,C);a=await _(C,R,w)}else{const w=t??i.length;do{const P=l===0?o[0]??r.initialPageParam:Vk(r,a);if(l>0&&P==null)break;a=await _(a,P),l++}while(l<w)}return a};e.options.persister?e.fetchFn=()=>{var v,E;return(E=(v=e.options).persister)==null?void 0:E.call(v,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function Vk(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function d4(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var ed,Sr,sn,bo,Ir,Ms,r2,h4=(r2=class extends SC{constructor(n){super();ae(this,Ir);ae(this,ed);ae(this,Sr);ae(this,sn);ae(this,bo);K(this,ed,n.client),this.mutationId=n.mutationId,K(this,sn,n.mutationCache),K(this,Sr,[]),this.state=n.state||AC(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){O(this,Sr).includes(n)||(O(this,Sr).push(n),this.clearGcTimeout(),O(this,sn).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){K(this,Sr,O(this,Sr).filter(r=>r!==n)),this.scheduleGc(),O(this,sn).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){O(this,Sr).length||(this.state.status==="pending"?this.scheduleGc():O(this,sn).remove(this))}continue(){var n;return((n=O(this,bo))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var a,l,c,u,f,m,p,y,v,E,x,_,w,P,C,R,T,k,S,I;const r=()=>{ve(this,Ir,Ms).call(this,{type:"continue"})},s={client:O(this,ed),meta:this.options.meta,mutationKey:this.options.mutationKey};K(this,bo,TC({fn:()=>this.options.mutationFn?this.options.mutationFn(n,s):Promise.reject(new Error("No mutationFn found")),onFail:(N,D)=>{ve(this,Ir,Ms).call(this,{type:"failed",failureCount:N,error:D})},onPause:()=>{ve(this,Ir,Ms).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>O(this,sn).canRun(this)}));const i=this.state.status==="pending",o=!O(this,bo).canStart();try{if(i)r();else{ve(this,Ir,Ms).call(this,{type:"pending",variables:n,isPaused:o}),await((l=(a=O(this,sn).config).onMutate)==null?void 0:l.call(a,n,this,s));const D=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,n,s));D!==this.state.context&&ve(this,Ir,Ms).call(this,{type:"pending",context:D,variables:n,isPaused:o})}const N=await O(this,bo).start();return await((m=(f=O(this,sn).config).onSuccess)==null?void 0:m.call(f,N,n,this.state.context,this,s)),await((y=(p=this.options).onSuccess)==null?void 0:y.call(p,N,n,this.state.context,s)),await((E=(v=O(this,sn).config).onSettled)==null?void 0:E.call(v,N,null,this.state.variables,this.state.context,this,s)),await((_=(x=this.options).onSettled)==null?void 0:_.call(x,N,null,n,this.state.context,s)),ve(this,Ir,Ms).call(this,{type:"success",data:N}),N}catch(N){try{throw await((P=(w=O(this,sn).config).onError)==null?void 0:P.call(w,N,n,this.state.context,this,s)),await((R=(C=this.options).onError)==null?void 0:R.call(C,N,n,this.state.context,s)),await((k=(T=O(this,sn).config).onSettled)==null?void 0:k.call(T,void 0,N,this.state.variables,this.state.context,this,s)),await((I=(S=this.options).onSettled)==null?void 0:I.call(S,void 0,N,n,this.state.context,s)),N}finally{ve(this,Ir,Ms).call(this,{type:"error",error:N})}}finally{O(this,sn).runNext(this)}}},ed=new WeakMap,Sr=new WeakMap,sn=new WeakMap,bo=new WeakMap,Ir=new WeakSet,Ms=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),xt.batch(()=>{O(this,Sr).forEach(s=>{s.onMutationUpdate(n)}),O(this,sn).notify({mutation:this,type:"updated",action:n})})},r2);function AC(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Jr,ur,td,s2,f4=(s2=class extends Cl{constructor(e={}){super();ae(this,Jr);ae(this,ur);ae(this,td);this.config=e,K(this,Jr,new Set),K(this,ur,new Map),K(this,td,0)}build(e,n,r){const s=new h4({client:e,mutationCache:this,mutationId:++qd(this,td)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){O(this,Jr).add(e);const n=uh(e);if(typeof n=="string"){const r=O(this,ur).get(n);r?r.push(e):O(this,ur).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(O(this,Jr).delete(e)){const n=uh(e);if(typeof n=="string"){const r=O(this,ur).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&O(this,ur).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=uh(e);if(typeof n=="string"){const r=O(this,ur).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=uh(e);if(typeof n=="string"){const s=(r=O(this,ur).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){xt.batch(()=>{O(this,Jr).forEach(e=>{this.notify({type:"removed",mutation:e})}),O(this,Jr).clear(),O(this,ur).clear()})}getAll(){return Array.from(O(this,Jr))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Nk(n,r))}findAll(e={}){return this.getAll().filter(n=>Nk(e,n))}notify(e){xt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return xt.batch(()=>Promise.all(e.map(n=>n.continue().catch(an))))}},Jr=new WeakMap,ur=new WeakMap,td=new WeakMap,s2);function uh(t){var e;return(e=t.options.scope)==null?void 0:e.id}var es,Qs,xn,ts,hs,qh,fy,i2,m4=(i2=class extends Cl{constructor(n,r){super();ae(this,hs);ae(this,es);ae(this,Qs);ae(this,xn);ae(this,ts);K(this,es,n),this.setOptions(r),this.bindMethods(),ve(this,hs,qh).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=O(this,es).defaultMutationOptions(n),jf(this.options,r)||O(this,es).getMutationCache().notify({type:"observerOptionsUpdated",mutation:O(this,xn),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Do(r.mutationKey)!==Do(this.options.mutationKey)?this.reset():((s=O(this,xn))==null?void 0:s.state.status)==="pending"&&O(this,xn).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=O(this,xn))==null||n.removeObserver(this)}onMutationUpdate(n){ve(this,hs,qh).call(this),ve(this,hs,fy).call(this,n)}getCurrentResult(){return O(this,Qs)}reset(){var n;(n=O(this,xn))==null||n.removeObserver(this),K(this,xn,void 0),ve(this,hs,qh).call(this),ve(this,hs,fy).call(this)}mutate(n,r){var s;return K(this,ts,r),(s=O(this,xn))==null||s.removeObserver(this),K(this,xn,O(this,es).getMutationCache().build(O(this,es),this.options)),O(this,xn).addObserver(this),O(this,xn).execute(n)}},es=new WeakMap,Qs=new WeakMap,xn=new WeakMap,ts=new WeakMap,hs=new WeakSet,qh=function(){var r;const n=((r=O(this,xn))==null?void 0:r.state)??AC();K(this,Qs,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},fy=function(n){xt.batch(()=>{var r,s,i,o,a,l,c,u;if(O(this,ts)&&this.hasListeners()){const f=O(this,Qs).variables,m=O(this,Qs).context,p={client:O(this,es),meta:this.options.meta,mutationKey:this.options.mutationKey};(n==null?void 0:n.type)==="success"?((s=(r=O(this,ts)).onSuccess)==null||s.call(r,n.data,f,m,p),(o=(i=O(this,ts)).onSettled)==null||o.call(i,n.data,null,f,m,p)):(n==null?void 0:n.type)==="error"&&((l=(a=O(this,ts)).onError)==null||l.call(a,n.error,f,m,p),(u=(c=O(this,ts)).onSettled)==null||u.call(c,void 0,n.error,f,m,p))}this.listeners.forEach(f=>{f(O(this,Qs))})})},i2),Cr,o2,p4=(o2=class extends Cl{constructor(e={}){super();ae(this,Cr);this.config=e,K(this,Cr,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??yx(s,n);let o=this.get(i);return o||(o=new a4({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){O(this,Cr).has(e.queryHash)||(O(this,Cr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=O(this,Cr).get(e.queryHash);n&&(e.destroy(),n===e&&O(this,Cr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){xt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return O(this,Cr).get(e)}getAll(){return[...O(this,Cr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Pk(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>Pk(e,r)):n}notify(e){xt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){xt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){xt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Cr=new WeakMap,o2),it,Ys,Xs,Ya,Xa,Zs,Za,Ja,a2,g4=(a2=class{constructor(t={}){ae(this,it);ae(this,Ys);ae(this,Xs);ae(this,Ya);ae(this,Xa);ae(this,Zs);ae(this,Za);ae(this,Ja);K(this,it,t.queryCache||new p4),K(this,Ys,t.mutationCache||new f4),K(this,Xs,t.defaultOptions||{}),K(this,Ya,new Map),K(this,Xa,new Map),K(this,Zs,0)}mount(){qd(this,Zs)._++,O(this,Zs)===1&&(K(this,Za,xx.subscribe(async t=>{t&&(await this.resumePausedMutations(),O(this,it).onFocus())})),K(this,Ja,Of.subscribe(async t=>{t&&(await this.resumePausedMutations(),O(this,it).onOnline())})))}unmount(){var t,e;qd(this,Zs)._--,O(this,Zs)===0&&((t=O(this,Za))==null||t.call(this),K(this,Za,void 0),(e=O(this,Ja))==null||e.call(this),K(this,Ja,void 0))}isFetching(t){return O(this,it).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return O(this,Ys).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=O(this,it).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=O(this,it).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(fi(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return O(this,it).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=O(this,it).get(r.queryHash),i=s==null?void 0:s.state.data,o=XO(e,i);if(o!==void 0)return O(this,it).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return xt.batch(()=>O(this,it).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=O(this,it).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=O(this,it);xt.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=O(this,it);return xt.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=xt.batch(()=>O(this,it).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(an).catch(an)}invalidateQueries(t,e={}){return xt.batch(()=>(O(this,it).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=xt.batch(()=>O(this,it).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(an)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(an)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=O(this,it).build(this,e);return n.isStaleByTime(fi(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(an).catch(an)}fetchInfiniteQuery(t){return t.behavior=Lk(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(an).catch(an)}ensureInfiniteQueryData(t){return t.behavior=Lk(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Of.isOnline()?O(this,Ys).resumePausedMutations():Promise.resolve()}getQueryCache(){return O(this,it)}getMutationCache(){return O(this,Ys)}getDefaultOptions(){return O(this,Xs)}setDefaultOptions(t){K(this,Xs,t)}setQueryDefaults(t,e){O(this,Ya).set(Do(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...O(this,Ya).values()],n={};return e.forEach(r=>{wu(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){O(this,Xa).set(Do(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...O(this,Xa).values()],n={};return e.forEach(r=>{wu(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...O(this,Xs).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=yx(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===vx&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...O(this,Xs).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){O(this,it).clear(),O(this,Ys).clear()}},it=new WeakMap,Ys=new WeakMap,Xs=new WeakMap,Ya=new WeakMap,Xa=new WeakMap,Zs=new WeakMap,Za=new WeakMap,Ja=new WeakMap,a2),PC=j.createContext(void 0),rr=t=>{const e=j.useContext(PC);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},y4=({client:t,children:e})=>(j.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),d.jsx(PC.Provider,{value:t,children:e})),NC=j.createContext(!1),v4=()=>j.useContext(NC);NC.Provider;function x4(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var _4=j.createContext(x4()),b4=()=>j.useContext(_4),w4=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},k4=t=>{j.useEffect(()=>{t.clearReset()},[t])},E4=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||kC(n,[t.error,r])),T4=t=>{if(t.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},S4=(t,e)=>t.isLoading&&t.isFetching&&!e,I4=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Fk=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function C4(t,e,n){var f,m,p,y,v;const r=v4(),s=b4(),i=rr(),o=i.defaultQueryOptions(t);(m=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||m.call(f,o),o._optimisticResults=r?"isRestoring":"optimistic",T4(o),w4(o,s),k4(s);const a=!i.getQueryCache().get(o.queryHash),[l]=j.useState(()=>new e(i,o)),c=l.getOptimisticResult(o),u=!r&&t.subscribed!==!1;if(j.useSyncExternalStore(j.useCallback(E=>{const x=u?l.subscribe(xt.batchCalls(E)):an;return l.updateResult(),x},[l,u]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),j.useEffect(()=>{l.setOptions(o)},[o,l]),I4(o,c))throw Fk(o,l,s);if(E4({result:c,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw c.error;if((y=(p=i.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||y.call(p,o,c),o.experimental_prefetchInRender&&!Mo&&S4(c,r)){const E=a?Fk(o,l,s):(v=i.getQueryCache().get(o.queryHash))==null?void 0:v.promise;E==null||E.catch(an).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?c:l.trackResult(c)}function ln(t,e){return C4(t,l4)}function jn(t,e){const n=rr(),[r]=j.useState(()=>new m4(n,t));j.useEffect(()=>{r.setOptions(t)},[r,t]);const s=j.useSyncExternalStore(j.useCallback(o=>r.subscribe(xt.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=j.useCallback((o,a)=>{r.mutate(o,a).catch(an)},[r]);if(s.error&&kC(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}const RC=j.createContext(void 0);function A4({children:t}){const[e,n]=j.useState(null),[r,s]=j.useState(!0);j.useEffect(()=>{const l=localStorage.getItem("myfitness_user");if(l)try{n(JSON.parse(l))}catch(c){console.error("Failed to parse saved user:",c),localStorage.removeItem("myfitness_user")}s(!1)},[]);const a={user:e,isAuthenticated:!!e,isLoading:r,login:l=>{n(l),localStorage.setItem("myfitness_user",JSON.stringify(l))},logout:()=>{n(null),localStorage.removeItem("myfitness_user")}};return d.jsx(RC.Provider,{value:a,children:t})}function Cn(){const t=j.useContext(RC);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const P4="modulepreload",N4=function(t){return"/"+t},Uk={},hr=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=N4(l),l in Uk)return;Uk[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":P4,c||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),c)return new Promise((m,p)=>{f.addEventListener("load",m),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};var Bk={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},R4=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},DC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=i>>2,f=(i&3)<<4|a>>4;let m=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(m=64)),r.push(n[u],n[f],n[m],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(MC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):R4(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||f==null)throw new M4;const m=i<<2|a>>4;if(r.push(m),c!==64){const p=a<<4&240|c>>2;if(r.push(p),f!==64){const y=c<<6&192|f;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class M4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const D4=function(t){const e=MC(t);return DC.encodeByteArray(e,!0)},Lf=function(t){return D4(t).replace(/\./g,"")},jC=function(t){try{return DC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4=()=>j4().__FIREBASE_DEFAULTS__,L4=()=>{if(typeof process>"u"||typeof Bk>"u")return;const t=Bk.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},V4=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&jC(t[1]);return e&&JSON.parse(e)},$m=()=>{try{return O4()||L4()||V4()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},OC=t=>{var e,n;return(n=(e=$m())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},F4=t=>{const e=OC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},LC=()=>{var t;return(t=$m())===null||t===void 0?void 0:t.config},VC=t=>{var e;return(e=$m())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B4(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Lf(JSON.stringify(n)),Lf(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function z4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jt())}function $4(){var t;const e=(t=$m())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function W4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function H4(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function q4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function K4(){const t=Jt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function G4(){return!$4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Q4(){try{return typeof indexedDB=="object"}catch{return!1}}function Y4(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X4="FirebaseError";class Ts extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=X4,Object.setPrototypeOf(this,Ts.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ad.prototype.create)}}class ad{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Z4(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Ts(s,a,r)}}function Z4(t,e){return t.replace(J4,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const J4=/\{\$([^}]+)}/g;function eL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Vf(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(zk(i)&&zk(o)){if(!Vf(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function zk(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ld(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function xc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function _c(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function tL(t,e){const n=new nL(t,e);return n.subscribe.bind(n)}class nL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");rL(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=bg),s.error===void 0&&(s.error=bg),s.complete===void 0&&(s.complete=bg);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function bg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(t){return t&&t._delegate?t._delegate:t}class jo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new U4;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(oL(e))try{this.getOrInitializeService({instanceIdentifier:Ji})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ji){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ji){return this.instances.has(e)}getOptions(e=Ji){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:iL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ji){return this.component?this.component.multipleInstances?e:Ji:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iL(t){return t===Ji?void 0:t}function oL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new sL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Se||(Se={}));const lL={debug:Se.DEBUG,verbose:Se.VERBOSE,info:Se.INFO,warn:Se.WARN,error:Se.ERROR,silent:Se.SILENT},cL=Se.INFO,uL={[Se.DEBUG]:"log",[Se.VERBOSE]:"log",[Se.INFO]:"info",[Se.WARN]:"warn",[Se.ERROR]:"error"},dL=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=uL[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bx{constructor(e){this.name=e,this._logLevel=cL,this._logHandler=dL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Se.DEBUG,...e),this._logHandler(this,Se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Se.VERBOSE,...e),this._logHandler(this,Se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Se.INFO,...e),this._logHandler(this,Se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Se.WARN,...e),this._logHandler(this,Se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Se.ERROR,...e),this._logHandler(this,Se.ERROR,...e)}}const hL=(t,e)=>e.some(n=>t instanceof n);let $k,Wk;function fL(){return $k||($k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mL(){return Wk||(Wk=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const FC=new WeakMap,my=new WeakMap,UC=new WeakMap,wg=new WeakMap,wx=new WeakMap;function pL(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(mi(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&FC.set(n,t)}).catch(()=>{}),wx.set(e,t),e}function gL(t){if(my.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});my.set(t,e)}let py={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return my.get(t);if(e==="objectStoreNames")return t.objectStoreNames||UC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return mi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function yL(t){py=t(py)}function vL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(kg(this),e,...n);return UC.set(r,e.sort?e.sort():[e]),mi(r)}:mL().includes(t)?function(...e){return t.apply(kg(this),e),mi(FC.get(this))}:function(...e){return mi(t.apply(kg(this),e))}}function xL(t){return typeof t=="function"?vL(t):(t instanceof IDBTransaction&&gL(t),hL(t,fL())?new Proxy(t,py):t)}function mi(t){if(t instanceof IDBRequest)return pL(t);if(wg.has(t))return wg.get(t);const e=xL(t);return e!==t&&(wg.set(t,e),wx.set(e,t)),e}const kg=t=>wx.get(t);function _L(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=mi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(mi(o.result),l.oldVersion,l.newVersion,mi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const bL=["get","getKey","getAll","getAllKeys","count"],wL=["put","add","delete","clear"],Eg=new Map;function Hk(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Eg.get(e))return Eg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=wL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||bL.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Eg.set(e,i),i}yL(t=>({...t,get:(e,n,r)=>Hk(e,n)||t.get(e,n,r),has:(e,n)=>!!Hk(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(EL(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function EL(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const gy="@firebase/app",qk="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=new bx("@firebase/app"),TL="@firebase/app-compat",SL="@firebase/analytics-compat",IL="@firebase/analytics",CL="@firebase/app-check-compat",AL="@firebase/app-check",PL="@firebase/auth",NL="@firebase/auth-compat",RL="@firebase/database",ML="@firebase/data-connect",DL="@firebase/database-compat",jL="@firebase/functions",OL="@firebase/functions-compat",LL="@firebase/installations",VL="@firebase/installations-compat",FL="@firebase/messaging",UL="@firebase/messaging-compat",BL="@firebase/performance",zL="@firebase/performance-compat",$L="@firebase/remote-config",WL="@firebase/remote-config-compat",HL="@firebase/storage",qL="@firebase/storage-compat",KL="@firebase/firestore",GL="@firebase/vertexai-preview",QL="@firebase/firestore-compat",YL="firebase",XL="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy="[DEFAULT]",ZL={[gy]:"fire-core",[TL]:"fire-core-compat",[IL]:"fire-analytics",[SL]:"fire-analytics-compat",[AL]:"fire-app-check",[CL]:"fire-app-check-compat",[PL]:"fire-auth",[NL]:"fire-auth-compat",[RL]:"fire-rtdb",[ML]:"fire-data-connect",[DL]:"fire-rtdb-compat",[jL]:"fire-fn",[OL]:"fire-fn-compat",[LL]:"fire-iid",[VL]:"fire-iid-compat",[FL]:"fire-fcm",[UL]:"fire-fcm-compat",[BL]:"fire-perf",[zL]:"fire-perf-compat",[$L]:"fire-rc",[WL]:"fire-rc-compat",[HL]:"fire-gcs",[qL]:"fire-gcs-compat",[KL]:"fire-fst",[QL]:"fire-fst-compat",[GL]:"fire-vertex","fire-js":"fire-js",[YL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff=new Map,JL=new Map,vy=new Map;function Kk(t,e){try{t.container.addComponent(e)}catch(n){ys.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function al(t){const e=t.name;if(vy.has(e))return ys.debug(`There were multiple attempts to register component ${e}.`),!1;vy.set(e,t);for(const n of Ff.values())Kk(n,t);for(const n of JL.values())Kk(n,t);return!0}function kx(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Pr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pi=new ad("app","Firebase",eV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new jo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al=XL;function BC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:yy,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw pi.create("bad-app-name",{appName:String(s)});if(n||(n=LC()),!n)throw pi.create("no-options");const i=Ff.get(s);if(i){if(Vf(n,i.options)&&Vf(r,i.config))return i;throw pi.create("duplicate-app",{appName:s})}const o=new aL(s);for(const l of vy.values())o.addComponent(l);const a=new tV(n,r,o);return Ff.set(s,a),a}function zC(t=yy){const e=Ff.get(t);if(!e&&t===yy&&LC())return BC();if(!e)throw pi.create("no-app",{appName:t});return e}function gi(t,e,n){var r;let s=(r=ZL[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ys.warn(a.join(" "));return}al(new jo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV="firebase-heartbeat-database",rV=1,ku="firebase-heartbeat-store";let Tg=null;function $C(){return Tg||(Tg=_L(nV,rV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ku)}catch(n){console.warn(n)}}}}).catch(t=>{throw pi.create("idb-open",{originalErrorMessage:t.message})})),Tg}async function sV(t){try{const n=(await $C()).transaction(ku),r=await n.objectStore(ku).get(WC(t));return await n.done,r}catch(e){if(e instanceof Ts)ys.warn(e.message);else{const n=pi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ys.warn(n.message)}}}async function Gk(t,e){try{const r=(await $C()).transaction(ku,"readwrite");await r.objectStore(ku).put(e,WC(t)),await r.done}catch(n){if(n instanceof Ts)ys.warn(n.message);else{const r=pi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ys.warn(r.message)}}}function WC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV=1024,oV=30*24*60*60*1e3;class aV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new cV(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Qk();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=oV}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ys.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Qk(),{heartbeatsToSend:r,unsentEntries:s}=lV(this._heartbeatsCache.heartbeats),i=Lf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return ys.warn(n),""}}}function Qk(){return new Date().toISOString().substring(0,10)}function lV(t,e=iV){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Yk(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Yk(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class cV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Q4()?Y4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await sV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Gk(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Gk(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Yk(t){return Lf(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uV(t){al(new jo("platform-logger",e=>new kL(e),"PRIVATE")),al(new jo("heartbeat",e=>new aV(e),"PRIVATE")),gi(gy,qk,t),gi(gy,qk,"esm2017"),gi("fire-js","")}uV("");var Xk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Eo,HC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,k){function S(){}S.prototype=k.prototype,T.D=k.prototype,T.prototype=new S,T.prototype.constructor=T,T.C=function(I,N,D){for(var M=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)M[Z-2]=arguments[Z];return k.prototype[N].apply(I,M)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,k,S){S||(S=0);var I=Array(16);if(typeof k=="string")for(var N=0;16>N;++N)I[N]=k.charCodeAt(S++)|k.charCodeAt(S++)<<8|k.charCodeAt(S++)<<16|k.charCodeAt(S++)<<24;else for(N=0;16>N;++N)I[N]=k[S++]|k[S++]<<8|k[S++]<<16|k[S++]<<24;k=T.g[0],S=T.g[1],N=T.g[2];var D=T.g[3],M=k+(D^S&(N^D))+I[0]+3614090360&4294967295;k=S+(M<<7&4294967295|M>>>25),M=D+(N^k&(S^N))+I[1]+3905402710&4294967295,D=k+(M<<12&4294967295|M>>>20),M=N+(S^D&(k^S))+I[2]+606105819&4294967295,N=D+(M<<17&4294967295|M>>>15),M=S+(k^N&(D^k))+I[3]+3250441966&4294967295,S=N+(M<<22&4294967295|M>>>10),M=k+(D^S&(N^D))+I[4]+4118548399&4294967295,k=S+(M<<7&4294967295|M>>>25),M=D+(N^k&(S^N))+I[5]+1200080426&4294967295,D=k+(M<<12&4294967295|M>>>20),M=N+(S^D&(k^S))+I[6]+2821735955&4294967295,N=D+(M<<17&4294967295|M>>>15),M=S+(k^N&(D^k))+I[7]+4249261313&4294967295,S=N+(M<<22&4294967295|M>>>10),M=k+(D^S&(N^D))+I[8]+1770035416&4294967295,k=S+(M<<7&4294967295|M>>>25),M=D+(N^k&(S^N))+I[9]+2336552879&4294967295,D=k+(M<<12&4294967295|M>>>20),M=N+(S^D&(k^S))+I[10]+4294925233&4294967295,N=D+(M<<17&4294967295|M>>>15),M=S+(k^N&(D^k))+I[11]+2304563134&4294967295,S=N+(M<<22&4294967295|M>>>10),M=k+(D^S&(N^D))+I[12]+1804603682&4294967295,k=S+(M<<7&4294967295|M>>>25),M=D+(N^k&(S^N))+I[13]+4254626195&4294967295,D=k+(M<<12&4294967295|M>>>20),M=N+(S^D&(k^S))+I[14]+2792965006&4294967295,N=D+(M<<17&4294967295|M>>>15),M=S+(k^N&(D^k))+I[15]+1236535329&4294967295,S=N+(M<<22&4294967295|M>>>10),M=k+(N^D&(S^N))+I[1]+4129170786&4294967295,k=S+(M<<5&4294967295|M>>>27),M=D+(S^N&(k^S))+I[6]+3225465664&4294967295,D=k+(M<<9&4294967295|M>>>23),M=N+(k^S&(D^k))+I[11]+643717713&4294967295,N=D+(M<<14&4294967295|M>>>18),M=S+(D^k&(N^D))+I[0]+3921069994&4294967295,S=N+(M<<20&4294967295|M>>>12),M=k+(N^D&(S^N))+I[5]+3593408605&4294967295,k=S+(M<<5&4294967295|M>>>27),M=D+(S^N&(k^S))+I[10]+38016083&4294967295,D=k+(M<<9&4294967295|M>>>23),M=N+(k^S&(D^k))+I[15]+3634488961&4294967295,N=D+(M<<14&4294967295|M>>>18),M=S+(D^k&(N^D))+I[4]+3889429448&4294967295,S=N+(M<<20&4294967295|M>>>12),M=k+(N^D&(S^N))+I[9]+568446438&4294967295,k=S+(M<<5&4294967295|M>>>27),M=D+(S^N&(k^S))+I[14]+3275163606&4294967295,D=k+(M<<9&4294967295|M>>>23),M=N+(k^S&(D^k))+I[3]+4107603335&4294967295,N=D+(M<<14&4294967295|M>>>18),M=S+(D^k&(N^D))+I[8]+1163531501&4294967295,S=N+(M<<20&4294967295|M>>>12),M=k+(N^D&(S^N))+I[13]+2850285829&4294967295,k=S+(M<<5&4294967295|M>>>27),M=D+(S^N&(k^S))+I[2]+4243563512&4294967295,D=k+(M<<9&4294967295|M>>>23),M=N+(k^S&(D^k))+I[7]+1735328473&4294967295,N=D+(M<<14&4294967295|M>>>18),M=S+(D^k&(N^D))+I[12]+2368359562&4294967295,S=N+(M<<20&4294967295|M>>>12),M=k+(S^N^D)+I[5]+4294588738&4294967295,k=S+(M<<4&4294967295|M>>>28),M=D+(k^S^N)+I[8]+2272392833&4294967295,D=k+(M<<11&4294967295|M>>>21),M=N+(D^k^S)+I[11]+1839030562&4294967295,N=D+(M<<16&4294967295|M>>>16),M=S+(N^D^k)+I[14]+4259657740&4294967295,S=N+(M<<23&4294967295|M>>>9),M=k+(S^N^D)+I[1]+2763975236&4294967295,k=S+(M<<4&4294967295|M>>>28),M=D+(k^S^N)+I[4]+1272893353&4294967295,D=k+(M<<11&4294967295|M>>>21),M=N+(D^k^S)+I[7]+4139469664&4294967295,N=D+(M<<16&4294967295|M>>>16),M=S+(N^D^k)+I[10]+3200236656&4294967295,S=N+(M<<23&4294967295|M>>>9),M=k+(S^N^D)+I[13]+681279174&4294967295,k=S+(M<<4&4294967295|M>>>28),M=D+(k^S^N)+I[0]+3936430074&4294967295,D=k+(M<<11&4294967295|M>>>21),M=N+(D^k^S)+I[3]+3572445317&4294967295,N=D+(M<<16&4294967295|M>>>16),M=S+(N^D^k)+I[6]+76029189&4294967295,S=N+(M<<23&4294967295|M>>>9),M=k+(S^N^D)+I[9]+3654602809&4294967295,k=S+(M<<4&4294967295|M>>>28),M=D+(k^S^N)+I[12]+3873151461&4294967295,D=k+(M<<11&4294967295|M>>>21),M=N+(D^k^S)+I[15]+530742520&4294967295,N=D+(M<<16&4294967295|M>>>16),M=S+(N^D^k)+I[2]+3299628645&4294967295,S=N+(M<<23&4294967295|M>>>9),M=k+(N^(S|~D))+I[0]+4096336452&4294967295,k=S+(M<<6&4294967295|M>>>26),M=D+(S^(k|~N))+I[7]+1126891415&4294967295,D=k+(M<<10&4294967295|M>>>22),M=N+(k^(D|~S))+I[14]+2878612391&4294967295,N=D+(M<<15&4294967295|M>>>17),M=S+(D^(N|~k))+I[5]+4237533241&4294967295,S=N+(M<<21&4294967295|M>>>11),M=k+(N^(S|~D))+I[12]+1700485571&4294967295,k=S+(M<<6&4294967295|M>>>26),M=D+(S^(k|~N))+I[3]+2399980690&4294967295,D=k+(M<<10&4294967295|M>>>22),M=N+(k^(D|~S))+I[10]+4293915773&4294967295,N=D+(M<<15&4294967295|M>>>17),M=S+(D^(N|~k))+I[1]+2240044497&4294967295,S=N+(M<<21&4294967295|M>>>11),M=k+(N^(S|~D))+I[8]+1873313359&4294967295,k=S+(M<<6&4294967295|M>>>26),M=D+(S^(k|~N))+I[15]+4264355552&4294967295,D=k+(M<<10&4294967295|M>>>22),M=N+(k^(D|~S))+I[6]+2734768916&4294967295,N=D+(M<<15&4294967295|M>>>17),M=S+(D^(N|~k))+I[13]+1309151649&4294967295,S=N+(M<<21&4294967295|M>>>11),M=k+(N^(S|~D))+I[4]+4149444226&4294967295,k=S+(M<<6&4294967295|M>>>26),M=D+(S^(k|~N))+I[11]+3174756917&4294967295,D=k+(M<<10&4294967295|M>>>22),M=N+(k^(D|~S))+I[2]+718787259&4294967295,N=D+(M<<15&4294967295|M>>>17),M=S+(D^(N|~k))+I[9]+3951481745&4294967295,T.g[0]=T.g[0]+k&4294967295,T.g[1]=T.g[1]+(N+(M<<21&4294967295|M>>>11))&4294967295,T.g[2]=T.g[2]+N&4294967295,T.g[3]=T.g[3]+D&4294967295}r.prototype.u=function(T,k){k===void 0&&(k=T.length);for(var S=k-this.blockSize,I=this.B,N=this.h,D=0;D<k;){if(N==0)for(;D<=S;)s(this,T,D),D+=this.blockSize;if(typeof T=="string"){for(;D<k;)if(I[N++]=T.charCodeAt(D++),N==this.blockSize){s(this,I),N=0;break}}else for(;D<k;)if(I[N++]=T[D++],N==this.blockSize){s(this,I),N=0;break}}this.h=N,this.o+=k},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var k=1;k<T.length-8;++k)T[k]=0;var S=8*this.o;for(k=T.length-8;k<T.length;++k)T[k]=S&255,S/=256;for(this.u(T),T=Array(16),k=S=0;4>k;++k)for(var I=0;32>I;I+=8)T[S++]=this.g[k]>>>I&255;return T};function i(T,k){var S=a;return Object.prototype.hasOwnProperty.call(S,T)?S[T]:S[T]=k(T)}function o(T,k){this.h=k;for(var S=[],I=!0,N=T.length-1;0<=N;N--){var D=T[N]|0;I&&D==k||(S[N]=D,I=!1)}this.g=S}var a={};function l(T){return-128<=T&&128>T?i(T,function(k){return new o([k|0],0>k?-1:0)}):new o([T|0],0>T?-1:0)}function c(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return E(c(-T));for(var k=[],S=1,I=0;T>=S;I++)k[I]=T/S|0,S*=4294967296;return new o(k,0)}function u(T,k){if(T.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(T.charAt(0)=="-")return E(u(T.substring(1),k));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=c(Math.pow(k,8)),I=f,N=0;N<T.length;N+=8){var D=Math.min(8,T.length-N),M=parseInt(T.substring(N,N+D),k);8>D?(D=c(Math.pow(k,D)),I=I.j(D).add(c(M))):(I=I.j(S),I=I.add(c(M)))}return I}var f=l(0),m=l(1),p=l(16777216);t=o.prototype,t.m=function(){if(v(this))return-E(this).m();for(var T=0,k=1,S=0;S<this.g.length;S++){var I=this.i(S);T+=(0<=I?I:4294967296+I)*k,k*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(y(this))return"0";if(v(this))return"-"+E(this).toString(T);for(var k=c(Math.pow(T,6)),S=this,I="";;){var N=P(S,k).g;S=x(S,N.j(k));var D=((0<S.g.length?S.g[0]:S.h)>>>0).toString(T);if(S=N,y(S))return D+I;for(;6>D.length;)D="0"+D;I=D+I}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function y(T){if(T.h!=0)return!1;for(var k=0;k<T.g.length;k++)if(T.g[k]!=0)return!1;return!0}function v(T){return T.h==-1}t.l=function(T){return T=x(this,T),v(T)?-1:y(T)?0:1};function E(T){for(var k=T.g.length,S=[],I=0;I<k;I++)S[I]=~T.g[I];return new o(S,~T.h).add(m)}t.abs=function(){return v(this)?E(this):this},t.add=function(T){for(var k=Math.max(this.g.length,T.g.length),S=[],I=0,N=0;N<=k;N++){var D=I+(this.i(N)&65535)+(T.i(N)&65535),M=(D>>>16)+(this.i(N)>>>16)+(T.i(N)>>>16);I=M>>>16,D&=65535,M&=65535,S[N]=M<<16|D}return new o(S,S[S.length-1]&-2147483648?-1:0)};function x(T,k){return T.add(E(k))}t.j=function(T){if(y(this)||y(T))return f;if(v(this))return v(T)?E(this).j(E(T)):E(E(this).j(T));if(v(T))return E(this.j(E(T)));if(0>this.l(p)&&0>T.l(p))return c(this.m()*T.m());for(var k=this.g.length+T.g.length,S=[],I=0;I<2*k;I++)S[I]=0;for(I=0;I<this.g.length;I++)for(var N=0;N<T.g.length;N++){var D=this.i(I)>>>16,M=this.i(I)&65535,Z=T.i(N)>>>16,se=T.i(N)&65535;S[2*I+2*N]+=M*se,_(S,2*I+2*N),S[2*I+2*N+1]+=D*se,_(S,2*I+2*N+1),S[2*I+2*N+1]+=M*Z,_(S,2*I+2*N+1),S[2*I+2*N+2]+=D*Z,_(S,2*I+2*N+2)}for(I=0;I<k;I++)S[I]=S[2*I+1]<<16|S[2*I];for(I=k;I<2*k;I++)S[I]=0;return new o(S,0)};function _(T,k){for(;(T[k]&65535)!=T[k];)T[k+1]+=T[k]>>>16,T[k]&=65535,k++}function w(T,k){this.g=T,this.h=k}function P(T,k){if(y(k))throw Error("division by zero");if(y(T))return new w(f,f);if(v(T))return k=P(E(T),k),new w(E(k.g),E(k.h));if(v(k))return k=P(T,E(k)),new w(E(k.g),k.h);if(30<T.g.length){if(v(T)||v(k))throw Error("slowDivide_ only works with positive integers.");for(var S=m,I=k;0>=I.l(T);)S=C(S),I=C(I);var N=R(S,1),D=R(I,1);for(I=R(I,2),S=R(S,2);!y(I);){var M=D.add(I);0>=M.l(T)&&(N=N.add(S),D=M),I=R(I,1),S=R(S,1)}return k=x(T,N.j(k)),new w(N,k)}for(N=f;0<=T.l(k);){for(S=Math.max(1,Math.floor(T.m()/k.m())),I=Math.ceil(Math.log(S)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),D=c(S),M=D.j(k);v(M)||0<M.l(T);)S-=I,D=c(S),M=D.j(k);y(D)&&(D=m),N=N.add(D),T=x(T,M)}return new w(N,T)}t.A=function(T){return P(this,T).h},t.and=function(T){for(var k=Math.max(this.g.length,T.g.length),S=[],I=0;I<k;I++)S[I]=this.i(I)&T.i(I);return new o(S,this.h&T.h)},t.or=function(T){for(var k=Math.max(this.g.length,T.g.length),S=[],I=0;I<k;I++)S[I]=this.i(I)|T.i(I);return new o(S,this.h|T.h)},t.xor=function(T){for(var k=Math.max(this.g.length,T.g.length),S=[],I=0;I<k;I++)S[I]=this.i(I)^T.i(I);return new o(S,this.h^T.h)};function C(T){for(var k=T.g.length+1,S=[],I=0;I<k;I++)S[I]=T.i(I)<<1|T.i(I-1)>>>31;return new o(S,T.h)}function R(T,k){var S=k>>5;k%=32;for(var I=T.g.length-S,N=[],D=0;D<I;D++)N[D]=0<k?T.i(D+S)>>>k|T.i(D+S+1)<<32-k:T.i(D+S);return new o(N,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,HC=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,Eo=o}).apply(typeof Xk<"u"?Xk:typeof self<"u"?self:typeof window<"u"?window:{});var dh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qC,bc,KC,Kh,xy,GC,QC,YC;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,g,b){return h==Array.prototype||h==Object.prototype||(h[g]=b.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof dh=="object"&&dh];for(var g=0;g<h.length;++g){var b=h[g];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=n(this);function s(h,g){if(g)e:{var b=r;h=h.split(".");for(var A=0;A<h.length-1;A++){var L=h[A];if(!(L in b))break e;b=b[L]}h=h[h.length-1],A=b[h],g=g(A),g!=A&&g!=null&&e(b,h,{configurable:!0,writable:!0,value:g})}}function i(h,g){h instanceof String&&(h+="");var b=0,A=!1,L={next:function(){if(!A&&b<h.length){var V=b++;return{value:g(V,h[V]),done:!1}}return A=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}s("Array.prototype.values",function(h){return h||function(){return i(this,function(g,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(h){var g=typeof h;return g=g!="object"?g:h?Array.isArray(h)?"array":g:"null",g=="array"||g=="object"&&typeof h.length=="number"}function c(h){var g=typeof h;return g=="object"&&h!=null||g=="function"}function u(h,g,b){return h.call.apply(h.bind,arguments)}function f(h,g,b){if(!h)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,A),h.apply(g,L)}}return function(){return h.apply(g,arguments)}}function m(h,g,b){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:f,m.apply(null,arguments)}function p(h,g){var b=Array.prototype.slice.call(arguments,1);return function(){var A=b.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function y(h,g){function b(){}b.prototype=g.prototype,h.aa=g.prototype,h.prototype=new b,h.prototype.constructor=h,h.Qb=function(A,L,V){for(var H=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)H[ze-2]=arguments[ze];return g.prototype[L].apply(A,H)}}function v(h){const g=h.length;if(0<g){const b=Array(g);for(let A=0;A<g;A++)b[A]=h[A];return b}return[]}function E(h,g){for(let b=1;b<arguments.length;b++){const A=arguments[b];if(l(A)){const L=h.length||0,V=A.length||0;h.length=L+V;for(let H=0;H<V;H++)h[L+H]=A[H]}else h.push(A)}}class x{constructor(g,b){this.i=g,this.j=b,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function _(h){return/^[\s\xa0]*$/.test(h)}function w(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function P(h){return P[" "](h),h}P[" "]=function(){};var C=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function R(h,g,b){for(const A in h)g.call(b,h[A],A,h)}function T(h,g){for(const b in h)g.call(void 0,h[b],b,h)}function k(h){const g={};for(const b in h)g[b]=h[b];return g}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(h,g){let b,A;for(let L=1;L<arguments.length;L++){A=arguments[L];for(b in A)h[b]=A[b];for(let V=0;V<S.length;V++)b=S[V],Object.prototype.hasOwnProperty.call(A,b)&&(h[b]=A[b])}}function N(h){var g=1;h=h.split(":");const b=[];for(;0<g&&h.length;)b.push(h.shift()),g--;return h.length&&b.push(h.join(":")),b}function D(h){a.setTimeout(()=>{throw h},0)}function M(){var h=W;let g=null;return h.g&&(g=h.g,h.g=h.g.next,h.g||(h.h=null),g.next=null),g}class Z{constructor(){this.h=this.g=null}add(g,b){const A=se.get();A.set(g,b),this.h?this.h.next=A:this.g=A,this.h=A}}var se=new x(()=>new J,h=>h.reset());class J{constructor(){this.next=this.g=this.h=null}set(g,b){this.h=g,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,F=!1,W=new Z,te=()=>{const h=a.Promise.resolve(void 0);Q=()=>{h.then(we)}};var we=()=>{for(var h;h=M();){try{h.h.call(h.g)}catch(b){D(b)}var g=se;g.j(h),100>g.h&&(g.h++,h.next=g.g,g.g=h)}F=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function q(h,g){this.type=h,this.g=this.target=g,this.defaultPrevented=!1}q.prototype.h=function(){this.defaultPrevented=!0};var de=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,g=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const b=()=>{};a.addEventListener("test",b,g),a.removeEventListener("test",b,g)}catch{}return h}();function Ne(h,g){if(q.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var b=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=g,g=h.relatedTarget){if(C){e:{try{P(g.nodeName);var L=!0;break e}catch{}L=!1}L||(g=null)}}else b=="mouseover"?g=h.fromElement:b=="mouseout"&&(g=h.toElement);this.relatedTarget=g,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:je[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Ne.aa.h.call(this)}}y(Ne,q);var je={2:"touch",3:"pen",4:"mouse"};Ne.prototype.h=function(){Ne.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Be="closure_listenable_"+(1e6*Math.random()|0),gn=0;function Ui(h,g,b,A,L){this.listener=h,this.proxy=null,this.src=g,this.type=b,this.capture=!!A,this.ha=L,this.key=++gn,this.da=this.fa=!1}function Un(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ad(h){this.src=h,this.g={},this.h=0}Ad.prototype.add=function(h,g,b,A,L){var V=h.toString();h=this.g[V],h||(h=this.g[V]=[],this.h++);var H=Sp(h,g,A,L);return-1<H?(g=h[H],b||(g.fa=!1)):(g=new Ui(g,this.src,V,!!A,L),g.fa=b,h.push(g)),g};function Tp(h,g){var b=g.type;if(b in h.g){var A=h.g[b],L=Array.prototype.indexOf.call(A,g,void 0),V;(V=0<=L)&&Array.prototype.splice.call(A,L,1),V&&(Un(g),h.g[b].length==0&&(delete h.g[b],h.h--))}}function Sp(h,g,b,A){for(var L=0;L<h.length;++L){var V=h[L];if(!V.da&&V.listener==g&&V.capture==!!b&&V.ha==A)return L}return-1}var Ip="closure_lm_"+(1e6*Math.random()|0),Cp={};function bb(h,g,b,A,L){if(Array.isArray(g)){for(var V=0;V<g.length;V++)bb(h,g[V],b,A,L);return null}return b=Eb(b),h&&h[Be]?h.K(g,b,c(A)?!!A.capture:!1,L):WM(h,g,b,!1,A,L)}function WM(h,g,b,A,L,V){if(!g)throw Error("Invalid event type");var H=c(L)?!!L.capture:!!L,ze=Pp(h);if(ze||(h[Ip]=ze=new Ad(h)),b=ze.add(g,b,A,H,V),b.proxy)return b;if(A=HM(),b.proxy=A,A.src=h,A.listener=b,h.addEventListener)de||(L=H),L===void 0&&(L=!1),h.addEventListener(g.toString(),A,L);else if(h.attachEvent)h.attachEvent(kb(g.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return b}function HM(){function h(b){return g.call(h.src,h.listener,b)}const g=qM;return h}function wb(h,g,b,A,L){if(Array.isArray(g))for(var V=0;V<g.length;V++)wb(h,g[V],b,A,L);else A=c(A)?!!A.capture:!!A,b=Eb(b),h&&h[Be]?(h=h.i,g=String(g).toString(),g in h.g&&(V=h.g[g],b=Sp(V,b,A,L),-1<b&&(Un(V[b]),Array.prototype.splice.call(V,b,1),V.length==0&&(delete h.g[g],h.h--)))):h&&(h=Pp(h))&&(g=h.g[g.toString()],h=-1,g&&(h=Sp(g,b,A,L)),(b=-1<h?g[h]:null)&&Ap(b))}function Ap(h){if(typeof h!="number"&&h&&!h.da){var g=h.src;if(g&&g[Be])Tp(g.i,h);else{var b=h.type,A=h.proxy;g.removeEventListener?g.removeEventListener(b,A,h.capture):g.detachEvent?g.detachEvent(kb(b),A):g.addListener&&g.removeListener&&g.removeListener(A),(b=Pp(g))?(Tp(b,h),b.h==0&&(b.src=null,g[Ip]=null)):Un(h)}}}function kb(h){return h in Cp?Cp[h]:Cp[h]="on"+h}function qM(h,g){if(h.da)h=!0;else{g=new Ne(g,this);var b=h.listener,A=h.ha||h.src;h.fa&&Ap(h),h=b.call(A,g)}return h}function Pp(h){return h=h[Ip],h instanceof Ad?h:null}var Np="__closure_events_fn_"+(1e9*Math.random()>>>0);function Eb(h){return typeof h=="function"?h:(h[Np]||(h[Np]=function(g){return h.handleEvent(g)}),h[Np])}function Ft(){ce.call(this),this.i=new Ad(this),this.M=this,this.F=null}y(Ft,ce),Ft.prototype[Be]=!0,Ft.prototype.removeEventListener=function(h,g,b,A){wb(this,h,g,b,A)};function tn(h,g){var b,A=h.F;if(A)for(b=[];A;A=A.F)b.push(A);if(h=h.M,A=g.type||g,typeof g=="string")g=new q(g,h);else if(g instanceof q)g.target=g.target||h;else{var L=g;g=new q(A,h),I(g,L)}if(L=!0,b)for(var V=b.length-1;0<=V;V--){var H=g.g=b[V];L=Pd(H,A,!0,g)&&L}if(H=g.g=h,L=Pd(H,A,!0,g)&&L,L=Pd(H,A,!1,g)&&L,b)for(V=0;V<b.length;V++)H=g.g=b[V],L=Pd(H,A,!1,g)&&L}Ft.prototype.N=function(){if(Ft.aa.N.call(this),this.i){var h=this.i,g;for(g in h.g){for(var b=h.g[g],A=0;A<b.length;A++)Un(b[A]);delete h.g[g],h.h--}}this.F=null},Ft.prototype.K=function(h,g,b,A){return this.i.add(String(h),g,!1,b,A)},Ft.prototype.L=function(h,g,b,A){return this.i.add(String(h),g,!0,b,A)};function Pd(h,g,b,A){if(g=h.i.g[String(g)],!g)return!0;g=g.concat();for(var L=!0,V=0;V<g.length;++V){var H=g[V];if(H&&!H.da&&H.capture==b){var ze=H.listener,Ct=H.ha||H.src;H.fa&&Tp(h.i,H),L=ze.call(Ct,A)!==!1&&L}}return L&&!A.defaultPrevented}function Tb(h,g,b){if(typeof h=="function")b&&(h=m(h,b));else if(h&&typeof h.handleEvent=="function")h=m(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(h,g||0)}function Sb(h){h.g=Tb(()=>{h.g=null,h.i&&(h.i=!1,Sb(h))},h.l);const g=h.h;h.h=null,h.m.apply(null,g)}class KM extends ce{constructor(g,b){super(),this.m=g,this.l=b,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Sb(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fl(h){ce.call(this),this.h=h,this.g={}}y(Fl,ce);var Ib=[];function Cb(h){R(h.g,function(g,b){this.g.hasOwnProperty(b)&&Ap(g)},h),h.g={}}Fl.prototype.N=function(){Fl.aa.N.call(this),Cb(this)},Fl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Rp=a.JSON.stringify,GM=a.JSON.parse,QM=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function Mp(){}Mp.prototype.h=null;function Ab(h){return h.h||(h.h=h.i())}function Pb(){}var Ul={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Dp(){q.call(this,"d")}y(Dp,q);function jp(){q.call(this,"c")}y(jp,q);var Bi={},Nb=null;function Nd(){return Nb=Nb||new Ft}Bi.La="serverreachability";function Rb(h){q.call(this,Bi.La,h)}y(Rb,q);function Bl(h){const g=Nd();tn(g,new Rb(g))}Bi.STAT_EVENT="statevent";function Mb(h,g){q.call(this,Bi.STAT_EVENT,h),this.stat=g}y(Mb,q);function nn(h){const g=Nd();tn(g,new Mb(g,h))}Bi.Ma="timingevent";function Db(h,g){q.call(this,Bi.Ma,h),this.size=g}y(Db,q);function zl(h,g){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},g)}function $l(){this.g=!0}$l.prototype.xa=function(){this.g=!1};function YM(h,g,b,A,L,V){h.info(function(){if(h.g)if(V)for(var H="",ze=V.split("&"),Ct=0;Ct<ze.length;Ct++){var Re=ze[Ct].split("=");if(1<Re.length){var Ut=Re[0];Re=Re[1];var Bt=Ut.split("_");H=2<=Bt.length&&Bt[1]=="type"?H+(Ut+"="+Re+"&"):H+(Ut+"=redacted&")}}else H=null;else H=V;return"XMLHTTP REQ ("+A+") [attempt "+L+"]: "+g+`
`+b+`
`+H})}function XM(h,g,b,A,L,V,H){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+L+"]: "+g+`
`+b+`
`+V+" "+H})}function Jo(h,g,b,A){h.info(function(){return"XMLHTTP TEXT ("+g+"): "+JM(h,b)+(A?" "+A:"")})}function ZM(h,g){h.info(function(){return"TIMEOUT: "+g})}$l.prototype.info=function(){};function JM(h,g){if(!h.g)return g;if(!g)return null;try{var b=JSON.parse(g);if(b){for(h=0;h<b.length;h++)if(Array.isArray(b[h])){var A=b[h];if(!(2>A.length)){var L=A[1];if(Array.isArray(L)&&!(1>L.length)){var V=L[0];if(V!="noop"&&V!="stop"&&V!="close")for(var H=1;H<L.length;H++)L[H]=""}}}}return Rp(b)}catch{return g}}var Rd={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},jb={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Op;function Md(){}y(Md,Mp),Md.prototype.g=function(){return new XMLHttpRequest},Md.prototype.i=function(){return{}},Op=new Md;function Is(h,g,b,A){this.j=h,this.i=g,this.l=b,this.R=A||1,this.U=new Fl(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ob}function Ob(){this.i=null,this.g="",this.h=!1}var Lb={},Lp={};function Vp(h,g,b){h.L=1,h.v=Ld(zr(g)),h.m=b,h.P=!0,Vb(h,null)}function Vb(h,g){h.F=Date.now(),Dd(h),h.A=zr(h.v);var b=h.A,A=h.R;Array.isArray(A)||(A=[String(A)]),Zb(b.i,"t",A),h.C=0,b=h.j.J,h.h=new Ob,h.g=gw(h.j,b?g:null,!h.m),0<h.O&&(h.M=new KM(m(h.Y,h,h.g),h.O)),g=h.U,b=h.g,A=h.ca;var L="readystatechange";Array.isArray(L)||(L&&(Ib[0]=L.toString()),L=Ib);for(var V=0;V<L.length;V++){var H=bb(b,L[V],A||g.handleEvent,!1,g.h||g);if(!H)break;g.g[H.key]=H}g=h.H?k(h.H):{},h.m?(h.u||(h.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,g)):(h.u="GET",h.g.ea(h.A,h.u,null,g)),Bl(),YM(h.i,h.u,h.A,h.l,h.R,h.m)}Is.prototype.ca=function(h){h=h.target;const g=this.M;g&&$r(h)==3?g.j():this.Y(h)},Is.prototype.Y=function(h){try{if(h==this.g)e:{const Bt=$r(this.g);var g=this.g.Ba();const na=this.g.Z();if(!(3>Bt)&&(Bt!=3||this.g&&(this.h.h||this.g.oa()||iw(this.g)))){this.J||Bt!=4||g==7||(g==8||0>=na?Bl(3):Bl(2)),Fp(this);var b=this.g.Z();this.X=b;t:if(Fb(this)){var A=iw(this.g);h="";var L=A.length,V=$r(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){zi(this),Wl(this);var H="";break t}this.h.i=new a.TextDecoder}for(g=0;g<L;g++)this.h.h=!0,h+=this.h.i.decode(A[g],{stream:!(V&&g==L-1)});A.length=0,this.h.g+=h,this.C=0,H=this.h.g}else H=this.g.oa();if(this.o=b==200,XM(this.i,this.u,this.A,this.l,this.R,Bt,b),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,Ct=this.g;if((ze=Ct.g?Ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(ze)){var Re=ze;break t}}Re=null}if(b=Re)Jo(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Up(this,b);else{this.o=!1,this.s=3,nn(12),zi(this),Wl(this);break e}}if(this.P){b=!0;let ir;for(;!this.J&&this.C<H.length;)if(ir=eD(this,H),ir==Lp){Bt==4&&(this.s=4,nn(14),b=!1),Jo(this.i,this.l,null,"[Incomplete Response]");break}else if(ir==Lb){this.s=4,nn(15),Jo(this.i,this.l,H,"[Invalid Chunk]"),b=!1;break}else Jo(this.i,this.l,ir,null),Up(this,ir);if(Fb(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Bt!=4||H.length!=0||this.h.h||(this.s=1,nn(16),b=!1),this.o=this.o&&b,!b)Jo(this.i,this.l,H,"[Invalid Chunked Response]"),zi(this),Wl(this);else if(0<H.length&&!this.W){this.W=!0;var Ut=this.j;Ut.g==this&&Ut.ba&&!Ut.M&&(Ut.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),qp(Ut),Ut.M=!0,nn(11))}}else Jo(this.i,this.l,H,null),Up(this,H);Bt==4&&zi(this),this.o&&!this.J&&(Bt==4?hw(this.j,this):(this.o=!1,Dd(this)))}else yD(this.g),b==400&&0<H.indexOf("Unknown SID")?(this.s=3,nn(12)):(this.s=0,nn(13)),zi(this),Wl(this)}}}catch{}finally{}};function Fb(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function eD(h,g){var b=h.C,A=g.indexOf(`
`,b);return A==-1?Lp:(b=Number(g.substring(b,A)),isNaN(b)?Lb:(A+=1,A+b>g.length?Lp:(g=g.slice(A,A+b),h.C=A+b,g)))}Is.prototype.cancel=function(){this.J=!0,zi(this)};function Dd(h){h.S=Date.now()+h.I,Ub(h,h.I)}function Ub(h,g){if(h.B!=null)throw Error("WatchDog timer not null");h.B=zl(m(h.ba,h),g)}function Fp(h){h.B&&(a.clearTimeout(h.B),h.B=null)}Is.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(ZM(this.i,this.A),this.L!=2&&(Bl(),nn(17)),zi(this),this.s=2,Wl(this)):Ub(this,this.S-h)};function Wl(h){h.j.G==0||h.J||hw(h.j,h)}function zi(h){Fp(h);var g=h.M;g&&typeof g.ma=="function"&&g.ma(),h.M=null,Cb(h.U),h.g&&(g=h.g,h.g=null,g.abort(),g.ma())}function Up(h,g){try{var b=h.j;if(b.G!=0&&(b.g==h||Bp(b.h,h))){if(!h.K&&Bp(b.h,h)&&b.G==3){try{var A=b.Da.g.parse(g)}catch{A=null}if(Array.isArray(A)&&A.length==3){var L=A;if(L[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<h.F)$d(b),Bd(b);else break e;Hp(b),nn(18)}}else b.za=L[1],0<b.za-b.T&&37500>L[2]&&b.F&&b.v==0&&!b.C&&(b.C=zl(m(b.Za,b),6e3));if(1>=$b(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else Wi(b,11)}else if((h.K||b.g==h)&&$d(b),!_(g))for(L=b.Da.g.parse(g),g=0;g<L.length;g++){let Re=L[g];if(b.T=Re[0],Re=Re[1],b.G==2)if(Re[0]=="c"){b.K=Re[1],b.ia=Re[2];const Ut=Re[3];Ut!=null&&(b.la=Ut,b.j.info("VER="+b.la));const Bt=Re[4];Bt!=null&&(b.Aa=Bt,b.j.info("SVER="+b.Aa));const na=Re[5];na!=null&&typeof na=="number"&&0<na&&(A=1.5*na,b.L=A,b.j.info("backChannelRequestTimeoutMs_="+A)),A=b;const ir=h.g;if(ir){const Hd=ir.g?ir.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hd){var V=A.h;V.g||Hd.indexOf("spdy")==-1&&Hd.indexOf("quic")==-1&&Hd.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(zp(V,V.h),V.h=null))}if(A.D){const Kp=ir.g?ir.g.getResponseHeader("X-HTTP-Session-Id"):null;Kp&&(A.ya=Kp,He(A.I,A.D,Kp))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-h.F,b.j.info("Handshake RTT: "+b.R+"ms")),A=b;var H=h;if(A.qa=pw(A,A.J?A.ia:null,A.W),H.K){Wb(A.h,H);var ze=H,Ct=A.L;Ct&&(ze.I=Ct),ze.B&&(Fp(ze),Dd(ze)),A.g=H}else uw(A);0<b.i.length&&zd(b)}else Re[0]!="stop"&&Re[0]!="close"||Wi(b,7);else b.G==3&&(Re[0]=="stop"||Re[0]=="close"?Re[0]=="stop"?Wi(b,7):Wp(b):Re[0]!="noop"&&b.l&&b.l.ta(Re),b.v=0)}}Bl(4)}catch{}}var tD=class{constructor(h,g){this.g=h,this.map=g}};function Bb(h){this.l=h||10,a.PerformanceNavigationTiming?(h=a.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function zb(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function $b(h){return h.h?1:h.g?h.g.size:0}function Bp(h,g){return h.h?h.h==g:h.g?h.g.has(g):!1}function zp(h,g){h.g?h.g.add(g):h.h=g}function Wb(h,g){h.h&&h.h==g?h.h=null:h.g&&h.g.has(g)&&h.g.delete(g)}Bb.prototype.cancel=function(){if(this.i=Hb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Hb(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let g=h.i;for(const b of h.g.values())g=g.concat(b.D);return g}return v(h.i)}function nD(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(l(h)){for(var g=[],b=h.length,A=0;A<b;A++)g.push(h[A]);return g}g=[],b=0;for(A in h)g[b++]=h[A];return g}function rD(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(l(h)||typeof h=="string"){var g=[];h=h.length;for(var b=0;b<h;b++)g.push(b);return g}g=[],b=0;for(const A in h)g[b++]=A;return g}}}function qb(h,g){if(h.forEach&&typeof h.forEach=="function")h.forEach(g,void 0);else if(l(h)||typeof h=="string")Array.prototype.forEach.call(h,g,void 0);else for(var b=rD(h),A=nD(h),L=A.length,V=0;V<L;V++)g.call(void 0,A[V],b&&b[V],h)}var Kb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sD(h,g){if(h){h=h.split("&");for(var b=0;b<h.length;b++){var A=h[b].indexOf("="),L=null;if(0<=A){var V=h[b].substring(0,A);L=h[b].substring(A+1)}else V=h[b];g(V,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function $i(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof $i){this.h=h.h,jd(this,h.j),this.o=h.o,this.g=h.g,Od(this,h.s),this.l=h.l;var g=h.i,b=new Kl;b.i=g.i,g.g&&(b.g=new Map(g.g),b.h=g.h),Gb(this,b),this.m=h.m}else h&&(g=String(h).match(Kb))?(this.h=!1,jd(this,g[1]||"",!0),this.o=Hl(g[2]||""),this.g=Hl(g[3]||"",!0),Od(this,g[4]),this.l=Hl(g[5]||"",!0),Gb(this,g[6]||"",!0),this.m=Hl(g[7]||"")):(this.h=!1,this.i=new Kl(null,this.h))}$i.prototype.toString=function(){var h=[],g=this.j;g&&h.push(ql(g,Qb,!0),":");var b=this.g;return(b||g=="file")&&(h.push("//"),(g=this.o)&&h.push(ql(g,Qb,!0),"@"),h.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&h.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&h.push("/"),h.push(ql(b,b.charAt(0)=="/"?aD:oD,!0))),(b=this.i.toString())&&h.push("?",b),(b=this.m)&&h.push("#",ql(b,cD)),h.join("")};function zr(h){return new $i(h)}function jd(h,g,b){h.j=b?Hl(g,!0):g,h.j&&(h.j=h.j.replace(/:$/,""))}function Od(h,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);h.s=g}else h.s=null}function Gb(h,g,b){g instanceof Kl?(h.i=g,uD(h.i,h.h)):(b||(g=ql(g,lD)),h.i=new Kl(g,h.h))}function He(h,g,b){h.i.set(g,b)}function Ld(h){return He(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Hl(h,g){return h?g?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ql(h,g,b){return typeof h=="string"?(h=encodeURI(h).replace(g,iD),b&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function iD(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Qb=/[#\/\?@]/g,oD=/[#\?:]/g,aD=/[#\?]/g,lD=/[#\?@]/g,cD=/#/g;function Kl(h,g){this.h=this.g=null,this.i=h||null,this.j=!!g}function Cs(h){h.g||(h.g=new Map,h.h=0,h.i&&sD(h.i,function(g,b){h.add(decodeURIComponent(g.replace(/\+/g," ")),b)}))}t=Kl.prototype,t.add=function(h,g){Cs(this),this.i=null,h=ea(this,h);var b=this.g.get(h);return b||this.g.set(h,b=[]),b.push(g),this.h+=1,this};function Yb(h,g){Cs(h),g=ea(h,g),h.g.has(g)&&(h.i=null,h.h-=h.g.get(g).length,h.g.delete(g))}function Xb(h,g){return Cs(h),g=ea(h,g),h.g.has(g)}t.forEach=function(h,g){Cs(this),this.g.forEach(function(b,A){b.forEach(function(L){h.call(g,L,A,this)},this)},this)},t.na=function(){Cs(this);const h=Array.from(this.g.values()),g=Array.from(this.g.keys()),b=[];for(let A=0;A<g.length;A++){const L=h[A];for(let V=0;V<L.length;V++)b.push(g[A])}return b},t.V=function(h){Cs(this);let g=[];if(typeof h=="string")Xb(this,h)&&(g=g.concat(this.g.get(ea(this,h))));else{h=Array.from(this.g.values());for(let b=0;b<h.length;b++)g=g.concat(h[b])}return g},t.set=function(h,g){return Cs(this),this.i=null,h=ea(this,h),Xb(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[g]),this.h+=1,this},t.get=function(h,g){return h?(h=this.V(h),0<h.length?String(h[0]):g):g};function Zb(h,g,b){Yb(h,g),0<b.length&&(h.i=null,h.g.set(ea(h,g),v(b)),h.h+=b.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],g=Array.from(this.g.keys());for(var b=0;b<g.length;b++){var A=g[b];const V=encodeURIComponent(String(A)),H=this.V(A);for(A=0;A<H.length;A++){var L=V;H[A]!==""&&(L+="="+encodeURIComponent(String(H[A]))),h.push(L)}}return this.i=h.join("&")};function ea(h,g){return g=String(g),h.j&&(g=g.toLowerCase()),g}function uD(h,g){g&&!h.j&&(Cs(h),h.i=null,h.g.forEach(function(b,A){var L=A.toLowerCase();A!=L&&(Yb(this,A),Zb(this,L,b))},h)),h.j=g}function dD(h,g){const b=new $l;if(a.Image){const A=new Image;A.onload=p(As,b,"TestLoadImage: loaded",!0,g,A),A.onerror=p(As,b,"TestLoadImage: error",!1,g,A),A.onabort=p(As,b,"TestLoadImage: abort",!1,g,A),A.ontimeout=p(As,b,"TestLoadImage: timeout",!1,g,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else g(!1)}function hD(h,g){const b=new $l,A=new AbortController,L=setTimeout(()=>{A.abort(),As(b,"TestPingServer: timeout",!1,g)},1e4);fetch(h,{signal:A.signal}).then(V=>{clearTimeout(L),V.ok?As(b,"TestPingServer: ok",!0,g):As(b,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),As(b,"TestPingServer: error",!1,g)})}function As(h,g,b,A,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),A(b)}catch{}}function fD(){this.g=new QM}function mD(h,g,b){const A=b||"";try{qb(h,function(L,V){let H=L;c(L)&&(H=Rp(L)),g.push(A+V+"="+encodeURIComponent(H))})}catch(L){throw g.push(A+"type="+encodeURIComponent("_badmap")),L}}function Vd(h){this.l=h.Ub||null,this.j=h.eb||!1}y(Vd,Mp),Vd.prototype.g=function(){return new Fd(this.l,this.j)},Vd.prototype.i=function(h){return function(){return h}}({});function Fd(h,g){Ft.call(this),this.D=h,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Fd,Ft),t=Fd.prototype,t.open=function(h,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=g,this.readyState=1,Ql(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(g.body=h),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Gl(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ql(this)),this.g&&(this.readyState=3,Ql(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Jb(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Jb(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var g=h.value?h.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!h.done}))&&(this.response=this.responseText+=g)}h.done?Gl(this):Ql(this),this.readyState==3&&Jb(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,Gl(this))},t.Qa=function(h){this.g&&(this.response=h,Gl(this))},t.ga=function(){this.g&&Gl(this)};function Gl(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Ql(h)}t.setRequestHeader=function(h,g){this.u.append(h,g)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],g=this.h.entries();for(var b=g.next();!b.done;)b=b.value,h.push(b[0]+": "+b[1]),b=g.next();return h.join(`\r
`)};function Ql(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Fd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ew(h){let g="";return R(h,function(b,A){g+=A,g+=":",g+=b,g+=`\r
`}),g}function $p(h,g,b){e:{for(A in b){var A=!1;break e}A=!0}A||(b=ew(b),typeof h=="string"?b!=null&&encodeURIComponent(String(b)):He(h,g,b))}function st(h){Ft.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(st,Ft);var pD=/^https?$/i,gD=["POST","PUT"];t=st.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,g,b,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);g=g?g.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Op.g(),this.v=this.o?Ab(this.o):Ab(Op),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(g,String(h),!0),this.B=!1}catch(V){tw(this,V);return}if(h=b||"",b=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var L in A)b.set(L,A[L]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const V of A.keys())b.set(V,A.get(V));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(b.keys()).find(V=>V.toLowerCase()=="content-type"),L=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(gD,g,void 0))||A||L||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,H]of b)this.g.setRequestHeader(V,H);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{sw(this),this.u=!0,this.g.send(h),this.u=!1}catch(V){tw(this,V)}};function tw(h,g){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=g,h.m=5,nw(h),Ud(h)}function nw(h){h.A||(h.A=!0,tn(h,"complete"),tn(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,tn(this,"complete"),tn(this,"abort"),Ud(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ud(this,!0)),st.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?rw(this):this.bb())},t.bb=function(){rw(this)};function rw(h){if(h.h&&typeof o<"u"&&(!h.v[1]||$r(h)!=4||h.Z()!=2)){if(h.u&&$r(h)==4)Tb(h.Ea,0,h);else if(tn(h,"readystatechange"),$r(h)==4){h.h=!1;try{const H=h.Z();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var b;if(!(b=g)){var A;if(A=H===0){var L=String(h.D).match(Kb)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),A=!pD.test(L?L.toLowerCase():"")}b=A}if(b)tn(h,"complete"),tn(h,"success");else{h.m=6;try{var V=2<$r(h)?h.g.statusText:""}catch{V=""}h.l=V+" ["+h.Z()+"]",nw(h)}}finally{Ud(h)}}}}function Ud(h,g){if(h.g){sw(h);const b=h.g,A=h.v[0]?()=>{}:null;h.g=null,h.v=null,g||tn(h,"ready");try{b.onreadystatechange=A}catch{}}}function sw(h){h.I&&(a.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function $r(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<$r(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var g=this.g.responseText;return h&&g.indexOf(h)==0&&(g=g.substring(h.length)),GM(g)}};function iw(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function yD(h){const g={};h=(h.g&&2<=$r(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(_(h[A]))continue;var b=N(h[A]);const L=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const V=g[L]||[];g[L]=V,V.push(b)}T(g,function(A){return A.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yl(h,g,b){return b&&b.internalChannelParams&&b.internalChannelParams[h]||g}function ow(h){this.Aa=0,this.i=[],this.j=new $l,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Yl("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Yl("baseRetryDelayMs",5e3,h),this.cb=Yl("retryDelaySeedMs",1e4,h),this.Wa=Yl("forwardChannelMaxRetries",2,h),this.wa=Yl("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Bb(h&&h.concurrentRequestLimit),this.Da=new fD,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ow.prototype,t.la=8,t.G=1,t.connect=function(h,g,b,A){nn(0),this.W=h,this.H=g||{},b&&A!==void 0&&(this.H.OSID=b,this.H.OAID=A),this.F=this.X,this.I=pw(this,null,this.W),zd(this)};function Wp(h){if(aw(h),h.G==3){var g=h.U++,b=zr(h.I);if(He(b,"SID",h.K),He(b,"RID",g),He(b,"TYPE","terminate"),Xl(h,b),g=new Is(h,h.j,g),g.L=2,g.v=Ld(zr(b)),b=!1,a.navigator&&a.navigator.sendBeacon)try{b=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!b&&a.Image&&(new Image().src=g.v,b=!0),b||(g.g=gw(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Dd(g)}mw(h)}function Bd(h){h.g&&(qp(h),h.g.cancel(),h.g=null)}function aw(h){Bd(h),h.u&&(a.clearTimeout(h.u),h.u=null),$d(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&a.clearTimeout(h.s),h.s=null)}function zd(h){if(!zb(h.h)&&!h.s){h.s=!0;var g=h.Ga;Q||te(),F||(Q(),F=!0),W.add(g,h),h.B=0}}function vD(h,g){return $b(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=g.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=zl(m(h.Ga,h,g),fw(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const L=new Is(this,this.j,h);let V=this.o;if(this.S&&(V?(V=k(V),I(V,this.S)):V=this.S),this.m!==null||this.O||(L.H=V,V=null),this.P)e:{for(var g=0,b=0;b<this.i.length;b++){t:{var A=this.i[b];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(g+=A,4096<g){g=b;break e}if(g===4096||b===this.i.length-1){g=b+1;break e}}g=1e3}else g=1e3;g=cw(this,L,g),b=zr(this.I),He(b,"RID",h),He(b,"CVER",22),this.D&&He(b,"X-HTTP-Session-Id",this.D),Xl(this,b),V&&(this.O?g="headers="+encodeURIComponent(String(ew(V)))+"&"+g:this.m&&$p(b,this.m,V)),zp(this.h,L),this.Ua&&He(b,"TYPE","init"),this.P?(He(b,"$req",g),He(b,"SID","null"),L.T=!0,Vp(L,b,null)):Vp(L,b,g),this.G=2}}else this.G==3&&(h?lw(this,h):this.i.length==0||zb(this.h)||lw(this))};function lw(h,g){var b;g?b=g.l:b=h.U++;const A=zr(h.I);He(A,"SID",h.K),He(A,"RID",b),He(A,"AID",h.T),Xl(h,A),h.m&&h.o&&$p(A,h.m,h.o),b=new Is(h,h.j,b,h.B+1),h.m===null&&(b.H=h.o),g&&(h.i=g.D.concat(h.i)),g=cw(h,b,1e3),b.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),zp(h.h,b),Vp(b,A,g)}function Xl(h,g){h.H&&R(h.H,function(b,A){He(g,A,b)}),h.l&&qb({},function(b,A){He(g,A,b)})}function cw(h,g,b){b=Math.min(h.i.length,b);var A=h.l?m(h.l.Na,h.l,h):null;e:{var L=h.i;let V=-1;for(;;){const H=["count="+b];V==-1?0<b?(V=L[0].g,H.push("ofs="+V)):V=0:H.push("ofs="+V);let ze=!0;for(let Ct=0;Ct<b;Ct++){let Re=L[Ct].g;const Ut=L[Ct].map;if(Re-=V,0>Re)V=Math.max(0,L[Ct].g-100),ze=!1;else try{mD(Ut,H,"req"+Re+"_")}catch{A&&A(Ut)}}if(ze){A=H.join("&");break e}}}return h=h.i.splice(0,b),g.D=h,A}function uw(h){if(!h.g&&!h.u){h.Y=1;var g=h.Fa;Q||te(),F||(Q(),F=!0),W.add(g,h),h.v=0}}function Hp(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=zl(m(h.Fa,h),fw(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,dw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=zl(m(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nn(10),Bd(this),dw(this))};function qp(h){h.A!=null&&(a.clearTimeout(h.A),h.A=null)}function dw(h){h.g=new Is(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var g=zr(h.qa);He(g,"RID","rpc"),He(g,"SID",h.K),He(g,"AID",h.T),He(g,"CI",h.F?"0":"1"),!h.F&&h.ja&&He(g,"TO",h.ja),He(g,"TYPE","xmlhttp"),Xl(h,g),h.m&&h.o&&$p(g,h.m,h.o),h.L&&(h.g.I=h.L);var b=h.g;h=h.ia,b.L=1,b.v=Ld(zr(g)),b.m=null,b.P=!0,Vb(b,h)}t.Za=function(){this.C!=null&&(this.C=null,Bd(this),Hp(this),nn(19))};function $d(h){h.C!=null&&(a.clearTimeout(h.C),h.C=null)}function hw(h,g){var b=null;if(h.g==g){$d(h),qp(h),h.g=null;var A=2}else if(Bp(h.h,g))b=g.D,Wb(h.h,g),A=1;else return;if(h.G!=0){if(g.o)if(A==1){b=g.m?g.m.length:0,g=Date.now()-g.F;var L=h.B;A=Nd(),tn(A,new Db(A,b)),zd(h)}else uw(h);else if(L=g.s,L==3||L==0&&0<g.X||!(A==1&&vD(h,g)||A==2&&Hp(h)))switch(b&&0<b.length&&(g=h.h,g.i=g.i.concat(b)),L){case 1:Wi(h,5);break;case 4:Wi(h,10);break;case 3:Wi(h,6);break;default:Wi(h,2)}}}function fw(h,g){let b=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(b*=2),b*g}function Wi(h,g){if(h.j.info("Error code "+g),g==2){var b=m(h.fb,h),A=h.Xa;const L=!A;A=new $i(A||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||jd(A,"https"),Ld(A),L?dD(A.toString(),b):hD(A.toString(),b)}else nn(2);h.G=0,h.l&&h.l.sa(g),mw(h),aw(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),nn(2)):(this.j.info("Failed to ping google.com"),nn(1))};function mw(h){if(h.G=0,h.ka=[],h.l){const g=Hb(h.h);(g.length!=0||h.i.length!=0)&&(E(h.ka,g),E(h.ka,h.i),h.h.i.length=0,v(h.i),h.i.length=0),h.l.ra()}}function pw(h,g,b){var A=b instanceof $i?zr(b):new $i(b);if(A.g!="")g&&(A.g=g+"."+A.g),Od(A,A.s);else{var L=a.location;A=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;var V=new $i(null);A&&jd(V,A),g&&(V.g=g),L&&Od(V,L),b&&(V.l=b),A=V}return b=h.D,g=h.ya,b&&g&&He(A,b,g),He(A,"VER",h.la),Xl(h,A),A}function gw(h,g,b){if(g&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=h.Ca&&!h.pa?new st(new Vd({eb:b})):new st(h.pa),g.Ha(h.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function yw(){}t=yw.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Wd(){}Wd.prototype.g=function(h,g){return new An(h,g)};function An(h,g){Ft.call(this),this.g=new ow(g),this.l=h,this.h=g&&g.messageUrlParams||null,h=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(h?h["X-WebChannel-Content-Type"]=g.messageContentType:h={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(h?h["X-WebChannel-Client-Profile"]=g.va:h={"X-WebChannel-Client-Profile":g.va}),this.g.S=h,(h=g&&g.Sb)&&!_(h)&&(this.g.m=h),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!_(g)&&(this.g.D=g,h=this.h,h!==null&&g in h&&(h=this.h,g in h&&delete h[g])),this.j=new ta(this)}y(An,Ft),An.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},An.prototype.close=function(){Wp(this.g)},An.prototype.o=function(h){var g=this.g;if(typeof h=="string"){var b={};b.__data__=h,h=b}else this.u&&(b={},b.__data__=Rp(h),h=b);g.i.push(new tD(g.Ya++,h)),g.G==3&&zd(g)},An.prototype.N=function(){this.g.l=null,delete this.j,Wp(this.g),delete this.g,An.aa.N.call(this)};function vw(h){Dp.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var g=h.__sm__;if(g){e:{for(const b in g){h=b;break e}h=void 0}(this.i=h)&&(h=this.i,g=g!==null&&h in g?g[h]:void 0),this.data=g}else this.data=h}y(vw,Dp);function xw(){jp.call(this),this.status=1}y(xw,jp);function ta(h){this.g=h}y(ta,yw),ta.prototype.ua=function(){tn(this.g,"a")},ta.prototype.ta=function(h){tn(this.g,new vw(h))},ta.prototype.sa=function(h){tn(this.g,new xw)},ta.prototype.ra=function(){tn(this.g,"b")},Wd.prototype.createWebChannel=Wd.prototype.g,An.prototype.send=An.prototype.o,An.prototype.open=An.prototype.m,An.prototype.close=An.prototype.close,YC=function(){return new Wd},QC=function(){return Nd()},GC=Bi,xy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Rd.NO_ERROR=0,Rd.TIMEOUT=8,Rd.HTTP_ERROR=6,Kh=Rd,jb.COMPLETE="complete",KC=jb,Pb.EventType=Ul,Ul.OPEN="a",Ul.CLOSE="b",Ul.ERROR="c",Ul.MESSAGE="d",Ft.prototype.listen=Ft.prototype.K,bc=Pb,st.prototype.listenOnce=st.prototype.L,st.prototype.getLastError=st.prototype.Ka,st.prototype.getLastErrorCode=st.prototype.Ba,st.prototype.getStatus=st.prototype.Z,st.prototype.getResponseJson=st.prototype.Oa,st.prototype.getResponseText=st.prototype.oa,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Ha,qC=st}).apply(typeof dh<"u"?dh:typeof self<"u"?self:typeof window<"u"?window:{});const Zk="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Kt.UNAUTHENTICATED=new Kt(null),Kt.GOOGLE_CREDENTIALS=new Kt("google-credentials-uid"),Kt.FIRST_PARTY=new Kt("first-party-uid"),Kt.MOCK_USER=new Kt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pl="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo=new bx("@firebase/firestore");function oc(){return Oo.logLevel}function ne(t,...e){if(Oo.logLevel<=Se.DEBUG){const n=e.map(Ex);Oo.debug(`Firestore (${Pl}): ${t}`,...n)}}function vs(t,...e){if(Oo.logLevel<=Se.ERROR){const n=e.map(Ex);Oo.error(`Firestore (${Pl}): ${t}`,...n)}}function ll(t,...e){if(Oo.logLevel<=Se.WARN){const n=e.map(Ex);Oo.warn(`Firestore (${Pl}): ${t}`,...n)}}function Ex(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(t="Unexpected state"){const e=`FIRESTORE (${Pl}) INTERNAL ASSERTION FAILED: `+t;throw vs(e),new Error(e)}function Ue(t,e){t||fe()}function ye(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends Ts{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Kt.UNAUTHENTICATED))}shutdown(){}}class hV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class fV{constructor(e){this.t=e,this.currentUser=Kt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ue(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new us;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new us,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new us)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ue(typeof r.accessToken=="string"),new XC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ue(e===null||typeof e=="string"),new Kt(e)}}class mV{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Kt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class pV{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new mV(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Kt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gV{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yV{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ue(this.o===void 0);const r=i=>{i.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,ne("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ue(typeof n.token=="string"),this.R=n.token,new gV(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=vV(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Me(t,e){return t<e?-1:t>e?1:0}function cl(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new X(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return kt.fromMillis(Date.now())}static fromDate(e){return kt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new kt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.timestamp=e}static fromTimestamp(e){return new me(e)}static min(){return new me(new kt(0,0))}static max(){return new me(new kt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n,r){n===void 0?n=0:n>e.length&&fe(),r===void 0?r=e.length-n:r>e.length-n&&fe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Eu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Eu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ge extends Eu{construct(e,n,r){return new Ge(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new X(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ge(n)}static emptyPath(){return new Ge([])}}const xV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mt extends Eu{construct(e,n,r){return new Mt(e,n,r)}static isValidIdentifier(e){return xV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Mt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new X(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new X(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new X(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new X(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mt(n)}static emptyPath(){return new Mt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.path=e}static fromPath(e){return new le(Ge.fromString(e))}static fromName(e){return new le(Ge.fromString(e).popFirst(5))}static empty(){return new le(Ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ge.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new le(new Ge(e.slice()))}}function _V(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=me.fromTimestamp(r===1e9?new kt(n+1,0):new kt(n,r));return new Ei(s,le.empty(),e)}function bV(t){return new Ei(t.readTime,t.key,-1)}class Ei{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ei(me.min(),le.empty(),-1)}static max(){return new Ei(me.max(),le.empty(),-1)}}function wV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=le.comparator(t.documentKey,e.documentKey),n!==0?n:Me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cd(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==kV)throw t;ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&fe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(s=>s?B.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new B((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===i&&r(o)},u=>s(u))}})}static doWhile(e,n){return new B((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function TV(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ud(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Tx.oe=-1;function Wm(t){return t==null}function Uf(t){return t===0&&1/t==-1/0}function SV(t){return typeof t=="number"&&Number.isInteger(t)&&!Uf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jk(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function qo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function JC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,n){this.comparator=e,this.root=n||Rt.EMPTY}insert(e,n){return new rt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Rt.BLACK,null,null))}remove(e){return new rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hh(this.root,e,this.comparator,!1)}getReverseIterator(){return new hh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hh(this.root,e,this.comparator,!0)}}class hh{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Rt.RED,this.left=s??Rt.EMPTY,this.right=i??Rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Rt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Rt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw fe();const e=this.left.check();if(e!==this.right.check())throw fe();return e+(this.isRed()?0:1)}}Rt.EMPTY=null,Rt.RED=!0,Rt.BLACK=!1;Rt.EMPTY=new class{constructor(){this.size=0}get key(){throw fe()}get value(){throw fe()}get color(){throw fe()}get left(){throw fe()}get right(){throw fe()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Rt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.comparator=e,this.data=new rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new e1(this.data.getIterator())}getIteratorFrom(e){return new e1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof jt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new jt(this.comparator);return n.data=e,n}}class e1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.fields=e,e.sort(Mt.comparator)}static empty(){return new Mn([])}unionWith(e){let n=new jt(Mt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Mn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return cl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new eA("Invalid base64 string: "+i):i}}(e);return new Vt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Vt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const IV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ti(t){if(Ue(!!t),typeof t=="string"){let e=0;const n=IV.exec(t);if(Ue(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ut(t.seconds),nanos:ut(t.nanos)}}function ut(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Lo(t){return typeof t=="string"?Vt.fromBase64String(t):Vt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Ix(t){const e=t.mapValue.fields.__previous_value__;return Sx(e)?Ix(e):e}function Tu(t){const e=Ti(t.mapValue.fields.__local_write_time__.timestampValue);return new kt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Su{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Su("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Su&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh={mapValue:{}};function Vo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Sx(t)?4:PV(t)?9007199254740991:AV(t)?10:11:fe()}function Ur(t,e){if(t===e)return!0;const n=Vo(t);if(n!==Vo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Tu(t).isEqual(Tu(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Ti(s.timestampValue),a=Ti(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Lo(s.bytesValue).isEqual(Lo(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return ut(s.geoPointValue.latitude)===ut(i.geoPointValue.latitude)&&ut(s.geoPointValue.longitude)===ut(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return ut(s.integerValue)===ut(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=ut(s.doubleValue),a=ut(i.doubleValue);return o===a?Uf(o)===Uf(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return cl(t.arrayValue.values||[],e.arrayValue.values||[],Ur);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Jk(o)!==Jk(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ur(o[l],a[l])))return!1;return!0}(t,e);default:return fe()}}function Iu(t,e){return(t.values||[]).find(n=>Ur(n,e))!==void 0}function ul(t,e){if(t===e)return 0;const n=Vo(t),r=Vo(e);if(n!==r)return Me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Me(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=ut(i.integerValue||i.doubleValue),l=ut(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return t1(t.timestampValue,e.timestampValue);case 4:return t1(Tu(t),Tu(e));case 5:return Me(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Lo(i),l=Lo(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Me(a[c],l[c]);if(u!==0)return u}return Me(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Me(ut(i.latitude),ut(o.latitude));return a!==0?a:Me(ut(i.longitude),ut(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return n1(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,u;const f=i.fields||{},m=o.fields||{},p=(a=f.value)===null||a===void 0?void 0:a.arrayValue,y=(l=m.value)===null||l===void 0?void 0:l.arrayValue,v=Me(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((u=y==null?void 0:y.values)===null||u===void 0?void 0:u.length)||0);return v!==0?v:n1(p,y)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===fh.mapValue&&o===fh.mapValue)return 0;if(i===fh.mapValue)return 1;if(o===fh.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let f=0;f<l.length&&f<u.length;++f){const m=Me(l[f],u[f]);if(m!==0)return m;const p=ul(a[l[f]],c[u[f]]);if(p!==0)return p}return Me(l.length,u.length)}(t.mapValue,e.mapValue);default:throw fe()}}function t1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Me(t,e);const n=Ti(t),r=Ti(e),s=Me(n.seconds,r.seconds);return s!==0?s:Me(n.nanos,r.nanos)}function n1(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ul(n[s],r[s]);if(i)return i}return Me(n.length,r.length)}function dl(t){return _y(t)}function _y(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ti(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Lo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return le.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=_y(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${_y(n.fields[o])}`;return s+"}"}(t.mapValue):fe()}function r1(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function by(t){return!!t&&"integerValue"in t}function Cx(t){return!!t&&"arrayValue"in t}function s1(t){return!!t&&"nullValue"in t}function i1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Gh(t){return!!t&&"mapValue"in t}function AV(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function zc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return qo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=zc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=zc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function PV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.value=e}static empty(){return new bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Gh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=zc(n)}setAll(e){let n=Mt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=zc(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Gh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ur(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Gh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){qo(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new bn(zc(this.value))}}function tA(t){const e=[];return qo(t.fields,(n,r)=>{const s=new Mt([n]);if(Gh(r)){const i=tA(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Mn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Qt(e,0,me.min(),me.min(),me.min(),bn.empty(),0)}static newFoundDocument(e,n,r,s){return new Qt(e,1,n,me.min(),r,s,0)}static newNoDocument(e,n){return new Qt(e,2,n,me.min(),me.min(),bn.empty(),0)}static newUnknownDocument(e,n){return new Qt(e,3,n,me.min(),me.min(),bn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,n){this.position=e,this.inclusive=n}}function o1(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=le.comparator(le.fromName(o.referenceValue),n.key):r=ul(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function a1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ur(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e,n="asc"){this.field=e,this.dir=n}}function NV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{}class yt extends nA{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new MV(e,n,r):n==="array-contains"?new OV(e,r):n==="in"?new LV(e,r):n==="not-in"?new VV(e,r):n==="array-contains-any"?new FV(e,r):new yt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new DV(e,r):new jV(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ul(n,this.value)):n!==null&&Vo(this.value)===Vo(n)&&this.matchesComparison(ul(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yr extends nA{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new yr(e,n)}matches(e){return rA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function rA(t){return t.op==="and"}function sA(t){return RV(t)&&rA(t)}function RV(t){for(const e of t.filters)if(e instanceof yr)return!1;return!0}function wy(t){if(t instanceof yt)return t.field.canonicalString()+t.op.toString()+dl(t.value);if(sA(t))return t.filters.map(e=>wy(e)).join(",");{const e=t.filters.map(n=>wy(n)).join(",");return`${t.op}(${e})`}}function iA(t,e){return t instanceof yt?function(r,s){return s instanceof yt&&r.op===s.op&&r.field.isEqual(s.field)&&Ur(r.value,s.value)}(t,e):t instanceof yr?function(r,s){return s instanceof yr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&iA(o,s.filters[a]),!0):!1}(t,e):void fe()}function oA(t){return t instanceof yt?function(n){return`${n.field.canonicalString()} ${n.op} ${dl(n.value)}`}(t):t instanceof yr?function(n){return n.op.toString()+" {"+n.getFilters().map(oA).join(" ,")+"}"}(t):"Filter"}class MV extends yt{constructor(e,n,r){super(e,n,r),this.key=le.fromName(r.referenceValue)}matches(e){const n=le.comparator(e.key,this.key);return this.matchesComparison(n)}}class DV extends yt{constructor(e,n){super(e,"in",n),this.keys=aA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class jV extends yt{constructor(e,n){super(e,"not-in",n),this.keys=aA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function aA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>le.fromName(r.referenceValue))}class OV extends yt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Cx(n)&&Iu(n.arrayValue,this.value)}}class LV extends yt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Iu(this.value.arrayValue,n)}}class VV extends yt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Iu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Iu(this.value.arrayValue,n)}}class FV extends yt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Cx(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Iu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function l1(t,e=null,n=[],r=[],s=null,i=null,o=null){return new UV(t,e,n,r,s,i,o)}function Ax(t){const e=ye(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>wy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Wm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>dl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>dl(r)).join(",")),e.ue=n}return e.ue}function Px(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!NV(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!iA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!a1(t.startAt,e.startAt)&&a1(t.endAt,e.endAt)}function ky(t){return le.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function BV(t,e,n,r,s,i,o,a){return new Nl(t,e,n,r,s,i,o,a)}function Nx(t){return new Nl(t)}function c1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function lA(t){return t.collectionGroup!==null}function $c(t){const e=ye(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new jt(Mt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Cu(i,r))}),n.has(Mt.keyField().canonicalString())||e.ce.push(new Cu(Mt.keyField(),r))}return e.ce}function Mr(t){const e=ye(t);return e.le||(e.le=zV(e,$c(t))),e.le}function zV(t,e){if(t.limitType==="F")return l1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Cu(s.field,i)});const n=t.endAt?new Bf(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Bf(t.startAt.position,t.startAt.inclusive):null;return l1(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ey(t,e){const n=t.filters.concat([e]);return new Nl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ty(t,e,n){return new Nl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Hm(t,e){return Px(Mr(t),Mr(e))&&t.limitType===e.limitType}function cA(t){return`${Ax(Mr(t))}|lt:${t.limitType}`}function oa(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>oA(s)).join(", ")}]`),Wm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>dl(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>dl(s)).join(",")),`Target(${r})`}(Mr(t))}; limitType=${t.limitType})`}function qm(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):le.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of $c(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=o1(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,$c(r),s)||r.endAt&&!function(o,a,l){const c=o1(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,$c(r),s))}(t,e)}function $V(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function uA(t){return(e,n)=>{let r=!1;for(const s of $c(t)){const i=WV(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function WV(t,e,n){const r=t.field.isKeyField()?le.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?ul(l,c):fe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return fe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){qo(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return JC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HV=new rt(le.comparator);function xs(){return HV}const dA=new rt(le.comparator);function wc(...t){let e=dA;for(const n of t)e=e.insert(n.key,n);return e}function hA(t){let e=dA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ao(){return Wc()}function fA(){return Wc()}function Wc(){return new Rl(t=>t.toString(),(t,e)=>t.isEqual(e))}const qV=new rt(le.comparator),KV=new jt(le.comparator);function ke(...t){let e=KV;for(const n of t)e=e.add(n);return e}const GV=new jt(Me);function QV(){return GV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uf(e)?"-0":e}}function mA(t){return{integerValue:""+t}}function YV(t,e){return SV(e)?mA(e):Rx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(){this._=void 0}}function XV(t,e,n){return t instanceof zf?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Sx(i)&&(i=Ix(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Au?gA(t,e):t instanceof Pu?yA(t,e):function(s,i){const o=pA(s,i),a=u1(o)+u1(s.Pe);return by(o)&&by(s.Pe)?mA(a):Rx(s.serializer,a)}(t,e)}function ZV(t,e,n){return t instanceof Au?gA(t,e):t instanceof Pu?yA(t,e):n}function pA(t,e){return t instanceof $f?function(r){return by(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class zf extends Km{}class Au extends Km{constructor(e){super(),this.elements=e}}function gA(t,e){const n=vA(e);for(const r of t.elements)n.some(s=>Ur(s,r))||n.push(r);return{arrayValue:{values:n}}}class Pu extends Km{constructor(e){super(),this.elements=e}}function yA(t,e){let n=vA(e);for(const r of t.elements)n=n.filter(s=>!Ur(s,r));return{arrayValue:{values:n}}}class $f extends Km{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function u1(t){return ut(t.integerValue||t.doubleValue)}function vA(t){return Cx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function JV(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Au&&s instanceof Au||r instanceof Pu&&s instanceof Pu?cl(r.elements,s.elements,Ur):r instanceof $f&&s instanceof $f?Ur(r.Pe,s.Pe):r instanceof zf&&s instanceof zf}(t.transform,e.transform)}class e5{constructor(e,n){this.version=e,this.transformResults=n}}class Zn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Zn}static exists(e){return new Zn(void 0,e)}static updateTime(e){return new Zn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Gm{}function xA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Mx(t.key,Zn.none()):new dd(t.key,t.data,Zn.none());{const n=t.data,r=bn.empty();let s=new jt(Mt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Oi(t.key,r,new Mn(s.toArray()),Zn.none())}}function t5(t,e,n){t instanceof dd?function(s,i,o){const a=s.value.clone(),l=h1(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Oi?function(s,i,o){if(!Qh(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=h1(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(_A(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Hc(t,e,n,r){return t instanceof dd?function(i,o,a,l){if(!Qh(i.precondition,o))return a;const c=i.value.clone(),u=f1(i.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Oi?function(i,o,a,l){if(!Qh(i.precondition,o))return a;const c=f1(i.fieldTransforms,l,o),u=o.data;return u.setAll(_A(i)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return Qh(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function n5(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=pA(r.transform,s||null);i!=null&&(n===null&&(n=bn.empty()),n.set(r.field,i))}return n||null}function d1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&cl(r,s,(i,o)=>JV(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class dd extends Gm{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Oi extends Gm{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function _A(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function h1(t,e,n){const r=new Map;Ue(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,ZV(o,a,n[s]))}return r}function f1(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,XV(i,o,e))}return r}class Mx extends Gm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class r5 extends Gm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&t5(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Hc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Hc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=fA();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=xA(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(me.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ke())}isEqual(e){return this.batchId===e.batchId&&cl(this.mutations,e.mutations,(n,r)=>d1(n,r))&&cl(this.baseMutations,e.baseMutations,(n,r)=>d1(n,r))}}class Dx{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ue(e.mutations.length===r.length);let s=function(){return qV}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Dx(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft,Ce;function a5(t){switch(t){default:return fe();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0}}function bA(t){if(t===void 0)return vs("GRPC error has no .code"),U.UNKNOWN;switch(t){case ft.OK:return U.OK;case ft.CANCELLED:return U.CANCELLED;case ft.UNKNOWN:return U.UNKNOWN;case ft.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case ft.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case ft.INTERNAL:return U.INTERNAL;case ft.UNAVAILABLE:return U.UNAVAILABLE;case ft.UNAUTHENTICATED:return U.UNAUTHENTICATED;case ft.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case ft.NOT_FOUND:return U.NOT_FOUND;case ft.ALREADY_EXISTS:return U.ALREADY_EXISTS;case ft.PERMISSION_DENIED:return U.PERMISSION_DENIED;case ft.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case ft.ABORTED:return U.ABORTED;case ft.OUT_OF_RANGE:return U.OUT_OF_RANGE;case ft.UNIMPLEMENTED:return U.UNIMPLEMENTED;case ft.DATA_LOSS:return U.DATA_LOSS;default:return fe()}}(Ce=ft||(ft={}))[Ce.OK=0]="OK",Ce[Ce.CANCELLED=1]="CANCELLED",Ce[Ce.UNKNOWN=2]="UNKNOWN",Ce[Ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ce[Ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ce[Ce.NOT_FOUND=5]="NOT_FOUND",Ce[Ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ce[Ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ce[Ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ce[Ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ce[Ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ce[Ce.ABORTED=10]="ABORTED",Ce[Ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ce[Ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ce[Ce.INTERNAL=13]="INTERNAL",Ce[Ce.UNAVAILABLE=14]="UNAVAILABLE",Ce[Ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c5=new Eo([4294967295,4294967295],0);function m1(t){const e=l5().encode(t),n=new HC;return n.update(e),new Uint8Array(n.digest())}function p1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Eo([n,r],0),new Eo([s,i],0)]}class jx{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new kc(`Invalid padding: ${n}`);if(r<0)throw new kc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new kc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new kc(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Eo.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Eo.fromNumber(r)));return s.compare(c5)===1&&(s=new Eo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=m1(e),[r,s]=p1(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new jx(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=m1(e),[r,s]=p1(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class kc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,hd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Qm(me.min(),s,new rt(Me),xs(),ke())}}class hd{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new hd(r,n,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class wA{constructor(e,n){this.targetId=e,this.me=n}}class kA{constructor(e,n,r=Vt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class g1{constructor(){this.fe=0,this.ge=v1(),this.pe=Vt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ke(),n=ke(),r=ke();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:fe()}}),new hd(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=v1()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ue(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class u5{constructor(e){this.Le=e,this.Be=new Map,this.ke=xs(),this.qe=y1(),this.Qe=new rt(Me)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:fe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(ky(i))if(r===0){const o=new le(i.path);this.Ue(n,o,Qt.newNoDocument(o,me.min()))}else Ue(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Lo(r).toUint8Array()}catch(l){if(l instanceof eA)return ll("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new jx(o,s,i)}catch(l){return ll(l instanceof kc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&ky(a.target)){const l=new le(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Qt.newNoDocument(l,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ke();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Qm(e,n,this.Qe,this.ke,r);return this.ke=xs(),this.qe=y1(),this.Qe=new rt(Me),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new g1,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new jt(Me),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ne("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new g1),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function y1(){return new rt(le.comparator)}function v1(){return new rt(le.comparator)}const d5={asc:"ASCENDING",desc:"DESCENDING"},h5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},f5={and:"AND",or:"OR"};class m5{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Sy(t,e){return t.useProto3Json||Wm(e)?e:{value:e}}function Wf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function EA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function p5(t,e){return Wf(t,e.toTimestamp())}function Dr(t){return Ue(!!t),me.fromTimestamp(function(n){const r=Ti(n);return new kt(r.seconds,r.nanos)}(t))}function Ox(t,e){return Iy(t,e).canonicalString()}function Iy(t,e){const n=function(s){return new Ge(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function TA(t){const e=Ge.fromString(t);return Ue(PA(e)),e}function Cy(t,e){return Ox(t.databaseId,e.path)}function Sg(t,e){const n=TA(e);if(n.get(1)!==t.databaseId.projectId)throw new X(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new X(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new le(IA(n))}function SA(t,e){return Ox(t.databaseId,e)}function g5(t){const e=TA(t);return e.length===4?Ge.emptyPath():IA(e)}function Ay(t){return new Ge(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function IA(t){return Ue(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function x1(t,e,n){return{name:Cy(t,e),fields:n.value.mapValue.fields}}function y5(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:fe()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(Ue(u===void 0||typeof u=="string"),Vt.fromBase64String(u||"")):(Ue(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Vt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?U.UNKNOWN:bA(c.code);return new X(u,c.message||"")}(o);n=new kA(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Sg(t,r.document.name),i=Dr(r.document.updateTime),o=r.document.createTime?Dr(r.document.createTime):me.min(),a=new bn({mapValue:{fields:r.document.fields}}),l=Qt.newFoundDocument(s,i,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Yh(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Sg(t,r.document),i=r.readTime?Dr(r.readTime):me.min(),o=Qt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Yh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Sg(t,r.document),i=r.removedTargetIds||[];n=new Yh([],i,s,null)}else{if(!("filter"in e))return fe();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new o5(s,i),a=r.targetId;n=new wA(a,o)}}return n}function v5(t,e){let n;if(e instanceof dd)n={update:x1(t,e.key,e.value)};else if(e instanceof Mx)n={delete:Cy(t,e.key)};else if(e instanceof Oi)n={update:x1(t,e.key,e.data),updateMask:I5(e.fieldMask)};else{if(!(e instanceof r5))return fe();n={verify:Cy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof zf)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Au)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Pu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof $f)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw fe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:p5(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:fe()}(t,e.precondition)),n}function x5(t,e){return t&&t.length>0?(Ue(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Dr(s.updateTime):Dr(i);return o.isEqual(me.min())&&(o=Dr(i)),new e5(o,s.transformResults||[])}(n,e))):[]}function _5(t,e){return{documents:[SA(t,e.path)]}}function b5(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=SA(t,s);const i=function(c){if(c.length!==0)return AA(yr.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(u=>function(m){return{field:aa(m.field),direction:E5(m.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Sy(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function w5(t){let e=g5(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ue(r===1);const u=n.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];n.where&&(i=function(f){const m=CA(f);return m instanceof yr&&sA(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(y){return new Cu(la(y.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,Wm(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(f){const m=!!f.before,p=f.values||[];return new Bf(p,m)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const m=!f.before,p=f.values||[];return new Bf(p,m)}(n.endAt)),BV(e,s,o,i,a,"F",l,c)}function k5(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function CA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=la(n.unaryFilter.field);return yt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=la(n.unaryFilter.field);return yt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=la(n.unaryFilter.field);return yt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=la(n.unaryFilter.field);return yt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return fe()}}(t):t.fieldFilter!==void 0?function(n){return yt.create(la(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return yr.create(n.compositeFilter.filters.map(r=>CA(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return fe()}}(n.compositeFilter.op))}(t):fe()}function E5(t){return d5[t]}function T5(t){return h5[t]}function S5(t){return f5[t]}function aa(t){return{fieldPath:t.canonicalString()}}function la(t){return Mt.fromServerFormat(t.fieldPath)}function AA(t){return t instanceof yt?function(n){if(n.op==="=="){if(i1(n.value))return{unaryFilter:{field:aa(n.field),op:"IS_NAN"}};if(s1(n.value))return{unaryFilter:{field:aa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(i1(n.value))return{unaryFilter:{field:aa(n.field),op:"IS_NOT_NAN"}};if(s1(n.value))return{unaryFilter:{field:aa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:aa(n.field),op:T5(n.op),value:n.value}}}(t):t instanceof yr?function(n){const r=n.getFilters().map(s=>AA(s));return r.length===1?r[0]:{compositeFilter:{op:S5(n.op),filters:r}}}(t):fe()}function I5(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function PA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e,n,r,s,i=me.min(),o=me.min(),a=Vt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ti(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ti(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{constructor(e){this.ct=e}}function A5(t){const e=w5({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ty(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(){this.un=new N5}addToCollectionParentIndex(e,n){return this.un.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Ei.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Ei.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class N5{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new jt(Ge.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new jt(Ge.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new hl(0)}static kn(){return new hl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{constructor(){this.changes=new Rl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Qt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Hc(r.mutation,s,Mn.empty(),kt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ke()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ke()){const s=ao();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=wc();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ao();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ke()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=xs();const o=Wc(),a=function(){return Wc()}();return n.forEach((l,c)=>{const u=r.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof Oi)?i=i.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),Hc(u.mutation,c,u.mutation.getFieldMask(),kt.now())):o.set(c.key,Mn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var f;return a.set(c,new M5(u,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Wc();let s=new rt((o,a)=>o-a),i=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||Mn.empty();u=a.applyToLocalView(c,u),r.set(l,u);const f=(s.get(a.batchId)||ke()).add(l);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,f=fA();u.forEach(m=>{if(!i.has(m)){const p=xA(n.get(m),r.get(m));p!==null&&f.set(m,p),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return B.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return le.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):lA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):B.resolve(ao());let a=-1,l=i;return o.next(c=>B.forEach(c,(u,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(u)?B.resolve():this.remoteDocumentCache.getEntry(e,u).next(m=>{l=l.insert(u,m)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,ke())).next(u=>({batchId:a,changes:hA(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new le(n)).next(r=>{let s=wc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=wc();return this.indexManager.getCollectionParents(e,i).next(a=>B.forEach(a,l=>{const c=function(f,m){return new Nl(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(u=>{u.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Qt.newInvalidDocument(u)))});let a=wc();return o.forEach((l,c)=>{const u=i.get(l);u!==void 0&&Hc(u.mutation,c,Mn.empty(),kt.now()),qm(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return B.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Dr(s.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:A5(s.bundledQuery),readTime:Dr(s.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(){this.overlays=new rt(le.comparator),this.Ir=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ao();return B.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const s=ao(),i=n.length+1,o=new le(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return B.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new rt((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=i.get(c.largestBatchId);u===null&&(u=ao(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=ao(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return B.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new i5(n,r));let i=this.Ir.get(n);i===void 0&&(i=ke(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(){this.Tr=new jt(Tt.Er),this.dr=new jt(Tt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Tt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Tt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new le(new Ge([])),r=new Tt(n,e),s=new Tt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new le(new Ge([])),r=new Tt(n,e),s=new Tt(n,e+1);let i=ke();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Tt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Tt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return le.comparator(e.key,n.key)||Me(e.wr,n.wr)}static Ar(e,n){return Me(e.wr,n.wr)||le.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new jt(Tt.Er)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new s5(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new Tt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return B.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Tt(n,0),s=new Tt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),B.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new jt(Me);return n.forEach(s=>{const i=new Tt(s,0),o=new Tt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),B.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;le.isDocumentKey(i)||(i=i.child(""));const o=new Tt(new le(i),0);let a=new jt(Me);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.wr)),!0)},o),B.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ue(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return B.forEach(n.mutations,s=>{const i=new Tt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Tt(n,0),s=this.br.firstAfterOrEqual(r);return B.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{constructor(e){this.Mr=e,this.docs=function(){return new rt(le.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():Qt.newInvalidDocument(n))}getEntries(e,n){let r=xs();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Qt.newInvalidDocument(s))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=xs();const o=n.path,a=new le(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||wV(bV(u),r)<=0||(s.has(u.key)||qm(n,u))&&(i=i.insert(u.key,u.mutableCopy()))}return B.resolve(i)}getAllFromCollectionGroup(e,n,r,s){fe()}Or(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new U5(this)}getSize(e){return B.resolve(this.size)}}class U5 extends R5{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(e){this.persistence=e,this.Nr=new Rl(n=>Ax(n),Px),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Lx,this.targetCount=0,this.kr=hl.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),B.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new hl(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Kn(n),B.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),B.waitFor(i).next(()=>s)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),B.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Tx(0),this.Kr=!1,this.Kr=!0,this.$r=new L5,this.referenceDelegate=e(this),this.Ur=new B5(this),this.indexManager=new P5,this.remoteDocumentCache=function(s){return new F5(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new C5(n),this.Gr=new j5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new O5,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new V5(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ne("MemoryPersistence","Starting transaction:",e);const s=new $5(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return B.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class $5 extends EV{constructor(e){super(),this.currentSequenceNumber=e}}class Vx{constructor(e){this.persistence=e,this.Jr=new Lx,this.Yr=null}static Zr(e){return new Vx(e)}get Xr(){if(this.Yr)return this.Yr;throw fe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),B.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Xr,r=>{const s=le.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,me.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return B.or([()=>B.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ke(),s=ke();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Fx(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return G4()?8:TV(Jt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new W5;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(oc()<=Se.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",oa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),B.resolve()):(oc()<=Se.DEBUG&&ne("QueryEngine","Query:",oa(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(oc()<=Se.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",oa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mr(n))):B.resolve())}Yi(e,n){if(c1(n))return B.resolve(null);let r=Mr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Ty(n,null,"F"),r=Mr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ke(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,Ty(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,s){return c1(n)||s.isEqual(me.min())?B.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?B.resolve(null):(oc()<=Se.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),oa(n)),this.rs(e,o,n,_V(s,-1)).next(a=>a))})}ts(e,n){let r=new jt(uA(e));return n.forEach((s,i)=>{qm(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return oc()<=Se.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",oa(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ei.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new rt(Me),this._s=new Rl(i=>Ax(i),Px),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new D5(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function K5(t,e,n,r){return new q5(t,e,n,r)}async function NA(t,e){const n=ye(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=ke();for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function G5(t,e){const n=ye(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const f=c.batch,m=f.keys();let p=B.resolve();return m.forEach(y=>{p=p.next(()=>u.getEntry(l,y)).next(v=>{const E=c.docVersions.get(y);Ue(E!==null),v.version.compareTo(E)<0&&(f.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),u.addEntry(v)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ke();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function RA(t){const e=ye(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Q5(t,e){const n=ye(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((u,f)=>{const m=s.get(f);if(!m)return;a.push(n.Ur.removeMatchingKeys(i,u.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(i,u.addedDocuments,f)));let p=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?p=p.withResumeToken(Vt.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,r)),s=s.insert(f,p),function(v,E,x){return v.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(m,p,u)&&a.push(n.Ur.updateTargetData(i,p))});let l=xs(),c=ke();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(Y5(i,o,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!r.isEqual(me.min())){const u=n.Ur.getLastRemoteSnapshotVersion(i).next(f=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(u)}return B.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.os=s,i))}function Y5(t,e,n){let r=ke(),s=ke();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=xs();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(me.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ne("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function X5(t,e){const n=ye(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Z5(t,e){const n=ye(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,B.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new ti(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Py(t,e,n){const r=ye(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ud(o))throw o;ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function _1(t,e,n){const r=ye(t);let s=me.min(),i=ke();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const f=ye(l),m=f._s.get(u);return m!==void 0?B.resolve(f.os.get(m)):f.Ur.getTargetData(c,u)}(r,o,Mr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:me.min(),n?i:ke())).next(a=>(J5(r,$V(e),a),{documents:a,Ts:i})))}function J5(t,e,n){let r=t.us.get(e)||me.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class b1{constructor(){this.activeTargetIds=QV()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class e6{constructor(){this.so=new b1,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new b1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mh=null;function Ig(){return mh===null?mh=function(){return 268435456+Math.round(2147483648*Math.random())}():mh++,"0x"+mh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt="WebChannelConnection";class s6 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=Ig(),l=this.xo(n,r.toUriEncodedString());ne("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,o),this.No(n,l,c,s).then(u=>(ne("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw ll("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",s),u})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Pl}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=n6[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Ig();return new Promise((o,a)=>{const l=new qC;l.setWithCredentials(!0),l.listenOnce(KC.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Kh.NO_ERROR:const u=l.getResponseJson();ne(Wt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(u)),o(u);break;case Kh.TIMEOUT:ne(Wt,`RPC '${e}' ${i} timed out`),a(new X(U.DEADLINE_EXCEEDED,"Request time out"));break;case Kh.HTTP_ERROR:const f=l.getStatus();if(ne(Wt,`RPC '${e}' ${i} failed with status:`,f,"response text:",l.getResponseText()),f>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const p=m==null?void 0:m.error;if(p&&p.status&&p.message){const y=function(E){const x=E.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(x)>=0?x:U.UNKNOWN}(p.status);a(new X(y,p.message))}else a(new X(U.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new X(U.UNAVAILABLE,"Connection failed."));break;default:fe()}}finally{ne(Wt,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);ne(Wt,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=Ig(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=YC(),a=QC(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=i.join("");ne(Wt,`Creating RPC '${e}' stream ${s}: ${u}`,l);const f=o.createWebChannel(u,l);let m=!1,p=!1;const y=new r6({Io:E=>{p?ne(Wt,`Not sending because RPC '${e}' stream ${s} is closed:`,E):(m||(ne(Wt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),ne(Wt,`RPC '${e}' stream ${s} sending:`,E),f.send(E))},To:()=>f.close()}),v=(E,x,_)=>{E.listen(x,w=>{try{_(w)}catch(P){setTimeout(()=>{throw P},0)}})};return v(f,bc.EventType.OPEN,()=>{p||(ne(Wt,`RPC '${e}' stream ${s} transport opened.`),y.yo())}),v(f,bc.EventType.CLOSE,()=>{p||(p=!0,ne(Wt,`RPC '${e}' stream ${s} transport closed`),y.So())}),v(f,bc.EventType.ERROR,E=>{p||(p=!0,ll(Wt,`RPC '${e}' stream ${s} transport errored:`,E),y.So(new X(U.UNAVAILABLE,"The operation could not be completed")))}),v(f,bc.EventType.MESSAGE,E=>{var x;if(!p){const _=E.data[0];Ue(!!_);const w=_,P=w.error||((x=w[0])===null||x===void 0?void 0:x.error);if(P){ne(Wt,`RPC '${e}' stream ${s} received error:`,P);const C=P.status;let R=function(S){const I=ft[S];if(I!==void 0)return bA(I)}(C),T=P.message;R===void 0&&(R=U.INTERNAL,T="Unknown error status: "+C+" with message "+P.message),p=!0,y.So(new X(R,T)),f.close()}else ne(Wt,`RPC '${e}' stream ${s} received:`,_),y.bo(_)}}),v(a,GC.STAT_EVENT,E=>{E.stat===xy.PROXY?ne(Wt,`RPC '${e}' stream ${s} detected buffering proxy`):E.stat===xy.NOPROXY&&ne(Wt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}function Cg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(t){return new m5(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&ne("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e,n,r,s,i,o,a,l){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new MA(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(vs(n.toString()),vs("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new X(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class i6 extends DA{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=y5(this.serializer,e),r=function(i){if(!("targetChange"in i))return me.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?me.min():o.readTime?Dr(o.readTime):me.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Ay(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=ky(l)?{documents:_5(i,l)}:{query:b5(i,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=EA(i,o.resumeToken);const c=Sy(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(me.min())>0){a.readTime=Wf(i,o.snapshotVersion.toTimestamp());const c=Sy(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=k5(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Ay(this.serializer),n.removeTarget=e,this.a_(n)}}class o6 extends DA{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ue(!!e.streamToken),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ue(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=x5(e.writeResults,e.commitTime),r=Dr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Ay(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>v5(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6 extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new X(U.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Iy(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new X(U.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Iy(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new X(U.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class l6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(vs(n),this.D_=!1):ne("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ko(this)&&(ne("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ye(l);c.L_.add(4),await fd(c),c.q_.set("Unknown"),c.L_.delete(4),await Xm(c)}(this))})}),this.q_=new l6(r,s)}}async function Xm(t){if(Ko(t))for(const e of t.B_)await e(!0)}async function fd(t){for(const e of t.B_)await e(!1)}function jA(t,e){const n=ye(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),$x(n)?zx(n):Ml(n).r_()&&Bx(n,e))}function Ux(t,e){const n=ye(t),r=Ml(n);n.N_.delete(e),r.r_()&&OA(n,e),n.N_.size===0&&(r.r_()?r.o_():Ko(n)&&n.q_.set("Unknown"))}function Bx(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(me.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ml(t).A_(e)}function OA(t,e){t.Q_.xe(e),Ml(t).R_(e)}function zx(t){t.Q_=new u5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ml(t).start(),t.q_.v_()}function $x(t){return Ko(t)&&!Ml(t).n_()&&t.N_.size>0}function Ko(t){return ye(t).L_.size===0}function LA(t){t.Q_=void 0}async function u6(t){t.q_.set("Online")}async function d6(t){t.N_.forEach((e,n)=>{Bx(t,e)})}async function h6(t,e){LA(t),$x(t)?(t.q_.M_(e),zx(t)):t.q_.set("Unknown")}async function f6(t,e,n){if(t.q_.set("Online"),e instanceof kA&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Hf(t,r)}else if(e instanceof Yh?t.Q_.Ke(e):e instanceof wA?t.Q_.He(e):t.Q_.We(e),!n.isEqual(me.min()))try{const r=await RA(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.N_.get(c);u&&i.N_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=i.N_.get(l);if(!u)return;i.N_.set(l,u.withResumeToken(Vt.EMPTY_BYTE_STRING,u.snapshotVersion)),OA(i,l);const f=new ti(u.target,l,c,u.sequenceNumber);Bx(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ne("RemoteStore","Failed to raise snapshot:",r),await Hf(t,r)}}async function Hf(t,e,n){if(!ud(e))throw e;t.L_.add(1),await fd(t),t.q_.set("Offline"),n||(n=()=>RA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ne("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Xm(t)})}function VA(t,e){return e().catch(n=>Hf(t,n,e))}async function Zm(t){const e=ye(t),n=Si(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;m6(e);)try{const s=await X5(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,p6(e,s)}catch(s){await Hf(e,s)}FA(e)&&UA(e)}function m6(t){return Ko(t)&&t.O_.length<10}function p6(t,e){t.O_.push(e);const n=Si(t);n.r_()&&n.V_&&n.m_(e.mutations)}function FA(t){return Ko(t)&&!Si(t).n_()&&t.O_.length>0}function UA(t){Si(t).start()}async function g6(t){Si(t).p_()}async function y6(t){const e=Si(t);for(const n of t.O_)e.m_(n.mutations)}async function v6(t,e,n){const r=t.O_.shift(),s=Dx.from(r,e,n);await VA(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Zm(t)}async function x6(t,e){e&&Si(t).V_&&await async function(r,s){if(function(o){return a5(o)&&o!==U.ABORTED}(s.code)){const i=r.O_.shift();Si(r).s_(),await VA(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Zm(r)}}(t,e),FA(t)&&UA(t)}async function k1(t,e){const n=ye(t);n.asyncQueue.verifyOperationInProgress(),ne("RemoteStore","RemoteStore received new credentials");const r=Ko(n);n.L_.add(3),await fd(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Xm(n)}async function _6(t,e){const n=ye(t);e?(n.L_.delete(2),await Xm(n)):e||(n.L_.add(2),await fd(n),n.q_.set("Unknown"))}function Ml(t){return t.K_||(t.K_=function(n,r,s){const i=ye(n);return i.w_(),new i6(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:u6.bind(null,t),Ro:d6.bind(null,t),mo:h6.bind(null,t),d_:f6.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),$x(t)?zx(t):t.q_.set("Unknown")):(await t.K_.stop(),LA(t))})),t.K_}function Si(t){return t.U_||(t.U_=function(n,r,s){const i=ye(n);return i.w_(),new o6(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:g6.bind(null,t),mo:x6.bind(null,t),f_:y6.bind(null,t),g_:v6.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Zm(t)):(await t.U_.stop(),t.O_.length>0&&(ne("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new us,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Wx(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hx(t,e){if(vs("AsyncQueue",`${e}: ${t}`),ud(t))return new X(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e){this.comparator=e?(n,r)=>e(n,r)||le.comparator(n.key,r.key):(n,r)=>le.comparator(n.key,r.key),this.keyedMap=wc(),this.sortedSet=new rt(this.comparator)}static emptySet(e){return new ja(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ja)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ja;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(){this.W_=new rt(le.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):fe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class fl{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new fl(e,n,ja.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class w6{constructor(){this.queries=T1(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ye(n),i=s.queries;s.queries=T1(),i.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new X(U.ABORTED,"Firestore shutting down"))}}function T1(){return new Rl(t=>cA(t),Hm)}async function BA(t,e){const n=ye(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new b6,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Hx(o,`Initialization of query '${oa(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&qx(n)}async function zA(t,e){const n=ye(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function k6(t,e){const n=ye(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&qx(n)}function E6(t,e,n){const r=ye(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function qx(t){t.Y_.forEach(e=>{e.next()})}var Ny,S1;(S1=Ny||(Ny={})).ea="default",S1.Cache="cache";class $A{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new fl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=fl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Ny.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e){this.key=e}}class HA{constructor(e){this.key=e}}class T6{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ke(),this.mutatedKeys=ke(),this.Aa=uA(e),this.Ra=new ja(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new E1,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,f)=>{const m=s.get(u),p=qm(this.query,f)?f:null,y=!!m&&this.mutatedKeys.has(m.key),v=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let E=!1;m&&p?m.data.isEqual(p.data)?y!==v&&(r.track({type:3,doc:p}),E=!0):this.ga(m,p)||(r.track({type:2,doc:p}),E=!0,(l&&this.Aa(p,l)>0||c&&this.Aa(p,c)<0)&&(a=!0)):!m&&p?(r.track({type:0,doc:p}),E=!0):m&&!p&&(r.track({type:1,doc:m}),E=!0,(l||c)&&(a=!0)),E&&(p?(o=o.add(p),i=v?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),r.track({type:1,doc:u})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((u,f)=>function(p,y){const v=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe()}};return v(p)-v(y)}(u.type,f.type)||this.Aa(u.doc,f.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new fl(this.query,e.Ra,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new E1,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ke(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new HA(r))}),this.da.forEach(r=>{e.has(r)||n.push(new WA(r))}),n}ba(e){this.Ta=e.Ts,this.da=ke();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return fl.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class S6{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class I6{constructor(e){this.key=e,this.va=!1}}class C6{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Rl(a=>cA(a),Hm),this.Ma=new Map,this.xa=new Set,this.Oa=new rt(le.comparator),this.Na=new Map,this.La=new Lx,this.Ba={},this.ka=new Map,this.qa=hl.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function A6(t,e,n=!0){const r=XA(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await qA(r,e,n,!0),s}async function P6(t,e){const n=XA(t);await qA(n,e,!0,!1)}async function qA(t,e,n,r){const s=await Z5(t.localStore,Mr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await N6(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&jA(t.remoteStore,s),a}async function N6(t,e,n,r,s){t.Ka=(f,m,p)=>async function(v,E,x,_){let w=E.view.ma(x);w.ns&&(w=await _1(v.localStore,E.query,!1).then(({documents:T})=>E.view.ma(T,w)));const P=_&&_.targetChanges.get(E.targetId),C=_&&_.targetMismatches.get(E.targetId)!=null,R=E.view.applyChanges(w,v.isPrimaryClient,P,C);return C1(v,E.targetId,R.wa),R.snapshot}(t,f,m,p);const i=await _1(t.localStore,e,!0),o=new T6(e,i.Ts),a=o.ma(i.documents),l=hd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);C1(t,n,c.wa);const u=new S6(e,n,o);return t.Fa.set(e,u),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function R6(t,e,n){const r=ye(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Hm(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Py(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Ux(r.remoteStore,s.targetId),Ry(r,s.targetId)}).catch(cd)):(Ry(r,s.targetId),await Py(r.localStore,s.targetId,!0))}async function M6(t,e){const n=ye(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ux(n.remoteStore,r.targetId))}async function D6(t,e,n){const r=B6(t);try{const s=await function(o,a){const l=ye(o),c=kt.now(),u=a.reduce((p,y)=>p.add(y.key),ke());let f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let y=xs(),v=ke();return l.cs.getEntries(p,u).next(E=>{y=E,y.forEach((x,_)=>{_.isValidDocument()||(v=v.add(x))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,y)).next(E=>{f=E;const x=[];for(const _ of a){const w=n5(_,f.get(_.key).overlayedDocument);w!=null&&x.push(new Oi(_.key,w,tA(w.value.mapValue),Zn.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,x,a)}).next(E=>{m=E;const x=E.applyToLocalDocumentSet(f,v);return l.documentOverlayCache.saveOverlays(p,E.batchId,x)})}).then(()=>({batchId:m.batchId,changes:hA(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new rt(Me)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,s.batchId,n),await md(r,s.changes),await Zm(r.remoteStore)}catch(s){const i=Hx(s,"Failed to persist write");n.reject(i)}}async function KA(t,e){const n=ye(t);try{const r=await Q5(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(Ue(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Ue(o.va):s.removedDocuments.size>0&&(Ue(o.va),o.va=!1))}),await md(n,r,e)}catch(r){await cd(r)}}function I1(t,e,n){const r=ye(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=ye(o);l.onlineState=a;let c=!1;l.queries.forEach((u,f)=>{for(const m of f.j_)m.Z_(a)&&(c=!0)}),c&&qx(l)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function j6(t,e,n){const r=ye(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new rt(le.comparator);o=o.insert(i,Qt.newNoDocument(i,me.min()));const a=ke().add(i),l=new Qm(me.min(),new Map,new rt(Me),o,a);await KA(r,l),r.Oa=r.Oa.remove(i),r.Na.delete(e),Kx(r)}else await Py(r.localStore,e,!1).then(()=>Ry(r,e,n)).catch(cd)}async function O6(t,e){const n=ye(t),r=e.batch.batchId;try{const s=await G5(n.localStore,e);QA(n,r,null),GA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await md(n,s)}catch(s){await cd(s)}}async function L6(t,e,n){const r=ye(t);try{const s=await function(o,a){const l=ye(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(Ue(f!==null),u=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);QA(r,e,n),GA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await md(r,s)}catch(s){await cd(s)}}function GA(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function QA(t,e,n){const r=ye(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Ry(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||YA(t,r)})}function YA(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Ux(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Kx(t))}function C1(t,e,n){for(const r of n)r instanceof WA?(t.La.addReference(r.key,e),V6(t,r)):r instanceof HA?(ne("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||YA(t,r.key)):fe()}function V6(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ne("SyncEngine","New document in limbo: "+n),t.xa.add(r),Kx(t))}function Kx(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new le(Ge.fromString(e)),r=t.qa.next();t.Na.set(r,new I6(n)),t.Oa=t.Oa.insert(n,r),jA(t.remoteStore,new ti(Mr(Nx(n.path)),r,"TargetPurposeLimboResolution",Tx.oe))}}async function md(t,e,n){const r=ye(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var u;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){s.push(c);const f=Fx.Wi(l.targetId,c);i.push(f)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(l,c){const u=ye(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>B.forEach(c,m=>B.forEach(m.$i,p=>u.persistence.referenceDelegate.addReference(f,m.targetId,p)).next(()=>B.forEach(m.Ui,p=>u.persistence.referenceDelegate.removeReference(f,m.targetId,p)))))}catch(f){if(!ud(f))throw f;ne("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const m=f.targetId;if(!f.fromCache){const p=u.os.get(m),y=p.snapshotVersion,v=p.withLastLimboFreeSnapshotVersion(y);u.os=u.os.insert(m,v)}}}(r.localStore,i))}async function F6(t,e){const n=ye(t);if(!n.currentUser.isEqual(e)){ne("SyncEngine","User change. New user:",e.toKey());const r=await NA(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(l=>{l.reject(new X(U.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await md(n,r.hs)}}function U6(t,e){const n=ye(t),r=n.Na.get(e);if(r&&r.va)return ke().add(r.key);{let s=ke();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function XA(t){const e=ye(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=KA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=U6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=j6.bind(null,e),e.Ca.d_=k6.bind(null,e.eventManager),e.Ca.$a=E6.bind(null,e.eventManager),e}function B6(t){const e=ye(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=O6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=L6.bind(null,e),e}class qf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ym(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return K5(this.persistence,new H5,e.initialUser,this.serializer)}Ga(e){return new z5(Vx.Zr,this.serializer)}Wa(e){return new e6}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qf.provider={build:()=>new qf};class My{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>I1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=F6.bind(null,this.syncEngine),await _6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new w6}()}createDatastore(e){const n=Ym(e.databaseInfo.databaseId),r=function(i){return new s6(i)}(e.databaseInfo);return function(i,o,a,l){return new a6(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new c6(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>I1(this.syncEngine,n,0),function(){return w1.D()?new w1:new t6}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,u){const f=new C6(s,i,o,a,l,c);return u&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ye(s);ne("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await fd(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}My.provider={build:()=>new My};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):vs("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Kt.UNAUTHENTICATED,this.clientId=ZC.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{ne("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ne("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new us;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Hx(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ag(t,e){t.asyncQueue.verifyOperationInProgress(),ne("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await NA(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function A1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await $6(t);ne("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>k1(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>k1(e.remoteStore,s)),t._onlineComponents=e}async function $6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ne("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ag(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ll("Error using user provided cache. Falling back to memory cache: "+n),await Ag(t,new qf)}}else ne("FirestoreClient","Using default OfflineComponentProvider"),await Ag(t,new qf);return t._offlineComponents}async function JA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ne("FirestoreClient","Using user provided OnlineComponentProvider"),await A1(t,t._uninitializedComponentsProvider._online)):(ne("FirestoreClient","Using default OnlineComponentProvider"),await A1(t,new My))),t._onlineComponents}function W6(t){return JA(t).then(e=>e.syncEngine)}async function eP(t){const e=await JA(t),n=e.eventManager;return n.onListen=A6.bind(null,e.syncEngine),n.onUnlisten=R6.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=P6.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=M6.bind(null,e.syncEngine),n}function H6(t,e,n={}){const r=new us;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const u=new ZA({next:m=>{u.Za(),o.enqueueAndForget(()=>zA(i,f));const p=m.docs.has(a);!p&&m.fromCache?c.reject(new X(U.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&m.fromCache&&l&&l.source==="server"?c.reject(new X(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new $A(Nx(a.path),u,{includeMetadataChanges:!0,_a:!0});return BA(i,f)}(await eP(t),t.asyncQueue,e,n,r)),r.promise}function q6(t,e,n={}){const r=new us;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const u=new ZA({next:m=>{u.Za(),o.enqueueAndForget(()=>zA(i,f)),m.fromCache&&l.source==="server"?c.reject(new X(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new $A(a,u,{includeMetadataChanges:!0,_a:!0});return BA(i,f)}(await eP(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tP(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nP(t,e,n){if(!n)throw new X(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function K6(t,e,n,r){if(e===!0&&r===!0)throw new X(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function N1(t){if(!le.isDocumentKey(t))throw new X(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function R1(t){if(le.isDocumentKey(t))throw new X(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Jm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fe()}function vr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Jm(t);throw new X(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new X(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new X(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}K6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new X(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new X(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new X(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ep{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new M1({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new X(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new X(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new M1(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new dV;switch(r.type){case"firstParty":return new pV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=P1.get(n);r&&(ne("ComponentProvider","Removing Datastore"),P1.delete(n),r.terminate())}(this),Promise.resolve()}}function G6(t,e,n,r={}){var s;const i=(t=vr(t,ep))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&ll("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Kt.MOCK_USER;else{a=B4(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new X(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Kt(c)}t._authCredentials=new hV(new XC(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Go(this.firestore,e,this._query)}}class hn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new hn(this.firestore,e,this._key)}}class yi extends Go{constructor(e,n,r){super(e,n,Nx(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new hn(this.firestore,null,new le(e))}withConverter(e){return new yi(this.firestore,e,this._path)}}function Ii(t,e,...n){if(t=Lt(t),nP("collection","path",e),t instanceof ep){const r=Ge.fromString(e,...n);return R1(r),new yi(t,null,r)}{if(!(t instanceof hn||t instanceof yi))throw new X(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ge.fromString(e,...n));return R1(r),new yi(t.firestore,null,r)}}function pn(t,e,...n){if(t=Lt(t),arguments.length===1&&(e=ZC.newId()),nP("doc","path",e),t instanceof ep){const r=Ge.fromString(e,...n);return N1(r),new hn(t,null,new le(r))}{if(!(t instanceof hn||t instanceof yi))throw new X(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ge.fromString(e,...n));return N1(r),new hn(t.firestore,t instanceof yi?t.converter:null,new le(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new MA(this,"async_queue_retry"),this.Vu=()=>{const r=Cg();r&&ne("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Cg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Cg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new us;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ud(e))throw e;ne("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw vs("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Wx.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&fe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Qo extends ep{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new D1,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new D1(e),this._firestoreClient=void 0,await e}}}function Q6(t,e){const n=typeof t=="object"?t:zC(),r=typeof t=="string"?t:"(default)",s=kx(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=F4("firestore");i&&G6(s,...i)}return s}function Gx(t){if(t._terminated)throw new X(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Y6(t),t._firestoreClient}function Y6(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,u){return new CV(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,tP(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new z6(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ml(Vt.fromBase64String(e))}catch(n){throw new X(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ml(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new X(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X6=/^__.*__$/;class Z6{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Oi(e,this.data,this.fieldMask,n,this.fieldTransforms):new dd(e,this.data,n,this.fieldTransforms)}}class rP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Oi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function sP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe()}}class Zx{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Zx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Kf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(sP(this.Cu)&&X6.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class J6{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ym(e)}Qu(e,n,r,s=!1){return new Zx({Cu:e,methodName:n,qu:r,path:Mt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function np(t){const e=t._freezeSettings(),n=Ym(t._databaseId);return new J6(t._databaseId,!!e.ignoreUndefinedProperties,n)}function iP(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Jx("Data must be an object, but it was:",o,r);const a=oP(r,o);let l,c;if(i.merge)l=new Mn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const u=[];for(const f of i.mergeFields){const m=Dy(e,f,n);if(!o.contains(m))throw new X(U.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);lP(u,m)||u.push(m)}l=new Mn(u),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new Z6(new bn(a),l,c)}class rp extends Qx{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rp}}function eF(t,e,n,r){const s=t.Qu(1,e,n);Jx("Data must be an object, but it was:",s,r);const i=[],o=bn.empty();qo(r,(l,c)=>{const u=e_(e,l,n);c=Lt(c);const f=s.Nu(u);if(c instanceof rp)i.push(u);else{const m=pd(c,f);m!=null&&(i.push(u),o.set(u,m))}});const a=new Mn(i);return new rP(o,a,s.fieldTransforms)}function tF(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[Dy(e,r,n)],l=[s];if(i.length%2!=0)throw new X(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)a.push(Dy(e,i[m])),l.push(i[m+1]);const c=[],u=bn.empty();for(let m=a.length-1;m>=0;--m)if(!lP(c,a[m])){const p=a[m];let y=l[m];y=Lt(y);const v=o.Nu(p);if(y instanceof rp)c.push(p);else{const E=pd(y,v);E!=null&&(c.push(p),u.set(p,E))}}const f=new Mn(c);return new rP(u,f,o.fieldTransforms)}function nF(t,e,n,r=!1){return pd(n,t.Qu(r?4:3,e))}function pd(t,e){if(aP(t=Lt(t)))return Jx("Unsupported field value:",e,t),oP(t,e);if(t instanceof Qx)return function(r,s){if(!sP(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=pd(a,s.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Lt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return YV(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=kt.fromDate(r);return{timestampValue:Wf(s.serializer,i)}}if(r instanceof kt){const i=new kt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wf(s.serializer,i)}}if(r instanceof Yx)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ml)return{bytesValue:EA(s.serializer,r._byteString)};if(r instanceof hn){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ox(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Xx)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Rx(a.serializer,l)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Jm(r)}`)}(t,e)}function oP(t,e){const n={};return JC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qo(t,(r,s)=>{const i=pd(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function aP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof kt||t instanceof Yx||t instanceof ml||t instanceof hn||t instanceof Qx||t instanceof Xx)}function Jx(t,e,n){if(!aP(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Jm(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Dy(t,e,n){if((e=Lt(e))instanceof tp)return e._internalPath;if(typeof e=="string")return e_(t,e);throw Kf("Field path arguments must be of type string or ",t,!1,void 0,n)}const rF=new RegExp("[~\\*/\\[\\]]");function e_(t,e,n){if(e.search(rF)>=0)throw Kf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new tp(...e.split("."))._internalPath}catch{throw Kf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Kf(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new X(U.INVALID_ARGUMENT,a+t+l)}function lP(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new hn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(t_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class sF extends cP{data(){return super.data()}}function t_(t,e){return typeof e=="string"?e_(t,e):e instanceof tp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new X(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class n_{}class uP extends n_{}function r_(t,e,...n){let r=[];e instanceof n_&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof i_).length,a=i.filter(l=>l instanceof s_).length;if(o>1||o>0&&a>0)throw new X(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class s_ extends uP{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new s_(e,n,r)}_apply(e){const n=this._parse(e);return dP(e._query,n),new Go(e.firestore,e.converter,Ey(e._query,n))}_parse(e){const n=np(e.firestore);return function(i,o,a,l,c,u,f){let m;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new X(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){O1(f,u);const p=[];for(const y of f)p.push(j1(l,i,y));m={arrayValue:{values:p}}}else m=j1(l,i,f)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||O1(f,u),m=nF(a,o,f,u==="in"||u==="not-in");return yt.create(c,u,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class i_ extends n_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new i_(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:yr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)dP(o,l),o=Ey(o,l)}(e._query,n),new Go(e.firestore,e.converter,Ey(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class o_ extends uP{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new o_(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new X(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new X(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Cu(i,o)}(e._query,this._field,this._direction);return new Go(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Nl(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function a_(t,e="asc"){const n=e,r=t_("orderBy",t);return o_._create(r,n)}function j1(t,e,n){if(typeof(n=Lt(n))=="string"){if(n==="")throw new X(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lA(e)&&n.indexOf("/")!==-1)throw new X(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ge.fromString(n));if(!le.isDocumentKey(r))throw new X(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return r1(t,new le(r))}if(n instanceof hn)return r1(t,n._key);throw new X(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jm(n)}.`)}function O1(t,e){if(!Array.isArray(t)||t.length===0)throw new X(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function dP(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new X(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new X(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class oF{convertValue(e,n="none"){switch(Vo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Lo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw fe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return qo(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>ut(o.doubleValue));return new Xx(i)}convertGeoPoint(e){return new Yx(ut(e.latitude),ut(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ix(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Tu(e));default:return null}}convertTimestamp(e){const n=Ti(e);return new kt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ge.fromString(e);Ue(PA(r));const s=new Su(r.get(1),r.get(3)),i=new le(r.popFirst(5));return s.isEqual(n)||vs(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hP(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fP extends cP{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Xh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(t_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Xh extends fP{data(e={}){return super.data(e)}}class aF{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ec(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Xh(this._firestore,this._userDataWriter,r.key,r,new Ec(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Xh(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ec(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Xh(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ec(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:lF(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function lF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(t){t=vr(t,hn);const e=vr(t.firestore,Qo);return H6(Gx(e),t._key).then(n=>cF(e,t,n))}class mP extends oF{constructor(e){super(),this.firestore=e}convertBytes(e){return new ml(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new hn(this.firestore,null,n)}}function gd(t){t=vr(t,Go);const e=vr(t.firestore,Qo),n=Gx(e),r=new mP(e);return iF(t._query),q6(n,t._query).then(s=>new aF(e,r,t,s))}function Yo(t,e,n){t=vr(t,hn);const r=vr(t.firestore,Qo),s=hP(t.converter,e,n);return sp(r,[iP(np(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Zn.none())])}function pP(t,e,n,...r){t=vr(t,hn);const s=vr(t.firestore,Qo),i=np(s);let o;return o=typeof(e=Lt(e))=="string"||e instanceof tp?tF(i,"updateDoc",t._key,e,n,r):eF(i,"updateDoc",t._key,e),sp(s,[o.toMutation(t._key,Zn.exists(!0))])}function gP(t){return sp(vr(t.firestore,Qo),[new Mx(t._key,Zn.none())])}function c_(t,e){const n=vr(t.firestore,Qo),r=pn(t),s=hP(t.converter,e);return sp(n,[iP(np(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Zn.exists(!1))]).then(()=>r)}function sp(t,e){return function(r,s){const i=new us;return r.asyncQueue.enqueueAndForget(async()=>D6(await W6(r),s,i)),i.promise}(Gx(t),e)}function cF(t,e,n){const r=n.docs.get(e._key),s=new mP(t);return new fP(t,s,e._key,r,new Ec(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Pl=s})(Al),al(new jo("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Qo(new fV(r.getProvider("auth-internal")),new yV(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new X(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Su(c.options.projectId,u)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),gi(Zk,"4.7.3",e),gi(Zk,"4.7.3","esm2017")})();var uF="firebase",dF="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gi(uF,dF,"app");function u_(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function yP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const hF=yP,vP=new ad("auth","Firebase",yP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf=new bx("@firebase/auth");function fF(t,...e){Gf.logLevel<=Se.WARN&&Gf.warn(`Auth (${Al}): ${t}`,...e)}function Zh(t,...e){Gf.logLevel<=Se.ERROR&&Gf.error(`Auth (${Al}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(t,...e){throw d_(t,...e)}function jr(t,...e){return d_(t,...e)}function xP(t,e,n){const r=Object.assign(Object.assign({},hF()),{[e]:n});return new ad("auth","Firebase",r).create(e,{appName:t.name})}function ds(t){return xP(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function d_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return vP.create(t,...e)}function ue(t,e,...n){if(!t)throw d_(e,...n)}function ss(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Zh(e),new Error(e)}function _s(t,e){t||ss(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function mF(){return L1()==="http:"||L1()==="https:"}function L1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mF()||H4()||"connection"in navigator)?navigator.onLine:!0}function gF(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,n){this.shortDelay=e,this.longDelay=n,_s(n>e,"Short delay should be less than long delay!"),this.isMobile=z4()||q4()}get(){return pF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(t,e){_s(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ss("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ss("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ss("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vF=new yd(3e4,6e4);function Ss(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Br(t,e,n,r,s={}){return bP(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=ld(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return W4()||(c.referrerPolicy="no-referrer"),_P.fetch()(wP(t,t.config.apiHost,n,a),c)})}async function bP(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},yF),e);try{const s=new _F(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw ph(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ph(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw ph(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw ph(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw xP(t,u,c);xr(t,u)}}catch(s){if(s instanceof Ts)throw s;xr(t,"network-request-failed",{message:String(s)})}}async function vd(t,e,n,r,s={}){const i=await Br(t,e,n,r,s);return"mfaPendingCredential"in i&&xr(t,"multi-factor-auth-required",{_serverResponse:i}),i}function wP(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?h_(t.config,s):`${t.config.apiScheme}://${s}`}function xF(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _F{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(jr(this.auth,"network-request-failed")),vF.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ph(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=jr(t,e,r);return s.customData._tokenResponse=n,s}function V1(t){return t!==void 0&&t.enterprise!==void 0}class bF{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return xF(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function wF(t,e){return Br(t,"GET","/v2/recaptchaConfig",Ss(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kF(t,e){return Br(t,"POST","/v1/accounts:delete",e)}async function kP(t,e){return Br(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function EF(t,e=!1){const n=Lt(t),r=await n.getIdToken(e),s=f_(r);ue(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:qc(Pg(s.auth_time)),issuedAtTime:qc(Pg(s.iat)),expirationTime:qc(Pg(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Pg(t){return Number(t)*1e3}function f_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Zh("JWT malformed, contained fewer than 3 sections"),null;try{const s=jC(n);return s?JSON.parse(s):(Zh("Failed to decode base64 JWT payload"),null)}catch(s){return Zh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function F1(t){const e=f_(t);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ts&&TF(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function TF({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=qc(this.lastLoginAt),this.creationTime=qc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qf(t){var e;const n=t.auth,r=await t.getIdToken(),s=await pl(t,kP(n,{idToken:r}));ue(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?EP(i.providerUserInfo):[],a=CF(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Oy(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function IF(t){const e=Lt(t);await Qf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function CF(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function EP(t){return t.map(e=>{var{providerId:n}=e,r=u_(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AF(t,e){const n=await bP(t,{},async()=>{const r=ld({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=wP(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",_P.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function PF(t,e){return Br(t,"POST","/v2/accounts:revokeToken",Ss(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):F1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ue(e.length!==0,"internal-error");const n=F1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await AF(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Oa;return r&&(ue(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ue(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ue(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Oa,this.toJSON())}_performRefresh(){return ss("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ns(t,e){ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class is{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=u_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new SF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Oy(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await pl(this,this.stsTokenManager.getToken(this.auth,e));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return EF(this,e)}reload(){return IF(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new is(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Qf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Pr(this.auth.app))return Promise.reject(ds(this.auth));const e=await this.getIdToken();return await pl(this,kF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,u;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,p=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,E=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,x=(c=n.createdAt)!==null&&c!==void 0?c:void 0,_=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:w,emailVerified:P,isAnonymous:C,providerData:R,stsTokenManager:T}=n;ue(w&&T,e,"internal-error");const k=Oa.fromJSON(this.name,T);ue(typeof w=="string",e,"internal-error"),Ns(f,e.name),Ns(m,e.name),ue(typeof P=="boolean",e,"internal-error"),ue(typeof C=="boolean",e,"internal-error"),Ns(p,e.name),Ns(y,e.name),Ns(v,e.name),Ns(E,e.name),Ns(x,e.name),Ns(_,e.name);const S=new is({uid:w,auth:e,email:m,emailVerified:P,displayName:f,isAnonymous:C,photoURL:y,phoneNumber:p,tenantId:v,stsTokenManager:k,createdAt:x,lastLoginAt:_});return R&&Array.isArray(R)&&(S.providerData=R.map(I=>Object.assign({},I))),E&&(S._redirectEventId=E),S}static async _fromIdTokenResponse(e,n,r=!1){const s=new Oa;s.updateFromServerResponse(n);const i=new is({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Qf(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ue(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?EP(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Oa;a.updateFromIdToken(r);const l=new is({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Oy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1=new Map;function os(t){_s(t instanceof Function,"Expected a class definition");let e=U1.get(t);return e?(_s(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,U1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}TP.type="NONE";const B1=TP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(t,e,n){return`firebase:${t}:${e}:${n}`}class La{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Jh(this.userKey,s.apiKey,i),this.fullPersistenceKey=Jh("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?is._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new La(os(B1),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||os(B1);const o=Jh(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const f=is._fromJSON(e,u);c!==i&&(a=f),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new La(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new La(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(AP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(SP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(NP(e))return"Blackberry";if(RP(e))return"Webos";if(IP(e))return"Safari";if((e.includes("chrome/")||CP(e))&&!e.includes("edge/"))return"Chrome";if(PP(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function SP(t=Jt()){return/firefox\//i.test(t)}function IP(t=Jt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function CP(t=Jt()){return/crios\//i.test(t)}function AP(t=Jt()){return/iemobile/i.test(t)}function PP(t=Jt()){return/android/i.test(t)}function NP(t=Jt()){return/blackberry/i.test(t)}function RP(t=Jt()){return/webos/i.test(t)}function m_(t=Jt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function NF(t=Jt()){var e;return m_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function RF(){return K4()&&document.documentMode===10}function MP(t=Jt()){return m_(t)||PP(t)||RP(t)||NP(t)||/windows phone/i.test(t)||AP(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(t,e=[]){let n;switch(t){case"Browser":n=z1(Jt());break;case"Worker":n=`${z1(Jt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Al}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DF(t,e={}){return Br(t,"GET","/v2/passwordPolicy",Ss(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jF=6;class OF{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:jF,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $1(this),this.idTokenSubscription=new $1(this),this.beforeStateQueue=new MF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=os(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await La.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await kP(this,{idToken:e}),r=await is._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Pr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Qf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=gF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Pr(this.app))return Promise.reject(ds(this));const n=e?Lt(e):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Pr(this.app)?Promise.reject(ds(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Pr(this.app)?Promise.reject(ds(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(os(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await DF(this),n=new OF(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ad("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await PF(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&os(e)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=await La.create(this,[os(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=DP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&fF(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Li(t){return Lt(t)}class $1{constructor(e){this.auth=e,this.observer=null,this.addObserver=tL(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ip={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function VF(t){ip=t}function jP(t){return ip.loadJS(t)}function FF(){return ip.recaptchaEnterpriseScript}function UF(){return ip.gapiScript}function BF(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const zF="recaptcha-enterprise",$F="NO_RECAPTCHA";class WF{constructor(e){this.type=zF,this.auth=Li(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{wF(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new bF(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;V1(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o($F)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&V1(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=FF();l.length!==0&&(l+=a),jP(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function W1(t,e,n,r=!1){const s=new WF(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Yf(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await W1(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await W1(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HF(t,e){const n=kx(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Vf(i,e??{}))return s;xr(s,"already-initialized")}return n.initialize({options:e})}function qF(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(os);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function KF(t,e,n){const r=Li(t);ue(r._canInitEmulator,r,"emulator-config-failed"),ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=OP(e),{host:o,port:a}=GF(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),QF()}function OP(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function GF(t){const e=OP(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:H1(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:H1(o)}}}function H1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function QF(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ss("not implemented")}_getIdTokenResponse(e){return ss("not implemented")}_linkToIdToken(e,n){return ss("not implemented")}_getReauthenticationResolver(e){return ss("not implemented")}}async function YF(t,e){return Br(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XF(t,e){return vd(t,"POST","/v1/accounts:signInWithPassword",Ss(t,e))}async function ZF(t,e){return Br(t,"POST","/v1/accounts:sendOobCode",Ss(t,e))}async function JF(t,e){return ZF(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e3(t,e){return vd(t,"POST","/v1/accounts:signInWithEmailLink",Ss(t,e))}async function t3(t,e){return vd(t,"POST","/v1/accounts:signInWithEmailLink",Ss(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu extends p_{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Nu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Nu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yf(e,n,"signInWithPassword",XF);case"emailLink":return e3(e,{email:this._email,oobCode:this._password});default:xr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yf(e,r,"signUpPassword",YF);case"emailLink":return t3(e,{idToken:n,email:this._email,oobCode:this._password});default:xr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Va(t,e){return vd(t,"POST","/v1/accounts:signInWithIdp",Ss(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3="http://localhost";class Fo extends p_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Fo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):xr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=u_(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Fo(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Va(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Va(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Va(e,n)}buildRequest(){const e={requestUri:n3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ld(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r3(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function s3(t){const e=xc(_c(t)).link,n=e?xc(_c(e)).deep_link_id:null,r=xc(_c(t)).deep_link_id;return(r?xc(_c(r)).link:null)||r||n||e||t}class g_{constructor(e){var n,r,s,i,o,a;const l=xc(_c(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,f=r3((s=l.mode)!==null&&s!==void 0?s:null);ue(c&&u&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=u,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=s3(e);try{return new g_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(){this.providerId=Dl.PROVIDER_ID}static credential(e,n){return Nu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=g_.parseLink(n);return ue(r,"argument-error"),Nu._fromEmailAndCode(e,r.code,r.tenantId)}}Dl.PROVIDER_ID="password";Dl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Dl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd extends LP{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us extends xd{constructor(){super("facebook.com")}static credential(e){return Fo._fromParams({providerId:Us.PROVIDER_ID,signInMethod:Us.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Us.credentialFromTaggedObject(e)}static credentialFromError(e){return Us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Us.credential(e.oauthAccessToken)}catch{return null}}}Us.FACEBOOK_SIGN_IN_METHOD="facebook.com";Us.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends xd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Fo._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Bs.credentialFromTaggedObject(e)}static credentialFromError(e){return Bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Bs.credential(n,r)}catch{return null}}}Bs.GOOGLE_SIGN_IN_METHOD="google.com";Bs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs extends xd{constructor(){super("github.com")}static credential(e){return Fo._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zs.credentialFromTaggedObject(e)}static credentialFromError(e){return zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zs.credential(e.oauthAccessToken)}catch{return null}}}zs.GITHUB_SIGN_IN_METHOD="github.com";zs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s extends xd{constructor(){super("twitter.com")}static credential(e,n){return Fo._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return $s.credentialFromTaggedObject(e)}static credentialFromError(e){return $s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return $s.credential(n,r)}catch{return null}}}$s.TWITTER_SIGN_IN_METHOD="twitter.com";$s.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i3(t,e){return vd(t,"POST","/v1/accounts:signUp",Ss(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await is._fromIdTokenResponse(e,r,s),o=q1(r);return new Uo({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=q1(r);return new Uo({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function q1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf extends Ts{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Xf.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Xf(e,n,r,s)}}function VP(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Xf._fromErrorAndOperation(t,i,e,r):i})}async function o3(t,e,n=!1){const r=await pl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Uo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a3(t,e,n=!1){const{auth:r}=t;if(Pr(r.app))return Promise.reject(ds(r));const s="reauthenticate";try{const i=await pl(t,VP(r,s,e,t),n);ue(i.idToken,r,"internal-error");const o=f_(i.idToken);ue(o,r,"internal-error");const{sub:a}=o;return ue(t.uid===a,r,"user-mismatch"),Uo._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&xr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FP(t,e,n=!1){if(Pr(t.app))return Promise.reject(ds(t));const r="signIn",s=await VP(t,r,e),i=await Uo._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function l3(t,e){return FP(Li(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c3(t,e,n){var r;ue(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),ue(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ue(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(ue(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UP(t){const e=Li(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function u3(t,e,n){const r=Li(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&c3(r,s,n),await Yf(r,s,"getOobCode",JF)}async function d3(t,e,n){if(Pr(t.app))return Promise.reject(ds(t));const r=Li(t),o=await Yf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",i3).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&UP(t),l}),a=await Uo._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function h3(t,e,n){return Pr(t.app)?Promise.reject(ds(t)):l3(Lt(t),Dl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&UP(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f3(t,e){return Br(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m3(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Lt(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await pl(r,f3(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function p3(t,e,n,r){return Lt(t).onIdTokenChanged(e,n,r)}function g3(t,e,n){return Lt(t).beforeAuthStateChanged(e,n)}const Zf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Zf,"1"),this.storage.removeItem(Zf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y3=1e3,v3=10;class zP extends BP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=MP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);RF()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,v3):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},y3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}zP.type="LOCAL";const x3=zP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P extends BP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}$P.type="SESSION";const WP=$P;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _3(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new op(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await _3(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}op.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=y_("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(u),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Or(){return window}function w3(t){Or().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(){return typeof Or().WorkerGlobalScope<"u"&&typeof Or().importScripts=="function"}async function k3(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function E3(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function T3(){return HP()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qP="firebaseLocalStorageDb",S3=1,Jf="firebaseLocalStorage",KP="fbase_key";class _d{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ap(t,e){return t.transaction([Jf],e?"readwrite":"readonly").objectStore(Jf)}function I3(){const t=indexedDB.deleteDatabase(qP);return new _d(t).toPromise()}function Ly(){const t=indexedDB.open(qP,S3);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Jf,{keyPath:KP})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Jf)?e(r):(r.close(),await I3(),e(await Ly()))})})}async function K1(t,e,n){const r=ap(t,!0).put({[KP]:e,value:n});return new _d(r).toPromise()}async function C3(t,e){const n=ap(t,!1).get(e),r=await new _d(n).toPromise();return r===void 0?null:r.value}function G1(t,e){const n=ap(t,!0).delete(e);return new _d(n).toPromise()}const A3=800,P3=3;class GP{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ly(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>P3)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return HP()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=op._getInstance(T3()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await k3(),!this.activeServiceWorker)return;this.sender=new b3(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||E3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ly();return await K1(e,Zf,"1"),await G1(e,Zf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>K1(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>C3(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>G1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=ap(s,!1).getAll();return new _d(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),A3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}GP.type="LOCAL";const N3=GP;new yd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R3(t,e){return e?os(e):(ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_ extends p_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Va(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Va(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Va(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function M3(t){return FP(t.auth,new v_(t),t.bypassAuthState)}function D3(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),a3(n,new v_(t),t.bypassAuthState)}async function j3(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),o3(n,new v_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return M3;case"linkViaPopup":case"linkViaRedirect":return j3;case"reauthViaPopup":case"reauthViaRedirect":return D3;default:xr(this.auth,"internal-error")}}resolve(e){_s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O3=new yd(2e3,1e4);class wa extends QP{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,wa.currentPopupAction&&wa.currentPopupAction.cancel(),wa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){_s(this.filter.length===1,"Popup operations only handle one event");const e=y_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(jr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(jr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,wa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(jr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,O3.get())};e()}}wa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L3="pendingRedirect",ef=new Map;class V3 extends QP{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ef.get(this.auth._key());if(!e){try{const r=await F3(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ef.set(this.auth._key(),e)}return this.bypassAuthState||ef.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function F3(t,e){const n=z3(e),r=B3(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function U3(t,e){ef.set(t._key(),e)}function B3(t){return os(t._redirectPersistence)}function z3(t){return Jh(L3,t.config.apiKey,t.name)}async function $3(t,e,n=!1){if(Pr(t.app))return Promise.reject(ds(t));const r=Li(t),s=R3(r,e),o=await new V3(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W3=10*60*1e3;class H3{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!q3(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!YP(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(jr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=W3&&this.cachedEventUids.clear(),this.cachedEventUids.has(Q1(e))}saveEventToCache(e){this.cachedEventUids.add(Q1(e)),this.lastProcessedEventTime=Date.now()}}function Q1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function YP({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function q3(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return YP(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K3(t,e={}){return Br(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Q3=/^https?/;async function Y3(t){if(t.config.emulator)return;const{authorizedDomains:e}=await K3(t);for(const n of e)try{if(X3(n))return}catch{}xr(t,"unauthorized-domain")}function X3(t){const e=jy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Q3.test(n))return!1;if(G3.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3=new yd(3e4,6e4);function Y1(){const t=Or().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function J3(t){return new Promise((e,n)=>{var r,s,i;function o(){Y1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Y1(),n(jr(t,"network-request-failed"))},timeout:Z3.get()})}if(!((s=(r=Or().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Or().gapi)===null||i===void 0)&&i.load)o();else{const a=BF("iframefcb");return Or()[a]=()=>{gapi.load?o():n(jr(t,"network-request-failed"))},jP(`${UF()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw tf=null,e})}let tf=null;function e9(t){return tf=tf||J3(t),tf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t9=new yd(5e3,15e3),n9="__/auth/iframe",r9="emulator/auth/iframe",s9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},i9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function o9(t){const e=t.config;ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?h_(e,r9):`https://${t.config.authDomain}/${n9}`,r={apiKey:e.apiKey,appName:t.name,v:Al},s=i9.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ld(r).slice(1)}`}async function a9(t){const e=await e9(t),n=Or().gapi;return ue(n,t,"internal-error"),e.open({where:document.body,url:o9(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:s9,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=jr(t,"network-request-failed"),a=Or().setTimeout(()=>{i(o)},t9.get());function l(){Or().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},c9=500,u9=600,d9="_blank",h9="http://localhost";class X1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function f9(t,e,n,r=c9,s=u9){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},l9),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Jt().toLowerCase();n&&(a=CP(c)?d9:n),SP(c)&&(e=e||h9,l.scrollbars="yes");const u=Object.entries(l).reduce((m,[p,y])=>`${m}${p}=${y},`,"");if(NF(c)&&a!=="_self")return m9(e||"",a),new X1(null);const f=window.open(e||"",a,u);ue(f,t,"popup-blocked");try{f.focus()}catch{}return new X1(f)}function m9(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p9="__/auth/handler",g9="emulator/auth/handler",y9=encodeURIComponent("fac");async function Z1(t,e,n,r,s,i){ue(t.config.authDomain,t,"auth-domain-config-required"),ue(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Al,eventId:s};if(e instanceof LP){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",eL(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,f]of Object.entries({}))o[u]=f}if(e instanceof xd){const u=e.getScopes().filter(f=>f!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${y9}=${encodeURIComponent(l)}`:"";return`${v9(t)}?${ld(a).slice(1)}${c}`}function v9({config:t}){return t.emulator?h_(t,g9):`https://${t.authDomain}/${p9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng="webStorageSupport";class x9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=WP,this._completeRedirectFn=$3,this._overrideRedirectResult=U3}async _openPopup(e,n,r,s){var i;_s((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Z1(e,n,r,jy(),s);return f9(e,o,y_())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Z1(e,n,r,jy(),s);return w3(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(_s(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await a9(e),r=new H3(e);return n.register("authEvent",s=>(ue(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ng,{type:Ng},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Ng];o!==void 0&&n(!!o),xr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Y3(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return MP()||IP()||m_()}}const _9=x9;var J1="@firebase/auth",eE="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w9(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function k9(t){al(new jo("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ue(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:DP(t)},c=new LF(r,s,i,l);return qF(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),al(new jo("auth-internal",e=>{const n=Li(e.getProvider("auth").getImmediate());return(r=>new b9(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),gi(J1,eE,w9(t)),gi(J1,eE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E9=5*60,T9=VC("authIdTokenMaxAge")||E9;let tE=null;const S9=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>T9)return;const s=n==null?void 0:n.token;tE!==s&&(tE=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function I9(t=zC()){const e=kx(t,"auth");if(e.isInitialized())return e.getImmediate();const n=HF(t,{popupRedirectResolver:_9,persistence:[N3,x3,WP]}),r=VC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=S9(i.toString());g3(n,o,()=>o(n.currentUser)),p3(n,a=>o(a))}}const s=OC("auth");return s&&KF(n,`http://${s}`),n}function C9(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}VF({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=jr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",C9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});k9("Browser");var De;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(De||(De={}));var nE;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(nE||(nE={}));const re=De.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ls=t=>{switch(typeof t){case"undefined":return re.undefined;case"string":return re.string;case"number":return Number.isNaN(t)?re.nan:re.number;case"boolean":return re.boolean;case"function":return re.function;case"bigint":return re.bigint;case"symbol":return re.symbol;case"object":return Array.isArray(t)?re.array:t===null?re.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?re.promise:typeof Map<"u"&&t instanceof Map?re.map:typeof Set<"u"&&t instanceof Set?re.set:typeof Date<"u"&&t instanceof Date?re.date:re.object;default:return re.unknown}},$=De.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class bs extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return s(this),r}static assert(e){if(!(e instanceof bs))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,De.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)if(s.path.length>0){const i=s.path[0];n[i]=n[i]||[],n[i].push(e(s))}else r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}bs.create=t=>new bs(t);const Vy=(t,e)=>{let n;switch(t.code){case $.invalid_type:t.received===re.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case $.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,De.jsonStringifyReplacer)}`;break;case $.unrecognized_keys:n=`Unrecognized key(s) in object: ${De.joinValues(t.keys,", ")}`;break;case $.invalid_union:n="Invalid input";break;case $.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${De.joinValues(t.options)}`;break;case $.invalid_enum_value:n=`Invalid enum value. Expected ${De.joinValues(t.options)}, received '${t.received}'`;break;case $.invalid_arguments:n="Invalid function arguments";break;case $.invalid_return_type:n="Invalid function return type";break;case $.invalid_date:n="Invalid date";break;case $.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:De.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case $.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case $.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case $.custom:n="Invalid input";break;case $.invalid_intersection_types:n="Intersection results could not be merged";break;case $.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case $.not_finite:n="Number must be finite";break;default:n=e.defaultError,De.assertNever(t)}return{message:n}};let A9=Vy;function P9(){return A9}const N9=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let a="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...s,path:i,message:a}};function G(t,e){const n=P9(),r=N9({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Vy?void 0:Vy].filter(s=>!!s)});t.common.issues.push(r)}class Ln{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return pe;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const i=await s.key,o=await s.value;r.push({key:i,value:o})}return Ln.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return pe;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const pe=Object.freeze({status:"aborted"}),Tc=t=>({status:"dirty",value:t}),sr=t=>({status:"valid",value:t}),rE=t=>t.status==="aborted",sE=t=>t.status==="dirty",gl=t=>t.status==="valid",em=t=>typeof Promise<"u"&&t instanceof Promise;var oe;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(oe||(oe={}));class Ci{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const iE=(t,e)=>{if(gl(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new bs(t.common.issues);return this._error=n,this._error}}};function xe(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>{const{message:l}=t;return o.code==="invalid_enum_value"?{message:l??a.defaultError}:typeof a.data>"u"?{message:l??r??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:l??n??a.defaultError}},description:s}}class Pe{get description(){return this._def.description}_getType(e){return Ls(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Ls(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ln,ctx:{common:e.parent.common,data:e.data,parsedType:Ls(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(em(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ls(e)},s=this._parseSync({data:e,path:r.path,parent:r});return iE(r,s)}"~validate"(e){var r,s;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ls(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:n});return gl(i)?{value:i.value}:{issues:n.common.issues}}catch(i){(s=(r=i==null?void 0:i.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(i=>gl(i)?{value:i.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ls(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(em(s)?s:Promise.resolve(s));return iE(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:$.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new zo({schema:this,typeName:ge.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return vi.create(this,this._def)}nullable(){return vl.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Lr.create(this)}promise(){return sm.create(this,this._def)}or(e){return nm.create([this,e],this._def)}and(e){return rm.create(this,e,this._def)}transform(e){return new zo({...xe(this._def),schema:this,typeName:ge.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Uy({...xe(this._def),innerType:this,defaultValue:n,typeName:ge.ZodDefault})}brand(){return new eU({typeName:ge.ZodBranded,type:this,...xe(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new By({...xe(this._def),innerType:this,catchValue:n,typeName:ge.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return x_.create(this,e)}readonly(){return zy.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const R9=/^c[^\s-]{8,}$/i,M9=/^[0-9a-z]+$/,D9=/^[0-9A-HJKMNP-TV-Z]{26}$/i,j9=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,O9=/^[a-z0-9_-]{21}$/i,L9=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,V9=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,F9=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,U9="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Rg;const B9=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,z9=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,$9=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,W9=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,H9=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,q9=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,XP="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",K9=new RegExp(`^${XP}$`);function ZP(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function G9(t){return new RegExp(`^${ZP(t)}$`)}function Q9(t){let e=`${XP}T${ZP(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function Y9(t,e){return!!((e==="v4"||!e)&&B9.test(t)||(e==="v6"||!e)&&$9.test(t))}function X9(t,e){if(!L9.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function Z9(t,e){return!!((e==="v4"||!e)&&z9.test(t)||(e==="v6"||!e)&&W9.test(t))}class ni extends Pe{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==re.string){const i=this._getOrReturnCtx(e);return G(i,{code:$.invalid_type,expected:re.string,received:i.parsedType}),pe}const r=new Ln;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),G(s,{code:$.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),G(s,{code:$.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?G(s,{code:$.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&G(s,{code:$.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")F9.test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{validation:"email",code:$.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")Rg||(Rg=new RegExp(U9,"u")),Rg.test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{validation:"emoji",code:$.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")j9.test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{validation:"uuid",code:$.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")O9.test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{validation:"nanoid",code:$.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")R9.test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{validation:"cuid",code:$.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")M9.test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{validation:"cuid2",code:$.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")D9.test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{validation:"ulid",code:$.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),G(s,{validation:"url",code:$.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{validation:"regex",code:$.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),G(s,{code:$.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),G(s,{code:$.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),G(s,{code:$.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?Q9(i).test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{code:$.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?K9.test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{code:$.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?G9(i).test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{code:$.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?V9.test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{validation:"duration",code:$.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?Y9(e.data,i.version)||(s=this._getOrReturnCtx(e,s),G(s,{validation:"ip",code:$.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?X9(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),G(s,{validation:"jwt",code:$.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?Z9(e.data,i.version)||(s=this._getOrReturnCtx(e,s),G(s,{validation:"cidr",code:$.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?H9.test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{validation:"base64",code:$.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?q9.test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{validation:"base64url",code:$.invalid_string,message:i.message}),r.dirty()):De.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:$.invalid_string,...oe.errToObj(r)})}_addCheck(e){return new ni({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...oe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...oe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...oe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...oe.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...oe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...oe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...oe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...oe.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...oe.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...oe.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...oe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...oe.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...oe.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...oe.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...oe.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...oe.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...oe.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...oe.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...oe.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...oe.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...oe.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...oe.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...oe.errToObj(n)})}nonempty(e){return this.min(1,oe.errToObj(e))}trim(){return new ni({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ni({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ni({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ni.create=t=>new ni({checks:[],typeName:ge.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...xe(t)});function J9(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=Number.parseInt(t.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return i%o/10**s}class Ru extends Pe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==re.number){const i=this._getOrReturnCtx(e);return G(i,{code:$.invalid_type,expected:re.number,received:i.parsedType}),pe}let r;const s=new Ln;for(const i of this._def.checks)i.kind==="int"?De.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),G(r,{code:$.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),G(r,{code:$.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),G(r,{code:$.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?J9(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),G(r,{code:$.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),G(r,{code:$.not_finite,message:i.message}),s.dirty()):De.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,oe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,oe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,oe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,oe.toString(n))}setLimit(e,n,r,s){return new Ru({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:oe.toString(s)}]})}_addCheck(e){return new Ru({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:oe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:oe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:oe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:oe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:oe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:oe.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:oe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:oe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:oe.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&De.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Ru.create=t=>new Ru({checks:[],typeName:ge.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...xe(t)});class Mu extends Pe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==re.bigint)return this._getInvalidInput(e);let r;const s=new Ln;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),G(r,{code:$.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),G(r,{code:$.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),G(r,{code:$.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):De.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return G(n,{code:$.invalid_type,expected:re.bigint,received:n.parsedType}),pe}gte(e,n){return this.setLimit("min",e,!0,oe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,oe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,oe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,oe.toString(n))}setLimit(e,n,r,s){return new Mu({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:oe.toString(s)}]})}_addCheck(e){return new Mu({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:oe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:oe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:oe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:oe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:oe.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Mu.create=t=>new Mu({checks:[],typeName:ge.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...xe(t)});class oE extends Pe{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==re.boolean){const r=this._getOrReturnCtx(e);return G(r,{code:$.invalid_type,expected:re.boolean,received:r.parsedType}),pe}return sr(e.data)}}oE.create=t=>new oE({typeName:ge.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...xe(t)});class tm extends Pe{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==re.date){const i=this._getOrReturnCtx(e);return G(i,{code:$.invalid_type,expected:re.date,received:i.parsedType}),pe}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return G(i,{code:$.invalid_date}),pe}const r=new Ln;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),G(s,{code:$.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),G(s,{code:$.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):De.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new tm({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:oe.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:oe.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}tm.create=t=>new tm({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:ge.ZodDate,...xe(t)});class aE extends Pe{_parse(e){if(this._getType(e)!==re.symbol){const r=this._getOrReturnCtx(e);return G(r,{code:$.invalid_type,expected:re.symbol,received:r.parsedType}),pe}return sr(e.data)}}aE.create=t=>new aE({typeName:ge.ZodSymbol,...xe(t)});class lE extends Pe{_parse(e){if(this._getType(e)!==re.undefined){const r=this._getOrReturnCtx(e);return G(r,{code:$.invalid_type,expected:re.undefined,received:r.parsedType}),pe}return sr(e.data)}}lE.create=t=>new lE({typeName:ge.ZodUndefined,...xe(t)});class cE extends Pe{_parse(e){if(this._getType(e)!==re.null){const r=this._getOrReturnCtx(e);return G(r,{code:$.invalid_type,expected:re.null,received:r.parsedType}),pe}return sr(e.data)}}cE.create=t=>new cE({typeName:ge.ZodNull,...xe(t)});class uE extends Pe{constructor(){super(...arguments),this._any=!0}_parse(e){return sr(e.data)}}uE.create=t=>new uE({typeName:ge.ZodAny,...xe(t)});class dE extends Pe{constructor(){super(...arguments),this._unknown=!0}_parse(e){return sr(e.data)}}dE.create=t=>new dE({typeName:ge.ZodUnknown,...xe(t)});class Ai extends Pe{_parse(e){const n=this._getOrReturnCtx(e);return G(n,{code:$.invalid_type,expected:re.never,received:n.parsedType}),pe}}Ai.create=t=>new Ai({typeName:ge.ZodNever,...xe(t)});class hE extends Pe{_parse(e){if(this._getType(e)!==re.undefined){const r=this._getOrReturnCtx(e);return G(r,{code:$.invalid_type,expected:re.void,received:r.parsedType}),pe}return sr(e.data)}}hE.create=t=>new hE({typeName:ge.ZodVoid,...xe(t)});class Lr extends Pe{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==re.array)return G(n,{code:$.invalid_type,expected:re.array,received:n.parsedType}),pe;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(G(n,{code:o?$.too_big:$.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(G(n,{code:$.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(G(n,{code:$.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new Ci(n,o,n.path,a)))).then(o=>Ln.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new Ci(n,o,n.path,a)));return Ln.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new Lr({...this._def,minLength:{value:e,message:oe.toString(n)}})}max(e,n){return new Lr({...this._def,maxLength:{value:e,message:oe.toString(n)}})}length(e,n){return new Lr({...this._def,exactLength:{value:e,message:oe.toString(n)}})}nonempty(e){return this.min(1,e)}}Lr.create=(t,e)=>new Lr({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ge.ZodArray,...xe(e)});function ca(t){if(t instanceof mt){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=vi.create(ca(r))}return new mt({...t._def,shape:()=>e})}else return t instanceof Lr?new Lr({...t._def,type:ca(t.element)}):t instanceof vi?vi.create(ca(t.unwrap())):t instanceof vl?vl.create(ca(t.unwrap())):t instanceof Bo?Bo.create(t.items.map(e=>ca(e))):t}class mt extends Pe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=De.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==re.object){const c=this._getOrReturnCtx(e);return G(c,{code:$.invalid_type,expected:re.object,received:c.parsedType}),pe}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Ai&&this._def.unknownKeys==="strip"))for(const c in s.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const u=i[c],f=s.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new Ci(s,f,s.path,c)),alwaysSet:c in s.data})}if(this._def.catchall instanceof Ai){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(c==="strict")a.length>0&&(G(s,{code:$.unrecognized_keys,keys:a}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const f=s.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new Ci(s,f,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const f=await u.key,m=await u.value;c.push({key:f,value:m,alwaysSet:u.alwaysSet})}return c}).then(c=>Ln.mergeObjectSync(r,c)):Ln.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return oe.errToObj,new mt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,o;const s=((o=(i=this._def).errorMap)==null?void 0:o.call(i,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:oe.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new mt({...this._def,unknownKeys:"strip"})}passthrough(){return new mt({...this._def,unknownKeys:"passthrough"})}extend(e){return new mt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new mt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ge.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new mt({...this._def,catchall:e})}pick(e){const n={};for(const r of De.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new mt({...this._def,shape:()=>n})}omit(e){const n={};for(const r of De.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new mt({...this._def,shape:()=>n})}deepPartial(){return ca(this)}partial(e){const n={};for(const r of De.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}return new mt({...this._def,shape:()=>n})}required(e){const n={};for(const r of De.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof vi;)i=i._def.innerType;n[r]=i}return new mt({...this._def,shape:()=>n})}keyof(){return JP(De.objectKeys(this.shape))}}mt.create=(t,e)=>new mt({shape:()=>t,unknownKeys:"strip",catchall:Ai.create(),typeName:ge.ZodObject,...xe(e)});mt.strictCreate=(t,e)=>new mt({shape:()=>t,unknownKeys:"strict",catchall:Ai.create(),typeName:ge.ZodObject,...xe(e)});mt.lazycreate=(t,e)=>new mt({shape:t,unknownKeys:"strip",catchall:Ai.create(),typeName:ge.ZodObject,...xe(e)});class nm extends Pe{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new bs(a.ctx.common.issues));return G(n,{code:$.invalid_union,unionErrors:o}),pe}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(l=>new bs(l));return G(n,{code:$.invalid_union,unionErrors:a}),pe}}get options(){return this._def.options}}nm.create=(t,e)=>new nm({options:t,typeName:ge.ZodUnion,...xe(e)});function Fy(t,e){const n=Ls(t),r=Ls(e);if(t===e)return{valid:!0,data:t};if(n===re.object&&r===re.object){const s=De.objectKeys(e),i=De.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const l=Fy(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===re.array&&r===re.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],l=Fy(o,a);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return n===re.date&&r===re.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class rm extends Pe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(rE(i)||rE(o))return pe;const a=Fy(i.value,o.value);return a.valid?((sE(i)||sE(o))&&n.dirty(),{status:n.value,value:a.data}):(G(r,{code:$.invalid_intersection_types}),pe)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}rm.create=(t,e,n)=>new rm({left:t,right:e,typeName:ge.ZodIntersection,...xe(n)});class Bo extends Pe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==re.array)return G(r,{code:$.invalid_type,expected:re.array,received:r.parsedType}),pe;if(r.data.length<this._def.items.length)return G(r,{code:$.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),pe;!this._def.rest&&r.data.length>this._def.items.length&&(G(r,{code:$.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new Ci(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Ln.mergeArray(n,o)):Ln.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new Bo({...this._def,rest:e})}}Bo.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Bo({items:t,typeName:ge.ZodTuple,rest:null,...xe(e)})};class fE extends Pe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==re.map)return G(r,{code:$.invalid_type,expected:re.map,received:r.parsedType}),pe;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,l],c)=>({key:s._parse(new Ci(r,a,r.path,[c,"key"])),value:i._parse(new Ci(r,l,r.path,[c,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return pe;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return pe;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}}}}fE.create=(t,e,n)=>new fE({valueType:e,keyType:t,typeName:ge.ZodMap,...xe(n)});class Du extends Pe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==re.set)return G(r,{code:$.invalid_type,expected:re.set,received:r.parsedType}),pe;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(G(r,{code:$.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(G(r,{code:$.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(l){const c=new Set;for(const u of l){if(u.status==="aborted")return pe;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const a=[...r.data.values()].map((l,c)=>i._parse(new Ci(r,l,r.path,c)));return r.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new Du({...this._def,minSize:{value:e,message:oe.toString(n)}})}max(e,n){return new Du({...this._def,maxSize:{value:e,message:oe.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Du.create=(t,e)=>new Du({valueType:t,minSize:null,maxSize:null,typeName:ge.ZodSet,...xe(e)});class mE extends Pe{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}mE.create=(t,e)=>new mE({getter:t,typeName:ge.ZodLazy,...xe(e)});class pE extends Pe{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return G(n,{received:n.data,code:$.invalid_literal,expected:this._def.value}),pe}return{status:"valid",value:e.data}}get value(){return this._def.value}}pE.create=(t,e)=>new pE({value:t,typeName:ge.ZodLiteral,...xe(e)});function JP(t,e){return new yl({values:t,typeName:ge.ZodEnum,...xe(e)})}class yl extends Pe{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return G(n,{expected:De.joinValues(r),received:n.parsedType,code:$.invalid_type}),pe}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return G(n,{received:n.data,code:$.invalid_enum_value,options:r}),pe}return sr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return yl.create(e,{...this._def,...n})}exclude(e,n=this._def){return yl.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}yl.create=JP;class gE extends Pe{_parse(e){const n=De.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==re.string&&r.parsedType!==re.number){const s=De.objectValues(n);return G(r,{expected:De.joinValues(s),received:r.parsedType,code:$.invalid_type}),pe}if(this._cache||(this._cache=new Set(De.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=De.objectValues(n);return G(r,{received:r.data,code:$.invalid_enum_value,options:s}),pe}return sr(e.data)}get enum(){return this._def.values}}gE.create=(t,e)=>new gE({values:t,typeName:ge.ZodNativeEnum,...xe(e)});class sm extends Pe{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==re.promise&&n.common.async===!1)return G(n,{code:$.invalid_type,expected:re.promise,received:n.parsedType}),pe;const r=n.parsedType===re.promise?n.data:Promise.resolve(n.data);return sr(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}sm.create=(t,e)=>new sm({type:t,typeName:ge.ZodPromise,...xe(e)});class zo extends Pe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ge.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{G(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return pe;const l=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return l.status==="aborted"?pe:l.status==="dirty"||n.value==="dirty"?Tc(l.value):l});{if(n.value==="aborted")return pe;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?pe:a.status==="dirty"||n.value==="dirty"?Tc(a.value):a}}if(s.type==="refinement"){const o=a=>{const l=s.refinement(a,i);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?pe:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?pe:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!gl(o))return pe;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>gl(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):pe);De.assertNever(s)}}zo.create=(t,e,n)=>new zo({schema:t,typeName:ge.ZodEffects,effect:e,...xe(n)});zo.createWithPreprocess=(t,e,n)=>new zo({schema:e,effect:{type:"preprocess",transform:t},typeName:ge.ZodEffects,...xe(n)});class vi extends Pe{_parse(e){return this._getType(e)===re.undefined?sr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}vi.create=(t,e)=>new vi({innerType:t,typeName:ge.ZodOptional,...xe(e)});class vl extends Pe{_parse(e){return this._getType(e)===re.null?sr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}vl.create=(t,e)=>new vl({innerType:t,typeName:ge.ZodNullable,...xe(e)});class Uy extends Pe{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===re.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Uy.create=(t,e)=>new Uy({innerType:t,typeName:ge.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...xe(e)});class By extends Pe{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return em(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new bs(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new bs(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}By.create=(t,e)=>new By({innerType:t,typeName:ge.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...xe(e)});class yE extends Pe{_parse(e){if(this._getType(e)!==re.nan){const r=this._getOrReturnCtx(e);return G(r,{code:$.invalid_type,expected:re.nan,received:r.parsedType}),pe}return{status:"valid",value:e.data}}}yE.create=t=>new yE({typeName:ge.ZodNaN,...xe(t)});class eU extends Pe{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class x_ extends Pe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?pe:i.status==="dirty"?(n.dirty(),Tc(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?pe:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new x_({in:e,out:n,typeName:ge.ZodPipeline})}}class zy extends Pe{_parse(e){const n=this._def.innerType._parse(e),r=s=>(gl(s)&&(s.value=Object.freeze(s.value)),s);return em(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}zy.create=(t,e)=>new zy({innerType:t,typeName:ge.ZodReadonly,...xe(e)});var ge;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(ge||(ge={}));const Hi=ni.create;Ai.create;Lr.create;const tU=mt.create;nm.create;rm.create;Bo.create;const nU=yl.create;sm.create;vi.create;vl.create;const rU=zo.createWithPreprocess,sU=tU({VITE_FIREBASE_API_KEY:Hi().min(1,"Firebase API key is required"),VITE_FIREBASE_AUTH_DOMAIN:Hi().min(1,"Firebase auth domain is required").refine(t=>{const e=(t||"").trim();if(!e)return!1;try{return new URL(e),!0}catch{const n=e.includes("."),r=/^[a-zA-Z0-9.-]+$/.test(e),s=e.length>0;return n&&r&&s}},{message:"Firebase auth domain must be a valid domain (e.g., project.firebaseapp.com) or URL"}),VITE_FIREBASE_PROJECT_ID:Hi().min(1,"Firebase project ID is required"),VITE_FIREBASE_STORAGE_BUCKET:Hi().optional(),VITE_FIREBASE_MESSAGING_SENDER_ID:Hi().optional(),VITE_FIREBASE_APP_ID:Hi().min(1,"Firebase app ID is required"),VITE_TRPC_ENDPOINT:rU(t=>{if(!(typeof t=="string"&&t.trim().length===0))return t},Hi().url("tRPC endpoint must be a valid URL").optional()),VITE_ENV:nU(["dev","staging","prod"]).default("dev")}),iU=()=>{const t={VITE_FIREBASE_API_KEY:"AIzaSyBMgAmQLzaXaNvKy09dDdsdY681iDcetD4",VITE_FIREBASE_AUTH_DOMAIN:"pumulo-12eb1.firebaseapp.com".trim(),VITE_FIREBASE_PROJECT_ID:"pumulo-12eb1",VITE_FIREBASE_STORAGE_BUCKET:"pumulo-12eb1.firebasestorage.app",VITE_FIREBASE_MESSAGING_SENDER_ID:"991195081007",VITE_FIREBASE_APP_ID:"1:991195081007:web:0452ea6468417afdd2d9da",VITE_TRPC_ENDPOINT:void 0,VITE_ENV:"prod"};return sU.parse(t)},Sc=iU();Sc.VITE_ENV;const oU={apiKey:Sc.VITE_FIREBASE_API_KEY,authDomain:Sc.VITE_FIREBASE_AUTH_DOMAIN,projectId:Sc.VITE_FIREBASE_PROJECT_ID,appId:Sc.VITE_FIREBASE_APP_ID},eN=BC(oU),nf=I9(eN),lt=Q6(eN);function aU(t){return new Promise(e=>setTimeout(e,t))}function lU(t,e){const n=e.initialDelayMs*Math.pow(e.backoffMultiplier,t),r=Math.min(n,e.maxDelayMs),s=r*e.jitter*Math.random(),i=r+s;return Math.round(i)}function cU(t){var e,n,r,s;return t?t.code==="network-request-failed"||t.code==="unavailable"||t.code==="deadline-exceeded"||t.code==="aborted"||t.status>=500&&t.status<600||(e=t.message)!=null&&e.toLowerCase().includes("network")||(n=t.message)!=null&&n.toLowerCase().includes("connection")||(r=t.message)!=null&&r.toLowerCase().includes("timeout")||t.code==="unavailable"||t.code==="internal"?!0:(s=t.code)!=null&&s.startsWith("auth/")&&t.code!=="auth/network-request-failed"||t.status>=400&&t.status<500&&t.status!==429?!1:t.status===429||t.code==="resource-exhausted":!1}async function uU(t,e={}){const{maxAttempts:n=3,initialDelayMs:r=1e3,maxDelayMs:s=3e4,backoffMultiplier:i=2,jitter:o=.1,shouldRetry:a=cU,onRetry:l}=e;let c,u=0;for(;u<n;){u++;try{return{success:!0,data:await t(),attempts:u}}catch(f){if(c=f,u>=n||!a(f,u))break;const m=lU(u-1,{initialDelayMs:r,maxDelayMs:s,backoffMultiplier:i,jitter:o});l&&l(f,u,m),await aU(m)}}return{success:!1,error:c,attempts:u}}class dU{constructor(e={}){Y(this,"failures",0);Y(this,"successes",0);Y(this,"state","closed");Y(this,"lastFailureTime");Y(this,"lastSuccessTime");Y(this,"failureThreshold");Y(this,"resetTimeoutMs");Y(this,"successThreshold");Y(this,"onOpen");Y(this,"onClose");Y(this,"onHalfOpen");this.failureThreshold=e.failureThreshold??5,this.resetTimeoutMs=e.resetTimeoutMs??6e4,this.successThreshold=e.successThreshold??2,this.onOpen=e.onOpen,this.onClose=e.onClose,this.onHalfOpen=e.onHalfOpen}checkState(){if(this.state==="open")if(this.lastFailureTime&&Date.now()-this.lastFailureTime>=this.resetTimeoutMs)this.state="half-open",this.successes=0,this.onHalfOpen&&this.onHalfOpen();else throw new hU("Circuit breaker is open. Service unavailable.")}recordSuccess(){this.lastSuccessTime=Date.now(),this.state==="half-open"?(this.successes++,this.successes>=this.successThreshold&&(this.state="closed",this.failures=0,this.successes=0,this.onClose&&this.onClose())):this.state==="closed"&&(this.failures=0)}recordFailure(e){this.lastFailureTime=Date.now(),this.failures++,this.state==="half-open"?(this.state="open",this.successes=0,this.onOpen&&this.onOpen(e)):this.state==="closed"&&this.failures>=this.failureThreshold&&(this.state="open",this.onOpen&&this.onOpen(e))}async execute(e){this.checkState();try{const n=await e();return this.recordSuccess(),n}catch(n){throw this.recordFailure(n),n}}getStats(){return{failures:this.failures,successes:this.successes,state:this.state,lastFailureTime:this.lastFailureTime,lastSuccessTime:this.lastSuccessTime}}reset(){this.state="closed",this.failures=0,this.successes=0,this.lastFailureTime=void 0,this.lastSuccessTime=void 0}open(){this.state="open",this.lastFailureTime=Date.now(),this.onOpen&&this.onOpen(new Error("Circuit manually opened"))}}class hU extends Error{constructor(e){super(e),this.name="CircuitBreakerOpenError"}}class fU{constructor(){Y(this,"breakers",new Map)}getBreaker(e,n){return this.breakers.has(e)||this.breakers.set(e,new dU(n)),this.breakers.get(e)}resetAll(){this.breakers.forEach(e=>e.reset())}getAllStats(){const e={};return this.breakers.forEach((n,r)=>{e[r]=n.getStats()}),e}}const mU=new fU;async function xl(t,e){const{serviceName:n,retry:r={},circuitBreaker:s={}}=e,i=mU.getBreaker(n,s),o={...r,shouldRetry:(a,l)=>a instanceof Error&&a.name==="CircuitBreakerOpenError"?!1:r.shouldRetry?r.shouldRetry(a,l):!0};return uU(()=>i.execute(t),o).then(a=>{if(!a.success)throw a.error;return a.data})}const $y={async getHistory(t){return xl(async()=>{if(!t||typeof t!="string"||t.trim().length===0)throw new Error("Invalid user ID provided");const e=Ii(lt,"users",t,"weight"),n=r_(e,a_("date","desc"));return(await gd(n)).docs.map(s=>{const i=s.data();return{id:s.id,date:i.date||new Date().toISOString().split("T")[0],weight:typeof i.weight=="number"?i.weight:0}})},{serviceName:"firestore-weight",retry:{maxAttempts:3,shouldRetry:e=>(e==null?void 0:e.code)!=="permission-denied"},circuitBreaker:{failureThreshold:5,resetTimeoutMs:3e4}}).catch(e=>{throw console.error("Error getting weight history:",e),e.code==="permission-denied"?new Error("Permission denied. Please check your authentication."):new Error("Failed to fetch weight history. Please try again.")})},async addEntry(t,e){return xl(async()=>{if(!t||typeof t!="string"||t.trim().length===0)throw new Error("Invalid user ID provided");if(typeof e!="number"||isNaN(e))throw new Error("Weight must be a valid number");if(e<=0||e>1e3)throw new Error("Weight must be between 0.1 and 1000 kg");const n=Ii(lt,"users",t,"weight"),r=new Date().toISOString().split("T")[0];await c_(n,{date:r,weight:Math.round(e*10)/10});const s=pn(lt,"users",t);await pP(s,{weightKg:Math.round(e*10)/10});try{const{logUserActivity:i}=await hr(async()=>{const{logUserActivity:o}=await Promise.resolve().then(()=>Tr);return{logUserActivity:o}},void 0);await i(t,{type:"weight_logged",metadata:{weight:Math.round(e*10)/10,date:r}})}catch(i){console.error("Error logging weight activity:",i)}return this.getHistory(t)},{serviceName:"firestore-weight",retry:{maxAttempts:3,shouldRetry:n=>{var r;return!((n==null?void 0:n.code)==="permission-denied"||(r=n==null?void 0:n.message)!=null&&r.includes("must be"))}},circuitBreaker:{failureThreshold:5,resetTimeoutMs:3e4}}).catch(n=>{throw console.error("Error adding weight entry:",n),n.code==="permission-denied"?new Error("Permission denied. Please check your authentication."):n.message?n:new Error("Failed to save weight entry. Please try again.")})}},bd={async getLogs(t){return xl(async()=>{if(!t||typeof t!="string"||t.trim().length===0)throw new Error("Invalid user ID provided");const e=Ii(lt,"users",t,"workouts"),n=r_(e,a_("date","desc"));return(await gd(n)).docs.map(s=>{const i=s.data();return{id:s.id,date:i.date||new Date().toISOString().split("T")[0],exerciseId:i.exerciseId||"",durationMinutes:typeof i.durationMinutes=="number"?i.durationMinutes:0,intensity:i.intensity||"medium",caloriesBurned:typeof i.caloriesBurned=="number"?i.caloriesBurned:0,notes:i.notes||void 0}})},{serviceName:"firestore-workouts",retry:{maxAttempts:3,shouldRetry:e=>(e==null?void 0:e.code)!=="permission-denied"},circuitBreaker:{failureThreshold:5,resetTimeoutMs:3e4}}).catch(e=>{throw console.error("Error getting workout logs:",e),e.code==="permission-denied"?new Error("Permission denied. Please check your authentication."):new Error("Failed to fetch workout logs. Please try again.")})},async logWorkout(t,e){return xl(async()=>{if(!t||typeof t!="string"||t.trim().length===0)throw new Error("Invalid user ID provided");if(!e||typeof e!="object")throw new Error("Invalid workout data provided");if(!e.exerciseId||typeof e.exerciseId!="string"||e.exerciseId.trim().length===0)throw new Error("Exercise ID is required");if(typeof e.durationMinutes!="number"||isNaN(e.durationMinutes)||e.durationMinutes<0)throw new Error("Duration must be a valid positive number");if(typeof e.durationMinutes=="number"&&e.durationMinutes>1440)throw new Error("Duration cannot exceed 24 hours (1440 minutes)");if(!["low","medium","high"].includes(e.intensity))throw new Error("Intensity must be low, medium, or high");if(typeof e.caloriesBurned!="number"||isNaN(e.caloriesBurned)||e.caloriesBurned<0)throw new Error("Calories burned must be a valid positive number");if(!e.date||typeof e.date!="string"||e.date.trim().length===0)throw new Error("Workout date is required");const n=Ii(lt,"users",t,"workouts");return await c_(n,{...e,durationMinutes:Math.round(e.durationMinutes*10)/10,caloriesBurned:Math.round(e.caloriesBurned)}),this.getLogs(t)},{serviceName:"firestore-workouts",retry:{maxAttempts:3,shouldRetry:n=>{var r,s;return!((n==null?void 0:n.code)==="permission-denied"||(r=n==null?void 0:n.message)!=null&&r.includes("must be")||(s=n==null?void 0:n.message)!=null&&s.includes("required"))}},circuitBreaker:{failureThreshold:5,resetTimeoutMs:3e4}}).catch(n=>{throw console.error("Error logging workout:",n),n.code==="permission-denied"?new Error("Permission denied. Please check your authentication."):n.message?n:new Error("Failed to save workout. Please try again.")})}},tN={async getExercises(){return xl(async()=>{const t=Ii(lt,"exercises");return(await gd(t)).docs.map(n=>{const r=n.data();return{id:n.id,name:r.name||"",description:r.description||"",category:r.category||"cardio",imageUrl:r.imageUrl||""}})},{serviceName:"firestore-exercises",retry:{maxAttempts:3,shouldRetry:t=>(t==null?void 0:t.code)!=="permission-denied"},circuitBreaker:{failureThreshold:5,resetTimeoutMs:3e4}}).catch(t=>{throw console.error("Error getting exercises:",t),t.code==="permission-denied"?new Error("Permission denied. Please check your authentication."):new Error("Failed to fetch exercises. Please try again.")})},async getExerciseById(t){return xl(async()=>(await this.getExercises()).find(n=>n.id===t),{serviceName:"firestore-exercises",retry:{maxAttempts:2}}).catch(e=>{throw console.error("Error getting exercise by ID:",e),e})}};function pU({exerciseId:t,onBack:e}){const[n,r]=j.useState(void 0),[s,i]=j.useState(!0);return j.useEffect(()=>{(async()=>{if(!t){i(!1);return}try{i(!0);const a=await tN.getExerciseById(t);r(a)}catch(a){console.error("Error fetching exercise:",a)}finally{i(!1)}})()},[t]),d.jsxs("div",{className:"max-w-3xl mx-auto py-10 px-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("button",{onClick:e,className:"text-sm px-3 py-2 rounded-md bg-gray-200 dark:bg-gray-800 text-gray-700 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-700",children:" Back"}),d.jsx("h1",{className:"text-2xl font-semibold",children:(n==null?void 0:n.name)??"Exercise GIF"}),d.jsx("div",{})]}),d.jsxs("div",{className:"bg-white dark:bg-gray-900 p-6 rounded-xl shadow",children:[s?d.jsx("div",{className:"text-center text-muted-foreground py-8",children:"Loading exercise..."}):n!=null&&n.imageUrl?d.jsx("img",{src:n.imageUrl,alt:n.name,className:"w-full h-[60vh] object-contain mx-auto"}):d.jsx("div",{className:"text-center text-muted-foreground",children:"No GIF available"}),n&&!s&&d.jsxs("div",{className:"mt-4",children:[d.jsx("h3",{className:"font-medium",children:n.name}),d.jsx("p",{className:"text-sm text-muted-foreground",children:n.description})]})]})]})}const __=j.createContext({});function b_(t){const e=j.useRef(null);return e.current===null&&(e.current=t()),e.current}const w_=typeof window<"u",nN=w_?j.useLayoutEffect:j.useEffect,lp=j.createContext(null);function k_(t,e){t.indexOf(e)===-1&&t.push(e)}function E_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ws=(t,e,n)=>n>e?e:n<t?t:n;let T_=()=>{};const ks={},rN=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function sN(t){return typeof t=="object"&&t!==null}const iN=t=>/^0[^.\s]+$/u.test(t);function S_(t){let e;return()=>(e===void 0&&(e=t()),e)}const Jn=t=>t,gU=(t,e)=>n=>e(t(n)),wd=(...t)=>t.reduce(gU),ju=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class I_{constructor(){this.subscriptions=[]}add(e){return k_(this.subscriptions,e),()=>E_(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Vr=t=>t*1e3,Qn=t=>t/1e3;function oN(t,e){return e?t*(1e3/e):0}const aN=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,yU=1e-7,vU=12;function xU(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=aN(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>yU&&++a<vU);return o}function kd(t,e,n,r){if(t===e&&n===r)return Jn;const s=i=>xU(i,0,1,t,n);return i=>i===0||i===1?i:aN(s(i),e,r)}const lN=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,cN=t=>e=>1-t(1-e),uN=kd(.33,1.53,.69,.99),C_=cN(uN),dN=lN(C_),hN=t=>(t*=2)<1?.5*C_(t):.5*(2-Math.pow(2,-10*(t-1))),A_=t=>1-Math.sin(Math.acos(t)),fN=cN(A_),mN=lN(A_),_U=kd(.42,0,1,1),bU=kd(0,0,.58,1),pN=kd(.42,0,.58,1),wU=t=>Array.isArray(t)&&typeof t[0]!="number",gN=t=>Array.isArray(t)&&typeof t[0]=="number",kU={linear:Jn,easeIn:_U,easeInOut:pN,easeOut:bU,circIn:A_,circInOut:mN,circOut:fN,backIn:C_,backInOut:dN,backOut:uN,anticipate:hN},EU=t=>typeof t=="string",vE=t=>{if(gN(t)){T_(t.length===4);const[e,n,r,s]=t;return kd(e,n,r,s)}else if(EU(t))return kU[t];return t},gh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function TU(t,e){let n=new Set,r=new Set,s=!1,i=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(u){o.has(u)&&(c.schedule(u),t()),u(a)}const c={schedule:(u,f=!1,m=!1)=>{const y=m&&s?n:r;return f&&o.add(u),y.has(u)||y.add(u),u},cancel:u=>{r.delete(u),o.delete(u)},process:u=>{if(a=u,s){i=!0;return}s=!0,[n,r]=[r,n],n.forEach(l),n.clear(),s=!1,i&&(i=!1,c.process(u))}};return c}const SU=40;function yN(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=gh.reduce((w,P)=>(w[P]=TU(i),w),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:u,update:f,preRender:m,render:p,postRender:y}=o,v=()=>{const w=ks.useManualTiming?s.timestamp:performance.now();n=!1,ks.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(w-s.timestamp,SU),1)),s.timestamp=w,s.isProcessing=!0,a.process(s),l.process(s),c.process(s),u.process(s),f.process(s),m.process(s),p.process(s),y.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(v))},E=()=>{n=!0,r=!0,s.isProcessing||t(v)};return{schedule:gh.reduce((w,P)=>{const C=o[P];return w[P]=(R,T=!1,k=!1)=>(n||E(),C.schedule(R,T,k)),w},{}),cancel:w=>{for(let P=0;P<gh.length;P++)o[gh[P]].cancel(w)},state:s,steps:o}}const{schedule:Xe,cancel:Pi,state:Pt,steps:Mg}=yN(typeof requestAnimationFrame<"u"?requestAnimationFrame:Jn,!0);let rf;function IU(){rf=void 0}const En={now:()=>(rf===void 0&&En.set(Pt.isProcessing||ks.useManualTiming?Pt.timestamp:performance.now()),rf),set:t=>{rf=t,queueMicrotask(IU)}},vN=t=>e=>typeof e=="string"&&e.startsWith(t),P_=vN("--"),CU=vN("var(--"),N_=t=>CU(t)?AU.test(t.split("/*")[0].trim()):!1,AU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,jl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ou={...jl,transform:t=>ws(0,1,t)},yh={...jl,default:1},Kc=t=>Math.round(t*1e5)/1e5,R_=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function PU(t){return t==null}const NU=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,M_=(t,e)=>n=>!!(typeof n=="string"&&NU.test(n)&&n.startsWith(t)||e&&!PU(n)&&Object.prototype.hasOwnProperty.call(n,e)),xN=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,i,o,a]=r.match(R_);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},RU=t=>ws(0,255,t),Dg={...jl,transform:t=>Math.round(RU(t))},lo={test:M_("rgb","red"),parse:xN("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Dg.transform(t)+", "+Dg.transform(e)+", "+Dg.transform(n)+", "+Kc(Ou.transform(r))+")"};function MU(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Wy={test:M_("#"),parse:MU,transform:lo.transform},Ed=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ds=Ed("deg"),Fr=Ed("%"),he=Ed("px"),DU=Ed("vh"),jU=Ed("vw"),xE={...Fr,parse:t=>Fr.parse(t)/100,transform:t=>Fr.transform(t*100)},ka={test:M_("hsl","hue"),parse:xN("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Fr.transform(Kc(e))+", "+Fr.transform(Kc(n))+", "+Kc(Ou.transform(r))+")"},pt={test:t=>lo.test(t)||Wy.test(t)||ka.test(t),parse:t=>lo.test(t)?lo.parse(t):ka.test(t)?ka.parse(t):Wy.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?lo.transform(t):ka.transform(t),getAnimatableNone:t=>{const e=pt.parse(t);return e.alpha=0,pt.transform(e)}},OU=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function LU(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(R_))==null?void 0:e.length)||0)+(((n=t.match(OU))==null?void 0:n.length)||0)>0}const _N="number",bN="color",VU="var",FU="var(",_E="${}",UU=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Lu(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const a=e.replace(UU,l=>(pt.test(l)?(r.color.push(i),s.push(bN),n.push(pt.parse(l))):l.startsWith(FU)?(r.var.push(i),s.push(VU),n.push(l)):(r.number.push(i),s.push(_N),n.push(parseFloat(l))),++i,_E)).split(_E);return{values:n,split:a,indexes:r,types:s}}function wN(t){return Lu(t).values}function kN(t){const{split:e,types:n}=Lu(t),r=e.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=e[o],s[o]!==void 0){const a=n[o];a===_N?i+=Kc(s[o]):a===bN?i+=pt.transform(s[o]):i+=s[o]}return i}}const BU=t=>typeof t=="number"?0:pt.test(t)?pt.getAnimatableNone(t):t;function zU(t){const e=wN(t);return kN(t)(e.map(BU))}const Ni={test:LU,parse:wN,createTransformer:kN,getAnimatableNone:zU};function jg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function $U({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;s=jg(l,a,t+1/3),i=jg(l,a,t),o=jg(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function im(t,e){return n=>n>0?e:t}const Je=(t,e,n)=>t+(e-t)*n,Og=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},WU=[Wy,lo,ka],HU=t=>WU.find(e=>e.test(t));function bE(t){const e=HU(t);if(!e)return!1;let n=e.parse(t);return e===ka&&(n=$U(n)),n}const wE=(t,e)=>{const n=bE(t),r=bE(e);if(!n||!r)return im(t,e);const s={...n};return i=>(s.red=Og(n.red,r.red,i),s.green=Og(n.green,r.green,i),s.blue=Og(n.blue,r.blue,i),s.alpha=Je(n.alpha,r.alpha,i),lo.transform(s))},Hy=new Set(["none","hidden"]);function qU(t,e){return Hy.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function KU(t,e){return n=>Je(t,e,n)}function D_(t){return typeof t=="number"?KU:typeof t=="string"?N_(t)?im:pt.test(t)?wE:YU:Array.isArray(t)?EN:typeof t=="object"?pt.test(t)?wE:GU:im}function EN(t,e){const n=[...t],r=n.length,s=t.map((i,o)=>D_(i)(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}}function GU(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=D_(t[s])(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function QU(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const i=e.types[s],o=t.indexes[i][r[i]],a=t.values[o]??0;n[s]=a,r[i]++}return n}const YU=(t,e)=>{const n=Ni.createTransformer(e),r=Lu(t),s=Lu(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Hy.has(t)&&!s.values.length||Hy.has(e)&&!r.values.length?qU(t,e):wd(EN(QU(r,s),s.values),n):im(t,e)};function TN(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Je(t,e,n):D_(t)(t,e)}const XU=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Xe.update(e,n),stop:()=>Pi(e),now:()=>Pt.isProcessing?Pt.timestamp:En.now()}},SN=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let i=0;i<s;i++)r+=Math.round(t(i/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},om=2e4;function j_(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<om;)e+=n,r=t.next(e);return e>=om?1/0:e}function ZU(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(j_(r),om);return{type:"keyframes",ease:i=>r.next(s*i).value/e,duration:Qn(s)}}const JU=5;function IN(t,e,n){const r=Math.max(e-JU,0);return oN(n-t(r),e-r)}const ot={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Lg=.001;function eB({duration:t=ot.duration,bounce:e=ot.bounce,velocity:n=ot.velocity,mass:r=ot.mass}){let s,i,o=1-e;o=ws(ot.minDamping,ot.maxDamping,o),t=ws(ot.minDuration,ot.maxDuration,Qn(t)),o<1?(s=c=>{const u=c*o,f=u*t,m=u-n,p=qy(c,o),y=Math.exp(-f);return Lg-m/p*y},i=c=>{const f=c*o*t,m=f*n+n,p=Math.pow(o,2)*Math.pow(c,2)*t,y=Math.exp(-f),v=qy(Math.pow(c,2),o);return(-s(c)+Lg>0?-1:1)*((m-p)*y)/v}):(s=c=>{const u=Math.exp(-c*t),f=(c-n)*t+1;return-Lg+u*f},i=c=>{const u=Math.exp(-c*t),f=(n-c)*(t*t);return u*f});const a=5/t,l=nB(s,i,a);if(t=Vr(t),isNaN(l))return{stiffness:ot.stiffness,damping:ot.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const tB=12;function nB(t,e,n){let r=n;for(let s=1;s<tB;s++)r=r-t(r)/e(r);return r}function qy(t,e){return t*Math.sqrt(1-e*e)}const rB=["duration","bounce"],sB=["stiffness","damping","mass"];function kE(t,e){return e.some(n=>t[n]!==void 0)}function iB(t){let e={velocity:ot.velocity,stiffness:ot.stiffness,damping:ot.damping,mass:ot.mass,isResolvedFromDuration:!1,...t};if(!kE(t,sB)&&kE(t,rB))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*ws(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:ot.mass,stiffness:s,damping:i}}else{const n=eB(t);e={...e,...n,mass:ot.mass},e.isResolvedFromDuration=!0}return e}function am(t=ot.visualDuration,e=ot.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:c,mass:u,duration:f,velocity:m,isResolvedFromDuration:p}=iB({...n,velocity:-Qn(n.velocity||0)}),y=m||0,v=c/(2*Math.sqrt(l*u)),E=o-i,x=Qn(Math.sqrt(l/u)),_=Math.abs(E)<5;r||(r=_?ot.restSpeed.granular:ot.restSpeed.default),s||(s=_?ot.restDelta.granular:ot.restDelta.default);let w;if(v<1){const C=qy(x,v);w=R=>{const T=Math.exp(-v*x*R);return o-T*((y+v*x*E)/C*Math.sin(C*R)+E*Math.cos(C*R))}}else if(v===1)w=C=>o-Math.exp(-x*C)*(E+(y+x*E)*C);else{const C=x*Math.sqrt(v*v-1);w=R=>{const T=Math.exp(-v*x*R),k=Math.min(C*R,300);return o-T*((y+v*x*E)*Math.sinh(k)+C*E*Math.cosh(k))/C}}const P={calculatedDuration:p&&f||null,next:C=>{const R=w(C);if(p)a.done=C>=f;else{let T=C===0?y:0;v<1&&(T=C===0?Vr(y):IN(w,C,R));const k=Math.abs(T)<=r,S=Math.abs(o-R)<=s;a.done=k&&S}return a.value=a.done?o:R,a},toString:()=>{const C=Math.min(j_(P),om),R=SN(T=>P.next(C*T).value,C,30);return C+"ms "+R},toTransition:()=>{}};return P}am.applyToOptions=t=>{const e=ZU(t,100,am);return t.ease=e.ease,t.duration=Vr(e.duration),t.type="keyframes",t};function Ky({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const f=t[0],m={done:!1,value:f},p=k=>a!==void 0&&k<a||l!==void 0&&k>l,y=k=>a===void 0?l:l===void 0||Math.abs(a-k)<Math.abs(l-k)?a:l;let v=n*e;const E=f+v,x=o===void 0?E:o(E);x!==E&&(v=x-f);const _=k=>-v*Math.exp(-k/r),w=k=>x+_(k),P=k=>{const S=_(k),I=w(k);m.done=Math.abs(S)<=c,m.value=m.done?x:I};let C,R;const T=k=>{p(m.value)&&(C=k,R=am({keyframes:[m.value,y(m.value)],velocity:IN(w,k,m.value),damping:s,stiffness:i,restDelta:c,restSpeed:u}))};return T(0),{calculatedDuration:null,next:k=>{let S=!1;return!R&&C===void 0&&(S=!0,P(k),T(k)),C!==void 0&&k>=C?R.next(k-C):(!S&&P(k),m)}}}function oB(t,e,n){const r=[],s=n||ks.mix||TN,i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Jn:e;a=wd(l,a)}r.push(a)}return r}function aB(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(T_(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=oB(e,r,s),l=a.length,c=u=>{if(o&&u<t[0])return e[0];let f=0;if(l>1)for(;f<t.length-2&&!(u<t[f+1]);f++);const m=ju(t[f],t[f+1],u);return a[f](m)};return n?u=>c(ws(t[0],t[i-1],u)):c}function lB(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=ju(0,e,r);t.push(Je(n,1,s))}}function cB(t){const e=[0];return lB(e,t.length-1),e}function uB(t,e){return t.map(n=>n*e)}function dB(t,e){return t.map(()=>e||pN).splice(0,t.length-1)}function Gc({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=wU(r)?r.map(vE):vE(r),i={done:!1,value:e[0]},o=uB(n&&n.length===e.length?n:cB(e),t),a=aB(o,e,{ease:Array.isArray(s)?s:dB(e,s)});return{calculatedDuration:t,next:l=>(i.value=a(l),i.done=l>=t,i)}}const hB=t=>t!==null;function O_(t,{repeat:e,repeatType:n="loop"},r,s=1){const i=t.filter(hB),a=s<0||e&&n!=="loop"&&e%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const fB={decay:Ky,inertia:Ky,tween:Gc,keyframes:Gc,spring:am};function CN(t){typeof t.type=="string"&&(t.type=fB[t.type])}class L_{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const mB=t=>t/100;class V_ extends L_{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==En.now()&&this.tick(En.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;CN(e);const{type:n=Gc,repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=e;let{keyframes:a}=e;const l=n||Gc;l!==Gc&&typeof a[0]!="number"&&(this.mixKeyframes=wd(mB,TN(a[0],a[1])),a=[0,100]);const c=l({...e,keyframes:a});i==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=j_(c));const{calculatedDuration:u}=c;this.calculatedDuration=u,this.resolvedDuration=u+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=c}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:u,repeat:f,repeatType:m,repeatDelay:p,type:y,onUpdate:v,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const x=this.currentTime-c*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?x<0:x>s;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let w=this.currentTime,P=r;if(f){const k=Math.min(this.currentTime,s)/a;let S=Math.floor(k),I=k%1;!I&&k>=1&&(I=1),I===1&&S--,S=Math.min(S,f+1),!!(S%2)&&(m==="reverse"?(I=1-I,p&&(I-=p/a)):m==="mirror"&&(P=o)),w=ws(0,1,I)*a}const C=_?{done:!1,value:u[0]}:P.next(w);i&&(C.value=i(C.value));let{done:R}=C;!_&&l!==null&&(R=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&R);return T&&y!==Ky&&(C.value=O_(u,this.options,E,this.speed)),v&&v(C.value),T&&this.finish(),C}then(e,n){return this.finished.then(e,n)}get duration(){return Qn(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Qn(e)}get time(){return Qn(this.currentTime)}set time(e){var n;e=Vr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(En.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Qn(this.currentTime))}play(){var s,i;if(this.isStopped)return;const{driver:e=XU,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(i=(s=this.options).onPlay)==null||i.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(En.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function pB(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const co=t=>t*180/Math.PI,Gy=t=>{const e=co(Math.atan2(t[1],t[0]));return Qy(e)},gB={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Gy,rotateZ:Gy,skewX:t=>co(Math.atan(t[1])),skewY:t=>co(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Qy=t=>(t=t%360,t<0&&(t+=360),t),EE=Gy,TE=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),SE=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),yB={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:TE,scaleY:SE,scale:t=>(TE(t)+SE(t))/2,rotateX:t=>Qy(co(Math.atan2(t[6],t[5]))),rotateY:t=>Qy(co(Math.atan2(-t[2],t[0]))),rotateZ:EE,rotate:EE,skewX:t=>co(Math.atan(t[4])),skewY:t=>co(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Yy(t){return t.includes("scale")?1:0}function Xy(t,e){if(!t||t==="none")return Yy(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=yB,s=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=gB,s=a}if(!s)return Yy(e);const i=r[e],o=s[1].split(",").map(xB);return typeof i=="function"?i(o):o[i]}const vB=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Xy(n,e)};function xB(t){return parseFloat(t.trim())}const Ol=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ll=new Set(Ol),IE=t=>t===jl||t===he,_B=new Set(["x","y","z"]),bB=Ol.filter(t=>!_B.has(t));function wB(t){const e=[];return bB.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const To={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Xy(e,"x"),y:(t,{transform:e})=>Xy(e,"y")};To.translateX=To.x;To.translateY=To.y;const So=new Set;let Zy=!1,Jy=!1,ev=!1;function AN(){if(Jy){const t=Array.from(So).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=wB(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,o])=>{var a;(a=r.getValue(i))==null||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Jy=!1,Zy=!1,So.forEach(t=>t.complete(ev)),So.clear()}function PN(){So.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Jy=!0)})}function kB(){ev=!0,PN(),AN(),ev=!1}class F_{constructor(e,n,r,s,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(So.add(this),Zy||(Zy=!0,Xe.read(PN),Xe.resolveKeyframes(AN))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const i=s==null?void 0:s.get(),o=e[e.length-1];if(i!==void 0)e[0]=i;else if(r&&n){const a=r.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),s&&i===void 0&&s.set(e[0])}pB(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),So.delete(this)}cancel(){this.state==="scheduled"&&(So.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const EB=t=>t.startsWith("--");function TB(t,e,n){EB(e)?t.style.setProperty(e,n):t.style[e]=n}const SB=S_(()=>window.ScrollTimeline!==void 0),IB={};function CB(t,e){const n=S_(t);return()=>IB[e]??n()}const NN=CB(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ic=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,CE={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ic([0,.65,.55,1]),circOut:Ic([.55,0,1,.45]),backIn:Ic([.31,.01,.66,-.59]),backOut:Ic([.33,1.53,.69,.99])};function RN(t,e){if(t)return typeof t=="function"?NN()?SN(t,e):"ease-out":gN(t)?Ic(t):Array.isArray(t)?t.map(n=>RN(n,e)||CE.easeOut):CE[t]}function AB(t,e,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeOut",times:l}={},c=void 0){const u={[e]:n};l&&(u.offset=l);const f=RN(a,s);Array.isArray(f)&&(u.easing=f);const m={delay:r,duration:s,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return c&&(m.pseudoElement=c),t.animate(u,m)}function MN(t){return typeof t=="function"&&"applyToOptions"in t}function PB({type:t,...e}){return MN(t)&&NN()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class NB extends L_{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=e,T_(typeof e.type!="string");const c=PB(e);this.animation=AB(n,r,s,c,i),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const u=O_(s,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(u):TB(n,r,u),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Qn(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Qn(e)}get time(){return Qn(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Vr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&SB()?(this.animation.timeline=e,Jn):n(this)}}const DN={anticipate:hN,backInOut:dN,circInOut:mN};function RB(t){return t in DN}function MB(t){typeof t.ease=="string"&&RB(t.ease)&&(t.ease=DN[t.ease])}const AE=10;class DB extends NB{constructor(e){MB(e),CN(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:i,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new V_({...o,autoplay:!1}),l=Vr(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-AE).value,a.sample(l).value,AE),a.stop()}}const PE=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ni.test(t)||t==="0")&&!t.startsWith("url("));function jB(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function OB(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=PE(s,e),a=PE(i,e);return!o||!a?!1:jB(t)||(n==="spring"||MN(n))&&r}function tv(t){t.duration=0,t.type="keyframes"}const LB=new Set(["opacity","clipPath","filter","transform"]),VB=S_(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function FB(t){var u;const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:i,type:o}=t;if(!(((u=e==null?void 0:e.owner)==null?void 0:u.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=e.owner.getProps();return VB()&&n&&LB.has(n)&&(n!=="transform"||!c)&&!l&&!r&&s!=="mirror"&&i!==0&&o!=="inertia"}const UB=40;class BB extends L_{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",keyframes:a,name:l,motionValue:c,element:u,...f}){var y;super(),this.stop=()=>{var v,E;this._animation&&(this._animation.stop(),(v=this.stopTimeline)==null||v.call(this)),(E=this.keyframeResolver)==null||E.cancel()},this.createdAt=En.now();const m={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:o,name:l,motionValue:c,element:u,...f},p=(u==null?void 0:u.KeyframeResolver)||F_;this.keyframeResolver=new p(a,(v,E,x)=>this.onKeyframesResolved(v,E,m,!x),l,c,u),(y=this.keyframeResolver)==null||y.scheduleResolve()}onKeyframesResolved(e,n,r,s){this.keyframeResolver=void 0;const{name:i,type:o,velocity:a,delay:l,isHandoff:c,onUpdate:u}=r;this.resolvedAt=En.now(),OB(e,i,o,a)||((ks.instantAnimations||!l)&&(u==null||u(O_(e,r,n))),e[0]=e[e.length-1],tv(r),r.repeat=0);const m={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>UB?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},p=!c&&FB(m)?new DB({...m,element:m.motionValue.owner.current}):new V_(m);p.finished.then(()=>this.notifyFinished()).catch(Jn),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),kB()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const zB=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function $B(t){const e=zB.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function jN(t,e,n=1){const[r,s]=$B(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return rN(o)?parseFloat(o):o}return N_(s)?jN(s,e,n+1):s}function U_(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const ON=new Set(["width","height","top","left","right","bottom",...Ol]),WB={test:t=>t==="auto",parse:t=>t},LN=t=>e=>e.test(t),VN=[jl,he,Fr,Ds,jU,DU,WB],NE=t=>VN.find(LN(t));function HB(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||iN(t):!0}const qB=new Set(["brightness","contrast","saturate","opacity"]);function KB(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(R_)||[];if(!r)return t;const s=n.replace(r,"");let i=qB.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const GB=/\b([a-z-]*)\(.*?\)/gu,nv={...Ni,getAnimatableNone:t=>{const e=t.match(GB);return e?e.map(KB).join(" "):t}},RE={...jl,transform:Math.round},QB={rotate:Ds,rotateX:Ds,rotateY:Ds,rotateZ:Ds,scale:yh,scaleX:yh,scaleY:yh,scaleZ:yh,skew:Ds,skewX:Ds,skewY:Ds,distance:he,translateX:he,translateY:he,translateZ:he,x:he,y:he,z:he,perspective:he,transformPerspective:he,opacity:Ou,originX:xE,originY:xE,originZ:he},B_={borderWidth:he,borderTopWidth:he,borderRightWidth:he,borderBottomWidth:he,borderLeftWidth:he,borderRadius:he,radius:he,borderTopLeftRadius:he,borderTopRightRadius:he,borderBottomRightRadius:he,borderBottomLeftRadius:he,width:he,maxWidth:he,height:he,maxHeight:he,top:he,right:he,bottom:he,left:he,padding:he,paddingTop:he,paddingRight:he,paddingBottom:he,paddingLeft:he,margin:he,marginTop:he,marginRight:he,marginBottom:he,marginLeft:he,backgroundPositionX:he,backgroundPositionY:he,...QB,zIndex:RE,fillOpacity:Ou,strokeOpacity:Ou,numOctaves:RE},YB={...B_,color:pt,backgroundColor:pt,outlineColor:pt,fill:pt,stroke:pt,borderColor:pt,borderTopColor:pt,borderRightColor:pt,borderBottomColor:pt,borderLeftColor:pt,filter:nv,WebkitFilter:nv},FN=t=>YB[t];function UN(t,e){let n=FN(t);return n!==nv&&(n=Ni),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const XB=new Set(["auto","none","0"]);function ZB(t,e,n){let r=0,s;for(;r<t.length&&!s;){const i=t[r];typeof i=="string"&&!XB.has(i)&&Lu(i).values.length&&(s=t[r]),r++}if(s&&n)for(const i of e)t[i]=UN(n,s)}class JB extends F_{constructor(e,n,r,s,i){super(e,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),N_(c))){const u=jN(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!ON.has(r)||e.length!==2)return;const[s,i]=e,o=NE(s),a=NE(i);if(o!==a)if(IE(o)&&IE(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else To[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||HB(e[s]))&&r.push(s);r.length&&ZB(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=To[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const i=r.length-1,o=r[i];r[i]=To[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function e8(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const s=(n==null?void 0:n[t])??r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const BN=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function zN(t){return sN(t)&&"offsetHeight"in t}const ME=30,t8=t=>!isNaN(parseFloat(t));class n8{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var i;const s=En.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=En.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=t8(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new I_);const r=this.events[e].add(n);return e==="change"?()=>{r(),Xe.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=En.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>ME)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,ME);return oN(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function _l(t,e){return new n8(t,e)}const{schedule:z_}=yN(queueMicrotask,!1),ar={x:!1,y:!1};function $N(){return ar.x||ar.y}function r8(t){return t==="x"||t==="y"?ar[t]?null:(ar[t]=!0,()=>{ar[t]=!1}):ar.x||ar.y?null:(ar.x=ar.y=!0,()=>{ar.x=ar.y=!1})}function WN(t,e){const n=e8(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function DE(t){return!(t.pointerType==="touch"||$N())}function s8(t,e,n={}){const[r,s,i]=WN(t,n),o=a=>{if(!DE(a))return;const{target:l}=a,c=e(l,a);if(typeof c!="function"||!l)return;const u=f=>{DE(f)&&(c(f),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,s)};return r.forEach(a=>{a.addEventListener("pointerenter",o,s)}),i}const HN=(t,e)=>e?t===e?!0:HN(t,e.parentElement):!1,$_=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,i8=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function o8(t){return i8.has(t.tagName)||t.tabIndex!==-1}const sf=new WeakSet;function jE(t){return e=>{e.key==="Enter"&&t(e)}}function Vg(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const a8=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=jE(()=>{if(sf.has(n))return;Vg(n,"down");const s=jE(()=>{Vg(n,"up")}),i=()=>Vg(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function OE(t){return $_(t)&&!$N()}function l8(t,e,n={}){const[r,s,i]=WN(t,n),o=a=>{const l=a.currentTarget;if(!OE(a))return;sf.add(l);const c=e(l,a),u=(p,y)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",m),sf.has(l)&&sf.delete(l),OE(p)&&typeof c=="function"&&c(p,{success:y})},f=p=>{u(p,l===window||l===document||n.useGlobalTarget||HN(l,p.target))},m=p=>{u(p,!1)};window.addEventListener("pointerup",f,s),window.addEventListener("pointercancel",m,s)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),zN(a)&&(a.addEventListener("focus",c=>a8(c,s)),!o8(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),i}function qN(t){return sN(t)&&"ownerSVGElement"in t}function c8(t){return qN(t)&&t.tagName==="svg"}const Yt=t=>!!(t&&t.getVelocity),u8=[...VN,pt,Ni],d8=t=>u8.find(LN(t)),W_=j.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function LE(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function h8(...t){return e=>{let n=!1;const r=t.map(s=>{const i=LE(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():LE(t[s],null)}}}}function f8(...t){return j.useCallback(h8(...t),t)}class m8 extends j.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=zN(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function p8({children:t,isPresent:e,anchorX:n,root:r}){const s=j.useId(),i=j.useRef(null),o=j.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=j.useContext(W_),l=f8(i,t==null?void 0:t.ref);return j.useInsertionEffect(()=>{const{width:c,height:u,top:f,left:m,right:p}=o.current;if(e||!i.current||!c||!u)return;const y=n==="left"?`left: ${m}`:`right: ${p}`;i.current.dataset.motionPopId=s;const v=document.createElement("style");a&&(v.nonce=a);const E=r??document.head;return E.appendChild(v),v.sheet&&v.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${u}px !important;
            ${y}px !important;
            top: ${f}px !important;
          }
        `),()=>{E.contains(v)&&E.removeChild(v)}},[e]),d.jsx(m8,{isPresent:e,childRef:i,sizeRef:o,children:j.cloneElement(t,{ref:l})})}const g8=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o,anchorX:a,root:l})=>{const c=b_(y8),u=j.useId();let f=!0,m=j.useMemo(()=>(f=!1,{id:u,initial:e,isPresent:n,custom:s,onExitComplete:p=>{c.set(p,!0);for(const y of c.values())if(!y)return;r&&r()},register:p=>(c.set(p,!1),()=>c.delete(p))}),[n,c,r]);return i&&f&&(m={...m}),j.useMemo(()=>{c.forEach((p,y)=>c.set(y,!1))},[n]),j.useEffect(()=>{!n&&!c.size&&r&&r()},[n]),o==="popLayout"&&(t=d.jsx(p8,{isPresent:n,anchorX:a,root:l,children:t})),d.jsx(lp.Provider,{value:m,children:t})};function y8(){return new Map}function KN(t=!0){const e=j.useContext(lp);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,i=j.useId();j.useEffect(()=>{if(t)return s(i)},[t]);const o=j.useCallback(()=>t&&r&&r(i),[i,r,t]);return!n&&r?[!1,o]:[!0]}const vh=t=>t.key||"";function VE(t){const e=[];return j.Children.forEach(t,n=>{j.isValidElement(n)&&e.push(n)}),e}const Td=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[c,u]=KN(o),f=j.useMemo(()=>VE(t),[t]),m=o&&!c?[]:f.map(vh),p=j.useRef(!0),y=j.useRef(f),v=b_(()=>new Map),[E,x]=j.useState(f),[_,w]=j.useState(f);nN(()=>{p.current=!1,y.current=f;for(let R=0;R<_.length;R++){const T=vh(_[R]);m.includes(T)?v.delete(T):v.get(T)!==!0&&v.set(T,!1)}},[_,m.length,m.join("-")]);const P=[];if(f!==E){let R=[...f];for(let T=0;T<_.length;T++){const k=_[T],S=vh(k);m.includes(S)||(R.splice(T,0,k),P.push(k))}return i==="wait"&&P.length&&(R=P),w(VE(R)),x(f),null}const{forceRender:C}=j.useContext(__);return d.jsx(d.Fragment,{children:_.map(R=>{const T=vh(R),k=o&&!c?!1:f===_||m.includes(T),S=()=>{if(v.has(T))v.set(T,!0);else return;let I=!0;v.forEach(N=>{N||(I=!1)}),I&&(C==null||C(),w(y.current),o&&(u==null||u()),r&&r())};return d.jsx(g8,{isPresent:k,initial:!p.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:i,root:l,onExitComplete:k?void 0:S,anchorX:a,children:R},T)})})},GN=j.createContext({strict:!1}),FE={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},bl={};for(const t in FE)bl[t]={isEnabled:e=>FE[t].some(n=>!!e[n])};function v8(t){for(const e in t)bl[e]={...bl[e],...t[e]}}const x8=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function lm(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||x8.has(t)}let QN=t=>!lm(t);function _8(t){typeof t=="function"&&(QN=e=>e.startsWith("on")?!lm(e):t(e))}try{_8(require("@emotion/is-prop-valid").default)}catch{}function b8(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(QN(s)||n===!0&&lm(s)||!e&&!lm(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}const cp=j.createContext({});function up(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Vu(t){return typeof t=="string"||Array.isArray(t)}const H_=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],q_=["initial",...H_];function dp(t){return up(t.animate)||q_.some(e=>Vu(t[e]))}function YN(t){return!!(dp(t)||t.variants)}function w8(t,e){if(dp(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Vu(n)?n:void 0,animate:Vu(r)?r:void 0}}return t.inherit!==!1?e:{}}function k8(t){const{initial:e,animate:n}=w8(t,j.useContext(cp));return j.useMemo(()=>({initial:e,animate:n}),[UE(e),UE(n)])}function UE(t){return Array.isArray(t)?t.join(" "):t}const Fu={};function E8(t){for(const e in t)Fu[e]=t[e],P_(e)&&(Fu[e].isCSSVariable=!0)}function XN(t,{layout:e,layoutId:n}){return Ll.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Fu[t]||t==="opacity")}const T8={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},S8=Ol.length;function I8(t,e,n){let r="",s=!0;for(let i=0;i<S8;i++){const o=Ol[i],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=BN(a,B_[o]);if(!l){s=!1;const u=T8[o]||o;r+=`${u}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function K_(t,e,n){const{style:r,vars:s,transformOrigin:i}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(Ll.has(l)){o=!0;continue}else if(P_(l)){s[l]=c;continue}else{const u=BN(c,B_[l]);l.startsWith("origin")?(a=!0,i[l]=u):r[l]=u}}if(e.transform||(o||n?r.transform=I8(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=i;r.transformOrigin=`${l} ${c} ${u}`}}const G_=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ZN(t,e,n){for(const r in e)!Yt(e[r])&&!XN(r,n)&&(t[r]=e[r])}function C8({transformTemplate:t},e){return j.useMemo(()=>{const n=G_();return K_(n,e,t),Object.assign({},n.vars,n.style)},[e])}function A8(t,e){const n=t.style||{},r={};return ZN(r,n,t),Object.assign(r,C8(t,e)),r}function P8(t,e){const n={},r=A8(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const N8={offset:"stroke-dashoffset",array:"stroke-dasharray"},R8={offset:"strokeDashoffset",array:"strokeDasharray"};function M8(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?N8:R8;t[i.offset]=he.transform(-r);const o=he.transform(e),a=he.transform(n);t[i.array]=`${o} ${a}`}function JN(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:i=1,pathOffset:o=0,...a},l,c,u){if(K_(t,a,c),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:m}=t;f.transform&&(m.transform=f.transform,delete f.transform),(m.transform||f.transformOrigin)&&(m.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),m.transform&&(m.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete f.transformBox),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),s!==void 0&&M8(f,s,i,o,!1)}const eR=()=>({...G_(),attrs:{}}),tR=t=>typeof t=="string"&&t.toLowerCase()==="svg";function D8(t,e,n,r){const s=j.useMemo(()=>{const i=eR();return JN(i,e,tR(r),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};ZN(i,t.style,t),s.style={...i,...s.style}}return s}const j8=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Q_(t){return typeof t!="string"||t.includes("-")?!1:!!(j8.indexOf(t)>-1||/[A-Z]/u.test(t))}function O8(t,e,n,{latestValues:r},s,i=!1){const a=(Q_(t)?D8:P8)(e,r,s,t),l=b8(e,typeof t=="string",i),c=t!==j.Fragment?{...l,...a,ref:n}:{},{children:u}=e,f=j.useMemo(()=>Yt(u)?u.get():u,[u]);return j.createElement(t,{...c,children:f})}function BE(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Y_(t,e,n,r){if(typeof e=="function"){const[s,i]=BE(r);e=e(n!==void 0?n:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=BE(r);e=e(n!==void 0?n:t.custom,s,i)}return e}function of(t){return Yt(t)?t.get():t}function L8({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:V8(n,r,s,t),renderState:e()}}function V8(t,e,n,r){const s={},i=r(t,{});for(const m in i)s[m]=of(i[m]);let{initial:o,animate:a}=t;const l=dp(t),c=YN(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const f=u?a:o;if(f&&typeof f!="boolean"&&!up(f)){const m=Array.isArray(f)?f:[f];for(let p=0;p<m.length;p++){const y=Y_(t,m[p]);if(y){const{transitionEnd:v,transition:E,...x}=y;for(const _ in x){let w=x[_];if(Array.isArray(w)){const P=u?w.length-1:0;w=w[P]}w!==null&&(s[_]=w)}for(const _ in v)s[_]=v[_]}}}return s}const nR=t=>(e,n)=>{const r=j.useContext(cp),s=j.useContext(lp),i=()=>L8(t,e,r,s);return n?i():b_(i)};function X_(t,e,n){var i;const{style:r}=t,s={};for(const o in r)(Yt(r[o])||e.style&&Yt(e.style[o])||XN(o,t)||((i=n==null?void 0:n.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(s[o]=r[o]);return s}const F8=nR({scrapeMotionValuesFromProps:X_,createRenderState:G_});function rR(t,e,n){const r=X_(t,e,n);for(const s in t)if(Yt(t[s])||Yt(e[s])){const i=Ol.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=t[s]}return r}const U8=nR({scrapeMotionValuesFromProps:rR,createRenderState:eR}),B8=Symbol.for("motionComponentSymbol");function Ea(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function z8(t,e,n){return j.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Ea(n)&&(n.current=r))},[e])}const Z_=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),$8="framerAppearId",sR="data-"+Z_($8),iR=j.createContext({});function W8(t,e,n,r,s){var v,E;const{visualElement:i}=j.useContext(cp),o=j.useContext(GN),a=j.useContext(lp),l=j.useContext(W_).reducedMotion,c=j.useRef(null);r=r||o.renderer,!c.current&&r&&(c.current=r(t,{visualState:e,parent:i,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const u=c.current,f=j.useContext(iR);u&&!u.projection&&s&&(u.type==="html"||u.type==="svg")&&H8(c.current,n,s,f);const m=j.useRef(!1);j.useInsertionEffect(()=>{u&&m.current&&u.update(n,a)});const p=n[sR],y=j.useRef(!!p&&!((v=window.MotionHandoffIsComplete)!=null&&v.call(window,p))&&((E=window.MotionHasOptimisedAnimation)==null?void 0:E.call(window,p)));return nN(()=>{u&&(m.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),y.current&&u.animationState&&u.animationState.animateChanges())}),j.useEffect(()=>{u&&(!y.current&&u.animationState&&u.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)==null||x.call(window,p)}),y.current=!1),u.enteringChildren=void 0)}),u}function H8(t,e,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:oR(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&Ea(a),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:l,layoutRoot:c})}function oR(t){if(t)return t.options.allowProjection!==!1?t.projection:oR(t.parent)}function Fg(t,{forwardMotionProps:e=!1}={},n,r){n&&v8(n);const s=Q_(t)?U8:F8;function i(a,l){let c;const u={...j.useContext(W_),...a,layoutId:q8(a)},{isStatic:f}=u,m=k8(a),p=s(a,f);if(!f&&w_){K8();const y=G8(u);c=y.MeasureLayout,m.visualElement=W8(t,p,u,r,y.ProjectionNode)}return d.jsxs(cp.Provider,{value:m,children:[c&&m.visualElement?d.jsx(c,{visualElement:m.visualElement,...u}):null,O8(t,a,z8(p,m.visualElement,l),p,f,e)]})}i.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=j.forwardRef(i);return o[B8]=t,o}function q8({layoutId:t}){const e=j.useContext(__).id;return e&&t!==void 0?e+"-"+t:t}function K8(t,e){j.useContext(GN).strict}function G8(t){const{drag:e,layout:n}=bl;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function Q8(t,e){if(typeof Proxy>"u")return Fg;const n=new Map,r=(i,o)=>Fg(i,o,t,e),s=(i,o)=>r(i,o);return new Proxy(s,{get:(i,o)=>o==="create"?r:(n.has(o)||n.set(o,Fg(o,void 0,t,e)),n.get(o))})}function aR({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Y8({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function X8(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Ug(t){return t===void 0||t===1}function rv({scale:t,scaleX:e,scaleY:n}){return!Ug(t)||!Ug(e)||!Ug(n)}function eo(t){return rv(t)||lR(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function lR(t){return zE(t.x)||zE(t.y)}function zE(t){return t&&t!=="0%"}function cm(t,e,n){const r=t-n,s=e*r;return n+s}function $E(t,e,n,r,s){return s!==void 0&&(t=cm(t,s,r)),cm(t,n,r)+e}function sv(t,e=0,n=1,r,s){t.min=$E(t.min,e,n,r,s),t.max=$E(t.max,e,n,r,s)}function cR(t,{x:e,y:n}){sv(t.x,e.translate,e.scale,e.originPoint),sv(t.y,n.translate,n.scale,n.originPoint)}const WE=.999999999999,HE=1.0000000000001;function Z8(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Sa(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,cR(t,o)),r&&eo(i.latestValues)&&Sa(t,i.latestValues))}e.x<HE&&e.x>WE&&(e.x=1),e.y<HE&&e.y>WE&&(e.y=1)}function Ta(t,e){t.min=t.min+e,t.max=t.max+e}function qE(t,e,n,r,s=.5){const i=Je(t.min,t.max,s);sv(t,e,n,i,r)}function Sa(t,e){qE(t.x,e.x,e.scaleX,e.scale,e.originX),qE(t.y,e.y,e.scaleY,e.scale,e.originY)}function uR(t,e){return aR(X8(t.getBoundingClientRect(),e))}function J8(t,e,n){const r=uR(t,n),{scroll:s}=e;return s&&(Ta(r.x,s.offset.x),Ta(r.y,s.offset.y)),r}const KE=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ia=()=>({x:KE(),y:KE()}),GE=()=>({min:0,max:0}),ct=()=>({x:GE(),y:GE()}),iv={current:null},dR={current:!1};function ez(){if(dR.current=!0,!!w_)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>iv.current=t.matches;t.addEventListener("change",e),e()}else iv.current=!1}const tz=new WeakMap;function nz(t,e,n){for(const r in e){const s=e[r],i=n[r];if(Yt(s))t.addValue(r,s);else if(Yt(i))t.addValue(r,_l(s,{owner:t}));else if(i!==s)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(r);t.addValue(r,_l(o!==void 0?o:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const QE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class rz{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=F_,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=En.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Xe.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=dp(n),this.isVariantNode=YN(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in f){const p=f[m];l[m]!==void 0&&Yt(p)&&p.set(l[m])}}mount(e){var n;this.current=e,tz.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),dR.current||ez(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:iv.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Pi(this.notifyUpdate),Pi(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Ll.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Xe.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),i&&i(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in bl){const n=bl[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ct()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<QE.length;r++){const s=QE[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=e[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=nz(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=_l(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(rN(r)||iN(r))?r=parseFloat(r):!d8(r)&&Ni.test(n)&&(r=UN(e,n)),this.setBaseTarget(e,Yt(r)?r.get():r)),Yt(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=Y_(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Yt(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new I_),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){z_.render(this.render)}}class hR extends rz{constructor(){super(...arguments),this.KeyframeResolver=JB}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Yt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function fR(t,{style:e,vars:n},r,s){const i=t.style;let o;for(o in e)i[o]=e[o];s==null||s.applyProjectionStyles(i,r);for(o in n)i.setProperty(o,n[o])}function sz(t){return window.getComputedStyle(t)}class iz extends hR{constructor(){super(...arguments),this.type="html",this.renderInstance=fR}readValueFromInstance(e,n){var r;if(Ll.has(n))return(r=this.projection)!=null&&r.isProjecting?Yy(n):vB(e,n);{const s=sz(e),i=(P_(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return uR(e,n)}build(e,n,r){K_(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return X_(e,n,r)}}const mR=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function oz(t,e,n,r){fR(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(mR.has(s)?s:Z_(s),e.attrs[s])}class az extends hR{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ct}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ll.has(n)){const r=FN(n);return r&&r.default||0}return n=mR.has(n)?n:Z_(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return rR(e,n,r)}build(e,n,r){JN(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){oz(e,n,r,s)}mount(e){this.isSVGTag=tR(e.tagName),super.mount(e)}}const lz=(t,e)=>Q_(t)?new az(e):new iz(e,{allowProjection:t!==j.Fragment});function Fa(t,e,n){const r=t.getProps();return Y_(r,e,n!==void 0?n:r.custom,t)}const ov=t=>Array.isArray(t);function cz(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,_l(n))}function uz(t){return ov(t)?t[t.length-1]||0:t}function dz(t,e){const n=Fa(t,e);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const o in i){const a=uz(i[o]);cz(t,o,a)}}function hz(t){return!!(Yt(t)&&t.add)}function av(t,e){const n=t.getValue("willChange");if(hz(n))return n.add(e);if(!n&&ks.WillChange){const r=new ks.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function pR(t){return t.props[sR]}const fz=t=>t!==null;function mz(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(fz),i=e&&n!=="loop"&&e%2===1?0:s.length-1;return s[i]}const pz={type:"spring",stiffness:500,damping:25,restSpeed:10},gz=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),yz={type:"keyframes",duration:.8},vz={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},xz=(t,{keyframes:e})=>e.length>2?yz:Ll.has(t)?t.startsWith("scale")?gz(e[1]):pz:vz;function _z({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const J_=(t,e,n,r={},s,i)=>o=>{const a=U_(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-Vr(l);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:m=>{e.set(m),a.onUpdate&&a.onUpdate(m)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:i?void 0:s};_z(a)||Object.assign(u,xz(t,u)),u.duration&&(u.duration=Vr(u.duration)),u.repeatDelay&&(u.repeatDelay=Vr(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let f=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(tv(u),u.delay===0&&(f=!0)),(ks.instantAnimations||ks.skipAnimations)&&(f=!0,tv(u),u.delay=0),u.allowFlatten=!a.type&&!a.ease,f&&!i&&e.get()!==void 0){const m=mz(u.keyframes,a);if(m!==void 0){Xe.update(()=>{u.onUpdate(m),u.onComplete()});return}}return a.isSync?new V_(u):new BB(u)};function bz({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function gR(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(i=r);const l=[],c=s&&t.animationState&&t.animationState.getState()[s];for(const u in a){const f=t.getValue(u,t.latestValues[u]??null),m=a[u];if(m===void 0||c&&bz(c,u))continue;const p={delay:n,...U_(i||{},u)},y=f.get();if(y!==void 0&&!f.isAnimating&&!Array.isArray(m)&&m===y&&!p.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const x=pR(t);if(x){const _=window.MotionHandoffAnimation(x,u,Xe);_!==null&&(p.startTime=_,v=!0)}}av(t,u),f.start(J_(u,f,m,t.shouldReduceMotion&&ON.has(u)?{type:!1}:p,t,v));const E=f.animation;E&&l.push(E)}return o&&Promise.all(l).then(()=>{Xe.update(()=>{o&&dz(t,o)})}),l}function yR(t,e,n,r=0,s=1){const i=Array.from(t).sort((c,u)=>c.sortNodePosition(u)).indexOf(e),o=t.size,a=(o-1)*r;return typeof n=="function"?n(i,o):s===1?i*r:a-i*r}function lv(t,e,n={}){var l;const r=Fa(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(gR(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:m}=s;return wz(t,e,c,u,f,m,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[c,u]=a==="beforeChildren"?[i,o]:[o,i];return c().then(()=>u())}else return Promise.all([i(),o(n.delay)])}function wz(t,e,n=0,r=0,s=0,i=1,o){const a=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),a.push(lv(l,e,{...o,delay:n+(typeof r=="function"?0:r)+yR(t.variantChildren,l,r,s,i)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(a)}function kz(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>lv(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=lv(t,e,n);else{const s=typeof e=="function"?Fa(t,e,n.custom):e;r=Promise.all(gR(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function vR(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const Ez=q_.length;function xR(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?xR(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Ez;n++){const r=q_[n],s=t.props[r];(Vu(s)||s===!1)&&(e[r]=s)}return e}const Tz=[...H_].reverse(),Sz=H_.length;function Iz(t){return e=>Promise.all(e.map(({animation:n,options:r})=>kz(t,n,r)))}function Cz(t){let e=Iz(t),n=YE(),r=!0;const s=l=>(c,u)=>{var m;const f=Fa(t,u,l==="exit"?(m=t.presenceContext)==null?void 0:m.custom:void 0);if(f){const{transition:p,transitionEnd:y,...v}=f;c={...c,...v,...y}}return c};function i(l){e=l(t)}function o(l){const{props:c}=t,u=xR(t.parent)||{},f=[],m=new Set;let p={},y=1/0;for(let E=0;E<Sz;E++){const x=Tz[E],_=n[x],w=c[x]!==void 0?c[x]:u[x],P=Vu(w),C=x===l?_.isActive:null;C===!1&&(y=E);let R=w===u[x]&&w!==c[x]&&P;if(R&&r&&t.manuallyAnimateOnMount&&(R=!1),_.protectedKeys={...p},!_.isActive&&C===null||!w&&!_.prevProp||up(w)||typeof w=="boolean")continue;const T=Az(_.prevProp,w);let k=T||x===l&&_.isActive&&!R&&P||E>y&&P,S=!1;const I=Array.isArray(w)?w:[w];let N=I.reduce(s(x),{});C===!1&&(N={});const{prevResolvedValues:D={}}=_,M={...D,...N},Z=Q=>{k=!0,m.has(Q)&&(S=!0,m.delete(Q)),_.needsAnimating[Q]=!0;const F=t.getValue(Q);F&&(F.liveStyle=!1)};for(const Q in M){const F=N[Q],W=D[Q];if(p.hasOwnProperty(Q))continue;let te=!1;ov(F)&&ov(W)?te=!vR(F,W):te=F!==W,te?F!=null?Z(Q):m.add(Q):F!==void 0&&m.has(Q)?Z(Q):_.protectedKeys[Q]=!0}_.prevProp=w,_.prevResolvedValues=N,_.isActive&&(p={...p,...N}),r&&t.blockInitialAnimation&&(k=!1);const se=R&&T;k&&(!se||S)&&f.push(...I.map(Q=>{const F={type:x};if(typeof Q=="string"&&r&&!se&&t.manuallyAnimateOnMount&&t.parent){const{parent:W}=t,te=Fa(W,Q);if(W.enteringChildren&&te){const{delayChildren:we}=te.transition||{};F.delay=yR(W.enteringChildren,t,we)}}return{animation:Q,options:F}}))}if(m.size){const E={};if(typeof c.initial!="boolean"){const x=Fa(t,Array.isArray(c.initial)?c.initial[0]:c.initial);x&&x.transition&&(E.transition=x.transition)}m.forEach(x=>{const _=t.getBaseTarget(x),w=t.getValue(x);w&&(w.liveStyle=!0),E[x]=_??null}),f.push({animation:E})}let v=!!f.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(v=!1),r=!1,v?e(f):Promise.resolve()}function a(l,c){var f;if(n[l].isActive===c)return Promise.resolve();(f=t.variantChildren)==null||f.forEach(m=>{var p;return(p=m.animationState)==null?void 0:p.setActive(l,c)}),n[l].isActive=c;const u=o(l);for(const m in n)n[m].protectedKeys={};return u}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n,reset:()=>{n=YE()}}}function Az(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!vR(e,t):!1}function qi(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function YE(){return{animate:qi(!0),whileInView:qi(),whileHover:qi(),whileTap:qi(),whileDrag:qi(),whileFocus:qi(),exit:qi()}}class Vi{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Pz extends Vi{constructor(e){super(e),e.animationState||(e.animationState=Cz(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();up(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let Nz=0;class Rz extends Vi{constructor(){super(...arguments),this.id=Nz++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Mz={animation:{Feature:Pz},exit:{Feature:Rz}};function Uu(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Sd(t){return{point:{x:t.pageX,y:t.pageY}}}const Dz=t=>e=>$_(e)&&t(e,Sd(e));function Qc(t,e,n,r){return Uu(t,e,Dz(n),r)}const _R=1e-4,jz=1-_R,Oz=1+_R,bR=.01,Lz=0-bR,Vz=0+bR;function cn(t){return t.max-t.min}function Fz(t,e,n){return Math.abs(t-e)<=n}function XE(t,e,n,r=.5){t.origin=r,t.originPoint=Je(e.min,e.max,t.origin),t.scale=cn(n)/cn(e),t.translate=Je(n.min,n.max,t.origin)-t.originPoint,(t.scale>=jz&&t.scale<=Oz||isNaN(t.scale))&&(t.scale=1),(t.translate>=Lz&&t.translate<=Vz||isNaN(t.translate))&&(t.translate=0)}function Yc(t,e,n,r){XE(t.x,e.x,n.x,r?r.originX:void 0),XE(t.y,e.y,n.y,r?r.originY:void 0)}function ZE(t,e,n){t.min=n.min+e.min,t.max=t.min+cn(e)}function Uz(t,e,n){ZE(t.x,e.x,n.x),ZE(t.y,e.y,n.y)}function JE(t,e,n){t.min=e.min-n.min,t.max=t.min+cn(e)}function Xc(t,e,n){JE(t.x,e.x,n.x),JE(t.y,e.y,n.y)}function $n(t){return[t("x"),t("y")]}const wR=({current:t})=>t?t.ownerDocument.defaultView:null,eT=(t,e)=>Math.abs(t-e);function Bz(t,e){const n=eT(t.x,e.x),r=eT(t.y,e.y);return Math.sqrt(n**2+r**2)}class kR{constructor(e,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=zg(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,y=Bz(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!y)return;const{point:v}=m,{timestamp:E}=Pt;this.history.push({...v,timestamp:E});const{onStart:x,onMove:_}=this.handlers;p||(x&&x(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,m)},this.handlePointerMove=(m,p)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Bg(p,this.transformPagePoint),Xe.update(this.updatePoint,!0)},this.handlePointerUp=(m,p)=>{this.end();const{onEnd:y,onSessionEnd:v,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=zg(m.type==="pointercancel"?this.lastMoveEventInfo:Bg(p,this.transformPagePoint),this.history);this.startEvent&&y&&y(m,x),v&&v(m,x)},!$_(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=s||window;const a=Sd(e),l=Bg(a,this.transformPagePoint),{point:c}=l,{timestamp:u}=Pt;this.history=[{...c,timestamp:u}];const{onSessionStart:f}=n;f&&f(e,zg(l,this.history)),this.removeListeners=wd(Qc(this.contextWindow,"pointermove",this.handlePointerMove),Qc(this.contextWindow,"pointerup",this.handlePointerUp),Qc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Pi(this.updatePoint)}}function Bg(t,e){return e?{point:e(t.point)}:t}function tT(t,e){return{x:t.x-e.x,y:t.y-e.y}}function zg({point:t},e){return{point:t,delta:tT(t,ER(e)),offset:tT(t,zz(e)),velocity:$z(e,.1)}}function zz(t){return t[0]}function ER(t){return t[t.length-1]}function $z(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=ER(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Vr(e)));)n--;if(!r)return{x:0,y:0};const i=Qn(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Wz(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Je(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Je(n,t,r.max):Math.min(t,n)),t}function nT(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Hz(t,{top:e,left:n,bottom:r,right:s}){return{x:nT(t.x,n,s),y:nT(t.y,e,r)}}function rT(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function qz(t,e){return{x:rT(t.x,e.x),y:rT(t.y,e.y)}}function Kz(t,e){let n=.5;const r=cn(t),s=cn(e);return s>r?n=ju(e.min,e.max-r,t.min):r>s&&(n=ju(t.min,t.max-s,e.min)),ws(0,1,n)}function Gz(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const cv=.35;function Qz(t=cv){return t===!1?t=0:t===!0&&(t=cv),{x:sT(t,"left","right"),y:sT(t,"top","bottom")}}function sT(t,e,n){return{min:iT(t,e),max:iT(t,n)}}function iT(t,e){return typeof t=="number"?t:t[e]||0}const Yz=new WeakMap;class Xz{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ct(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=f=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Sd(f).point)},o=(f,m)=>{const{drag:p,dragPropagation:y,onDragStart:v}=this.getProps();if(p&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=r8(p),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),$n(x=>{let _=this.getAxisMotionValue(x).get()||0;if(Fr.test(_)){const{projection:w}=this.visualElement;if(w&&w.layout){const P=w.layout.layoutBox[x];P&&(_=cn(P)*(parseFloat(_)/100))}}this.originPoint[x]=_}),v&&Xe.postRender(()=>v(f,m)),av(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},a=(f,m)=>{this.latestPointerEvent=f,this.latestPanInfo=m;const{dragPropagation:p,dragDirectionLock:y,onDirectionLock:v,onDrag:E}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:x}=m;if(y&&this.currentDirection===null){this.currentDirection=Zz(x),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",m.point,x),this.updateAxis("y",m.point,x),this.visualElement.render(),E&&E(f,m)},l=(f,m)=>{this.latestPointerEvent=f,this.latestPanInfo=m,this.stop(f,m),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>$n(f=>{var m;return this.getAnimationState(f)==="paused"&&((m=this.getAxisMotionValue(f).animation)==null?void 0:m.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new kR(e,{onSessionStart:i,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:r,contextWindow:wR(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,s=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!r)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Xe.postRender(()=>a(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!xh(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=Wz(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;e&&Ea(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=Hz(r.layoutBox,e):this.constraints=!1,this.elastic=Qz(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&$n(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=Gz(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ea(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=J8(r,s.root,this.visualElement.getTransformPagePoint());let o=qz(s.layout.layoutBox,i);if(n){const a=n(Y8(o));this.hasMutatedConstraints=!!a,a&&(o=aR(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=$n(u=>{if(!xh(u,n,this.currentDirection))return;let f=l&&l[u]||{};o&&(f={min:0,max:0});const m=s?200:1e6,p=s?40:1e7,y={type:"inertia",velocity:r?e[u]:0,bounceStiffness:m,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(u,y)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return av(this.visualElement,e),r.start(J_(e,r,0,n,this.visualElement,!1))}stopAnimation(){$n(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){$n(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){$n(n=>{const{drag:r}=this.getProps();if(!xh(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-Je(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ea(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};$n(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=Kz({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),$n(o=>{if(!xh(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Je(l,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;Yz.set(this.visualElement,this);const e=this.visualElement.current,n=Qc(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Ea(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Xe.read(r);const o=Uu(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&($n(u=>{const f=this.getAxisMotionValue(u);f&&(this.originPoint[u]+=l[u].translate,f.set(f.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=cv,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function xh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Zz(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Jz extends Vi{constructor(e){super(e),this.removeGroupControls=Jn,this.removeListeners=Jn,this.controls=new Xz(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Jn}unmount(){this.removeGroupControls(),this.removeListeners()}}const oT=t=>(e,n)=>{t&&Xe.postRender(()=>t(e,n))};class e7 extends Vi{constructor(){super(...arguments),this.removePointerDownListener=Jn}onPointerDown(e){this.session=new kR(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:wR(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:oT(e),onStart:oT(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&Xe.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=Qc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const af={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function aT(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ac={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(he.test(t))t=parseFloat(t);else return t;const n=aT(t,e.target.x),r=aT(t,e.target.y);return`${n}% ${r}%`}},t7={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Ni.parse(t);if(s.length>5)return r;const i=Ni.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const c=Je(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),i(s)}};let $g=!1;class n7 extends j.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;E8(r7),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),$g&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),af.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,{projection:o}=r;return o&&(o.isPresent=i,$g=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==i?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||Xe.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),z_.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;$g=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function TR(t){const[e,n]=KN(),r=j.useContext(__);return d.jsx(n7,{...t,layoutGroup:r,switchLayoutGroup:j.useContext(iR),isPresent:e,safeToRemove:n})}const r7={borderRadius:{...ac,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ac,borderTopRightRadius:ac,borderBottomLeftRadius:ac,borderBottomRightRadius:ac,boxShadow:t7};function s7(t,e,n){const r=Yt(t)?t:_l(t);return r.start(J_("",r,e,n)),r.animation}const i7=(t,e)=>t.depth-e.depth;class o7{constructor(){this.children=[],this.isDirty=!1}add(e){k_(this.children,e),this.isDirty=!0}remove(e){E_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(i7),this.isDirty=!1,this.children.forEach(e)}}function a7(t,e){const n=En.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(Pi(r),t(i-e))};return Xe.setup(r,!0),()=>Pi(r)}const SR=["TopLeft","TopRight","BottomLeft","BottomRight"],l7=SR.length,lT=t=>typeof t=="string"?parseFloat(t):t,cT=t=>typeof t=="number"||he.test(t);function c7(t,e,n,r,s,i){s?(t.opacity=Je(0,n.opacity??1,u7(r)),t.opacityExit=Je(e.opacity??1,0,d7(r))):i&&(t.opacity=Je(e.opacity??1,n.opacity??1,r));for(let o=0;o<l7;o++){const a=`border${SR[o]}Radius`;let l=uT(e,a),c=uT(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||cT(l)===cT(c)?(t[a]=Math.max(Je(lT(l),lT(c),r),0),(Fr.test(c)||Fr.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Je(e.rotate||0,n.rotate||0,r))}function uT(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const u7=IR(0,.5,fN),d7=IR(.5,.95,Jn);function IR(t,e,n){return r=>r<t?0:r>e?1:n(ju(t,e,r))}function dT(t,e){t.min=e.min,t.max=e.max}function Bn(t,e){dT(t.x,e.x),dT(t.y,e.y)}function hT(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function fT(t,e,n,r,s){return t-=e,t=cm(t,1/n,r),s!==void 0&&(t=cm(t,1/s,r)),t}function h7(t,e=0,n=1,r=.5,s,i=t,o=t){if(Fr.test(e)&&(e=parseFloat(e),e=Je(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Je(i.min,i.max,r);t===i&&(a-=e),t.min=fT(t.min,e,n,a,s),t.max=fT(t.max,e,n,a,s)}function mT(t,e,[n,r,s],i,o){h7(t,e[n],e[r],e[s],e.scale,i,o)}const f7=["x","scaleX","originX"],m7=["y","scaleY","originY"];function pT(t,e,n,r){mT(t.x,e,f7,n?n.x:void 0,r?r.x:void 0),mT(t.y,e,m7,n?n.y:void 0,r?r.y:void 0)}function gT(t){return t.translate===0&&t.scale===1}function CR(t){return gT(t.x)&&gT(t.y)}function yT(t,e){return t.min===e.min&&t.max===e.max}function p7(t,e){return yT(t.x,e.x)&&yT(t.y,e.y)}function vT(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function AR(t,e){return vT(t.x,e.x)&&vT(t.y,e.y)}function xT(t){return cn(t.x)/cn(t.y)}function _T(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class g7{constructor(){this.members=[]}add(e){k_(this.members,e),e.scheduleRender()}remove(e){if(E_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function y7(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:f,rotateY:m,skewX:p,skewY:y}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),f&&(r+=`rotateX(${f}deg) `),m&&(r+=`rotateY(${m}deg) `),p&&(r+=`skewX(${p}deg) `),y&&(r+=`skewY(${y}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const Wg=["","X","Y","Z"],v7=1e3;let x7=0;function Hg(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function PR(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=pR(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Xe,!(s||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&PR(r)}function NR({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=x7++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(w7),this.nodes.forEach(S7),this.nodes.forEach(I7),this.nodes.forEach(k7)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new o7)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new I_),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=qN(o)&&!c8(o),this.instance=o;const{layoutId:a,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),t){let u,f=0;const m=()=>this.root.updateBlockedByResize=!1;Xe.read(()=>{f=window.innerWidth}),t(o,()=>{const p=window.innerWidth;p!==f&&(f=p,this.root.updateBlockedByResize=!0,u&&u(),u=a7(m,250),af.hasAnimatedSinceResize&&(af.hasAnimatedSinceResize=!1,this.nodes.forEach(kT)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&c&&(a||l)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:f,hasRelativeLayoutChanged:m,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||c.getDefaultTransition()||R7,{onLayoutAnimationStart:v,onLayoutAnimationComplete:E}=c.getProps(),x=!this.targetLayout||!AR(this.targetLayout,p),_=!f&&m;if(this.options.layoutRoot||this.resumeFrom||_||f&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const w={...U_(y,"layout"),onPlay:v,onComplete:E};(c.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w),this.setAnimationOrigin(u,_)}else f||kT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Pi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(C7),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&PR(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const f=this.path[u];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(bT);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(wT);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(T7),this.nodes.forEach(_7),this.nodes.forEach(b7)):this.nodes.forEach(wT),this.clearAllSnapshots();const a=En.now();Pt.delta=ws(0,1e3/60,a-Pt.timestamp),Pt.timestamp=a,Pt.isProcessing=!0,Mg.update.process(Pt),Mg.preRender.process(Pt),Mg.render.process(Pt),Pt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,z_.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(E7),this.sharedNodes.forEach(A7)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Xe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Xe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!cn(this.snapshot.measuredBox.x)&&!cn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ct(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!CR(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&this.instance&&(a||eo(this.latestValues)||u)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),M7(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:o}=this.options;if(!o)return ct();const a=o.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(D7))){const{scroll:u}=this.root;u&&(Ta(a.x,u.offset.x),Ta(a.y,u.offset.y))}return a}removeElementScroll(o){var l;const a=ct();if(Bn(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:f,options:m}=u;u!==this.root&&f&&m.layoutScroll&&(f.wasRoot&&Bn(a,o),Ta(a.x,f.offset.x),Ta(a.y,f.offset.y))}return a}applyTransform(o,a=!1){const l=ct();Bn(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Sa(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),eo(u.latestValues)&&Sa(l,u.latestValues)}return eo(this.latestValues)&&Sa(l,this.latestValues),l}removeTransform(o){const a=ct();Bn(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!eo(c.latestValues))continue;rv(c.latestValues)&&c.updateSnapshot();const u=ct(),f=c.measurePageBox();Bn(u,f),pT(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return eo(this.latestValues)&&pT(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Pt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var m;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:f}=this.options;if(!(!this.layout||!(u||f))){if(this.resolvedRelativeTargetAt=Pt.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ct(),this.relativeTargetOrigin=ct(),Xc(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Bn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ct(),this.targetWithTransforms=ct()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Uz(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Bn(this.target,this.layout.layoutBox),cR(this.target,this.targetDelta)):Bn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ct(),this.relativeTargetOrigin=ct(),Xc(this.relativeTargetOrigin,this.target,p.target),Bn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||rv(this.parent.latestValues)||lR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var y;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Pt.timestamp&&(l=!1),l)return;const{layout:c,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||u))return;Bn(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;Z8(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=ct());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(hT(this.prevProjectionDelta.x,this.projectionDelta.x),hT(this.prevProjectionDelta.y,this.projectionDelta.y)),Yc(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==m||!_T(this.projectionDelta.x,this.prevProjectionDelta.x)||!_T(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ia(),this.projectionDelta=Ia(),this.projectionDeltaWithTransform=Ia()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},f=Ia();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=ct(),p=l?l.source:void 0,y=this.layout?this.layout.source:void 0,v=p!==y,E=this.getStack(),x=!E||E.members.length<=1,_=!!(v&&!x&&this.options.crossfade===!0&&!this.path.some(N7));this.animationProgress=0;let w;this.mixTargetDelta=P=>{const C=P/1e3;ET(f.x,o.x,C),ET(f.y,o.y,C),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Xc(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),P7(this.relativeTarget,this.relativeTargetOrigin,m,C),w&&p7(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=ct()),Bn(w,this.relativeTarget)),v&&(this.animationValues=u,c7(u,c,this.latestValues,C,_,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,c;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(Pi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Xe.update(()=>{af.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=_l(0)),this.currentAnimation=s7(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),o.onUpdate&&o.onUpdate(u)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(v7),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&RR(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||ct();const f=cn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const m=cn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+m}Bn(a,l),Sa(a,u),Yc(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new g7),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&Hg("z",o,c,this.animationValues);for(let u=0;u<Wg.length;u++)Hg(`rotate${Wg[u]}`,o,c,this.animationValues),Hg(`skew${Wg[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=of(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=of(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!eo(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const u=c.animationValues||c.latestValues;this.applyTransformsToTarget();let f=y7(this.projectionDeltaWithTransform,this.treeScale,u);l&&(f=l(u,f)),o.transform=f;const{x:m,y:p}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${p.origin*100}% 0`,c.animationValues?o.opacity=c===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:o.opacity=c===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const y in Fu){if(u[y]===void 0)continue;const{correct:v,applyTo:E,isCSSVariable:x}=Fu[y],_=f==="none"?u[y]:v(u[y],c);if(E){const w=E.length;for(let P=0;P<w;P++)o[E[P]]=_}else x?this.options.visualElement.renderState.vars[y]=_:o[y]=_}this.options.layoutId&&(o.pointerEvents=c===this?of(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(bT),this.root.sharedNodes.clear()}}}function _7(t){t.updateLayout()}function b7(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=e.source!==t.layout.source;i==="size"?$n(f=>{const m=o?e.measuredBox[f]:e.layoutBox[f],p=cn(m);m.min=r[f].min,m.max=m.min+p}):RR(i,e.layoutBox,r)&&$n(f=>{const m=o?e.measuredBox[f]:e.layoutBox[f],p=cn(r[f]);m.max=m.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+p)});const a=Ia();Yc(a,r,e.layoutBox);const l=Ia();o?Yc(l,t.applyTransform(s,!0),e.measuredBox):Yc(l,r,e.layoutBox);const c=!CR(a);let u=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:m,layout:p}=f;if(m&&p){const y=ct();Xc(y,e.layoutBox,m.layoutBox);const v=ct();Xc(v,r,p.layoutBox),AR(y,v)||(u=!0),f.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=y,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function w7(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function k7(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function E7(t){t.clearSnapshot()}function bT(t){t.clearMeasurements()}function wT(t){t.isLayoutDirty=!1}function T7(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function kT(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function S7(t){t.resolveTargetDelta()}function I7(t){t.calcProjection()}function C7(t){t.resetSkewAndRotation()}function A7(t){t.removeLeadSnapshot()}function ET(t,e,n){t.translate=Je(e.translate,0,n),t.scale=Je(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function TT(t,e,n,r){t.min=Je(e.min,n.min,r),t.max=Je(e.max,n.max,r)}function P7(t,e,n,r){TT(t.x,e.x,n.x,r),TT(t.y,e.y,n.y,r)}function N7(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const R7={duration:.45,ease:[.4,0,.1,1]},ST=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),IT=ST("applewebkit/")&&!ST("chrome/")?Math.round:Jn;function CT(t){t.min=IT(t.min),t.max=IT(t.max)}function M7(t){CT(t.x),CT(t.y)}function RR(t,e,n){return t==="position"||t==="preserve-aspect"&&!Fz(xT(e),xT(n),.2)}function D7(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const j7=NR({attachResizeListener:(t,e)=>Uu(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),qg={current:void 0},MR=NR({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!qg.current){const t=new j7({});t.mount(window),t.setOptions({layoutScroll:!0}),qg.current=t}return qg.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),O7={pan:{Feature:e7},drag:{Feature:Jz,ProjectionNode:MR,MeasureLayout:TR}};function AT(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&Xe.postRender(()=>i(e,Sd(e)))}class L7 extends Vi{mount(){const{current:e}=this.node;e&&(this.unmount=s8(e,(n,r)=>(AT(this.node,r,"Start"),s=>AT(this.node,s,"End"))))}unmount(){}}class V7 extends Vi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=wd(Uu(this.node.current,"focus",()=>this.onFocus()),Uu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function PT(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&Xe.postRender(()=>i(e,Sd(e)))}class F7 extends Vi{mount(){const{current:e}=this.node;e&&(this.unmount=l8(e,(n,r)=>(PT(this.node,r,"Start"),(s,{success:i})=>PT(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const uv=new WeakMap,Kg=new WeakMap,U7=t=>{const e=uv.get(t.target);e&&e(t)},B7=t=>{t.forEach(U7)};function z7({root:t,...e}){const n=t||document;Kg.has(n)||Kg.set(n,{});const r=Kg.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(B7,{root:t,...e})),r[s]}function $7(t,e,n){const r=z7(e);return uv.set(t,n),r.observe(t),()=>{uv.delete(t),r.unobserve(t)}}const W7={some:0,all:1};class H7 extends Vi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:W7[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:f}=this.node.getProps(),m=c?u:f;m&&m(l)};return $7(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(q7(e,n))&&this.startObserver()}unmount(){}}function q7({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const K7={inView:{Feature:H7},tap:{Feature:F7},focus:{Feature:V7},hover:{Feature:L7}},G7={layout:{ProjectionNode:MR,MeasureLayout:TR}},Q7={...Mz,...K7,...O7,...G7},ie=Q8(Q7,lz);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y7=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),X7=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),NT=t=>{const e=X7(t);return e.charAt(0).toUpperCase()+e.slice(1)},DR=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),Z7=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var J7={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e$=j.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>j.createElement("svg",{ref:l,...J7,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:DR("lucide",s),...!i&&!Z7(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,u])=>j.createElement(c,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=(t,e)=>{const n=j.forwardRef(({className:r,...s},i)=>j.createElement(e$,{ref:i,iconNode:e,className:DR(`lucide-${Y7(NT(t))}`,`lucide-${t}`,r),...s}));return n.displayName=NT(t),n};/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t$=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],xi=Ee("activity",t$);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n$=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],r$=Ee("award",n$);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s$=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],i$=Ee("bell",s$);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o$=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],um=Ee("calendar",o$);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],eb=Ee("circle-alert",a$);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l$=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],jR=Ee("circle-check-big",l$);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c$=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Bu=Ee("clock",c$);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u$=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],RT=Ee("download",u$);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d$=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],dm=Ee("eye-off",d$);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h$=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],hm=Ee("eye",h$);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f$=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],fm=Ee("flame",f$);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m$=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],p$=Ee("funnel",m$);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g$=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],y$=Ee("house",g$);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],x$=Ee("info",v$);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _$=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],mm=Ee("lock",_$);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b$=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],w$=Ee("log-out",b$);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k$=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],dv=Ee("mail",k$);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E$=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],T$=Ee("palette",E$);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S$=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],I$=Ee("play",S$);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C$=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],A$=Ee("refresh-cw",C$);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P$=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],N$=Ee("ruler",P$);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R$=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],OR=Ee("save",R$);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M$=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],MT=Ee("search",M$);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D$=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],LR=Ee("settings",D$);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j$=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],O$=Ee("shield",j$);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L$=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],V$=Ee("star",L$);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],tb=Ee("target",F$);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U$=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],B$=Ee("timer",U$);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z$=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Gg=Ee("trash-2",z$);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $$=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],hp=Ee("triangle-alert",$$);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W$=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],pm=Ee("trophy",W$);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H$=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],q$=Ee("upload",H$);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K$=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],fp=Ee("user",K$);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G$=[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]],Q$=Ee("weight",G$);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y$=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],mp=Ee("x",Y$);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X$=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Z$=Ee("zap",X$);function J$(t){return{"auth/email-already-in-use":"An account with this email already exists.","auth/invalid-email":"Please enter a valid email address.","auth/weak-password":"Password is too weak. Please choose a stronger password (at least 6 characters).","auth/operation-not-allowed":"Email/password accounts are not enabled.","auth/user-not-found":"No account found with this email address.","auth/wrong-password":"Incorrect password. Please try again.","auth/user-disabled":"This account has been disabled. Please contact support.","auth/too-many-requests":"Too many failed attempts. Please try again later.","auth/network-request-failed":"Network error. Please check your internet connection.","auth/invalid-credential":"Invalid email or password. Please try again.","auth/requires-recent-login":"Please log out and log in again to complete this action.","auth/email-already-exists":"This email is already registered.","auth/invalid-phone-number":"Invalid phone number format.","auth/phone-number-already-exists":"This phone number is already registered.","auth/credential-already-in-use":"This credential is already associated with another account.","auth/missing-email":"Email address is required to reset password.","auth/invalid-continue-uri":"The continue URL is invalid. Please try again.","auth/unauthorized-continue-uri":"The continue URL is not authorized. Please contact support."}[t]||"An error occurred. Please try again."}function eW({onSuccess:t,onSwitchToSignUp:e,isLoading:n=!1}){const[r,s]=j.useState(""),[i,o]=j.useState(""),[a,l]=j.useState(!1),[c,u]=j.useState(!1),[f,m]=j.useState({}),[p,y]=j.useState(!1),[v,E]=j.useState(""),[x,_]=j.useState(!1),[w,P]=j.useState(""),[C,R]=j.useState(!1),T=()=>{const J={};return r?/\S+@\S+\.\S+/.test(r)||(J.email="Email is invalid"):J.email="Email is required",i?i.length<6&&(J.password="Password must be at least 6 characters"):J.password="Password is required",m(J),Object.keys(J).length===0},k=J=>{switch(J){case"auth/user-not-found":return"No account found with this email address";case"auth/wrong-password":return"Incorrect password";case"auth/invalid-email":return"Invalid email address";case"auth/user-disabled":return"This account has been disabled";case"auth/too-many-requests":return"Too many failed attempts. Please try again later";case"auth/network-request-failed":return"Network error. Please check your connection";default:return"Invalid credentials. Please try again"}},S=async J=>{if(J.preventDefault(),m({}),!!T()){u(!0);try{const F=(await h3(nf,r,i)).user,W={uid:F.uid,email:F.email,displayName:F.displayName||r.split("@")[0],emailVerified:F.emailVerified};t&&t(W)}catch(Q){console.error("Login error:",Q),m({general:k(Q.code)})}finally{u(!1)}}},I=J=>Q=>{J==="email"?s(Q.target.value):o(Q.target.value),(f[J]||f.general)&&m(F=>({...F,[J]:void 0,general:void 0}))},N=()=>{y(!0),E(r||""),P(""),R(!1)},D=J=>!J||J.trim().length===0?{valid:!1,error:"Email is required"}:/\S+@\S+\.\S+/.test(J)?{valid:!0}:{valid:!1,error:"Please enter a valid email address"},M=async J=>{J.preventDefault();const Q=D(v);if(!Q.valid){P(Q.error||"Invalid email");return}_(!0),P(""),R(!1);try{const F=v.trim();if(!F||F.length===0)throw new Error("Email cannot be empty");if(!nf)throw new Error("Authentication service not available. Please refresh the page.");console.log("Sending password reset email to:",F),await u3(nf,F,{url:window.location.origin,handleCodeInApp:!1}),console.log("Password reset email sent successfully"),R(!0),setTimeout(()=>{E("")},5e3)}catch(F){if(console.error("Password reset error:",F),console.error("Error details:",{code:F.code,message:F.message,name:F.name}),F.code){const W=J$(F.code);P(W)}else F.message?P(F.message):P("Failed to send reset email. Please try again or contact support.");R(!1)}finally{_(!1)}},Z=()=>{y(!1),E(""),P(""),R(!1)},se=c||n;return d.jsxs(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-lg mx-auto",children:[d.jsxs("div",{className:"bg-white/90 dark:bg-gray-900/90 backdrop-blur-xl rounded-3xl shadow-2xl p-10 border border-gray-200/50 dark:border-gray-700/50",children:[d.jsxs("div",{className:"text-center mb-10",children:[d.jsx("h1",{className:"text-4xl font-black text-gray-900 dark:text-white mb-3",children:"Welcome Back"}),d.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 font-medium",children:"Sign in to continue your fitness journey"})]}),d.jsxs("form",{onSubmit:S,className:"space-y-8",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Email Address"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:d.jsx(dv,{className:"h-5 w-5 text-gray-400"})}),d.jsx("input",{id:"email",type:"email",value:r,onChange:I("email"),className:`block w-full pl-12 pr-4 py-4 border-2 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 font-medium ${f.email?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-600":"border-gray-300 dark:border-gray-600 bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl text-gray-900 dark:text-white hover:border-gray-400 dark:hover:border-gray-500"}`,placeholder:"Enter your email"})]}),f.email&&d.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400 font-medium",children:f.email})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Password"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:d.jsx(mm,{className:"h-5 w-5 text-gray-400"})}),d.jsx("input",{id:"password",type:a?"text":"password",value:i,onChange:I("password"),className:`block w-full pl-12 pr-14 py-4 border-2 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 font-medium ${f.password?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-600":"border-gray-300 dark:border-gray-600 bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl text-gray-900 dark:text-white hover:border-gray-400 dark:hover:border-gray-500"}`,placeholder:"Enter your password"}),d.jsx("button",{type:"button",onClick:()=>l(!a),className:"absolute inset-y-0 right-0 pr-4 flex items-center hover:bg-gray-100 dark:hover:bg-gray-700 rounded-r-2xl transition-colors duration-200",children:a?d.jsx(dm,{className:"h-5 w-5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"}):d.jsx(hm,{className:"h-5 w-5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"})})]}),f.password&&d.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400 font-medium",children:f.password})]}),f.general&&d.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border-2 border-red-200 dark:border-red-800 rounded-2xl p-4",children:d.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 font-medium",children:f.general})}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),d.jsx("label",{htmlFor:"remember-me",className:"ml-3 block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Remember me"})]}),d.jsx("button",{type:"button",onClick:N,className:"text-sm font-semibold text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 transition-colors duration-200",children:"Forgot password?"})]}),d.jsx(ie.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:se,className:"w-full flex justify-center py-4 px-6 border border-transparent rounded-2xl shadow-xl text-lg font-bold text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300",children:se?d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-white mr-3"}),"Signing in..."]}):"Sign In"})]}),d.jsx("div",{className:"mt-8 text-center",children:d.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 font-medium",children:["Don't have an account?"," ",d.jsx("button",{onClick:e,className:"font-bold text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 transition-colors duration-200",children:"Sign up here"})]})})]}),d.jsx(Td,{children:p&&d.jsxs(d.Fragment,{children:[d.jsx(ie.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:Z,className:"fixed inset-0 bg-black/60 dark:bg-black/80 backdrop-blur-sm z-50"}),d.jsx(ie.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:J=>J.stopPropagation(),children:d.jsxs("div",{className:"bg-white/95 dark:bg-gray-900/95 backdrop-blur-xl rounded-3xl shadow-2xl border border-gray-200/50 dark:border-gray-700/50 w-full max-w-md p-8 relative",children:[d.jsx("button",{onClick:Z,className:"absolute top-4 right-4 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200","aria-label":"Close modal",children:d.jsx(mp,{className:"h-5 w-5 text-gray-500 dark:text-gray-400"})}),C?d.jsxs("div",{className:"text-center py-4",children:[d.jsx(ie.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:d.jsx(jR,{className:"w-12 h-12 text-green-600 dark:text-green-400"})}),d.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-3",children:"Check Your Email"}),d.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["We've sent a password reset link to ",d.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:v})]}),d.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-500 mb-6 space-y-2",children:[d.jsx("p",{className:"font-semibold",children:"Next steps:"}),d.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[d.jsx("li",{children:"Check your inbox (emails usually arrive within 1-2 minutes)"}),d.jsxs("li",{children:["Check your ",d.jsx("span",{className:"font-semibold",children:"spam/junk folder"})," - Firebase emails sometimes go there"]}),d.jsxs("li",{children:["Look for emails from ",d.jsx("span",{className:"font-semibold",children:"noreply@pumulo-12eb1.firebaseapp.com"})]}),d.jsx("li",{children:'If using Gmail, check the "Promotions" or "Updates" tab'}),d.jsx("li",{children:"The link expires in 1 hour"}),d.jsx("li",{children:"Make sure this email is registered to your account"})]}),d.jsx("p",{className:"mt-3 text-xs italic",children:"If you don't receive the email after 5 minutes, try again or contact support."})]}),d.jsx("button",{onClick:Z,className:"w-full py-3 px-6 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-bold rounded-2xl transition-all duration-300 shadow-lg hover:shadow-xl",children:"Got it"})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("div",{className:"w-16 h-16 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:d.jsx(mm,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),d.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Reset Password"}),d.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Enter your email address and we'll send you a link to reset your password."})]}),d.jsxs("form",{onSubmit:M,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"reset-email",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Email Address"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:d.jsx(dv,{className:"h-5 w-5 text-gray-400"})}),d.jsx("input",{id:"reset-email",type:"email",value:v,onChange:J=>{E(J.target.value),P("")},className:`block w-full pl-12 pr-4 py-4 border-2 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 font-medium ${w?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-600":"border-gray-300 dark:border-gray-600 bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl text-gray-900 dark:text-white hover:border-gray-400 dark:hover:border-gray-500"}`,placeholder:"Enter your email",disabled:x})]})]}),w&&d.jsxs(ie.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center gap-2 p-4 bg-red-50 dark:bg-red-900/20 border-2 border-red-200 dark:border-red-800 rounded-2xl",children:[d.jsx(eb,{className:"h-5 w-5 text-red-600 dark:text-red-400 flex-shrink-0"}),d.jsx("p",{className:"text-sm text-red-800 dark:text-red-200 font-medium",children:w})]}),d.jsx(ie.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:x,className:"w-full flex justify-center py-4 px-6 border border-transparent rounded-2xl shadow-xl text-lg font-bold text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300",children:x?d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-white mr-3"}),"Sending..."]}):"Send Reset Link"}),d.jsx("button",{type:"button",onClick:Z,className:"w-full py-3 px-6 border-2 border-gray-300 dark:border-gray-600 rounded-2xl text-gray-700 dark:text-gray-300 font-semibold hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors duration-200",disabled:x,children:"Cancel"})]})]})]})})]})})]})}function tW({onSuccess:t,onSwitchToLogin:e,isLoading:n=!1}){const[r,s]=j.useState({name:"",email:"",password:"",confirmPassword:""}),[i,o]=j.useState(!1),[a,l]=j.useState(!1),[c,u]=j.useState(!1),[f,m]=j.useState({}),p=()=>{const _={};return r.name.trim()||(_.name="Name is required"),r.email?/\S+@\S+\.\S+/.test(r.email)||(_.email="Email is invalid"):_.email="Email is required",r.password?r.password.length<6&&(_.password="Password must be at least 6 characters"):_.password="Password is required",r.confirmPassword?r.password!==r.confirmPassword&&(_.confirmPassword="Passwords do not match"):_.confirmPassword="Please confirm your password",m(_),Object.keys(_).length===0},y=_=>{switch(_){case"auth/email-already-in-use":return"An account with this email already exists";case"auth/invalid-email":return"Invalid email address";case"auth/weak-password":return"Password is too weak. Please choose a stronger password";case"auth/operation-not-allowed":return"Email/password accounts are not enabled";case"auth/network-request-failed":return"Network error. Please check your connection";default:return"Failed to create account. Please try again"}},v=async _=>{if(_.preventDefault(),m({}),!!p()){u(!0);try{const P=(await d3(nf,r.email,r.password)).user;await m3(P,{displayName:r.name});const C={uid:P.uid,email:P.email,displayName:r.name,emailVerified:P.emailVerified};t&&t(C)}catch(w){console.error("Signup error:",w),m({general:y(w.code)})}finally{u(!1)}}},E=_=>w=>{s(P=>({...P,[_]:w.target.value})),(f[_]||f.general)&&m(P=>({...P,[_]:void 0,general:void 0}))},x=c||n;return d.jsx(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-lg mx-auto",children:d.jsxs("div",{className:"bg-white/90 dark:bg-gray-900/90 backdrop-blur-xl rounded-3xl shadow-2xl p-10 border border-gray-200/50 dark:border-gray-700/50",children:[d.jsxs("div",{className:"text-center mb-10",children:[d.jsx("h1",{className:"text-4xl font-black text-gray-900 dark:text-white mb-3",children:"Create Account"}),d.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 font-medium",children:"Start your fitness journey today"})]}),d.jsxs("form",{onSubmit:v,className:"space-y-8",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"name",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Full Name"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:d.jsx(fp,{className:"h-5 w-5 text-gray-400"})}),d.jsx("input",{id:"name",type:"text",value:r.name,onChange:E("name"),className:`block w-full pl-12 pr-4 py-4 border-2 rounded-2xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all duration-300 font-medium ${f.name?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-600":"border-gray-300 dark:border-gray-600 bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl text-gray-900 dark:text-white hover:border-gray-400 dark:hover:border-gray-500"}`,placeholder:"Enter your full name"})]}),f.name&&d.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400 font-medium",children:f.name})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Email Address"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:d.jsx(dv,{className:"h-5 w-5 text-gray-400"})}),d.jsx("input",{id:"email",type:"email",value:r.email,onChange:E("email"),className:`block w-full pl-12 pr-4 py-4 border-2 rounded-2xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all duration-300 font-medium ${f.email?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-600":"border-gray-300 dark:border-gray-600 bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl text-gray-900 dark:text-white hover:border-gray-400 dark:hover:border-gray-500"}`,placeholder:"Enter your email"})]}),f.email&&d.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400 font-medium",children:f.email})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Password"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:d.jsx(mm,{className:"h-5 w-5 text-gray-400"})}),d.jsx("input",{id:"password",type:i?"text":"password",value:r.password,onChange:E("password"),className:`block w-full pl-12 pr-14 py-4 border-2 rounded-2xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all duration-300 font-medium ${f.password?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-600":"border-gray-300 dark:border-gray-600 bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl text-gray-900 dark:text-white hover:border-gray-400 dark:hover:border-gray-500"}`,placeholder:"Create a password"}),d.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute inset-y-0 right-0 pr-4 flex items-center hover:bg-gray-100 dark:hover:bg-gray-700 rounded-r-2xl transition-colors duration-200",children:i?d.jsx(dm,{className:"h-5 w-5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"}):d.jsx(hm,{className:"h-5 w-5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"})})]}),f.password&&d.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400 font-medium",children:f.password})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Confirm Password"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:d.jsx(mm,{className:"h-5 w-5 text-gray-400"})}),d.jsx("input",{id:"confirmPassword",type:a?"text":"password",value:r.confirmPassword,onChange:E("confirmPassword"),className:`block w-full pl-12 pr-14 py-4 border-2 rounded-2xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all duration-300 font-medium ${f.confirmPassword?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-600":"border-gray-300 dark:border-gray-600 bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl text-gray-900 dark:text-white hover:border-gray-400 dark:hover:border-gray-500"}`,placeholder:"Confirm your password"}),d.jsx("button",{type:"button",onClick:()=>l(!a),className:"absolute inset-y-0 right-0 pr-4 flex items-center hover:bg-gray-100 dark:hover:bg-gray-700 rounded-r-2xl transition-colors duration-200",children:a?d.jsx(dm,{className:"h-5 w-5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"}):d.jsx(hm,{className:"h-5 w-5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"})})]}),f.confirmPassword&&d.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400 font-medium",children:f.confirmPassword})]}),f.general&&d.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border-2 border-red-200 dark:border-red-800 rounded-2xl p-4",children:d.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 font-medium",children:f.general})}),d.jsxs("div",{className:"flex items-start",children:[d.jsx("div",{className:"flex items-center h-5",children:d.jsx("input",{id:"terms",name:"terms",type:"checkbox",required:!0,className:"h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded"})}),d.jsx("div",{className:"ml-3 text-sm",children:d.jsxs("label",{htmlFor:"terms",className:"text-gray-700 dark:text-gray-300 font-medium",children:["I agree to the"," ",d.jsx("button",{type:"button",className:"text-emerald-600 hover:text-emerald-500 dark:text-emerald-400 font-semibold",children:"Terms and Conditions"})," ","and"," ",d.jsx("button",{type:"button",className:"text-emerald-600 hover:text-emerald-500 dark:text-emerald-400 font-semibold",children:"Privacy Policy"})]})})]}),d.jsx(ie.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:x,className:"w-full flex justify-center py-4 px-6 border border-transparent rounded-2xl shadow-xl text-lg font-bold text-white bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300",children:x?d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-white mr-3"}),"Creating account..."]}):"Create Account"})]}),d.jsx("div",{className:"mt-8 text-center",children:d.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 font-medium",children:["Already have an account?"," ",d.jsx("button",{onClick:e,className:"font-bold text-emerald-600 hover:text-emerald-500 dark:text-emerald-400 dark:hover:text-emerald-300 transition-colors duration-200",children:"Sign in here"})]})})]})})}function nW({onAuthSuccess:t}){const[e,n]=j.useState(!0),[r,s]=j.useState(!1),{login:i}=Cn(),o=a=>{var c;const l={uid:a.uid,name:a.displayName||((c=a.email)==null?void 0:c.split("@")[0])||"User",email:a.email,age:0,weightKg:0,heightCm:0,theme:"system",fitnessGoal:"Not yet set"};i(l),t(l)};return d.jsxs("div",{className:"min-h-screen gradient-elegant-light dark:gradient-elegant-dark flex items-center justify-center p-6",children:[d.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[d.jsx("div",{className:"absolute -top-40 -right-40 w-96 h-96 bg-blue-200/10 dark:bg-blue-900/10 rounded-full mix-blend-multiply dark:mix-blend-screen filter blur-3xl opacity-60 animate-pulse"}),d.jsx("div",{className:"absolute -bottom-40 -left-40 w-96 h-96 bg-indigo-200/10 dark:bg-indigo-900/10 rounded-full mix-blend-multiply dark:mix-blend-screen filter blur-3xl opacity-60 animate-pulse",style:{animationDelay:"2s"}}),d.jsx("div",{className:"absolute top-40 left-1/2 w-96 h-96 bg-emerald-200/10 dark:bg-emerald-900/10 rounded-full mix-blend-multiply dark:mix-blend-screen filter blur-3xl opacity-60 animate-pulse",style:{animationDelay:"4s"}})]}),d.jsxs("div",{className:"relative z-10 w-full max-w-lg",children:[d.jsxs(ie.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-12",children:[d.jsx("div",{className:"flex items-center justify-center gap-4 mb-6",children:d.jsx("h1",{className:"text-5xl font-black bg-gradient-to-r from-slate-900 via-blue-900 to-indigo-900 dark:from-white dark:via-blue-100 dark:to-indigo-100 bg-clip-text text-transparent",children:"FITNESS TRACKER"})}),d.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 font-medium",children:"Your personal fitness companion"})]}),d.jsx(ie.div,{initial:{opacity:0,x:e?-20:20},animate:{opacity:1,x:0},transition:{duration:.3},children:e?d.jsx(eW,{onSuccess:o,onSwitchToSignUp:()=>n(!1),isLoading:r}):d.jsx(tW,{onSuccess:o,onSwitchToLogin:()=>n(!0),isLoading:r})},e?"login":"signup"),d.jsxs(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"mt-12 text-center",children:[d.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6 font-medium",children:"Track your progress, log workouts, and achieve your fitness goals"}),d.jsxs("div",{className:"flex justify-center space-x-8 text-sm text-gray-500 dark:text-gray-400",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-lg",children:""}),d.jsx("span",{children:"Analytics"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-lg",children:""}),d.jsx("span",{children:"Workouts"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-lg",children:""}),d.jsx("span",{children:"Progress"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-lg",children:""}),d.jsx("span",{children:"Goals"})]})]})]})]})]})}function rW({children:t}){const{isAuthenticated:e,isLoading:n,login:r}=Cn();return n?d.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),d.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading..."})]})}):e?d.jsx(d.Fragment,{children:t}):d.jsx(nW,{onAuthSuccess:r})}const VR=j.createContext(void 0);function sW({children:t}){const[e,n]=j.useState(()=>{if(typeof window>"u")return"light";const s=localStorage.getItem("theme"),i=document.documentElement,o=window.matchMedia("(prefers-color-scheme: dark)").matches,a=s==="dark"||s==="system"&&o;return i.classList.toggle("dark",a),s||"light"});j.useEffect(()=>{localStorage.setItem("theme",e);const s=document.documentElement,i=window.matchMedia("(prefers-color-scheme: dark)").matches,o=e==="dark"||e==="system"&&i;s.classList.toggle("dark",o)},[e]);const r=j.useMemo(()=>({theme:e,setTheme:n}),[e]);return d.jsx(VR.Provider,{value:r,children:t})}const iW=()=>{const t=j.useContext(VR);if(!t)throw new Error("useTheme must be used within ThemeProvider");return t};function oW(){const{theme:t,setTheme:e}=iW(),n=t==="dark"?"light":"dark",r=`Switch to ${n} theme`;return d.jsxs("button",{"aria-label":r,title:r,className:"w-full flex items-center justify-between px-3 py-2 rounded-md transition hover:bg-gray-100 dark:hover:bg-gray-800",onClick:()=>e(n),children:[d.jsxs("span",{className:"flex items-center gap-2",children:[t==="dark"?d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),"Switch theme"]}),d.jsx("span",{className:"text-xs text-muted-foreground capitalize",children:t})]})}const nb="users";async function zu(t){const e=pn(lt,nb,t),n=await l_(e);return n.exists()?n.data():null}async function FR(t){try{if(!t||!t.uid||typeof t.uid!="string"||t.uid.trim().length===0)throw new Error("Invalid user data: user ID is required");if(!t.email||typeof t.email!="string"||!t.email.includes("@"))throw new Error("Invalid user data: valid email is required");if(!t.name||typeof t.name!="string"||t.name.trim().length<2)throw new Error("Invalid user data: name must be at least 2 characters");const e=pn(lt,nb,t.uid);await Yo(e,t,{merge:!0})}catch(e){throw console.error("Error saving user to Firestore:",e),e.code==="permission-denied"?new Error("Permission denied. Please check your authentication."):e}}async function pp(t,e){try{if(!t||typeof t!="string"||t.trim().length===0)throw new Error("Invalid user ID provided");if(!e||typeof e!="object"||Object.keys(e).length===0)throw new Error("No update data provided");if(e.email!==void 0&&(!e.email||typeof e.email!="string"||!e.email.includes("@")))throw new Error("Invalid email format");if(e.name!==void 0&&(!e.name||typeof e.name!="string"||e.name.trim().length<2))throw new Error("Name must be at least 2 characters long");if(e.age!==void 0&&(typeof e.age!="number"||e.age<0||e.age>150))throw new Error("Age must be a valid number between 0 and 150");if(e.weightKg!==void 0&&(typeof e.weightKg!="number"||e.weightKg<0||e.weightKg>1e3))throw new Error("Weight must be a valid number between 0 and 1000 kg");if(e.heightCm!==void 0&&(typeof e.heightCm!="number"||e.heightCm<0||e.heightCm>300))throw new Error("Height must be a valid number between 0 and 300 cm");const n=pn(lt,nb,t),r={...e,uid:t};await Yo(n,r,{merge:!0})}catch(n){throw console.error("Error updating user profile:",n),n.code==="permission-denied"?new Error("Permission denied. Please check your authentication."):n.code==="unavailable"?new Error("Service temporarily unavailable. Please try again later."):n}}async function UR(t,e,n){const r={uid:t,name:n||e.split("@")[0]||"User",email:e,age:0,weightKg:0,heightCm:0,fitnessGoal:"",theme:"system",units:"metric",language:"en",privacy:"private",notifications:{workoutReminders:!0,goalAchievements:!0,weeklyProgress:!1},dataSharing:!0,activityTracking:!0};return await FR(r),r}const aW=Object.freeze(Object.defineProperty({__proto__:null,createInitialUserProfile:UR,getUserFromFirestore:zu,saveUserToFirestore:FR,updateUserProfile:pp},Symbol.toStringTag,{value:"Module"})),BR=j.createContext(void 0);function lW({children:t}){const{user:e}=Cn(),n=rr(),{data:r}=ln({queryKey:["user","profile",e==null?void 0:e.uid],queryFn:()=>zu(e.uid),enabled:!!(e!=null&&e.uid)}),s=r||(e?{...e,units:"metric",language:"en",privacy:"private",notifications:{workoutReminders:!0,goalAchievements:!0,weeklyProgress:!1},dataSharing:!0,activityTracking:!0}:null),i=jn({mutationFn:R=>pp(e.uid,R),onSuccess:()=>{n.invalidateQueries({queryKey:["user","profile",e==null?void 0:e.uid]})}}),[o,a]=j.useState(()=>typeof window>"u"?"light":localStorage.getItem("theme")||(s==null?void 0:s.theme)||"system"),l=R=>{a(R),typeof window<"u"&&localStorage.setItem("theme",R);const T=document.documentElement,k=window.matchMedia("(prefers-color-scheme: dark)").matches,S=R==="dark"||R==="system"&&k;T.classList.toggle("dark",S),e!=null&&e.uid&&(i.mutate({theme:R}),hr(async()=>{const{logUserActivity:I}=await Promise.resolve().then(()=>Tr);return{logUserActivity:I}},void 0).then(({logUserActivity:I})=>{I(e.uid,{type:"settings_changed",metadata:{setting:"theme",value:R}}).catch(N=>console.error("Error logging theme activity:",N))}))},c=(s==null?void 0:s.units)||"metric",u=R=>{e!=null&&e.uid&&(i.mutate({units:R}),hr(async()=>{const{logUserActivity:T}=await Promise.resolve().then(()=>Tr);return{logUserActivity:T}},void 0).then(({logUserActivity:T})=>{T(e.uid,{type:"settings_changed",metadata:{setting:"units",value:R}}).catch(k=>console.error("Error logging units activity:",k))}))},f=(s==null?void 0:s.language)||"en",m=R=>{e!=null&&e.uid&&(i.mutate({language:R}),hr(async()=>{const{logUserActivity:T}=await Promise.resolve().then(()=>Tr);return{logUserActivity:T}},void 0).then(({logUserActivity:T})=>{T(e.uid,{type:"settings_changed",metadata:{setting:"language",value:R}}).catch(k=>console.error("Error logging language activity:",k))}))},p=(s==null?void 0:s.privacy)||"private",y=R=>{e!=null&&e.uid&&(i.mutate({privacy:R}),hr(async()=>{const{logUserActivity:T}=await Promise.resolve().then(()=>Tr);return{logUserActivity:T}},void 0).then(({logUserActivity:T})=>{T(e.uid,{type:"settings_changed",metadata:{setting:"privacy",value:R}}).catch(k=>console.error("Error logging privacy activity:",k))}))},v=(s==null?void 0:s.notifications)||{workoutReminders:!0,goalAchievements:!0,weeklyProgress:!1},E=R=>{e!=null&&e.uid&&(i.mutate({notifications:{...v,...R}}),hr(async()=>{const{logUserActivity:T}=await Promise.resolve().then(()=>Tr);return{logUserActivity:T}},void 0).then(({logUserActivity:T})=>{T(e.uid,{type:"settings_changed",metadata:{setting:"notifications",value:R}}).catch(k=>console.error("Error logging notifications activity:",k))}))},x=(s==null?void 0:s.dataSharing)??!0,_=R=>{e!=null&&e.uid&&(i.mutate({dataSharing:R}),hr(async()=>{const{logUserActivity:T}=await Promise.resolve().then(()=>Tr);return{logUserActivity:T}},void 0).then(({logUserActivity:T})=>{T(e.uid,{type:"settings_changed",metadata:{setting:"dataSharing",value:R}}).catch(k=>console.error("Error logging dataSharing activity:",k))}))},w=(s==null?void 0:s.activityTracking)??!0,P=R=>{e!=null&&e.uid&&(i.mutate({activityTracking:R}),hr(async()=>{const{logUserActivity:T}=await Promise.resolve().then(()=>Tr);return{logUserActivity:T}},void 0).then(({logUserActivity:T})=>{T(e.uid,{type:"settings_changed",metadata:{setting:"activityTracking",value:R}}).catch(k=>console.error("Error logging activityTracking activity:",k))}))};j.useEffect(()=>{const R=document.documentElement,T=window.matchMedia("(prefers-color-scheme: dark)").matches,k=o==="dark"||o==="system"&&T;R.classList.toggle("dark",k)},[o]);const C={theme:o,setTheme:l,units:c,setUnits:u,language:f,setLanguage:m,privacy:p,setPrivacy:y,notifications:v,setNotifications:E,dataSharing:x,setDataSharing:_,activityTracking:w,setActivityTracking:P,isUpdating:i.isPending};return d.jsx(BR.Provider,{value:C,children:t})}function rb(){const t=j.useContext(BR);if(!t)throw new Error("useSettings must be used within a SettingsProvider");return t}const zR=(t,e)=>e==="imperial"?Math.round(t*2.20462*10)/10:t,cW=(t,e)=>{if(e==="imperial"){const n=t/2.54,r=Math.floor(n/12),s=Math.round(n%12);return{value:r,unit:`${r}'${s}"`}}return{value:t,unit:"cm"}},sb=t=>t==="imperial"?"lbs":"kg",uW=(t,e)=>{const n=zR(t,e),r=sb(e);return`${n} ${r}`},dW=(t,e)=>{if(e==="imperial"){const{unit:n}=cW(t,e);return n}return`${t} cm`},hW=(t,e)=>t.map(n=>({...n,weight:zR(n.weight,e)})),_i=[{category:"Cardio",exercises:[{id:"ex1",name:"Overhead Reach",imageUrl:"https://media.self.com/photos/61157d860fba8918ef07da15/master/w_1600%2Cc_limit/SE_SEN_07_032_Cardio_GIF-01%2520Squat%2520to%2520Overhead%2520Reach-min.gif"},{id:"ex2",name:"Jumping Jacks",imageUrl:"https://media.self.com/photos/61157e25553830ba14166ef2/master/w_1600%2Cc_limit/SE_SEN_07_032_Cardio_GIF-02%2520Modified%2520Jumping%2520Jacks-min.gif"},{id:"ex3",name:"Ice Skaters",imageUrl:"https://media.self.com/photos/611581f6c66629131d52d34f/master/w_1600%2Cc_limit/SE_SEN_07_032_Cardio_GIF-13%2520Ice%2520Skaters-min.gif"},{id:"ex4",name:"Toe Taps With Reach",imageUrl:"https://media.self.com/photos/61157ed6e1b6f66010ac3706/master/w_1600%2Cc_limit/SE_SEN_07_032_Cardio_GIF-04%2520Toe%2520Taps%2520With%2520Reach-min.gif"}]},{category:"Arms",exercises:[{id:"ex5",name:"Tricep Box Dips",imageUrl:"https://media.self.com/photos/5c4a2f33203e3933090ec27b/master/w_1600%2Cc_limit/tricep-box-dips-Amanda_093.gif"},{id:"ex6",name:"Elevated Push Ups",imageUrl:"https://media.self.com/photos/5c4a2e2601584d32459c06ce/master/w_1600%2Cc_limit/elevated-push-up-Amanda_091.gif"},{id:"ex7",name:"Diamond Push Ups",imageUrl:"https://media.self.com/photos/5c41fa45a9cd1e7eb7fd0f2b/master/w_1600%2Cc_limit/diamond-push-up-Amanda_079.gif"},{id:"ex8",name:"Plank With T Rotation",imageUrl:"https://media.self.com/photos/5c4b2809a9cd1e7eb7fd0f4d/master/w_1600%2Cc_limit/plank-with-t-rotation-Amanda_041.gif"}]},{category:"Legs",exercises:[{id:"ex9",name:"Split Squats",imageUrl:"https://barbend.com/wp-content/uploads/2023/04/split-squat-barbend-movement-gif-masters.gif"},{id:"ex10",name:"Smith Machine Calf Raises",imageUrl:"https://barbend.com/wp-content/uploads/2024/04/smith-machine-calf-raise-barbend-movement-gif-masters-1.gif"},{id:"ex11",name:"Nordic Hamstring Curls",imageUrl:"https://barbend.com/wp-content/uploads/2023/03/nordic-hamstring-curl-barbend-movement-gif-masters.gif"},{id:"ex12",name:"Goblet Squats",imageUrl:"https://barbend.com/wp-content/uploads/2023/12/goblet-squat-barbend-movement-gif-masters.gif"}]},{category:"Abs",exercises:[{id:"ex13",name:"Crunches",imageUrl:"https://i.imgur.com/UJAnRhJ.gif"},{id:"ex14",name:"Russian Twist",imageUrl:"https://i.imgur.com/PG6vgpl.gif"},{id:"ex15",name:"Side Jack-Knife",imageUrl:"https://i.imgur.com/HjyLvkX.gif"},{id:"ex16",name:"Jack-knife ",imageUrl:"https://i.imgur.com/CBH7Ejv.gif"}]},{category:"Stretches",exercises:[{id:"ex17",name:"Yoga Flow",imageUrl:"https://assets.vogue.com/photos/5891df45fb0604bf1f5c6056/master/w_1600,c_limit/karlie-stretch-1.gif"},{id:"ex18",name:"Hamstring Stretch",imageUrl:"https://assets.vogue.com/photos/5891df4a9c1609bf7a72e2eb/master/w_1600,c_limit/karlie-stretch-4.gif"},{id:"ex19",name:"Shoulder Stretch",imageUrl:"https://assets.vogue.com/photos/5891df4b12a7b1df212c840d/master/w_1600,c_limit/karlie-stretch-5.gif"},{id:"ex20",name:"Neck Stretch",imageUrl:"https://assets.vogue.com/photos/5891df48fb0604bf1f5c6058/master/w_1600,c_limit/karlie-stretch-3.gif"}]}],Ki=({children:t,active:e,onClick:n,icon:r})=>d.jsx(ie.li,{whileHover:{x:4},transition:{duration:.2},children:d.jsxs("button",{className:`w-full text-left px-4 py-3.5 rounded-2xl transition-all duration-300 font-medium flex items-center space-x-3 group ${e?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg shadow-blue-500/25":"hover:bg-gray-50 dark:hover:bg-gray-800/50 text-gray-700 dark:text-gray-300 hover:shadow-md hover:text-blue-600 dark:hover:text-blue-400"}`,onClick:s=>{s.preventDefault(),sessionStorage.setItem("sidebar_nav","true"),n&&n()},children:[d.jsx("div",{className:`transition-colors duration-200 ${e?"text-white":"text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400"}`,children:r}),d.jsx("span",{children:t})]})});function fW({profile:t,onNav:e}){var u;const{logout:n,user:r}=Cn(),s=rb(),{data:i=[]}=ln({queryKey:["workouts","logs",r==null?void 0:r.uid],queryFn:()=>bd.getLogs(r.uid),enabled:!!(r!=null&&r.uid),select:f=>f.slice(0,1)}),o=i[0]||null,a=j.useCallback(f=>{for(const m of _i){const p=m.exercises.find(y=>y.id===f);if(p)return p.name}return"Unknown Exercise"},[]),l=j.useMemo(()=>{if(t!=null&&t.weightKg&&(t==null?void 0:t.weightKg)>0&&(t!=null&&t.heightCm)&&(t==null?void 0:t.heightCm)>0){const f=t.heightCm/100;return(t.weightKg/(f*f)).toFixed(1)}return null},[t==null?void 0:t.weightKg,t==null?void 0:t.heightCm]),c=j.useMemo(()=>{if(!l)return null;const f=Number(l);return f<18.5?{category:"Underweight",color:"text-blue-600 dark:text-blue-400"}:f<25?{category:"Normal",color:"text-green-600 dark:text-green-400"}:f<30?{category:"Overweight",color:"text-yellow-600 dark:text-yellow-400"}:{category:"Obese",color:"text-red-600 dark:text-red-400"}},[l]);return d.jsx("aside",{className:"w-80 shrink-0 pr-6",children:d.jsxs("div",{className:"sticky top-8 space-y-6",children:[d.jsxs(ie.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},onClick:()=>e==null?void 0:e("profile"),className:"w-full bg-white/90 dark:bg-gray-900/90 backdrop-blur-xl rounded-3xl p-6 shadow-xl hover:shadow-2xl transition-all duration-300 relative group border border-gray-200/50 dark:border-gray-700/50",children:[d.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[d.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-500 via-indigo-500 to-purple-600 flex items-center justify-center text-2xl font-bold text-white shadow-lg",children:((u=t==null?void 0:t.name)==null?void 0:u.charAt(0))??"U"}),d.jsxs("div",{children:[d.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:(t==null?void 0:t.name)??"User"}),d.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 font-medium",children:t!=null&&t.age&&t.age>0?`${t.age} years old`:"Age not set"})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 rounded-2xl p-4 text-center border border-blue-200/50 dark:border-blue-700/50",children:[d.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400 font-semibold uppercase tracking-wide",children:"Height"}),d.jsx("div",{className:"font-bold text-blue-700 dark:text-blue-300 mt-1",children:t!=null&&t.heightCm&&t.heightCm>0?dW(t.heightCm,s.units):"Not set"})]}),d.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-800/30 rounded-2xl p-4 text-center border border-green-200/50 dark:border-green-700/50",children:[d.jsx("div",{className:"text-xs text-green-600 dark:text-green-400 font-semibold uppercase tracking-wide",children:"Weight"}),d.jsx("div",{className:"font-bold text-green-700 dark:text-green-300 mt-1",children:t!=null&&t.weightKg&&t.weightKg>0?uW(t.weightKg,s.units):"Not set"})]})]}),l&&c&&d.jsxs("div",{className:"mt-4 bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/30 dark:to-purple-800/30 rounded-2xl p-4 border border-purple-200/50 dark:border-purple-700/50",children:[d.jsx("div",{className:"text-xs text-purple-600 dark:text-purple-400 font-semibold uppercase tracking-wide text-center",children:"BMI"}),d.jsxs("div",{className:"flex items-center justify-between mt-2",children:[d.jsx("div",{className:"font-bold text-purple-700 dark:text-purple-300 text-lg",children:l}),d.jsx("div",{className:`text-xs font-semibold ${c.color}`,children:c.category})]})]}),(t==null?void 0:t.fitnessGoal)&&d.jsxs("div",{className:"mt-4 bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/30 dark:to-orange-800/30 rounded-2xl p-4 border border-orange-200/50 dark:border-orange-700/50",children:[d.jsx("div",{className:"text-xs text-orange-600 dark:text-orange-400 font-semibold uppercase tracking-wide",children:"Fitness Goal"}),d.jsx("div",{className:"text-sm text-orange-700 dark:text-orange-300 mt-2 line-clamp-2",children:t.fitnessGoal})]}),d.jsx("div",{className:"absolute inset-0 rounded-3xl border-2 border-blue-500/0 group-hover:border-blue-500/20 transition-all duration-300 pointer-events-none"})]}),d.jsx(ie.nav,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"bg-white/90 dark:bg-gray-900/90 backdrop-blur-xl rounded-3xl p-6 shadow-xl border border-gray-200/50 dark:border-gray-700/50",role:"navigation","aria-label":"Primary",children:d.jsxs("ul",{className:"space-y-2",role:"listbox","aria-label":"Primary navigation",onKeyDown:f=>{const m=f.currentTarget,p=Array.from(m.querySelectorAll("button")).filter(E=>!E.disabled);if(p.length===0)return;const y=p.findIndex(E=>E===document.activeElement),v=E=>{const x=Math.max(0,Math.min(p.length-1,E)),_=p[x];_&&_.focus()};switch(f.key){case"ArrowDown":f.preventDefault(),v(y>=0?y+1:0);break;case"ArrowUp":f.preventDefault(),v(y>=0?y-1:p.length-1);break;case"Home":f.preventDefault(),v(0);break;case"End":f.preventDefault(),v(p.length-1);break}},children:[d.jsx(Ki,{onClick:()=>e==null?void 0:e("dashboard"),icon:d.jsx(y$,{className:"w-5 h-5"}),children:"Home"}),d.jsx(Ki,{onClick:()=>e==null?void 0:e("workouts"),icon:d.jsx(xi,{className:"w-5 h-5"}),children:"Workout Logs"}),d.jsx(Ki,{onClick:()=>e==null?void 0:e("goals"),icon:d.jsx(tb,{className:"w-5 h-5"}),children:"My Goals"}),d.jsx(Ki,{onClick:()=>e==null?void 0:e("profile"),icon:d.jsx(fp,{className:"w-5 h-5"}),children:"Profile Settings"}),d.jsx(Ki,{onClick:()=>e==null?void 0:e("schedule"),icon:d.jsx(um,{className:"w-5 h-5"}),children:"Schedule"}),d.jsx(Ki,{onClick:()=>e==null?void 0:e("achievements"),icon:d.jsx(pm,{className:"w-5 h-5"}),children:"Achievements"}),d.jsx(Ki,{onClick:()=>e==null?void 0:e("settings"),icon:d.jsx(LR,{className:"w-5 h-5"}),children:"Settings"}),d.jsx("li",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:d.jsx(oW,{})}),d.jsx("li",{className:"pt-2",children:d.jsxs(ie.button,{whileHover:{x:4},whileTap:{scale:.98},onClick:n,className:"w-full text-left px-4 py-3.5 rounded-2xl transition-all duration-300 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 flex items-center space-x-3 font-medium hover:shadow-md group",children:[d.jsx(w$,{className:"w-5 h-5 transition-colors duration-200 group-hover:text-red-700 dark:group-hover:text-red-300"}),d.jsx("span",{children:"Sign Out"})]})})]})}),d.jsxs(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"bg-gradient-to-br from-emerald-50 via-teal-50 to-cyan-50 dark:from-emerald-900/20 dark:via-teal-900/20 dark:to-cyan-900/20 rounded-3xl p-6 shadow-xl border border-emerald-200/50 dark:border-emerald-700/50",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[d.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-xl flex items-center justify-center",children:d.jsx(xi,{className:"w-5 h-5 text-white"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Latest Workout"}),d.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Your most recent session"})]})]}),o?d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"bg-white/60 dark:bg-gray-800/60 backdrop-blur-sm rounded-xl p-4 border border-emerald-200/30 dark:border-emerald-700/30",children:[d.jsx("div",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:a(o.exerciseId)}),d.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[d.jsxs("div",{className:"flex items-center gap-1.5 text-gray-600 dark:text-gray-400",children:[d.jsx(Bu,{className:"w-4 h-4"}),d.jsxs("span",{children:[o.durationMinutes.toFixed(1)," min"]})]}),d.jsxs("div",{className:"flex items-center gap-1.5 text-gray-600 dark:text-gray-400",children:[d.jsx(fm,{className:"w-4 h-4"}),d.jsxs("span",{children:[o.caloriesBurned," kcal"]})]})]}),d.jsx("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-500",children:new Date(o.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]}),d.jsx("button",{onClick:f=>{f.preventDefault(),sessionStorage.setItem("sidebar_nav","true"),e==null||e("workouts")},className:"w-full px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white font-medium rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl text-sm",children:"View All Workouts"})]}):d.jsxs("div",{className:"text-center py-4",children:[d.jsx(xi,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),d.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"No workouts yet"}),d.jsx("button",{onClick:f=>{f.preventDefault(),e==null||e("dashboard")},className:"px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white font-medium rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl text-sm",children:"Start Your First Workout"})]})]})]})})}function mW({toast:t,onClose:e}){j.useEffect(()=>{if(t.duration!==0){const o=setTimeout(()=>{e(t.id)},t.duration||5e3);return()=>clearTimeout(o)}},[t.id,t.duration,e]);const n={success:jR,error:eb,warning:hp,info:x$},r={success:{bg:"bg-green-50 dark:bg-green-900/20",border:"border-green-200 dark:border-green-800",text:"text-green-800 dark:text-green-200",icon:"text-green-600 dark:text-green-400"},error:{bg:"bg-red-50 dark:bg-red-900/20",border:"border-red-200 dark:border-red-800",text:"text-red-800 dark:text-red-200",icon:"text-red-600 dark:text-red-400"},warning:{bg:"bg-yellow-50 dark:bg-yellow-900/20",border:"border-yellow-200 dark:border-yellow-800",text:"text-yellow-800 dark:text-yellow-200",icon:"text-yellow-600 dark:text-yellow-400"},info:{bg:"bg-blue-50 dark:bg-blue-900/20",border:"border-blue-200 dark:border-blue-800",text:"text-blue-800 dark:text-blue-200",icon:"text-blue-600 dark:text-blue-400"}},s=n[t.type],i=r[t.type];return d.jsx(ie.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.95,transition:{duration:.2}},className:`${i.bg} ${i.border} border rounded-2xl shadow-lg backdrop-blur-sm p-4 min-w-[300px] max-w-md`,children:d.jsxs("div",{className:"flex items-start space-x-3",children:[d.jsx(s,{className:`${i.icon} w-5 h-5 mt-0.5 flex-shrink-0`}),d.jsx("div",{className:"flex-1",children:d.jsx("p",{className:`${i.text} text-sm font-medium`,children:t.message})}),d.jsx("button",{onClick:()=>e(t.id),className:`${i.icon} hover:opacity-70 transition-opacity flex-shrink-0 p-1`,"aria-label":"Close notification",children:d.jsx(mp,{className:"w-4 h-4"})})]})})}function pW({toasts:t,onClose:e}){return d.jsx("div",{className:"fixed top-4 right-4 z-50 flex flex-col gap-2 pointer-events-none",children:d.jsx(Td,{children:t.map(n=>d.jsx("div",{className:"pointer-events-auto",children:d.jsx(mW,{toast:n,onClose:e})},n.id))})})}const $R=j.createContext(void 0);function gW({children:t}){const[e,n]=j.useState([]),r=j.useCallback(c=>{n(u=>u.filter(f=>f.id!==c))},[]),s=j.useCallback((c,u="info",f)=>{const p={id:Math.random().toString(36).substring(2,9),message:c,type:u,duration:f};n(y=>[...y,p])},[]),i=j.useCallback((c,u)=>{s(c,"success",u)},[s]),o=j.useCallback((c,u)=>{s(c,"error",u||7e3)},[s]),a=j.useCallback((c,u)=>{s(c,"warning",u)},[s]),l=j.useCallback((c,u)=>{s(c,"info",u)},[s]);return d.jsxs($R.Provider,{value:{showToast:s,showSuccess:i,showError:o,showWarning:a,showInfo:l},children:[t,d.jsx(pW,{toasts:e,onClose:r})]})}function Xo(){const t=j.useContext($R);if(!t)throw new Error("useToast must be used within ToastProvider");return t}function gm({open:t,title:e,message:n,confirmText:r="Confirm",cancelText:s="Cancel",onConfirm:i,onCancel:o,variant:a="warning"}){if(j.useEffect(()=>{if(!t)return;const u=m=>{m.key==="Escape"&&o()},f=m=>{m.key==="Enter"&&(m.metaKey||m.ctrlKey)&&i()};return document.addEventListener("keydown",u),document.addEventListener("keydown",f),()=>{document.removeEventListener("keydown",u),document.removeEventListener("keydown",f)}},[t,i,o]),!t)return null;const c={danger:{confirm:"bg-red-600 hover:bg-red-700 focus:ring-red-500",icon:"text-red-600 dark:text-red-400"},warning:{confirm:"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500",icon:"text-yellow-600 dark:text-yellow-400"},info:{confirm:"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500",icon:"text-blue-600 dark:text-blue-400"}}[a];return d.jsx(Td,{children:t&&d.jsxs(d.Fragment,{children:[d.jsx(ie.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:o,className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50"}),d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 pointer-events-none",children:d.jsx(ie.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 max-w-md w-full pointer-events-auto border border-gray-200 dark:border-gray-700",onClick:u=>u.stopPropagation(),children:d.jsxs("div",{className:"flex items-start space-x-4",children:[d.jsx("div",{className:`${c.icon} flex-shrink-0`,children:d.jsx(hp,{className:"w-6 h-6"})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:e}),d.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-6",children:n}),d.jsxs("div",{className:"flex space-x-3 justify-end",children:[d.jsx("button",{onClick:o,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-gray-500",children:s}),d.jsx("button",{onClick:i,className:`px-4 py-2 text-sm font-medium text-white rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 ${c.confirm}`,children:r})]})]}),d.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors flex-shrink-0","aria-label":"Close dialog",children:d.jsx(mp,{className:"w-5 h-5"})})]})})})]})})}const gp="goals";async function ib(t){try{if(!t||typeof t!="string"||t.trim().length===0)throw new Error("Invalid user ID provided");const e=Ii(lt,"users",t,gp),n=r_(e,a_("createdAt","desc"));return(await gd(n)).docs.map(s=>{const i=s.data();return{id:s.id,title:i.title||"",target:typeof i.target=="number"?i.target:0,current:typeof i.current=="number"?i.current:0,unit:i.unit||"",category:i.category||"weight",deadline:i.deadline||new Date().toISOString().split("T")[0],createdAt:i.createdAt||new Date().toISOString()}})}catch(e){throw console.error("Error getting user goals:",e),e.code==="permission-denied"?new Error("Permission denied. Please check your authentication."):new Error("Failed to fetch goals. Please try again.")}}async function yW(t,e){try{if(!t||typeof t!="string"||t.trim().length===0)throw new Error("Invalid user ID provided");if(!e||typeof e!="object")throw new Error("Invalid goal data provided");if(!e.title||typeof e.title!="string"||e.title.trim().length===0)throw new Error("Goal title is required");if(e.title.trim().length>200)throw new Error("Goal title must be less than 200 characters");if(typeof e.target!="number"||isNaN(e.target)||e.target<=0)throw new Error("Goal target must be a positive number");if(typeof e.current!="number"||isNaN(e.current)||e.current<0)throw new Error("Goal current value must be a non-negative number");if(!e.unit||typeof e.unit!="string"||e.unit.trim().length===0)throw new Error("Goal unit is required");if(!e.deadline||typeof e.deadline!="string"||e.deadline.trim().length===0)throw new Error("Goal deadline is required");const n=Ii(lt,"users",t,gp),r={...e,title:e.title.trim(),unit:e.unit.trim(),createdAt:new Date().toISOString()};return{id:(await c_(n,r)).id,...r}}catch(n){throw console.error("Error creating goal:",n),n.code==="permission-denied"?new Error("Permission denied. Please check your authentication."):n.message?n:new Error("Failed to create goal. Please try again.")}}async function vW(t,e,n){try{if(!t||typeof t!="string"||t.trim().length===0)throw new Error("Invalid user ID provided");if(!e||typeof e!="string"||e.trim().length===0)throw new Error("Invalid goal ID provided");if(!n||typeof n!="object"||Object.keys(n).length===0)throw new Error("No update data provided");if(n.title!==void 0){if(!n.title||typeof n.title!="string"||n.title.trim().length===0)throw new Error("Goal title cannot be empty");if(n.title.trim().length>200)throw new Error("Goal title must be less than 200 characters")}if(n.target!==void 0&&(typeof n.target!="number"||isNaN(n.target)||n.target<=0))throw new Error("Goal target must be a positive number");if(n.current!==void 0&&(typeof n.current!="number"||isNaN(n.current)||n.current<0))throw new Error("Goal current value must be a non-negative number");const r=pn(lt,"users",t,gp,e);await pP(r,n)}catch(r){throw console.error("Error updating goal:",r),r.code==="permission-denied"?new Error("Permission denied. Please check your authentication."):r.code==="not-found"?new Error("Goal not found."):r.message?r:new Error("Failed to update goal. Please try again.")}}async function xW(t,e){try{if(!t||typeof t!="string"||t.trim().length===0)throw new Error("Invalid user ID provided");if(!e||typeof e!="string"||e.trim().length===0)throw new Error("Invalid goal ID provided");const n=pn(lt,"users",t,gp,e);await gP(n)}catch(n){throw console.error("Error deleting goal:",n),n.code==="permission-denied"?new Error("Permission denied. Please check your authentication."):n.code==="not-found"?new Error("Goal not found."):new Error("Failed to delete goal. Please try again.")}}const yp="schedules";async function vp(t){try{if(!t||typeof t!="string"||t.trim().length===0)throw new Error("Invalid user ID provided");const e=pn(lt,"users",t,yp,"weekly"),n=await l_(e);if(!n.exists())return null;const r=n.data();if(!r||typeof r!="object")throw new Error("Invalid schedule data format");return{id:n.id,monday:Array.isArray(r.monday)?r.monday:[],tuesday:Array.isArray(r.tuesday)?r.tuesday:[],wednesday:Array.isArray(r.wednesday)?r.wednesday:[],thursday:Array.isArray(r.thursday)?r.thursday:[],friday:Array.isArray(r.friday)?r.friday:[],saturday:Array.isArray(r.saturday)?r.saturday:[],sunday:Array.isArray(r.sunday)?r.sunday:[],createdAt:r.createdAt||new Date().toISOString()}}catch(e){throw console.error("Error getting user schedule:",e),e.code==="permission-denied"?new Error("Permission denied. Please check your authentication."):new Error("Failed to fetch schedule. Please try again.")}}async function _W(t,e){try{if(!t||typeof t!="string"||t.trim().length===0)throw new Error("Invalid user ID provided");if(!e||typeof e!="object")throw new Error("Invalid schedule data provided");const n=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];for(const i of n){const o=e[i];if(o&&!Array.isArray(o))throw new Error(`Invalid ${i} schedule: must be an array`);if(Array.isArray(o))for(const a of o){if(!a||typeof a!="object")throw new Error(`Invalid schedule item in ${i}`);if(!a.time||typeof a.time!="string"||a.time.trim().length===0)throw new Error(`Schedule item in ${i} must have a time`);if(!a.activity||typeof a.activity!="string"||a.activity.trim().length===0)throw new Error(`Schedule item in ${i} must have an activity`);if(a.activity.trim().length>200)throw new Error(`Activity name in ${i} must be less than 200 characters`)}}const r=pn(lt,"users",t,yp,"weekly"),s={...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return await Yo(r,s),{id:"weekly",...s}}catch(n){throw console.error("Error creating user schedule:",n),n.code==="permission-denied"?new Error("Permission denied. Please check your authentication."):n.message?n:new Error("Failed to create schedule. Please try again.")}}async function WR(t,e){try{if(!t||typeof t!="string"||t.trim().length===0)throw new Error("Invalid user ID provided");if(!e||typeof e!="object"||Object.keys(e).length===0)throw new Error("No schedule data provided for update");const n=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];for(const s of n)if(s in e){const i=e[s];if(i&&!Array.isArray(i))throw new Error(`Invalid ${s} schedule: must be an array`);if(Array.isArray(i))for(const o of i){if(!o||typeof o!="object")throw new Error(`Invalid schedule item in ${s}`);if(!o.time||typeof o.time!="string"||o.time.trim().length===0)throw new Error(`Schedule item in ${s} must have a time`);if(!o.activity||typeof o.activity!="string"||o.activity.trim().length===0)throw new Error(`Schedule item in ${s} must have an activity`);if(o.activity.trim().length>200)throw new Error(`Activity name in ${s} must be less than 200 characters`)}}const r=pn(lt,"users",t,yp,"weekly");await Yo(r,{...e,updatedAt:new Date().toISOString()},{merge:!0});try{const{logUserActivity:s}=await hr(async()=>{const{logUserActivity:i}=await Promise.resolve().then(()=>Tr);return{logUserActivity:i}},void 0);await s(t,{type:"schedule_updated",metadata:{daysUpdated:Object.keys(e).length,scheduleData:Object.keys(e)}})}catch(s){console.error("Error logging schedule activity:",s)}}catch(n){throw console.error("Error updating user schedule:",n),n.code==="permission-denied"?new Error("Permission denied. Please check your authentication."):n.code==="not-found"?new Error("Schedule not found."):n.message?n:new Error("Failed to update schedule. Please try again.")}}async function bW(t){const e=pn(lt,"users",t,yp,"weekly");await gP(e)}async function HR(t){try{const e=pn(lt,"users",t,"preferences","main"),n=await l_(e);return n.exists()?n.data():null}catch(e){return console.error("Error getting user preferences:",e),null}}async function qR(t,e){try{if(!t||typeof t!="string"||t.trim().length===0)throw new Error("Invalid user ID provided");const n={};Object.entries(e).forEach(([s,i])=>{i!==void 0&&(n[s]=i)}),n.lastVisitedAt=new Date().toISOString();const r=pn(lt,"users",t,"preferences","main");await Yo(r,n,{merge:!0})}catch(n){throw console.error("Error saving user preferences:",n),n}}async function Zc(t,e){try{const n=pn(lt,"users",t,"activity",`${Date.now()}_${e.type}`);await Yo(n,{...e,timestamp:new Date().toISOString()})}catch(n){console.error("Error logging user activity:",n)}}const Tr=Object.freeze(Object.defineProperty({__proto__:null,getUserPreferences:HR,logUserActivity:Zc,saveUserPreferences:qR},Symbol.toStringTag,{value:"Module"}));function wW({onBack:t}){const{user:e}=Cn(),n=rr(),{showSuccess:r}=Xo(),[s,i]=j.useState(!1),[o,a]=j.useState(null),[l,c]=j.useState(!1),[u,f]=j.useState(null),[m,p]=j.useState({title:"",target:0,current:0,unit:"",category:"weight",deadline:""}),{data:y=[],isLoading:v}=ln({queryKey:["goals",e==null?void 0:e.uid],queryFn:()=>ib(e.uid),enabled:!!(e!=null&&e.uid)}),E=jn({mutationFn:S=>yW(e.uid,S),onSuccess:S=>{n.invalidateQueries({queryKey:["goals",e==null?void 0:e.uid]}),e!=null&&e.uid&&Zc(e.uid,{type:"goal_created",metadata:{goalId:S.id,title:S.title,target:S.target}}),C()}}),x=jn({mutationFn:({goalId:S,updates:I})=>vW(e.uid,S,I),onSuccess:(S,I)=>{n.invalidateQueries({queryKey:["goals",e==null?void 0:e.uid]}),e!=null&&e.uid&&Zc(e.uid,{type:"goal_created",metadata:{goalId:I.goalId,...I.updates}}),C()}}),_=jn({mutationFn:S=>xW(e.uid,S),onSuccess:(S,I)=>{n.invalidateQueries({queryKey:["goals",e==null?void 0:e.uid]}),r("Goal deleted successfully!"),c(!1),f(null),e!=null&&e.uid&&Zc(e.uid,{type:"goal_created",metadata:{goalId:I,action:"deleted"}})}}),w=()=>{p({title:"",target:0,current:0,unit:"",category:"weight",deadline:""}),a(null),i(!0)},P=S=>{p({title:S.title,target:S.target,current:S.current,unit:S.unit,category:"weight",deadline:S.deadline}),a(S),i(!0)},C=()=>{i(!1),a(null),p({title:"",target:0,current:0,unit:"",category:"weight",deadline:""})},R=S=>{S.preventDefault(),o?x.mutate({goalId:o.id,updates:m}):E.mutate(m)},T=S=>{f(S),c(!0)},k=()=>{u&&_.mutate(u)};return v?d.jsx("div",{className:"flex items-center justify-center py-12",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between mb-8",children:[d.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"My weight goals"}),d.jsx("button",{className:"px-6 py-3 rounded-xl bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-medium transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",onClick:w,children:"+ Add Goal"})]}),y.length===0?d.jsx("div",{className:"text-center py-12",children:d.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg",children:'No goals yet. Click "Add Goal" to create your first goal!'})}):d.jsx("div",{className:"space-y-6",children:y.map(S=>{const I=Math.min(100,Math.round(S.current/S.target*100)),N=Math.ceil((new Date(S.deadline).getTime()-new Date().getTime())/(1e3*60*60*24));return d.jsxs("div",{className:"p-6 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 dark:border-gray-700/50 space-y-4 hover:shadow-2xl transition-all duration-300",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("div",{children:d.jsx("h2",{className:"font-bold text-xl text-gray-900 dark:text-white",children:S.title})}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{className:"p-2 rounded-xl bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-600 dark:text-gray-400 hover:text-blue-500 dark:hover:text-blue-300 transition-all duration-200",title:"Edit Goal",onClick:()=>P(S),children:d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M15.232 5.232l3.536 3.536M9 13l6.586-6.586a2 2 0 112.828 2.828L11.828 15.828a2 2 0 01-2.828 0L9 13z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),d.jsx("button",{className:"p-2 rounded-xl bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-600 dark:text-gray-400 hover:text-red-500 dark:hover:text-red-300 transition-all duration-200",title:"Delete Goal",onClick:()=>T(S.id),children:d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[S.current,S.unit]}),d.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["of ",S.target,S.unit]}),d.jsxs("div",{className:"ml-auto text-lg font-semibold text-blue-600 dark:text-blue-400",children:[I,"%"]})]}),d.jsx("div",{className:"relative w-full h-4 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:d.jsx("div",{className:"absolute left-0 top-0 bottom-0 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full transition-all duration-500",style:{width:`${I}%`}})}),d.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 font-medium",children:N>0?`${N} days remaining`:"Deadline passed"})]},S.id)})}),s&&d.jsxs("div",{className:"fixed inset-0 z-50 flex items-start justify-center pt-8 px-4 pb-4",children:[d.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:C}),d.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-2xl w-full max-w-md max-h-[calc(100vh-4rem)] overflow-y-auto border border-white/20 dark:border-gray-700/50 mt-4",children:[d.jsx("h2",{className:"text-2xl font-bold mb-6 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:o?"Edit Goal":"Add Goal"}),d.jsxs("form",{onSubmit:R,className:"space-y-4",children:[d.jsx("input",{className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Goal Title",value:m.title,onChange:S=>p({...m,title:S.target.value}),required:!0}),d.jsx("input",{className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Target",type:"number",value:m.target||"",onChange:S=>p({...m,target:Number(S.target.value)}),required:!0}),d.jsx("input",{className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Current",type:"number",value:m.current||"",onChange:S=>p({...m,current:Number(S.target.value)}),required:!0}),d.jsx("input",{className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Unit",value:m.unit,onChange:S=>p({...m,unit:S.target.value}),required:!0}),d.jsx("input",{className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Deadline",type:"date",value:m.deadline,onChange:S=>p({...m,deadline:S.target.value}),required:!0}),d.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[d.jsx("button",{type:"button",className:"px-6 py-3 rounded-xl bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 font-medium hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",onClick:C,children:"Cancel"}),d.jsx("button",{type:"submit",className:"px-6 py-3 rounded-xl bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-medium transition-all duration-200 shadow-lg hover:shadow-xl",disabled:E.isPending||x.isPending,children:E.isPending||x.isPending?"Saving...":"Save"})]})]})]})]}),d.jsx(gm,{open:l,title:"Delete Goal",message:"Are you sure you want to delete this goal? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",variant:"danger",onConfirm:k,onCancel:()=>{c(!1),f(null)}})]})}function kW({profile:t,onUpdateProfile:e,isUpdating:n}){var y;const[r,s]=j.useState({age:t.age||0,weightKg:t.weightKg||0,heightCm:t.heightCm||0,fitnessGoal:t.fitnessGoal||""});j.useEffect(()=>{s({age:t.age||0,weightKg:t.weightKg||0,heightCm:t.heightCm||0,fitnessGoal:t.fitnessGoal||""})},[t]);const[i,o]=j.useState({}),a=()=>{const v={};(r.age<1||r.age>150)&&(v.age="Please enter a valid age between 1 and 150"),(r.weightKg<1||r.weightKg>500)&&(v.weightKg="Please enter a valid weight between 1 and 500 kg"),(r.heightCm<1||r.heightCm>300)&&(v.heightCm="Please enter a valid height between 1 and 300 cm"),r.fitnessGoal&&r.fitnessGoal.length>200&&(v.fitnessGoal="Fitness goal must be less than 200 characters"),console.log("UserProfileCard - Validation errors:",v),o(v);const E=Object.keys(v).length===0;return console.log("UserProfileCard - Form is valid:",E),E},l=v=>{v.preventDefault(),console.log("UserProfileCard - Form submitted with data:",r),a()?(console.log("UserProfileCard - Form validation passed, calling onUpdateProfile"),e(r)):console.log("UserProfileCard - Form validation failed")},c=v=>E=>{const x=v==="fitnessGoal"?E.target.value:Number(E.target.value);s(_=>({..._,[v]:x})),i[v]&&o(_=>({..._,[v]:void 0}))},u=()=>{if(r.weightKg>0&&r.heightCm>0){const v=r.heightCm/100;return(r.weightKg/(v*v)).toFixed(1)}return null},f=v=>v<18.5?{category:"Underweight",color:"text-blue-600 dark:text-blue-400"}:v<25?{category:"Normal",color:"text-green-600 dark:text-green-400"}:v<30?{category:"Overweight",color:"text-yellow-600 dark:text-yellow-400"}:{category:"Obese",color:"text-red-600 dark:text-red-400"},m=u(),p=m?f(Number(m)):null;return d.jsxs(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[d.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 dark:border-gray-700/50 p-6",children:[d.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[d.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center text-2xl font-bold text-white shadow-lg",children:((y=t.name)==null?void 0:y.charAt(0))??"U"}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.name}),d.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Fitness Profile"})]})]}),m&&p&&d.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-xl p-4 border border-blue-200/50 dark:border-blue-700/50",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Body Mass Index"}),d.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:m})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:`text-sm font-medium ${p.color}`,children:p.category}),d.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"BMI Category"})]})]})})]}),d.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 dark:border-gray-700/50 p-6",children:[d.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"Update Profile"}),d.jsxs("form",{onSubmit:l,className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[d.jsx(fp,{className:"w-4 h-4 inline mr-2"}),"Age"]}),d.jsx("input",{type:"number",min:"13",max:"120",className:`w-full px-4 py-3 rounded-xl border transition-colors focus:ring-2 focus:ring-blue-500 focus:border-transparent ${i.age?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-600":"border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}`,value:r.age,onChange:c("age"),placeholder:"Enter your age"}),i.age&&d.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:i.age})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[d.jsx(Q$,{className:"w-4 h-4 inline mr-2"}),"Weight (kg)"]}),d.jsx("input",{type:"number",min:"30",max:"300",step:"0.1",className:`w-full px-4 py-3 rounded-xl border transition-colors focus:ring-2 focus:ring-blue-500 focus:border-transparent ${i.weightKg?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-600":"border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}`,value:r.weightKg,onChange:c("weightKg"),placeholder:"Enter your weight"}),i.weightKg&&d.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:i.weightKg})]})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[d.jsx(N$,{className:"w-4 h-4 inline mr-2"}),"Height (cm)"]}),d.jsx("input",{type:"number",min:"100",max:"250",className:`w-full px-4 py-3 rounded-xl border transition-colors focus:ring-2 focus:ring-blue-500 focus:border-transparent ${i.heightCm?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-600":"border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}`,value:r.heightCm,onChange:c("heightCm"),placeholder:"Enter your height"}),i.heightCm&&d.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:i.heightCm})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[d.jsx(tb,{className:"w-4 h-4 inline mr-2"}),"Fitness Goal"]}),d.jsx("textarea",{rows:3,maxLength:200,className:`w-full px-4 py-3 rounded-xl border transition-colors focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none ${i.fitnessGoal?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-600":"border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}`,value:r.fitnessGoal,onChange:c("fitnessGoal"),placeholder:"Describe your fitness goals..."}),d.jsxs("div",{className:"flex justify-between items-center mt-1",children:[i.fitnessGoal?d.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:i.fitnessGoal}):d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"What do you want to achieve?"}),d.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[r.fitnessGoal.length,"/200"]})]})]}),d.jsxs(ie.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:n,className:"w-full flex items-center justify-center px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-medium rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx(OR,{className:"w-5 h-5 mr-2"}),n?"Saving...":"Save Changes"]})]})]})]})}function EW({onClose:t}){const e=rr(),{user:n,login:r}=Cn(),{showSuccess:s,showError:i}=Xo(),{data:o,isLoading:a,error:l}=ln({queryKey:["user","profile",n==null?void 0:n.uid],queryFn:async()=>{if(!(n!=null&&n.uid))return null;const f=await zu(n.uid);return f||await UR(n.uid,n.email,n.name)},enabled:!!(n!=null&&n.uid),retry:1,staleTime:0,refetchOnWindowFocus:!1,refetchOnMount:!0,refetchOnReconnect:!0}),c=jn({mutationFn:async f=>{if(console.log("ProfilePage - updateProfileMutation called with:",f),!(n!=null&&n.uid)){console.log("ProfilePage - No user UID, returning");return}console.log("ProfilePage - Calling updateUserProfile..."),await pp(n.uid,f),console.log("ProfilePage - updateUserProfile completed")},onSuccess:async()=>{if(console.log("ProfilePage - Mutation success, updating auth context..."),n!=null&&n.uid){await e.invalidateQueries({queryKey:["user","profile",n.uid]}),await e.refetchQueries({queryKey:["user","profile",n.uid]});const f=await zu(n.uid);console.log("ProfilePage - Got updated profile:",f),f&&(console.log("ProfilePage - Updating auth context with:",f),r({...f,fitnessGoal:f.fitnessGoal??""}))}s("Profile updated successfully!")},onError:f=>{console.error("ProfilePage - Mutation error:",f),i("Failed to update profile. Please try again.")}}),u=o||(n?{uid:n.uid,name:n.name,email:n.email,age:0,weightKg:0,heightCm:0,fitnessGoal:"",theme:n.theme||"system",units:"metric",language:"en",privacy:"private",notifications:{workoutReminders:!0,goalAchievements:!0,weeklyProgress:!1},dataSharing:!0,activityTracking:!0}:null);return d.jsxs("div",{className:"min-h-[70vh] p-6",children:[d.jsx("div",{className:"flex items-center justify-between mb-8",children:d.jsx("div",{className:"flex items-center space-x-4",children:d.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Your Profile"})})}),l&&d.jsx("div",{className:"mb-6 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-2xl p-6",children:d.jsx("p",{className:"text-red-600 dark:text-red-400",children:"Error loading profile. Please try again."})}),a&&!u?d.jsx("div",{className:"flex items-center justify-center py-12",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),d.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Setting up your profile..."})]})}):u?d.jsxs(d.Fragment,{children:[(!u.age||u.age===0||!u.weightKg||u.weightKg===0||!u.heightCm||u.heightCm===0)&&d.jsx("div",{className:"mb-6 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 border border-blue-200 dark:border-blue-700 rounded-2xl p-6",children:d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center",children:d.jsx("span",{className:"text-white text-sm font-bold",children:"!"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100",children:"Complete Your Profile"}),d.jsx("p",{className:"text-blue-700 dark:text-blue-300 text-sm mt-1",children:"Please fill in your age, weight, height, and fitness goals to get personalized insights and track your progress."})]})]})}),d.jsx("div",{className:"bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20 dark:border-gray-700/50",children:d.jsx(kW,{profile:u,onUpdateProfile:f=>c.mutate(f),isUpdating:c.isPending})})]}):d.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-2xl p-6 text-center",children:d.jsx("p",{className:"text-red-600 dark:text-red-400",children:"No profile data available."})})]})}function TW({day:t,initialItems:e,onClose:n,onSave:r}){const{showError:s}=Xo(),[i,o]=j.useState(e),a=()=>{o([...i,{time:"",activity:""}])},l=(f,m,p)=>{const y=[...i],v=y[f];v&&(v[m]=p,o(y))},c=f=>{o(i.filter((m,p)=>p!==f))},u=f=>{f.preventDefault();const m=[];if(i.forEach((y,v)=>{(!y.time||y.time.trim().length===0)&&m.push(`Item ${v+1}: Time is required`),(!y.activity||y.activity.trim().length===0)&&m.push(`Item ${v+1}: Activity is required`),y.activity&&y.activity.trim().length>200&&m.push(`Item ${v+1}: Activity name must be less than 200 characters`)}),m.length>0){const y=m.slice(0,3).join(", ")+(m.length>3?` and ${m.length-3} more errors`:"");s(`Please fix the following errors: ${y}`);return}const p=i.filter(y=>y.time.trim().length>0&&y.activity.trim().length>0);r(p),n()};return d.jsx("div",{className:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center",children:d.jsxs("div",{className:"bg-card rounded-xl p-6 shadow-lg w-full max-w-md",children:[d.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Edit Schedule for ",t]}),d.jsxs("form",{onSubmit:u,children:[d.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto pr-2",children:i.map((f,m)=>d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("input",{type:"text",placeholder:"Time",value:f.time,onChange:p=>l(m,"time",p.target.value),className:"w-1/3 p-2 rounded bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700"}),d.jsx("input",{type:"text",placeholder:"Activity",value:f.activity,onChange:p=>l(m,"activity",p.target.value),className:"w-2/3 p-2 rounded bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700"}),d.jsx("button",{type:"button",onClick:()=>c(m),className:"text-red-500",children:""})]},m))}),d.jsx("button",{type:"button",onClick:a,className:"w-full text-sm py-2 px-2 mt-4 rounded bg-blue-500/20 hover:bg-blue-500/30 transition-colors",children:"+ Add Item"}),d.jsxs("div",{className:"mt-6 flex justify-end space-x-4",children:[d.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700",children:"Cancel"}),d.jsx("button",{type:"submit",className:"px-4 py-2 rounded-md bg-blue-600 text-white",children:"Save Changes"})]})]})]})})}const SW=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];function IW(){const{user:t}=Cn(),e=rr(),[n,r]=j.useState(null),{data:s,isLoading:i}=ln({queryKey:["schedule",t==null?void 0:t.uid],queryFn:()=>vp(t.uid),enabled:!!(t!=null&&t.uid)}),o=jn({mutationFn:u=>WR(t.uid,u),onSuccess:()=>{e.invalidateQueries({queryKey:["schedule",t==null?void 0:t.uid]})}}),a=(u,f)=>{const m=u.toLowerCase();o.mutate({[m]:f}),r(null)},c=s||{id:"weekly",monday:[],tuesday:[],wednesday:[],thursday:[],friday:[],saturday:[],sunday:[]};return i?d.jsx("div",{className:"flex items-center justify-center py-12",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"flex items-center justify-between mb-8",children:d.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"My Workout Schedule"})}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:SW.map((u,f)=>{const m=u.toLowerCase(),p=Array.isArray(c[m])?c[m]:[];return d.jsxs(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:f*.1},className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20 dark:border-gray-700/50 cursor-pointer hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300",onClick:()=>r(u),children:[d.jsxs("div",{className:"text-center mb-6",children:[d.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:u}),d.jsx("div",{className:"w-12 h-1 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full mx-auto"})]}),d.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:p.length===0?d.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400 text-sm",children:"No activities scheduled"}):p.map((y,v)=>d.jsx(ie.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:v*.1},className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-700/50 dark:to-gray-600/50 p-3 rounded-xl border border-gray-200/50 dark:border-gray-600/50 hover:from-blue-50 hover:to-purple-50 dark:hover:from-blue-900/20 dark:hover:to-purple-900/20 transition-all duration-200",children:d.jsxs("div",{className:"flex flex-col gap-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"bg-blue-500/10 p-1.5 rounded-lg shrink-0",children:d.jsx(Bu,{className:"w-3.5 h-3.5 text-blue-600 dark:text-blue-400"})}),d.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-300 whitespace-nowrap",children:y.time})]}),d.jsxs("div",{className:"flex items-start gap-2",children:[d.jsx(xi,{className:"w-3.5 h-3.5 text-purple-600 dark:text-purple-400 mt-0.5 shrink-0"}),d.jsx("span",{className:"font-semibold text-sm text-gray-800 dark:text-white break-words break-all line-clamp-2 leading-tight",children:y.activity})]})]})},v))}),d.jsx("div",{className:"mt-4 text-center",children:d.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-3 py-1 rounded-full",children:"Click to edit"})})]},u)})}),n&&d.jsx(TW,{day:n,initialItems:Array.isArray(c[n.toLowerCase()])?c[n.toLowerCase()]:[],onClose:()=>r(null),onSave:u=>a(n,u)})]})}const CW=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];function AW({onClose:t,onSave:e}){const{showError:n}=Xo(),[r,s]=j.useState({monday:[],tuesday:[],wednesday:[],thursday:[],friday:[],saturday:[],sunday:[]}),i=c=>{const u=c.toLowerCase();s(f=>({...f,[u]:[...f[u]||[],{time:"",activity:""}]}))},o=(c,u,f,m)=>{const p=c.toLowerCase(),y=r[p]||[];s(v=>({...v,[p]:y.map((E,x)=>x===u?{...E,[f]:m}:E)}))},a=(c,u)=>{const f=c.toLowerCase();s(m=>({...m,[f]:(m[f]||[]).filter((p,y)=>y!==u)}))},l=c=>{c.preventDefault();const u=[];if(Object.entries(r).forEach(([m,p])=>{p.forEach((y,v)=>{(!y.time||y.time.trim().length===0)&&u.push(`${m.charAt(0).toUpperCase()+m.slice(1)}, Item ${v+1}: Time is required`),(!y.activity||y.activity.trim().length===0)&&u.push(`${m.charAt(0).toUpperCase()+m.slice(1)}, Item ${v+1}: Activity is required`),y.activity&&y.activity.trim().length>200&&u.push(`${m.charAt(0).toUpperCase()+m.slice(1)}, Item ${v+1}: Activity name must be less than 200 characters`)})}),u.length>0){const m=u.slice(0,3).join(", ")+(u.length>3?` and ${u.length-3} more errors`:"");n(`Please fix the following errors: ${m}`);return}const f={};Object.entries(r).forEach(([m,p])=>{f[m]=p.filter(y=>y.time.trim().length>0&&y.activity.trim().length>0)}),e(f),t()};return d.jsx("div",{className:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center",children:d.jsxs("div",{className:"bg-card rounded-xl p-6 shadow-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[d.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Create Weekly Schedule"}),d.jsxs("form",{onSubmit:l,children:[d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:CW.map(c=>d.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 p-4 rounded-lg",children:[d.jsx("h3",{className:"font-bold text-lg mb-2",children:c}),(r[c.toLowerCase()]||[]).map((u,f)=>d.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[d.jsx("input",{type:"text",placeholder:"Time",value:u.time,onChange:m=>o(c,f,"time",m.target.value),className:"w-1/3 p-2 rounded bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700"}),d.jsx("input",{type:"text",placeholder:"Activity",value:u.activity,onChange:m=>o(c,f,"activity",m.target.value),className:"w-2/3 p-2 rounded bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700"}),d.jsx("button",{type:"button",onClick:()=>a(c,f),className:"text-red-500",children:""})]},f)),d.jsx("button",{type:"button",onClick:()=>i(c),className:"w-full text-sm py-1 px-2 rounded bg-blue-500/20 hover:bg-blue-500/30 transition-colors",children:"+ Add Item"})]},c))}),d.jsxs("div",{className:"mt-6 flex justify-end space-x-4",children:[d.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700",children:"Cancel"}),d.jsx("button",{type:"submit",className:"px-4 py-2 rounded-md bg-blue-600 text-white",children:"Save Schedule"})]})]})]})})}const PW=[{id:"first_workout",title:"First Workout",description:"Completed your first workout session.",icon:"Trophy",criteria:{type:"count",value:1}},{id:"30_minute_warrior",title:"30 Minute Warrior",description:"Completed a workout session of 30 minutes or more.",icon:"Star",criteria:{type:"duration",value:30}},{id:"60_minute_master",title:"60 Minute Master",description:"Completed a workout session of 60 minutes or more.",icon:"Zap",criteria:{type:"duration",value:60}},{id:"workout_five",title:"Five Workouts",description:"Completed 5 workout sessions.",icon:"Award",criteria:{type:"count",value:5}},{id:"workout_ten",title:"Ten Workouts",description:"Completed 10 workout sessions.",icon:"Star",criteria:{type:"count",value:10}},{id:"workout_twenty",title:"Twenty Workouts",description:"Completed 20 workout sessions.",icon:"Trophy",criteria:{type:"count",value:20}},{id:"total_300_minutes",title:"300 Minutes Total",description:"Accumulated 300 total minutes of workouts.",icon:"Flame",criteria:{type:"total_duration",value:300}},{id:"total_600_minutes",title:"600 Minutes Total",description:"Accumulated 600 total minutes of workouts.",icon:"Target",criteria:{type:"total_duration",value:600}}];function NW(t,e){const{criteria:n}=t;switch(n.type){case"count":{const r=e.length,s=r>=n.value,i=Math.min(100,Math.round(r/n.value*100)),o=[...e].sort((u,f)=>new Date(u.date).getTime()-new Date(f.date).getTime()),a=n.value-1,l=o[a],c=s&&l!==void 0?l.date:null;return{achieved:s,progress:i,achievedDate:c}}case"duration":{const s=[...e].sort((l,c)=>new Date(c.date).getTime()-new Date(l.date).getTime()).find(l=>l.durationMinutes>=n.value),i=!!s,o=e.length>0?Math.max(...e.map(l=>l.durationMinutes)):0,a=Math.min(100,Math.round(o/n.value*100));return{achieved:i,progress:a,achievedDate:(s==null?void 0:s.date)||null}}case"total_duration":{const r=[...e].sort((c,u)=>new Date(c.date).getTime()-new Date(u.date).getTime());let s=0,i=null;for(const c of r)s+=c.durationMinutes,s>=n.value&&!i&&(i=c.date);const o=e.reduce((c,u)=>c+u.durationMinutes,0),a=o>=n.value,l=Math.min(100,Math.round(o/n.value*100));return{achieved:a,progress:l,achievedDate:i}}case"streak":return{achieved:!1,progress:0,achievedDate:null};default:return{achieved:!1,progress:0,achievedDate:null}}}async function RW(t,e){const n=Ii(lt,"users",t,"achievements"),r=await gd(n),s=new Map(r.docs.map(o=>[o.id,{id:o.id,...o.data()}])),i=PW.map(o=>{const a=s.get(o.id),l=NW(o,e),c=(a==null?void 0:a.achieved)||l.achieved,u=(a==null?void 0:a.achievedDate)||l.achievedDate||null,f=l.progress;return{id:o.id,title:o.title,description:o.description,icon:o.icon,criteria:o.criteria,achieved:c,achievedDate:c?u??null:null,progress:f}});for(const o of i){const a=pn(lt,"users",t,"achievements",o.id);await Yo(a,{title:o.title,description:o.description,icon:o.icon,criteria:o.criteria,achieved:o.achieved,achievedDate:o.achievedDate,progress:o.progress},{merge:!0})}return i}const MW={Trophy:pm,Star:V$,Zap:Z$,Award:r$,Flame:fm,Target:tb};function DW(){const{user:t}=Cn(),{data:e=[]}=ln({queryKey:["workouts","logs",t==null?void 0:t.uid],queryFn:()=>bd.getLogs(t.uid),enabled:!!(t!=null&&t.uid)}),{data:n=[],isLoading:r}=ln({queryKey:["achievements",t==null?void 0:t.uid,e.length],queryFn:()=>RW(t.uid,e),enabled:!!(t!=null&&t.uid)});if(r)return d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"flex items-center justify-between mb-8",children:d.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-yellow-600 to-orange-600 bg-clip-text text-transparent",children:"My Achievements"})}),d.jsx("div",{className:"flex items-center justify-center py-12",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-600"})})]});const s=i=>MW[i]||pm;return d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"flex items-center justify-between mb-8",children:d.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-yellow-600 to-orange-600 bg-clip-text text-transparent",children:"My Achievements"})}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6",children:n.map((i,o)=>{const a=s(i.icon);return d.jsxs(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:o*.1},className:`bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20 dark:border-gray-700/50 hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300 ${i.achieved?"":"opacity-75"}`,children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx("div",{className:`p-4 rounded-2xl shadow-lg ${i.achieved?"bg-gradient-to-r from-green-500 to-emerald-600 text-white":"bg-gradient-to-r from-gray-400 to-gray-500 text-white"}`,children:d.jsx(a,{size:28})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h2",{className:"font-bold text-xl text-gray-900 dark:text-white mb-2",children:i.title}),d.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:i.description}),i.achieved&&i.achievedDate?d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),d.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 font-medium",children:["Unlocked on ",new Date(i.achievedDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]})]}):d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Progress"}),d.jsxs("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:[i.progress,"%"]})]}),d.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:d.jsx(ie.div,{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full",initial:{width:0},animate:{width:`${i.progress}%`},transition:{duration:1,delay:o*.1}})})]})]})]}),i.achieved&&i.achievedDate&&d.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200/50 dark:border-gray-700/50",children:d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[d.jsx(pm,{className:"w-4 h-4 text-yellow-500"}),d.jsx("span",{className:"text-sm font-medium text-yellow-600 dark:text-yellow-400",children:"Achievement Unlocked!"})]})})]},i.id)})}),d.jsx("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20 dark:border-gray-700/50",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-center",children:[d.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 p-4 rounded-xl border border-green-200/50 dark:border-green-700/50",children:[d.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mb-1",children:n.filter(i=>i.achieved).length}),d.jsx("div",{className:"text-sm text-green-700 dark:text-green-300 font-medium",children:"Achievements Unlocked"})]}),d.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 p-4 rounded-xl border border-blue-200/50 dark:border-blue-700/50",children:[d.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mb-1",children:n.filter(i=>!i.achieved).length}),d.jsx("div",{className:"text-sm text-blue-700 dark:text-blue-300 font-medium",children:"In Progress"})]}),d.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 p-4 rounded-xl border border-yellow-200/50 dark:border-yellow-700/50",children:[d.jsxs("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400 mb-1",children:[n.length>0?Math.round(n.filter(i=>i.achieved).length/n.length*100):0,"%"]}),d.jsx("div",{className:"text-sm text-yellow-700 dark:text-yellow-300 font-medium",children:"Completion Rate"})]})]})})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Id(t){return t+.5|0}const ri=(t,e,n)=>Math.max(Math.min(t,n),e);function Cc(t){return ri(Id(t*2.55),0,255)}function bi(t){return ri(Id(t*255),0,255)}function Xr(t){return ri(Id(t/2.55)/100,0,1)}function DT(t){return ri(Id(t*100),0,100)}const zn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},hv=[..."0123456789ABCDEF"],jW=t=>hv[t&15],OW=t=>hv[(t&240)>>4]+hv[t&15],_h=t=>(t&240)>>4===(t&15),LW=t=>_h(t.r)&&_h(t.g)&&_h(t.b)&&_h(t.a);function VW(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&zn[t[1]]*17,g:255&zn[t[2]]*17,b:255&zn[t[3]]*17,a:e===5?zn[t[4]]*17:255}:(e===7||e===9)&&(n={r:zn[t[1]]<<4|zn[t[2]],g:zn[t[3]]<<4|zn[t[4]],b:zn[t[5]]<<4|zn[t[6]],a:e===9?zn[t[7]]<<4|zn[t[8]]:255})),n}const FW=(t,e)=>t<255?e(t):"";function UW(t){var e=LW(t)?jW:OW;return t?"#"+e(t.r)+e(t.g)+e(t.b)+FW(t.a,e):void 0}const BW=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function KR(t,e,n){const r=e*Math.min(n,1-n),s=(i,o=(i+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function zW(t,e,n){const r=(s,i=(s+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function $W(t,e,n){const r=KR(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)r[s]*=1-e-n,r[s]+=e;return r}function WW(t,e,n,r,s){return t===s?(e-n)/r+(e<n?6:0):e===s?(n-t)/r+2:(t-e)/r+4}function ob(t){const n=t.r/255,r=t.g/255,s=t.b/255,i=Math.max(n,r,s),o=Math.min(n,r,s),a=(i+o)/2;let l,c,u;return i!==o&&(u=i-o,c=a>.5?u/(2-i-o):u/(i+o),l=WW(n,r,s,u,i),l=l*60+.5),[l|0,c||0,a]}function ab(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(bi)}function lb(t,e,n){return ab(KR,t,e,n)}function HW(t,e,n){return ab($W,t,e,n)}function qW(t,e,n){return ab(zW,t,e,n)}function GR(t){return(t%360+360)%360}function KW(t){const e=BW.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Cc(+e[5]):bi(+e[5]));const s=GR(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=HW(s,i,o):e[1]==="hsv"?r=qW(s,i,o):r=lb(s,i,o),{r:r[0],g:r[1],b:r[2],a:n}}function GW(t,e){var n=ob(t);n[0]=GR(n[0]+e),n=lb(n),t.r=n[0],t.g=n[1],t.b=n[2]}function QW(t){if(!t)return;const e=ob(t),n=e[0],r=DT(e[1]),s=DT(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${s}%, ${Xr(t.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const jT={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},OT={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function YW(){const t={},e=Object.keys(OT),n=Object.keys(jT);let r,s,i,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],s=0;s<n.length;s++)i=n[s],a=a.replace(i,jT[i]);i=parseInt(OT[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let bh;function XW(t){bh||(bh=YW(),bh.transparent=[0,0,0,0]);const e=bh[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const ZW=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function JW(t){const e=ZW.exec(t);let n=255,r,s,i;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Cc(o):ri(o*255,0,255)}return r=+e[1],s=+e[3],i=+e[5],r=255&(e[2]?Cc(r):ri(r,0,255)),s=255&(e[4]?Cc(s):ri(s,0,255)),i=255&(e[6]?Cc(i):ri(i,0,255)),{r,g:s,b:i,a:n}}}function eH(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Xr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Qg=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,sa=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function tH(t,e,n){const r=sa(Xr(t.r)),s=sa(Xr(t.g)),i=sa(Xr(t.b));return{r:bi(Qg(r+n*(sa(Xr(e.r))-r))),g:bi(Qg(s+n*(sa(Xr(e.g))-s))),b:bi(Qg(i+n*(sa(Xr(e.b))-i))),a:t.a+n*(e.a-t.a)}}function wh(t,e,n){if(t){let r=ob(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=lb(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function QR(t,e){return t&&Object.assign(e||{},t)}function LT(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=bi(t[3]))):(e=QR(t,{r:0,g:0,b:0,a:1}),e.a=bi(e.a)),e}function nH(t){return t.charAt(0)==="r"?JW(t):KW(t)}class $u{constructor(e){if(e instanceof $u)return e;const n=typeof e;let r;n==="object"?r=LT(e):n==="string"&&(r=VW(e)||XW(e)||nH(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=QR(this._rgb);return e&&(e.a=Xr(e.a)),e}set rgb(e){this._rgb=LT(e)}rgbString(){return this._valid?eH(this._rgb):void 0}hexString(){return this._valid?UW(this._rgb):void 0}hslString(){return this._valid?QW(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,s=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=r.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-c,r.r=255&c*r.r+i*s.r+.5,r.g=255&c*r.g+i*s.g+.5,r.b=255&c*r.b+i*s.b+.5,r.a=o*r.a+(1-o)*s.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=tH(this._rgb,e._rgb,n)),this}clone(){return new $u(this.rgb)}alpha(e){return this._rgb.a=bi(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Id(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return wh(this._rgb,2,e),this}darken(e){return wh(this._rgb,2,-e),this}saturate(e){return wh(this._rgb,1,e),this}desaturate(e){return wh(this._rgb,1,-e),this}rotate(e){return GW(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Wr(){}const rH=(()=>{let t=0;return()=>t++})();function We(t){return t==null}function _t(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ie(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function en(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function br(t,e){return en(t)?t:e}function _e(t,e){return typeof t>"u"?e:t}const sH=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,YR=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Ke(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Le(t,e,n,r){let s,i,o;if(_t(t))for(i=t.length,s=0;s<i;s++)e.call(n,t[s],s);else if(Ie(t))for(o=Object.keys(t),i=o.length,s=0;s<i;s++)e.call(n,t[o[s]],o[s])}function ym(t,e){let n,r,s,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(s=t[n],i=e[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function vm(t){if(_t(t))return t.map(vm);if(Ie(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let s=0;for(;s<r;++s)e[n[s]]=vm(t[n[s]]);return e}return t}function XR(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function iH(t,e,n,r){if(!XR(t))return;const s=e[t],i=n[t];Ie(s)&&Ie(i)?Wu(s,i,r):e[t]=vm(i)}function Wu(t,e,n){const r=_t(e)?e:[e],s=r.length;if(!Ie(t))return t;n=n||{};const i=n.merger||iH;let o;for(let a=0;a<s;++a){if(o=r[a],!Ie(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)i(l[c],t,o,n)}return t}function Jc(t,e){return Wu(t,e,{merger:oH})}function oH(t,e,n){if(!XR(t))return;const r=e[t],s=n[t];Ie(r)&&Ie(s)?Jc(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=vm(s))}const VT={"":t=>t,x:t=>t.x,y:t=>t.y};function aH(t){const e=t.split("."),n=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function lH(t){const e=aH(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Hu(t,e){return(VT[e]||(VT[e]=lH(e)))(t)}function cb(t){return t.charAt(0).toUpperCase()+t.slice(1)}const xm=t=>typeof t<"u",Ri=t=>typeof t=="function",FT=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function cH(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Ve=Math.PI,et=2*Ve,uH=et+Ve,_m=Number.POSITIVE_INFINITY,dH=Ve/180,wt=Ve/2,Gi=Ve/4,UT=Ve*2/3,ZR=Math.log10,wl=Math.sign;function eu(t,e,n){return Math.abs(t-e)<n}function BT(t){const e=Math.round(t);t=eu(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(ZR(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function hH(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((s,i)=>s-i).pop(),e}function fH(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function qu(t){return!fH(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function mH(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function pH(t,e,n){let r,s,i;for(r=0,s=t.length;r<s;r++)i=t[r][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function as(t){return t*(Ve/180)}function gH(t){return t*(180/Ve)}function zT(t){if(!en(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function JR(t,e){const n=e.x-t.x,r=e.y-t.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*Ve&&(i+=et),{angle:i,distance:s}}function fv(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function yH(t,e){return(t-e+uH)%et-Ve}function Nn(t){return(t%et+et)%et}function Ku(t,e,n,r){const s=Nn(t),i=Nn(e),o=Nn(n),a=Nn(i-s),l=Nn(o-s),c=Nn(s-i),u=Nn(s-o);return s===i||s===o||r&&i===o||a>l&&c<u}function un(t,e,n){return Math.max(e,Math.min(n,t))}function vH(t){return un(t,-32768,32767)}function uo(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function ub(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const ho=(t,e,n,r)=>ub(t,n,r?s=>{const i=t[s][e];return i<n||i===n&&t[s+1][e]===n}:s=>t[s][e]<n),xH=(t,e,n)=>ub(t,n,r=>t[r][e]>=n);function _H(t,e,n){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>n;)s--;return r>0||s<t.length?t.slice(r,s):t}const eM=["push","pop","shift","splice","unshift"];function bH(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),eM.forEach(n=>{const r="_onData"+cb(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=s.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...i)}),o}})})}function $T(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&(eM.forEach(i=>{delete t[i]}),delete t._chartjs)}function wH(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const tM=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function nM(t,e){let n=[],r=!1;return function(...s){n=s,r||(r=!0,tM.call(window,()=>{r=!1,t.apply(e,n)}))}}function kH(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const db=t=>t==="start"?"left":t==="end"?"right":"center",qt=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,EH=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function TH(t,e,n){const r=e.length;let s=0,i=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:f,max:m,minDefined:p,maxDefined:y}=o.getUserBounds();if(p){if(s=Math.min(ho(l,u,f).lo,n?r:ho(e,u,o.getPixelForValue(f)).lo),c){const v=l.slice(0,s+1).reverse().findIndex(E=>!We(E[a.axis]));s-=Math.max(0,v)}s=un(s,0,r-1)}if(y){let v=Math.max(ho(l,o.axis,m,!0).hi+1,n?0:ho(e,u,o.getPixelForValue(m),!0).hi+1);if(c){const E=l.slice(v-1).findIndex(x=>!We(x[a.axis]));v+=Math.max(0,E)}i=un(v,s,r)-s}else i=r-s}return{start:s,count:i}}function SH(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=s,!0;const i=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),i}const kh=t=>t===0||t===1,WT=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*et/n)),HT=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*et/n)+1,tu={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*wt)+1,easeOutSine:t=>Math.sin(t*wt),easeInOutSine:t=>-.5*(Math.cos(Ve*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>kh(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>kh(t)?t:WT(t,.075,.3),easeOutElastic:t=>kh(t)?t:HT(t,.075,.3),easeInOutElastic(t){return kh(t)?t:t<.5?.5*WT(t*2,.1125,.45):.5+.5*HT(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-tu.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?tu.easeInBounce(t*2)*.5:tu.easeOutBounce(t*2-1)*.5+.5};function hb(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function qT(t){return hb(t)?t:new $u(t)}function Yg(t){return hb(t)?t:new $u(t).saturate(.5).darken(.1).hexString()}const IH=["x","y","borderWidth","radius","tension"],CH=["color","borderColor","backgroundColor"];function AH(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:CH},numbers:{type:"number",properties:IH}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function PH(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const KT=new Map;function NH(t,e){e=e||{};const n=t+JSON.stringify(e);let r=KT.get(n);return r||(r=new Intl.NumberFormat(t,e),KT.set(n,r)),r}function fb(t,e,n){return NH(e,n).format(t)}const RH={values(t){return _t(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let s,i=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),i=MH(t,n)}const o=ZR(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),fb(t,r,l)}};function MH(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var rM={formatters:RH};function DH(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:rM.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const $o=Object.create(null),mv=Object.create(null);function nu(t,e){if(!e)return t;const n=e.split(".");for(let r=0,s=n.length;r<s;++r){const i=n[r];t=t[i]||(t[i]=Object.create(null))}return t}function Xg(t,e,n){return typeof e=="string"?Wu(nu(t,e),n):Wu(nu(t,""),e)}class jH{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>Yg(s.backgroundColor),this.hoverBorderColor=(r,s)=>Yg(s.borderColor),this.hoverColor=(r,s)=>Yg(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Xg(this,e,n)}get(e){return nu(this,e)}describe(e,n){return Xg(mv,e,n)}override(e,n){return Xg($o,e,n)}route(e,n,r,s){const i=nu(this,e),o=nu(this,r),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[s];return Ie(l)?Object.assign({},c,l):_e(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var ht=new jH({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[AH,PH,DH]);function OH(t){return!t||We(t.size)||We(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function GT(t,e,n,r,s){let i=e[s];return i||(i=e[s]=t.measureText(s).width,n.push(s)),i>r&&(r=i),r}function Qi(t,e,n){const r=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*r)/r+s}function QT(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function pv(t,e,n,r){sM(t,e,n,r,null)}function sM(t,e,n,r,s){let i,o,a,l,c,u,f,m;const p=e.pointStyle,y=e.rotation,v=e.radius;let E=(y||0)*dH;if(p&&typeof p=="object"&&(i=p.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(E),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),t.restore();return}if(!(isNaN(v)||v<=0)){switch(t.beginPath(),p){default:s?t.ellipse(n,r,s/2,v,0,0,et):t.arc(n,r,v,0,et),t.closePath();break;case"triangle":u=s?s/2:v,t.moveTo(n+Math.sin(E)*u,r-Math.cos(E)*v),E+=UT,t.lineTo(n+Math.sin(E)*u,r-Math.cos(E)*v),E+=UT,t.lineTo(n+Math.sin(E)*u,r-Math.cos(E)*v),t.closePath();break;case"rectRounded":c=v*.516,l=v-c,o=Math.cos(E+Gi)*l,f=Math.cos(E+Gi)*(s?s/2-c:l),a=Math.sin(E+Gi)*l,m=Math.sin(E+Gi)*(s?s/2-c:l),t.arc(n-f,r-a,c,E-Ve,E-wt),t.arc(n+m,r-o,c,E-wt,E),t.arc(n+f,r+a,c,E,E+wt),t.arc(n-m,r+o,c,E+wt,E+Ve),t.closePath();break;case"rect":if(!y){l=Math.SQRT1_2*v,u=s?s/2:l,t.rect(n-u,r-l,2*u,2*l);break}E+=Gi;case"rectRot":f=Math.cos(E)*(s?s/2:v),o=Math.cos(E)*v,a=Math.sin(E)*v,m=Math.sin(E)*(s?s/2:v),t.moveTo(n-f,r-a),t.lineTo(n+m,r-o),t.lineTo(n+f,r+a),t.lineTo(n-m,r+o),t.closePath();break;case"crossRot":E+=Gi;case"cross":f=Math.cos(E)*(s?s/2:v),o=Math.cos(E)*v,a=Math.sin(E)*v,m=Math.sin(E)*(s?s/2:v),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o);break;case"star":f=Math.cos(E)*(s?s/2:v),o=Math.cos(E)*v,a=Math.sin(E)*v,m=Math.sin(E)*(s?s/2:v),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o),E+=Gi,f=Math.cos(E)*(s?s/2:v),o=Math.cos(E)*v,a=Math.sin(E)*v,m=Math.sin(E)*(s?s/2:v),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o);break;case"line":o=s?s/2:Math.cos(E)*v,a=Math.sin(E)*v,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(E)*(s?s/2:v),r+Math.sin(E)*v);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Gu(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function xp(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function _p(t){t.restore()}function LH(t,e,n,r,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else s==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function VH(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function FH(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),We(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function UH(t,e,n,r,s){if(s.strikethrough||s.underline){const i=t.measureText(r),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function BH(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Qu(t,e,n,r,s,i={}){const o=_t(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,c;for(t.save(),t.font=s.string,FH(t,i),l=0;l<o.length;++l)c=o[l],i.backdrop&&BH(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),We(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(c,n,r,i.maxWidth)),t.fillText(c,n,r,i.maxWidth),UH(t,n,r,c,i),r+=Number(s.lineHeight);t.restore()}function gv(t,e){const{x:n,y:r,w:s,h:i,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Ve,Ve,!0),t.lineTo(n,r+i-o.bottomLeft),t.arc(n+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,Ve,wt,!0),t.lineTo(n+s-o.bottomRight,r+i),t.arc(n+s-o.bottomRight,r+i-o.bottomRight,o.bottomRight,wt,0,!0),t.lineTo(n+s,r+o.topRight),t.arc(n+s-o.topRight,r+o.topRight,o.topRight,0,-wt,!0),t.lineTo(n+o.topLeft,r)}const zH=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,$H=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function WH(t,e){const n=(""+t).match(zH);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const HH=t=>+t||0;function mb(t,e){const n={},r=Ie(e),s=r?Object.keys(e):e,i=Ie(t)?r?o=>_e(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=HH(i(o));return n}function qH(t){return mb(t,{top:"y",right:"x",bottom:"y",left:"x"})}function ru(t){return mb(t,["topLeft","topRight","bottomLeft","bottomRight"])}function nr(t){const e=qH(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Xt(t,e){t=t||{},e=e||ht.font;let n=_e(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=_e(t.style,e.style);r&&!(""+r).match($H)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:_e(t.family,e.family),lineHeight:WH(_e(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:_e(t.weight,e.weight),string:""};return s.string=OH(s),s}function Eh(t,e,n,r){let s,i,o;for(s=0,i=t.length;s<i;++s)if(o=t[s],o!==void 0&&o!==void 0)return o}function KH(t,e,n){const{min:r,max:s}=t,i=YR(e,(s-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(i)),max:o(s,i)}}function Zo(t,e){return Object.assign(Object.create(t),e)}function pb(t,e=[""],n,r,s=()=>t[0]){const i=n||t;typeof r>"u"&&(r=lM("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:r,_getTarget:s,override:a=>pb([a,...t],e,i,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return oM(a,l,()=>tq(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return XT(a).includes(l)},ownKeys(a){return XT(a)},set(a,l,c){const u=a._storage||(a._storage=s());return a[l]=u[l]=c,delete a._keys,!0}})}function kl(t,e,n,r){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:iM(t,r),setContext:i=>kl(t,i,n,r),override:i=>kl(t.override(i),e,n,r)};return new Proxy(s,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return oM(i,o,()=>QH(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function iM(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:r,isScriptable:Ri(n)?n:()=>n,isIndexable:Ri(r)?r:()=>r}}const GH=(t,e)=>t?t+cb(e):e,gb=(t,e)=>Ie(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function oM(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function QH(t,e,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:o}=t;let a=r[e];return Ri(a)&&o.isScriptable(e)&&(a=YH(e,a,t,n)),_t(a)&&a.length&&(a=XH(e,a,t,o.isIndexable)),gb(e,a)&&(a=kl(a,s,i&&i[e],o)),a}function YH(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||r);return a.delete(t),gb(t,l)&&(l=yb(s._scopes,s,t,l)),l}function XH(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&r(t))return e[i.index%e.length];if(Ie(e[0])){const l=e,c=s._scopes.filter(u=>u!==l);e=[];for(const u of l){const f=yb(c,s,t,u);e.push(kl(f,i,o&&o[t],a))}}return e}function aM(t,e,n){return Ri(t)?t(e,n):t}const ZH=(t,e)=>t===!0?e:typeof t=="string"?Hu(e,t):void 0;function JH(t,e,n,r,s){for(const i of e){const o=ZH(n,i);if(o){t.add(o);const a=aM(o._fallback,n,s);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function yb(t,e,n,r){const s=e._rootScopes,i=aM(e._fallback,n,r),o=[...t,...s],a=new Set;a.add(r);let l=YT(a,o,n,i||n,r);return l===null||typeof i<"u"&&i!==n&&(l=YT(a,o,i,l,r),l===null)?!1:pb(Array.from(a),[""],s,i,()=>eq(e,n,r))}function YT(t,e,n,r,s){for(;n;)n=JH(t,e,n,r,s);return n}function eq(t,e,n){const r=t._getTarget();e in r||(r[e]={});const s=r[e];return _t(s)&&Ie(n)?n:s||{}}function tq(t,e,n,r){let s;for(const i of e)if(s=lM(GH(i,t),n),typeof s<"u")return gb(t,s)?yb(n,r,t,s):s}function lM(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function XT(t){let e=t._keys;return e||(e=t._keys=nq(t._scopes)),e}function nq(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}const rq=Number.EPSILON||1e-14,El=(t,e)=>e<t.length&&!t[e].skip&&t[e],cM=t=>t==="x"?"y":"x";function sq(t,e,n,r){const s=t.skip?e:t,i=e,o=n.skip?e:n,a=fv(i,s),l=fv(o,i);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const f=r*c,m=r*u;return{previous:{x:i.x-f*(o.x-s.x),y:i.y-f*(o.y-s.y)},next:{x:i.x+m*(o.x-s.x),y:i.y+m*(o.y-s.y)}}}function iq(t,e,n){const r=t.length;let s,i,o,a,l,c=El(t,0);for(let u=0;u<r-1;++u)if(l=c,c=El(t,u+1),!(!l||!c)){if(eu(e[u],0,rq)){n[u]=n[u+1]=0;continue}s=n[u]/e[u],i=n[u+1]/e[u],a=Math.pow(s,2)+Math.pow(i,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=s*o*e[u],n[u+1]=i*o*e[u])}}function oq(t,e,n="x"){const r=cM(n),s=t.length;let i,o,a,l=El(t,0);for(let c=0;c<s;++c){if(o=a,a=l,l=El(t,c+1),!a)continue;const u=a[n],f=a[r];o&&(i=(u-o[n])/3,a[`cp1${n}`]=u-i,a[`cp1${r}`]=f-i*e[c]),l&&(i=(l[n]-u)/3,a[`cp2${n}`]=u+i,a[`cp2${r}`]=f+i*e[c])}}function aq(t,e="x"){const n=cM(e),r=t.length,s=Array(r).fill(0),i=Array(r);let o,a,l,c=El(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=El(t,o+1),!!l){if(c){const u=c[e]-l[e];s[o]=u!==0?(c[n]-l[n])/u:0}i[o]=a?c?wl(s[o-1])!==wl(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}iq(t,s,i),oq(t,i,e)}function Th(t,e,n){return Math.max(Math.min(t,n),e)}function lq(t,e){let n,r,s,i,o,a=Gu(t[0],e);for(n=0,r=t.length;n<r;++n)o=i,i=a,a=n<r-1&&Gu(t[n+1],e),i&&(s=t[n],o&&(s.cp1x=Th(s.cp1x,e.left,e.right),s.cp1y=Th(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=Th(s.cp2x,e.left,e.right),s.cp2y=Th(s.cp2y,e.top,e.bottom)))}function cq(t,e,n,r,s){let i,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")aq(t,s);else{let c=r?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)a=t[i],l=sq(c,a,t[Math.min(i+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&lq(t,n)}function vb(){return typeof window<"u"&&typeof document<"u"}function xb(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function bm(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const bp=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function uq(t,e){return bp(t).getPropertyValue(e)}const dq=["top","right","bottom","left"];function Io(t,e,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=dq[s];r[i]=parseFloat(t[e+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const hq=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function fq(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:s,offsetY:i}=r;let o=!1,a,l;if(hq(s,i,t.target))a=s,l=i;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function to(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,s=bp(n),i=s.boxSizing==="border-box",o=Io(s,"padding"),a=Io(s,"border","width"),{x:l,y:c,box:u}=fq(t,n),f=o.left+(u&&a.left),m=o.top+(u&&a.top);let{width:p,height:y}=e;return i&&(p-=o.width+a.width,y-=o.height+a.height),{x:Math.round((l-f)/p*n.width/r),y:Math.round((c-m)/y*n.height/r)}}function mq(t,e,n){let r,s;if(e===void 0||n===void 0){const i=t&&xb(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=bp(i),l=Io(a,"border","width"),c=Io(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=bm(a.maxWidth,i,"clientWidth"),s=bm(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:r||_m,maxHeight:s||_m}}const si=t=>Math.round(t*10)/10;function pq(t,e,n,r){const s=bp(t),i=Io(s,"margin"),o=bm(s.maxWidth,t,"clientWidth")||_m,a=bm(s.maxHeight,t,"clientHeight")||_m,l=mq(t,e,n);let{width:c,height:u}=l;if(s.boxSizing==="content-box"){const m=Io(s,"border","width"),p=Io(s,"padding");c-=p.width+m.width,u-=p.height+m.height}return c=Math.max(0,c-i.width),u=Math.max(0,r?c/r:u-i.height),c=si(Math.min(c,o,l.maxWidth)),u=si(Math.min(u,a,l.maxHeight)),c&&!u&&(u=si(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&u>l.height&&(u=l.height,c=si(Math.floor(u*r))),{width:c,height:u}}function ZT(t,e,n){const r=e||1,s=si(t.height*r),i=si(t.width*r);t.height=si(t.height),t.width=si(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==s||o.width!==i?(t.currentDevicePixelRatio=r,o.height=s,o.width=i,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const gq=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};vb()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function JT(t,e){const n=uq(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function no(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function yq(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function vq(t,e,n,r){const s={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=no(t,s,n),a=no(s,i,n),l=no(i,e,n),c=no(o,a,n),u=no(a,l,n);return no(c,u,n)}const xq=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},_q=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Ua(t,e,n){return t?xq(e,n):_q()}function uM(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function dM(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function hM(t){return t==="angle"?{between:Ku,compare:yH,normalize:Nn}:{between:uo,compare:(e,n)=>e-n,normalize:e=>e}}function eS({start:t,end:e,count:n,loop:r,style:s}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:s}}function bq(t,e,n){const{property:r,start:s,end:i}=n,{between:o,normalize:a}=hM(r),l=e.length;let{start:c,end:u,loop:f}=t,m,p;if(f){for(c+=l,u+=l,m=0,p=l;m<p&&o(a(e[c%l][r]),s,i);++m)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:f,style:t.style}}function fM(t,e,n){if(!n)return[t];const{property:r,start:s,end:i}=n,o=e.length,{compare:a,between:l,normalize:c}=hM(r),{start:u,end:f,loop:m,style:p}=bq(t,e,n),y=[];let v=!1,E=null,x,_,w;const P=()=>l(s,w,x)&&a(s,w)!==0,C=()=>a(i,x)===0||l(i,w,x),R=()=>v||P(),T=()=>!v||C();for(let k=u,S=u;k<=f;++k)_=e[k%o],!_.skip&&(x=c(_[r]),x!==w&&(v=l(x,s,i),E===null&&R()&&(E=a(x,s)===0?k:S),E!==null&&T()&&(y.push(eS({start:E,end:k,loop:m,count:o,style:p})),E=null),S=k,w=x));return E!==null&&y.push(eS({start:E,end:f,loop:m,count:o,style:p})),y}function mM(t,e){const n=[],r=t.segments;for(let s=0;s<r.length;s++){const i=fM(r[s],t.points,e);i.length&&n.push(...i)}return n}function wq(t,e,n,r){let s=0,i=e-1;if(n&&!r)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(i+=s);i>s&&t[i%e].skip;)i--;return i%=e,{start:s,end:i}}function kq(t,e,n,r){const s=t.length,i=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%s];c.skip||c.stop?a.skip||(r=!1,i.push({start:e%s,end:(l-1)%s,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&i.push({start:e%s,end:o%s,loop:r}),i}function Eq(t,e){const n=t.points,r=t.options.spanGaps,s=n.length;if(!s)return[];const i=!!t._loop,{start:o,end:a}=wq(n,s,i,r);if(r===!0)return tS(t,[{start:o,end:a,loop:i}],n,e);const l=a<o?a+s:a,c=!!t._fullLoop&&o===0&&a===s-1;return tS(t,kq(n,o,l,c),n,e)}function tS(t,e,n,r){return!r||!r.setContext||!n?e:Tq(t,e,n,r)}function Tq(t,e,n,r){const s=t._chart.getContext(),i=nS(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=i,f=e[0].start,m=f;function p(y,v,E,x){const _=a?-1:1;if(y!==v){for(y+=l;n[y%l].skip;)y-=_;for(;n[v%l].skip;)v+=_;y%l!==v%l&&(c.push({start:y%l,end:v%l,loop:E,style:x}),u=x,f=v%l)}}for(const y of e){f=a?f:y.start;let v=n[f%l],E;for(m=f+1;m<=y.end;m++){const x=n[m%l];E=nS(r.setContext(Zo(s,{type:"segment",p0:v,p1:x,p0DataIndex:(m-1)%l,p1DataIndex:m%l,datasetIndex:o}))),Sq(E,u)&&p(f,m-1,y.loop,u),v=x,u=E}f<m-1&&p(f,m-1,y.loop,u)}return c}function nS(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Sq(t,e){if(!e)return!1;const n=[],r=function(s,i){return hb(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function Sh(t,e,n){return t.options.clip?t[n]:e[n]}function Iq(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Sh(n,e,"left"),right:Sh(n,e,"right"),top:Sh(r,e,"top"),bottom:Sh(r,e,"bottom")}:e}function pM(t,e){const n=e._clip;if(n.disabled)return!1;const r=Iq(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Cq{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,s){const i=n.listeners[s],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=tM.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(s.draw(),this._notify(s,r,e,"progress")),i.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Kr=new Cq;const rS="transparent",Aq={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=qT(t||rS),s=r.valid&&qT(e||rS);return s&&s.valid?s.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class Pq{constructor(e,n,r,s){const i=n[r];s=Eh([e.to,s,i,e.from]);const o=Eh([e.from,i,s]);this._active=!0,this._fn=e.fn||Aq[e.type||typeof o],this._easing=tu[e.easing]||tu.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,o=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Eh([e.to,n,s,e.from]),this._from=Eh([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,s=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<r),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=i;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class gM{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Ie(e))return;const n=Object.keys(ht.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const i=e[s];if(!Ie(i))return;const o={};for(const a of n)o[a]=i[a];(_t(i.properties)&&i.properties||[s]).forEach(a=>{(a===s||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,s=Rq(e,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&Nq(e.options.$animations,r).then(()=>{e.options=r},()=>{}),i}_createAnimations(e,n){const r=this._properties,s=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,n));continue}const u=n[c];let f=i[c];const m=r.get(c);if(f)if(m&&f.active()){f.update(m,u,a);continue}else f.cancel();if(!m||!m.duration){e[c]=u;continue}i[c]=f=new Pq(m,e,c,u),s.push(f)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return Kr.add(this._chart,r),!0}}function Nq(t,e){const n=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const i=t[r[s]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function Rq(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function sS(t,e){const n=t&&t.options||{},r=n.reverse,s=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:r?i:s,end:r?s:i}}function Mq(t,e,n){if(n===!1)return!1;const r=sS(t,n),s=sS(e,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function Dq(t){let e,n,r,s;return Ie(t)?(e=t.top,n=t.right,r=t.bottom,s=t.left):e=n=r=s=t,{top:e,right:n,bottom:r,left:s,disabled:t===!1}}function yM(t,e){const n=[],r=t._getSortedDatasetMetas(e);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function iS(t,e,n,r={}){const s=t.keys,i=r.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===n){if(u=!0,r.all)continue;break}c=t.values[l],en(c)&&(i||e===0||wl(e)===wl(c))&&(e+=c)}return!u&&!r.all?0:e}function jq(t,e){const{iScale:n,vScale:r}=e,s=n.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[s]:u,[i]:t[u]};return a}function Zg(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function Oq(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function Lq(t){const{min:e,max:n,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function Vq(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function oS(t,e,n,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const i=t[s.index];if(n&&i>0||!n&&i<0)return s.index}return null}function aS(t,e){const{chart:n,_cachedMeta:r}=t,s=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=r,l=i.axis,c=o.axis,u=Oq(i,o,r),f=e.length;let m;for(let p=0;p<f;++p){const y=e[p],{[l]:v,[c]:E}=y,x=y._stacks||(y._stacks={});m=x[c]=Vq(s,u,v),m[a]=E,m._top=oS(m,o,!0,r.type),m._bottom=oS(m,o,!1,r.type);const _=m._visualValues||(m._visualValues={});_[a]=E}}function Jg(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function Fq(t,e){return Zo(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Uq(t,e,n){return Zo(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function lc(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const s of e){const i=s._stacks;if(!i||i[r]===void 0||i[r][n]===void 0)return;delete i[r][n],i[r]._visualValues!==void 0&&i[r]._visualValues[n]!==void 0&&delete i[r]._visualValues[n]}}}const e0=t=>t==="reset"||t==="none",lS=(t,e)=>e?t:Object.assign({},t),Bq=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:yM(n,!0),values:null};class Ba{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Zg(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&lc(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(f,m,p,y)=>f==="x"?m:f==="r"?y:p,i=n.xAxisID=_e(r.xAxisID,Jg(e,"x")),o=n.yAxisID=_e(r.yAxisID,Jg(e,"y")),a=n.rAxisID=_e(r.rAxisID,Jg(e,"r")),l=n.indexAxis,c=n.iAxisID=s(l,i,o,a),u=n.vAxisID=s(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&$T(this._data,this),e._stacked&&lc(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Ie(n)){const s=this._cachedMeta;this._data=jq(n,s)}else if(r!==n){if(r){$T(r,this);const s=this._cachedMeta;lc(s),s._parsed=[]}n&&Object.isExtensible(n)&&bH(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=n._stacked;n._stacked=Zg(n.vScale,n),n.stack!==r.stack&&(s=!0,lc(n),n.stack=r.stack),this._resyncElements(e),(s||i!==n._stacked)&&(aS(this,n._parsed),n._stacked=Zg(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:o}=r,a=i.axis;let l=e===0&&n===s.length?!0:r._sorted,c=e>0&&r._parsed[e-1],u,f,m;if(this._parsing===!1)r._parsed=s,r._sorted=!0,m=s;else{_t(s[e])?m=this.parseArrayData(r,s,e,n):Ie(s[e])?m=this.parseObjectData(r,s,e,n):m=this.parsePrimitiveData(r,s,e,n);const p=()=>f[a]===null||c&&f[a]<c[a];for(u=0;u<n;++u)r._parsed[u+e]=f=m[u],l&&(p()&&(l=!1),c=f);r._sorted=l}o&&aS(this,m)}parsePrimitiveData(e,n,r,s){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,c=i.getLabels(),u=i===o,f=new Array(s);let m,p,y;for(m=0,p=s;m<p;++m)y=m+r,f[m]={[a]:u||i.parse(c[y],y),[l]:o.parse(n[y],y)};return f}parseArrayData(e,n,r,s){const{xScale:i,yScale:o}=e,a=new Array(s);let l,c,u,f;for(l=0,c=s;l<c;++l)u=l+r,f=n[u],a[l]={x:i.parse(f[0],u),y:o.parse(f[1],u)};return a}parseObjectData(e,n,r,s){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let u,f,m,p;for(u=0,f=s;u<f;++u)m=u+r,p=n[m],c[u]={x:i.parse(Hu(p,a),m),y:o.parse(Hu(p,l),m)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const s=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:yM(s,!0),values:n._stacks[e.axis]._visualValues};return iS(a,o,i.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const i=r[n.axis];let o=i===null?NaN:i;const a=s&&r._stacks[n.axis];s&&a&&(s.values=a,o=iS(s,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&e===r.iScale,o=s.length,a=this._getOtherScale(e),l=Bq(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:f}=Lq(a);let m,p;function y(){p=s[m];const v=p[a.axis];return!en(p[e.axis])||u>v||f<v}for(m=0;m<o&&!(!y()&&(this.updateRangeFromParsed(c,e,p,l),i));++m);if(i){for(m=o-1;m>=0;--m)if(!y()){this.updateRangeFromParsed(c,e,p,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,i,o;for(s=0,i=n.length;s<i;++s)o=n[s][e.axis],en(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,i=this.getParsed(e);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=Dq(_e(this.options.clip,Mq(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,i,a,l),u=a;u<a+l;++u){const f=s[u];f.hidden||(f.active&&c?o.push(f):f.draw(e,i))}for(u=0;u<o.length;++u)o[u].draw(e,i)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=Uq(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=s.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=Fq(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=r,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],l=this.enableOptionSharing&&xm(r);if(a)return lS(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),f=s?[`${e}Hover`,"hover",e,""]:[e,""],m=c.getOptionScopes(this.getDataset(),u),p=Object.keys(ht.elements[e]),y=()=>this.getContext(r,s,n),v=c.resolveNamedOptions(m,p,y,f);return v.$shared&&(v.$shared=l,i[o]=Object.freeze(lS(v,l))),v}_resolveAnimations(e,n,r){const s=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(s.options.animation!==!1){const u=this.chart.config,f=u.datasetAnimationScopeKeys(this._type,n),m=u.getOptionScopes(this.getDataset(),f);l=u.createResolver(m,this.getContext(e,r,n))}const c=new gM(s,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||e0(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,i=this.getSharedOptions(r),o=this.includeOptions(n,i)||i!==s;return this.updateSharedOptions(i,n,r),{sharedOptions:i,includeOptions:o}}updateElement(e,n,r,s){e0(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!e0(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const i=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=r.length,i=n.length,o=Math.min(i,s);o&&this.parse(0,o),i>s?this._insertElements(s,i-s,e):i<s&&this._removeElements(i,s-i)}_insertElements(e,n,r=!0){const s=this._cachedMeta,i=s.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,n),r&&this.updateElements(i,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&lc(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Y(Ba,"defaults",{}),Y(Ba,"datasetElementType",null),Y(Ba,"dataElementType",null);function zq(t,e,n){let r=1,s=1,i=0,o=0;if(e<et){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),f=Math.cos(l),m=Math.sin(l),p=(w,P,C)=>Ku(w,a,l,!0)?1:Math.max(P,P*n,C,C*n),y=(w,P,C)=>Ku(w,a,l,!0)?-1:Math.min(P,P*n,C,C*n),v=p(0,c,f),E=p(wt,u,m),x=y(Ve,c,f),_=y(Ve+wt,u,m);r=(v-x)/2,s=(E-_)/2,i=-(v+x)/2,o=-(E+_)/2}return{ratioX:r,ratioY:s,offsetX:i,offsetY:o}}class Ac extends Ba{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=r;else{let i=l=>+r[l];if(Ie(r[e])){const{key:l="value"}=this._parsing;i=c=>+Hu(r[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)s._parsed[o]=i(o)}}_getRotation(){return as(this.options.rotation-90)}_getCircumference(){return as(this.options.circumference)}_getRotationExtents(){let e=et,n=-et;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const s=this.chart.getDatasetMeta(r).controller,i=s._getRotation(),o=s._getCircumference();e=Math.min(e,i),n=Math.max(n,i+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,s=this._cachedMeta,i=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(sH(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:f}=this._getRotationExtents(),{ratioX:m,ratioY:p,offsetX:y,offsetY:v}=zq(f,u,l),E=(r.width-o)/m,x=(r.height-o)/p,_=Math.max(Math.min(E,x)/2,0),w=YR(this.options.radius,_),P=Math.max(w*l,0),C=(w-P)/this._getVisibleDatasetWeightTotal();this.offsetX=y*w,this.offsetY=v*w,s.total=this.calculateTotal(),this.outerRadius=w-C*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-C*c,0),this.updateElements(i,0,i.length,e)}_circumference(e,n){const r=this.options,s=this._cachedMeta,i=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*i/et)}updateElements(e,n,r,s){const i=s==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,f=(a.top+a.bottom)/2,m=i&&c.animateScale,p=m?0:this.innerRadius,y=m?0:this.outerRadius,{sharedOptions:v,includeOptions:E}=this._getSharedOptions(n,s);let x=this._getRotation(),_;for(_=0;_<n;++_)x+=this._circumference(_,i);for(_=n;_<n+r;++_){const w=this._circumference(_,i),P=e[_],C={x:u+this.offsetX,y:f+this.offsetY,startAngle:x,endAngle:x+w,circumference:w,outerRadius:y,innerRadius:p};E&&(C.options=v||this.resolveDataElementOptions(_,P.active?"active":s)),x+=w,this.updateElement(P,_,C,s)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,s;for(s=0;s<n.length;s++){const i=e._parsed[s];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(r+=Math.abs(i))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?et*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,s=r.data.labels||[],i=fb(n._parsed[e],r.options.locale);return{label:s[e]||"",value:i}}getMaxBorderWidth(e){let n=0;const r=this.chart;let s,i,o,a,l;if(!e){for(s=0,i=r.data.datasets.length;s<i;++s)if(r.isDatasetVisible(s)){o=r.getDatasetMeta(s),e=o.data,a=o.controller;break}}if(!e)return 0;for(s=0,i=e.length;s<i;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,s=e.length;r<s;++r){const i=this.resolveDataElementOptions(r);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(_e(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Y(Ac,"id","doughnut"),Y(Ac,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Y(Ac,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Y(Ac,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:a}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((l,c)=>{const f=e.getDatasetMeta(0).controller.getStyle(c);return{text:l,fillStyle:f.backgroundColor,fontColor:i,hidden:!e.getDataVisibility(c),lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:f.borderWidth,strokeStyle:f.borderColor,textAlign:s,pointStyle:r,borderRadius:o&&(a||f.borderRadius),index:c}}):[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class lf extends Ba{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:i}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=TH(n,s,o);this._drawStart=a,this._drawCount=l,SH(n)&&(a=0,l=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!i._decimated,r.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(s,a,l,e)}updateElements(e,n,r,s){const i=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:f}=this._getSharedOptions(n,s),m=o.axis,p=a.axis,{spanGaps:y,segment:v}=this.options,E=qu(y)?y:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||i||s==="none",_=n+r,w=e.length;let P=n>0&&this.getParsed(n-1);for(let C=0;C<w;++C){const R=e[C],T=x?R:{};if(C<n||C>=_){T.skip=!0;continue}const k=this.getParsed(C),S=We(k[p]),I=T[m]=o.getPixelForValue(k[m],C),N=T[p]=i||S?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,k,l):k[p],C);T.skip=isNaN(I)||isNaN(N)||S,T.stop=C>0&&Math.abs(k[m]-P[m])>E,v&&(T.parsed=k,T.raw=c.data[C]),f&&(T.options=u||this.resolveDataElementOptions(C,R.active?"active":s)),x||this.updateElement(R,C,T,s),P=k}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const i=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Y(lf,"id","line"),Y(lf,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Y(lf,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Yi(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class _b{constructor(e){Y(this,"options");this.options=e||{}}static override(e){Object.assign(_b.prototype,e)}init(){}formats(){return Yi()}parse(){return Yi()}format(){return Yi()}add(){return Yi()}diff(){return Yi()}startOf(){return Yi()}endOf(){return Yi()}}var $q={_date:_b};function Wq(t,e,n,r){const{controller:s,data:i,_sorted:o}=t,a=s._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const c=a._reversePixels?xH:ho;if(r){if(s._sharedOptions){const u=i[0],f=typeof u.getRange=="function"&&u.getRange(e);if(f){const m=c(i,e,n-f),p=c(i,e,n+f);return{lo:m.lo,hi:p.hi}}}}else{const u=c(i,e,n);if(l){const{vScale:f}=s._cachedMeta,{_parsed:m}=t,p=m.slice(0,u.lo+1).reverse().findIndex(v=>!We(v[f.axis]));u.lo-=Math.max(0,p);const y=m.slice(u.hi).findIndex(v=>!We(v[f.axis]));u.hi+=Math.max(0,y)}return u}}return{lo:0,hi:i.length-1}}function wp(t,e,n,r,s){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=i.length;a<l;++a){const{index:c,data:u}=i[a],{lo:f,hi:m}=Wq(i[a],e,o,s);for(let p=f;p<=m;++p){const y=u[p];y.skip||r(y,c,p)}}}function Hq(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,s){const i=e?Math.abs(r.x-s.x):0,o=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function t0(t,e,n,r,s){const i=[];return!s&&!t.isPointInArea(e)||wp(t,n,e,function(a,l,c){!s&&!Gu(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&i.push({element:a,datasetIndex:l,index:c})},!0),i}function qq(t,e,n,r){let s=[];function i(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:f}=JR(o,{x:e.x,y:e.y});Ku(f,c,u)&&s.push({element:o,datasetIndex:a,index:l})}return wp(t,n,e,i),s}function Kq(t,e,n,r,s,i){let o=[];const a=Hq(n);let l=Number.POSITIVE_INFINITY;function c(u,f,m){const p=u.inRange(e.x,e.y,s);if(r&&!p)return;const y=u.getCenterPoint(s);if(!(!!i||t.isPointInArea(y))&&!p)return;const E=a(e,y);E<l?(o=[{element:u,datasetIndex:f,index:m}],l=E):E===l&&o.push({element:u,datasetIndex:f,index:m})}return wp(t,n,e,c),o}function n0(t,e,n,r,s,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!r?qq(t,e,n,s):Kq(t,e,n,r,s,i)}function cS(t,e,n,r,s){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return wp(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],s)&&(i.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,s))}),r&&!a?[]:i}var Gq={modes:{index(t,e,n,r){const s=to(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?t0(t,s,i,r,o):n0(t,s,i,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,f=c.data[u];f&&!f.skip&&l.push({element:f,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,r){const s=to(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?t0(t,s,i,r,o):n0(t,s,i,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,r){const s=to(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return t0(t,s,i,r,o)},nearest(t,e,n,r){const s=to(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return n0(t,s,i,n.intersect,r,o)},x(t,e,n,r){const s=to(e,t);return cS(t,s,"x",n.intersect,r)},y(t,e,n,r){const s=to(e,t);return cS(t,s,"y",n.intersect,r)}}};const vM=["left","top","right","bottom"];function cc(t,e){return t.filter(n=>n.pos===e)}function uS(t,e){return t.filter(n=>vM.indexOf(n.pos)===-1&&n.box.axis===e)}function uc(t,e){return t.sort((n,r)=>{const s=e?r:n,i=e?n:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function Qq(t){const e=[];let n,r,s,i,o,a;for(n=0,r=(t||[]).length;n<r;++n)s=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=s,e.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&i+o,stackWeight:a});return e}function Yq(t){const e={};for(const n of t){const{stack:r,pos:s,stackWeight:i}=n;if(!r||!vM.includes(s))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function Xq(t,e){const n=Yq(t),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*r:l&&e.availableWidth,a.height=s):(a.width=r,a.height=u?u*s:l&&e.availableHeight)}return n}function Zq(t){const e=Qq(t),n=uc(e.filter(c=>c.box.fullSize),!0),r=uc(cc(e,"left"),!0),s=uc(cc(e,"right")),i=uc(cc(e,"top"),!0),o=uc(cc(e,"bottom")),a=uS(e,"x"),l=uS(e,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:cc(e,"chartArea"),vertical:r.concat(s).concat(l),horizontal:i.concat(o).concat(a)}}function dS(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function xM(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Jq(t,e,n,r){const{pos:s,box:i}=n,o=t.maxPadding;if(!Ie(s)){n.size&&(t[s]-=n.size);const f=r[n.stack]||{size:0,count:1};f.size=Math.max(f.size,n.horizontal?i.height:i.width),n.size=f.size/f.count,t[s]+=n.size}i.getPadding&&xM(o,i.getPadding());const a=Math.max(0,e.outerWidth-dS(o,t,"left","right")),l=Math.max(0,e.outerHeight-dS(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function eK(t){const e=t.maxPadding;function n(r){const s=Math.max(e[r]-t[r],0);return t[r]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function tK(t,e){const n=e.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return r(t?["left","right"]:["top","bottom"])}function Pc(t,e,n,r){const s=[];let i,o,a,l,c,u;for(i=0,o=t.length,c=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,tK(a.horizontal,e));const{same:f,other:m}=Jq(e,n,a,r);c|=f&&s.length,u=u||m,l.fullSize||s.push(a)}return c&&Pc(s,e,n,r)||u}function Ih(t,e,n,r,s){t.top=n,t.left=e,t.right=e+r,t.bottom=n+s,t.width=r,t.height=s}function hS(t,e,n,r){const s=n.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const f=e.w*u,m=c.size||l.height;xm(c.start)&&(o=c.start),l.fullSize?Ih(l,s.left,o,n.outerWidth-s.right-s.left,m):Ih(l,e.left+c.placed,o,f,m),c.start=o,c.placed+=f,o=l.bottom}else{const f=e.h*u,m=c.size||l.width;xm(c.start)&&(i=c.start),l.fullSize?Ih(l,i,s.top,m,n.outerHeight-s.bottom-s.top):Ih(l,i,e.top+c.placed,m,f),c.start=i,c.placed+=f,i=l.right}}e.x=i,e.y=o}var Yn={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const s=nr(t.options.layout.padding),i=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=Zq(t.boxes),l=a.vertical,c=a.horizontal;Le(t.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});const u=l.reduce((v,E)=>E.box.options&&E.box.options.display===!1?v:v+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/u,hBoxMaxHeight:o/2}),m=Object.assign({},s);xM(m,nr(r));const p=Object.assign({maxPadding:m,w:i,h:o,x:s.left,y:s.top},s),y=Xq(l.concat(c),f);Pc(a.fullSize,p,f,y),Pc(l,p,f,y),Pc(c,p,f,y)&&Pc(l,p,f,y),eK(p),hS(a.leftAndTop,p,f,y),p.x+=p.w,p.y+=p.h,hS(a.rightAndBottom,p,f,y),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Le(a.chartArea,v=>{const E=v.box;Object.assign(E,t.chartArea),E.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class _M{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,s){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(e){return!0}updateConfig(e){}}class nK extends _M{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const cf="$chartjs",rK={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},fS=t=>t===null||t==="";function sK(t,e){const n=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[cf]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",fS(s)){const i=JT(t,"width");i!==void 0&&(t.width=i)}if(fS(r))if(t.style.height==="")t.height=t.width/(e||2);else{const i=JT(t,"height");i!==void 0&&(t.height=i)}return t}const bM=gq?{passive:!0}:!1;function iK(t,e,n){t&&t.addEventListener(e,n,bM)}function oK(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,bM)}function aK(t,e){const n=rK[t.type]||t.type,{x:r,y:s}=to(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:s!==void 0?s:null}}function wm(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function lK(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||wm(a.addedNodes,r),o=o&&!wm(a.removedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function cK(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||wm(a.removedNodes,r),o=o&&!wm(a.addedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const Yu=new Map;let mS=0;function wM(){const t=window.devicePixelRatio;t!==mS&&(mS=t,Yu.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function uK(t,e){Yu.size||window.addEventListener("resize",wM),Yu.set(t,e)}function dK(t){Yu.delete(t),Yu.size||window.removeEventListener("resize",wM)}function hK(t,e,n){const r=t.canvas,s=r&&xb(r);if(!s)return;const i=nM((a,l)=>{const c=s.clientWidth;n(a,l),c<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||i(c,u)});return o.observe(s),uK(t,i),o}function r0(t,e,n){n&&n.disconnect(),e==="resize"&&dK(t)}function fK(t,e,n){const r=t.canvas,s=nM(i=>{t.ctx!==null&&n(aK(i,t))},t);return iK(r,e,s),s}class mK extends _M{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(sK(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[cf])return!1;const r=n[cf].initial;["height","width"].forEach(i=>{const o=r[i];We(o)?n.removeAttribute(i):n.setAttribute(i,o)});const s=r.style||{};return Object.keys(s).forEach(i=>{n.style[i]=s[i]}),n.width=n.width,delete n[cf],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:lK,detach:cK,resize:hK}[n]||fK;s[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),s=r[n];if(!s)return;({attach:r0,detach:r0,resize:r0}[n]||oK)(e,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,s){return pq(e,n,r,s)}isAttached(e){const n=e&&xb(e);return!!(n&&n.isConnected)}}function pK(t){return!vb()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?nK:mK}var Mh;let Fi=(Mh=class{constructor(){Y(this,"x");Y(this,"y");Y(this,"active",!1);Y(this,"options");Y(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return qu(this.x)&&qu(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const s={};return e.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}},Y(Mh,"defaults",{}),Y(Mh,"defaultRoutes"),Mh);function gK(t,e){const n=t.options.ticks,r=yK(t),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?xK(e):[],o=i.length,a=i[0],l=i[o-1],c=[];if(o>s)return _K(e,c,i,o/s),c;const u=vK(i,e,s);if(o>0){let f,m;const p=o>1?Math.round((l-a)/(o-1)):null;for(Ch(e,c,u,We(p)?0:a-p,a),f=0,m=o-1;f<m;f++)Ch(e,c,u,i[f],i[f+1]);return Ch(e,c,u,l,We(p)?e.length:l+p),c}return Ch(e,c,u),c}function yK(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(r,s))}function vK(t,e,n){const r=bK(t),s=e.length/n;if(!r)return Math.max(s,1);const i=hH(r);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>s)return l}return Math.max(s,1)}function xK(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function _K(t,e,n,r){let s=0,i=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===i&&(e.push(t[o]),s++,i=n[s*r])}function Ch(t,e,n,r,s){const i=_e(r,0),o=Math.min(_e(s,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),s&&(l=s-r,n=l/Math.floor(l/n)),u=i;u<0;)a++,u=Math.round(i+a*n);for(c=Math.max(i,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(i+a*n))}function bK(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const wK=t=>t==="left"?"right":t==="right"?"left":t,pS=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,gS=(t,e)=>Math.min(e||t,t);function yS(t,e){const n=[],r=t.length/e,s=t.length;let i=0;for(;i<s;i+=r)n.push(t[Math.floor(i)]);return n}function kK(t,e,n){const r=t.ticks.length,s=Math.min(e,r-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),c;if(!(n&&(r===1?c=Math.max(l-i,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<i-a||l>o+a)))return l}function EK(t,e){Le(t,n=>{const r=n.gc,s=r.length/2;let i;if(s>e){for(i=0;i<s;++i)delete n.data[r[i]];r.splice(0,s)}})}function dc(t){return t.drawTicks?t.tickLength:0}function vS(t,e){if(!t.display)return 0;const n=Xt(t.font,e),r=nr(t.padding);return(_t(t.text)?t.text.length:1)*n.lineHeight+r.height}function TK(t,e){return Zo(t,{scale:e,type:"scale"})}function SK(t,e,n){return Zo(t,{tick:n,index:e,type:"tick"})}function IK(t,e,n){let r=db(t);return(n&&e!=="right"||!n&&e==="right")&&(r=wK(r)),r}function CK(t,e,n,r){const{top:s,left:i,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let f=0,m,p,y;const v=o-s,E=a-i;if(t.isHorizontal()){if(p=qt(r,i,a),Ie(n)){const x=Object.keys(n)[0],_=n[x];y=u[x].getPixelForValue(_)+v-e}else n==="center"?y=(c.bottom+c.top)/2+v-e:y=pS(t,n,e);m=a-i}else{if(Ie(n)){const x=Object.keys(n)[0],_=n[x];p=u[x].getPixelForValue(_)-E+e}else n==="center"?p=(c.left+c.right)/2-E+e:p=pS(t,n,e);y=qt(r,o,s),f=n==="left"?-wt:wt}return{titleX:p,titleY:y,maxWidth:m,rotation:f}}class Vl extends Fi{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return e=br(e,Number.POSITIVE_INFINITY),n=br(n,Number.NEGATIVE_INFINITY),r=br(r,Number.POSITIVE_INFINITY),s=br(s,Number.NEGATIVE_INFINITY),{min:br(e,r),max:br(n,s),minDefined:en(e),maxDefined:en(n)}}getMinMax(e){let{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),o;if(s&&i)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),i||(r=Math.max(r,o.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:br(n,br(r,n)),max:br(r,br(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ke(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:s,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=KH(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?yS(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=gK(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ke(this.options.afterUpdate,[this])}beforeSetDimensions(){Ke(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ke(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ke(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ke(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r],i.label=Ke(n.callback,[i.value,r,e],this)}afterTickToLabelConversion(){Ke(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ke(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=gS(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,i=n.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!n.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),f=u.widest.width,m=u.highest.height,p=un(this.chart.width-f,0,this.maxWidth);a=e.offset?this.maxWidth/r:p/(r-1),f+6>a&&(a=p/(r-(e.offset?.5:1)),l=this.maxHeight-dc(e.grid)-n.padding-vS(e.title,this.chart.options.font),c=Math.sqrt(f*f+m*m),o=gH(Math.min(Math.asin(un((u.highest.height+6)/a,-1,1)),Math.asin(un(l/c,-1,1))-Math.asin(un(m/c,-1,1)))),o=Math.max(s,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){Ke(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ke(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=vS(s,n.options.font);if(a?(e.width=this.maxWidth,e.height=dc(i)+l):(e.height=this.maxHeight,e.width=dc(i)+l),r.display&&this.ticks.length){const{first:c,last:u,widest:f,highest:m}=this._getLabelSizes(),p=r.padding*2,y=as(this.labelRotation),v=Math.cos(y),E=Math.sin(y);if(a){const x=r.mirror?0:E*f.width+v*m.height;e.height=Math.min(this.maxHeight,e.height+x+p)}else{const x=r.mirror?0:v*f.width+E*m.height;e.width=Math.min(this.maxWidth,e.width+x+p)}this._calculatePadding(c,u,E,v)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,s){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,p=0;l?c?(m=s*e.width,p=r*n.height):(m=r*e.height,p=s*n.width):i==="start"?p=n.width:i==="end"?m=e.width:i!=="inner"&&(m=e.width/2,p=n.width/2),this.paddingLeft=Math.max((m-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-f+o)*this.width/(this.width-f),0)}else{let u=n.height/2,f=e.height/2;i==="start"?(u=0,f=e.height):i==="end"&&(u=n.height,f=0),this.paddingTop=u+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ke(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)We(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=yS(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:s,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/gS(n,r));let c=0,u=0,f,m,p,y,v,E,x,_,w,P,C;for(f=0;f<n;f+=l){if(y=e[f].label,v=this._resolveTickFontOptions(f),s.font=E=v.string,x=i[E]=i[E]||{data:{},gc:[]},_=v.lineHeight,w=P=0,!We(y)&&!_t(y))w=GT(s,x.data,x.gc,w,y),P=_;else if(_t(y))for(m=0,p=y.length;m<p;++m)C=y[m],!We(C)&&!_t(C)&&(w=GT(s,x.data,x.gc,w,C),P+=_);o.push(w),a.push(P),c=Math.max(w,c),u=Math.max(P,u)}EK(i,n);const R=o.indexOf(c),T=a.indexOf(u),k=S=>({width:o[S]||0,height:a[S]||0});return{first:k(0),last:k(n-1),widest:k(R),highest:k(T),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return vH(this._alignToPixels?Qi(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=SK(this.getContext(),e,r))}return this.$context||(this.$context=TK(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=as(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*r>a*s?a/r:l/s:l*s<a*r?l/r:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,s=this.options,{grid:i,position:o,border:a}=s,l=i.offset,c=this.isHorizontal(),f=this.ticks.length+(l?1:0),m=dc(i),p=[],y=a.setContext(this.getContext()),v=y.display?y.width:0,E=v/2,x=function(J){return Qi(r,J,v)};let _,w,P,C,R,T,k,S,I,N,D,M;if(o==="top")_=x(this.bottom),T=this.bottom-m,S=_-E,N=x(e.top)+E,M=e.bottom;else if(o==="bottom")_=x(this.top),N=e.top,M=x(e.bottom)-E,T=_+E,S=this.top+m;else if(o==="left")_=x(this.right),R=this.right-m,k=_-E,I=x(e.left)+E,D=e.right;else if(o==="right")_=x(this.left),I=e.left,D=x(e.right)-E,R=_+E,k=this.left+m;else if(n==="x"){if(o==="center")_=x((e.top+e.bottom)/2+.5);else if(Ie(o)){const J=Object.keys(o)[0],Q=o[J];_=x(this.chart.scales[J].getPixelForValue(Q))}N=e.top,M=e.bottom,T=_+E,S=T+m}else if(n==="y"){if(o==="center")_=x((e.left+e.right)/2);else if(Ie(o)){const J=Object.keys(o)[0],Q=o[J];_=x(this.chart.scales[J].getPixelForValue(Q))}R=_-E,k=R-m,I=e.left,D=e.right}const Z=_e(s.ticks.maxTicksLimit,f),se=Math.max(1,Math.ceil(f/Z));for(w=0;w<f;w+=se){const J=this.getContext(w),Q=i.setContext(J),F=a.setContext(J),W=Q.lineWidth,te=Q.color,we=F.dash||[],ce=F.dashOffset,q=Q.tickWidth,de=Q.tickColor,Ne=Q.tickBorderDash||[],je=Q.tickBorderDashOffset;P=kK(this,w,l),P!==void 0&&(C=Qi(r,P,W),c?R=k=I=D=C:T=S=N=M=C,p.push({tx1:R,ty1:T,tx2:k,ty2:S,x1:I,y1:N,x2:D,y2:M,width:W,color:te,borderDash:we,borderDashOffset:ce,tickWidth:q,tickColor:de,tickBorderDash:Ne,tickBorderDashOffset:je}))}return this._ticksLength=f,this._borderValue=_,p}_computeLabelItems(e){const n=this.axis,r=this.options,{position:s,ticks:i}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:f}=i,m=dc(r.grid),p=m+u,y=f?-u:p,v=-as(this.labelRotation),E=[];let x,_,w,P,C,R,T,k,S,I,N,D,M="middle";if(s==="top")R=this.bottom-y,T=this._getXAxisLabelAlignment();else if(s==="bottom")R=this.top+y,T=this._getXAxisLabelAlignment();else if(s==="left"){const se=this._getYAxisLabelAlignment(m);T=se.textAlign,C=se.x}else if(s==="right"){const se=this._getYAxisLabelAlignment(m);T=se.textAlign,C=se.x}else if(n==="x"){if(s==="center")R=(e.top+e.bottom)/2+p;else if(Ie(s)){const se=Object.keys(s)[0],J=s[se];R=this.chart.scales[se].getPixelForValue(J)+p}T=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")C=(e.left+e.right)/2-p;else if(Ie(s)){const se=Object.keys(s)[0],J=s[se];C=this.chart.scales[se].getPixelForValue(J)}T=this._getYAxisLabelAlignment(m).textAlign}n==="y"&&(l==="start"?M="top":l==="end"&&(M="bottom"));const Z=this._getLabelSizes();for(x=0,_=a.length;x<_;++x){w=a[x],P=w.label;const se=i.setContext(this.getContext(x));k=this.getPixelForTick(x)+i.labelOffset,S=this._resolveTickFontOptions(x),I=S.lineHeight,N=_t(P)?P.length:1;const J=N/2,Q=se.color,F=se.textStrokeColor,W=se.textStrokeWidth;let te=T;o?(C=k,T==="inner"&&(x===_-1?te=this.options.reverse?"left":"right":x===0?te=this.options.reverse?"right":"left":te="center"),s==="top"?c==="near"||v!==0?D=-N*I+I/2:c==="center"?D=-Z.highest.height/2-J*I+I:D=-Z.highest.height+I/2:c==="near"||v!==0?D=I/2:c==="center"?D=Z.highest.height/2-J*I:D=Z.highest.height-N*I,f&&(D*=-1),v!==0&&!se.showLabelBackdrop&&(C+=I/2*Math.sin(v))):(R=k,D=(1-N)*I/2);let we;if(se.showLabelBackdrop){const ce=nr(se.backdropPadding),q=Z.heights[x],de=Z.widths[x];let Ne=D-ce.top,je=0-ce.left;switch(M){case"middle":Ne-=q/2;break;case"bottom":Ne-=q;break}switch(T){case"center":je-=de/2;break;case"right":je-=de;break;case"inner":x===_-1?je-=de:x>0&&(je-=de/2);break}we={left:je,top:Ne,width:de+ce.width,height:q+ce.height,color:se.backdropColor}}E.push({label:P,font:S,textOffset:D,options:{rotation:v,color:Q,strokeColor:F,strokeWidth:W,textAlign:te,textBaseline:M,translation:[C,R],backdrop:we}})}return E}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-as(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let c,u;return n==="left"?s?(u=this.right+i,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?s?(u=this.left+i,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:s,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,s,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(i=>i.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(i=0,o=s.length;i<o;++i){const l=s[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),o=r.display?i.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,f,m;this.isHorizontal()?(c=Qi(e,this.left,o)-o/2,u=Qi(e,this.right,a)+a/2,f=m=l):(f=Qi(e,this.top,o)-o/2,m=Qi(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(c,f),n.lineTo(u,m),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&xp(r,s);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Qu(r,c,0,u,l,a)}s&&_p(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const i=Xt(r.font),o=nr(r.padding),a=r.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||Ie(n)?(l+=o.bottom,_t(r.text)&&(l+=i.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:f,rotation:m}=CK(this,l,n,a);Qu(e,r.text,0,0,i,{color:r.color,maxWidth:f,rotation:m,textAlign:IK(a,n,s),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=_e(e.grid&&e.grid.z,-1),s=_e(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Vl.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[r]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Xt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Ah{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;NK(n)&&(r=this.register(n));const s=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in s||(s[i]=e,AK(e,o,r),this.override&&ht.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,s=this.scope;r in n&&delete n[r],s&&r in ht[s]&&(delete ht[s][r],this.override&&delete $o[r])}}function AK(t,e,n){const r=Wu(Object.create(null),[n?ht.get(n):{},ht.get(e),t.defaults]);ht.set(e,r),t.defaultRoutes&&PK(e,t.defaultRoutes),t.descriptors&&ht.describe(e,t.descriptors)}function PK(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),s=r.pop(),i=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");ht.route(i,s,l,a)})}function NK(t){return"id"in t&&"defaults"in t}class RK{constructor(){this.controllers=new Ah(Ba,"datasets",!0),this.elements=new Ah(Fi,"elements"),this.plugins=new Ah(Object,"plugins"),this.scales=new Ah(Vl,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(e,i,s):Le(s,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const s=cb(e);Ke(r["before"+s],[],r),n[e](r),Ke(r["after"+s],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var Er=new RK;class MK{constructor(){this._init=void 0}notify(e,n,r,s){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const i=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(i,e,n,r);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,r,s){s=s||{};for(const i of e){const o=i.plugin,a=o[r],l=[n,s,i.options];if(Ke(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){We(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,s=_e(r.options&&r.options.plugins,{}),i=DK(r);return s===!1&&!n?[]:OK(e,i,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,s=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,r),e,"stop"),this._notify(s(r,n),e,"start")}}function DK(t){const e={},n=[],r=Object.keys(Er.plugins.items);for(let i=0;i<r.length;i++)n.push(Er.getPlugin(r[i]));const s=t.plugins||[];for(let i=0;i<s.length;i++){const o=s[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function jK(t,e){return!e&&t===!1?null:t===!0?{}:t}function OK(t,{plugins:e,localIds:n},r,s){const i=[],o=t.getContext();for(const a of e){const l=a.id,c=jK(r[l],s);c!==null&&i.push({plugin:a,options:LK(t.config,{plugin:a,local:n[l]},c,o)})}return i}function LK(t,{plugin:e,local:n},r,s){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(r,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function yv(t,e){const n=ht.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function VK(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function FK(t,e){return t===e?"_index_":"_value_"}function xS(t){if(t==="x"||t==="y"||t==="r")return t}function UK(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function vv(t,...e){if(xS(t))return t;for(const n of e){const r=n.axis||UK(n.position)||t.length>1&&xS(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function _S(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function BK(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return _S(t,"x",n[0])||_S(t,"y",n[0])}return{}}function zK(t,e){const n=$o[t.type]||{scales:{}},r=e.scales||{},s=yv(t.type,e),i=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!Ie(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=vv(o,a,BK(o,t),ht.scales[a.type]),c=FK(l,s),u=n.scales||{};i[o]=Jc(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||yv(a,e),u=($o[a]||{}).scales||{};Object.keys(u).forEach(f=>{const m=VK(f,l),p=o[m+"AxisID"]||m;i[p]=i[p]||Object.create(null),Jc(i[p],[{axis:m},r[p],u[f]])})}),Object.keys(i).forEach(o=>{const a=i[o];Jc(a,[ht.scales[a.type],ht.scale])}),i}function kM(t){const e=t.options||(t.options={});e.plugins=_e(e.plugins,{}),e.scales=zK(t,e)}function EM(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function $K(t){return t=t||{},t.data=EM(t.data),kM(t),t}const bS=new Map,TM=new Set;function Ph(t,e){let n=bS.get(t);return n||(n=e(),bS.set(t,n),TM.add(n)),n}const hc=(t,e,n)=>{const r=Hu(e,n);r!==void 0&&t.add(r)};class WK{constructor(e){this._config=$K(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=EM(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),kM(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Ph(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Ph(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Ph(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return Ph(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let s=r.get(e);return(!s||n)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,n,r){const{options:s,type:i}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(f=>hc(l,e,f))),u.forEach(f=>hc(l,s,f)),u.forEach(f=>hc(l,$o[i]||{},f)),u.forEach(f=>hc(l,ht,f)),u.forEach(f=>hc(l,mv,f))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),TM.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,$o[n]||{},ht.datasets[n]||{},{type:n},ht,mv]}resolveNamedOptions(e,n,r,s=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=wS(this._resolverCache,e,s);let l=o;if(qK(o,n)){i.$shared=!1,r=Ri(r)?r():r;const c=this.createResolver(e,r,a);l=kl(o,r,c)}for(const c of n)i[c]=l[c];return i}createResolver(e,n,r=[""],s){const{resolver:i}=wS(this._resolverCache,e,r);return Ie(n)?kl(i,n,void 0,s):i}}function wS(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const s=n.join();let i=r.get(s);return i||(i={resolver:pb(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(s,i)),i}const HK=t=>Ie(t)&&Object.getOwnPropertyNames(t).some(e=>Ri(t[e]));function qK(t,e){const{isScriptable:n,isIndexable:r}=iM(t);for(const s of e){const i=n(s),o=r(s),a=(o||i)&&t[s];if(i&&(Ri(a)||HK(a))||o&&_t(a))return!0}return!1}var KK="4.5.1";const GK=["top","bottom","left","right","chartArea"];function kS(t,e){return t==="top"||t==="bottom"||GK.indexOf(t)===-1&&e==="x"}function ES(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function TS(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Ke(n&&n.onComplete,[t],e)}function QK(t){const e=t.chart,n=e.options.animation;Ke(n&&n.onProgress,[t],e)}function SM(t){return vb()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const uf={},SS=t=>{const e=SM(t);return Object.values(uf).filter(n=>n.canvas===e).pop()};function YK(t,e,n){const r=Object.keys(t);for(const s of r){const i=+s;if(i>=e){const o=t[s];delete t[s],(n>0||i>e)&&(t[i+n]=o)}}}function XK(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var Rs;let Cd=(Rs=class{static register(...e){Er.add(...e),IS()}static unregister(...e){Er.remove(...e),IS()}constructor(e,n){const r=this.config=new WK(n),s=SM(e),i=SS(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||pK(s)),this.platform.updateConfig(r);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=rH(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new MK,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=kH(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],uf[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Kr.listen(this,"complete",TS),Kr.listen(this,"progress",QK),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:s,_aspectRatio:i}=this;return We(e)?n&&i?i:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Er}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ZT(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return QT(this.canvas,this.ctx),this}stop(){return Kr.stop(this),this}resize(e,n){Kr.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,i),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,ZT(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Ke(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Le(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,s=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=vv(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Le(i,o=>{const a=o.options,l=a.id,c=vv(l,a),u=_e(a.type,o.dtype);(a.position===void 0||kS(a.position,c)!==kS(o.dposition))&&(a.position=o.dposition),s[l]=!0;let f=null;if(l in r&&r[l].type===u)f=r[l];else{const m=Er.getScale(u);f=new m({id:l,type:u,ctx:this.ctx,chart:this}),r[f.id]=f}f.init(a,e)}),Le(s,(o,a)=>{o||delete r[a]}),Le(r,o=>{Yn.configure(this,o,o.options),Yn.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((s,i)=>s.index-i.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(ES("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,s)=>{n.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const i=n[r];let o=this.getDatasetMeta(r);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=i.indexAxis||yv(a,this.options),o.order=i.order||0,o.index=r,o.label=""+i.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=Er.getController(a),{datasetElementType:c,dataElementType:u}=ht.datasets[a];Object.assign(l,{dataElementType:Er.getElement(u),datasetElementType:c&&Er.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Le(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:f}=this.getDatasetMeta(c),m=!s&&i.indexOf(f)===-1;f.buildOrUpdateElements(m),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),s||Le(i,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(ES("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Le(this.scales,e=>{Yn.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!FT(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of n){const o=r==="_removeElements"?-i:i;YK(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),s=r(0);for(let i=1;i<n;i++)if(!FT(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Yn.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Le(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Ri(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Kr.has(this)?this.attached&&!Kr.running(this)&&Kr.start(this):(this.draw(),TS({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let s,i;for(s=0,i=n.length;s<i;++s){const o=n[s];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},s=pM(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&xp(n,s),e.controller.draw(),s&&_p(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Gu(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,s){const i=Gq.modes[n];return typeof i=="function"?i(this,e,r,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let s=r.filter(i=>i&&i._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=Zo(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const s=r?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,s);xm(n)?(i.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(i,{visible:r}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Kr.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),QT(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete uf[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},s=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};Le(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},i=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),r("resize",i),r("detach",o)};o=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Le(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Le(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const s=r?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!ym(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const s=this.options.hover,i=(l,c)=>l.filter(u=>!c.some(f=>u.datasetIndex===f.datasetIndex&&u.index===f.index)),o=i(n,e),a=r?e:i(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:s=[],options:i}=this,o=n,a=this._getActiveElements(e,s,r,o),l=cH(e),c=XK(e,this._lastEvent,r,l);r&&(this._lastEvent=null,Ke(i.onHover,[e,a,this],this),l&&Ke(i.onClick,[e,a,this],this));const u=!ym(a,s);return(u||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=c,u}_getActiveElements(e,n,r,s){if(e.type==="mouseout")return[];if(!r)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,s)}},Y(Rs,"defaults",ht),Y(Rs,"instances",uf),Y(Rs,"overrides",$o),Y(Rs,"registry",Er),Y(Rs,"version",KK),Y(Rs,"getChart",SS),Rs);function IS(){return Le(Cd.instances,t=>t._plugins.invalidate())}function ZK(t,e,n){const{startAngle:r,x:s,y:i,outerRadius:o,innerRadius:a,options:l}=e,{borderWidth:c,borderJoinStyle:u}=l,f=Math.min(c/o,Nn(r-n));if(t.beginPath(),t.arc(s,i,o-c/2,r+f/2,n-f/2),a>0){const m=Math.min(c/a,Nn(r-n));t.arc(s,i,a+c/2,n-m/2,r+m/2,!0)}else{const m=Math.min(c/2,o*Nn(r-n));if(u==="round")t.arc(s,i,m,n-Ve/2,r+Ve/2,!0);else if(u==="bevel"){const p=2*m*m,y=-p*Math.cos(n+Ve/2)+s,v=-p*Math.sin(n+Ve/2)+i,E=p*Math.cos(r+Ve/2)+s,x=p*Math.sin(r+Ve/2)+i;t.lineTo(y,v),t.lineTo(E,x)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function JK(t,e,n){const{startAngle:r,pixelMargin:s,x:i,y:o,outerRadius:a,innerRadius:l}=e;let c=s/a;t.beginPath(),t.arc(i,o,a,r-c,n+c),l>s?(c=s/l,t.arc(i,o,l,n+c,r-c,!0)):t.arc(i,o,s,n+wt,r-wt),t.closePath(),t.clip()}function eG(t){return mb(t,["outerStart","outerEnd","innerStart","innerEnd"])}function tG(t,e,n,r){const s=eG(t.options.borderRadius),i=(n-e)/2,o=Math.min(i,r*e/2),a=l=>{const c=(n-Math.min(i,l))*r/2;return un(l,0,Math.min(i,c))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:un(s.innerStart,0,o),innerEnd:un(s.innerEnd,0,o)}}function ia(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function km(t,e,n,r,s,i){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,f=Math.max(e.outerRadius+r+n-c,0),m=u>0?u+r+n+c:0;let p=0;const y=s-l;if(r){const se=u>0?u-r:0,J=f>0?f-r:0,Q=(se+J)/2,F=Q!==0?y*Q/(Q+r):y;p=(y-F)/2}const v=Math.max(.001,y*f-n/Ve)/f,E=(y-v)/2,x=l+E+p,_=s-E-p,{outerStart:w,outerEnd:P,innerStart:C,innerEnd:R}=tG(e,m,f,_-x),T=f-w,k=f-P,S=x+w/T,I=_-P/k,N=m+C,D=m+R,M=x+C/N,Z=_-R/D;if(t.beginPath(),i){const se=(S+I)/2;if(t.arc(o,a,f,S,se),t.arc(o,a,f,se,I),P>0){const W=ia(k,I,o,a);t.arc(W.x,W.y,P,I,_+wt)}const J=ia(D,_,o,a);if(t.lineTo(J.x,J.y),R>0){const W=ia(D,Z,o,a);t.arc(W.x,W.y,R,_+wt,Z+Math.PI)}const Q=(_-R/m+(x+C/m))/2;if(t.arc(o,a,m,_-R/m,Q,!0),t.arc(o,a,m,Q,x+C/m,!0),C>0){const W=ia(N,M,o,a);t.arc(W.x,W.y,C,M+Math.PI,x-wt)}const F=ia(T,x,o,a);if(t.lineTo(F.x,F.y),w>0){const W=ia(T,S,o,a);t.arc(W.x,W.y,w,x-wt,S)}}else{t.moveTo(o,a);const se=Math.cos(S)*f+o,J=Math.sin(S)*f+a;t.lineTo(se,J);const Q=Math.cos(I)*f+o,F=Math.sin(I)*f+a;t.lineTo(Q,F)}t.closePath()}function nG(t,e,n,r,s){const{fullCircles:i,startAngle:o,circumference:a}=e;let l=e.endAngle;if(i){km(t,e,n,r,l,s);for(let c=0;c<i;++c)t.fill();isNaN(a)||(l=o+(a%et||et))}return km(t,e,n,r,l,s),t.fill(),l}function rG(t,e,n,r,s){const{fullCircles:i,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:f,borderDashOffset:m,borderRadius:p}=l,y=l.borderAlign==="inner";if(!c)return;t.setLineDash(f||[]),t.lineDashOffset=m,y?(t.lineWidth=c*2,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let v=e.endAngle;if(i){km(t,e,n,r,v,s);for(let E=0;E<i;++E)t.stroke();isNaN(a)||(v=o+(a%et||et))}y&&JK(t,e,v),l.selfJoin&&v-o>=Ve&&p===0&&u!=="miter"&&ZK(t,e,v),i||(km(t,e,n,r,v,s),t.stroke())}class Nc extends Fi{constructor(n){super();Y(this,"circumference");Y(this,"endAngle");Y(this,"fullCircles");Y(this,"innerRadius");Y(this,"outerRadius");Y(this,"pixelMargin");Y(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.getProps(["x","y"],s),{angle:o,distance:a}=JR(i,{x:n,y:r}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:f,circumference:m}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),p=(this.options.spacing+this.options.borderWidth)/2,y=_e(m,c-l),v=Ku(o,l,c)&&l!==c,E=y>=et||v,x=uo(a,u+p,f+p);return E&&x}getCenterPoint(n){const{x:r,y:s,startAngle:i,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:u}=this.options,f=(i+o)/2,m=(a+l+u+c)/2;return{x:r+Math.cos(f)*m,y:s+Math.sin(f)*m}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:s}=this,i=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=s>et?Math.floor(s/et):0,s===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*i,Math.sin(l)*i);const c=1-Math.sin(Math.min(Ve,s||0)),u=i*c;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,nG(n,this,u,o,a),rG(n,this,u,o,a),n.restore()}}Y(Nc,"id","arc"),Y(Nc,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),Y(Nc,"defaultRoutes",{backgroundColor:"backgroundColor"}),Y(Nc,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function IM(t,e,n=e){t.lineCap=_e(n.borderCapStyle,e.borderCapStyle),t.setLineDash(_e(n.borderDash,e.borderDash)),t.lineDashOffset=_e(n.borderDashOffset,e.borderDashOffset),t.lineJoin=_e(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=_e(n.borderWidth,e.borderWidth),t.strokeStyle=_e(n.borderColor,e.borderColor)}function sG(t,e,n){t.lineTo(n.x,n.y)}function iG(t){return t.stepped?LH:t.tension||t.cubicInterpolationMode==="monotone"?VH:sG}function CM(t,e,n={}){const r=t.length,{start:s=0,end:i=r-1}=n,{start:o,end:a}=e,l=Math.max(s,o),c=Math.min(i,a),u=s<o&&i<o||s>a&&i>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!u?r+c-l:c-l}}function oG(t,e,n,r){const{points:s,options:i}=e,{count:o,start:a,loop:l,ilen:c}=CM(s,n,r),u=iG(i);let{move:f=!0,reverse:m}=r||{},p,y,v;for(p=0;p<=c;++p)y=s[(a+(m?c-p:p))%o],!y.skip&&(f?(t.moveTo(y.x,y.y),f=!1):u(t,v,y,m,i.stepped),v=y);return l&&(y=s[(a+(m?c:0))%o],u(t,v,y,m,i.stepped)),!!l}function aG(t,e,n,r){const s=e.points,{count:i,start:o,ilen:a}=CM(s,n,r),{move:l=!0,reverse:c}=r||{};let u=0,f=0,m,p,y,v,E,x;const _=P=>(o+(c?a-P:P))%i,w=()=>{v!==E&&(t.lineTo(u,E),t.lineTo(u,v),t.lineTo(u,x))};for(l&&(p=s[_(0)],t.moveTo(p.x,p.y)),m=0;m<=a;++m){if(p=s[_(m)],p.skip)continue;const P=p.x,C=p.y,R=P|0;R===y?(C<v?v=C:C>E&&(E=C),u=(f*u+P)/++f):(w(),t.lineTo(P,C),y=R,f=0,v=E=C),x=C}w()}function xv(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?aG:oG}function lG(t){return t.stepped?yq:t.tension||t.cubicInterpolationMode==="monotone"?vq:no}function cG(t,e,n,r){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,r)&&s.closePath()),IM(t,e.options),t.stroke(s)}function uG(t,e,n,r){const{segments:s,options:i}=e,o=xv(e);for(const a of s)IM(t,i,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const dG=typeof Path2D=="function";function hG(t,e,n,r){dG&&!e.options.segment?cG(t,e,n,r):uG(t,e,n,r)}class ls extends Fi{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;cq(this._points,r,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Eq(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,s=e[n],i=this.points,o=mM(this,{property:n,start:s,end:s});if(!o.length)return;const a=[],l=lG(r);let c,u;for(c=0,u=o.length;c<u;++c){const{start:f,end:m}=o[c],p=i[f],y=i[m];if(p===y){a.push(p);continue}const v=Math.abs((s-p[n])/(y[n]-p[n])),E=l(p,y,v,r.stepped);E[n]=e[n],a.push(E)}return a.length===1?a[0]:a}pathSegment(e,n,r){return xv(this)(e,this,n,r)}path(e,n,r){const s=this.segments,i=xv(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of s)o&=i(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,s){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),hG(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Y(ls,"id","line"),Y(ls,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Y(ls,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Y(ls,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function CS(t,e,n,r){const s=t.options,{[n]:i}=t.getProps([n],r);return Math.abs(e-i)<s.radius+s.hitRadius}class su extends Fi{constructor(n){super();Y(this,"parsed");Y(this,"skip");Y(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,r){return CS(this,n,"x",r)}inYRange(n,r){return CS(this,n,"y",r)}getCenterPoint(n){const{x:r,y:s}=this.getProps(["x","y"],n);return{x:r,y:s}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const s=r&&n.borderWidth||0;return(r+s)*2}draw(n,r){const s=this.options;this.skip||s.radius<.1||!Gu(this,r,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,pv(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Y(su,"id","point"),Y(su,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Y(su,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function fG(t,e,n){const r=t.segments,s=t.points,i=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=kp(l,c,s);const u=_v(n,s[l],s[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:s[l],end:s[c]});continue}const f=mM(e,u);for(const m of f){const p=_v(n,i[m.start],i[m.end],m.loop),y=fM(a,s,p);for(const v of y)o.push({source:v,target:m,start:{[n]:AS(u,p,"start",Math.max)},end:{[n]:AS(u,p,"end",Math.min)}})}}return o}function _v(t,e,n,r){if(r)return;let s=e[t],i=n[t];return t==="angle"&&(s=Nn(s),i=Nn(i)),{property:t,start:s,end:i}}function mG(t,e){const{x:n=null,y:r=null}=t||{},s=e.points,i=[];return e.segments.forEach(({start:o,end:a})=>{a=kp(o,a,s);const l=s[o],c=s[a];r!==null?(i.push({x:l.x,y:r}),i.push({x:c.x,y:r})):n!==null&&(i.push({x:n,y:l.y}),i.push({x:n,y:c.y}))}),i}function kp(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function AS(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function AM(t,e){let n=[],r=!1;return _t(t)?(r=!0,n=t):n=mG(t,e),n.length?new ls({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function PS(t){return t&&t.fill!==!1}function pG(t,e,n){let s=t[e].fill;const i=[e];let o;if(!n)return s;for(;s!==!1&&i.indexOf(s)===-1;){if(!en(s))return s;if(o=t[s],!o)return!1;if(o.visible)return s;i.push(s),s=o.fill}return!1}function gG(t,e,n){const r=_G(t);if(Ie(r))return isNaN(r.value)?!1:r;let s=parseFloat(r);return en(s)&&Math.floor(s)===s?yG(r[0],e,s,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function yG(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function vG(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Ie(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function xG(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:Ie(t)?r=t.value:r=e.getBaseValue(),r}function _G(t){const e=t.options,n=e.fill;let r=_e(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function bG(t){const{scale:e,index:n,line:r}=t,s=[],i=r.segments,o=r.points,a=wG(e,n);a.push(AM({x:null,y:e.bottom},r));for(let l=0;l<i.length;l++){const c=i[l];for(let u=c.start;u<=c.end;u++)kG(s,o[u],a)}return new ls({points:s,options:{}})}function wG(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let s=0;s<r.length;s++){const i=r[s];if(i.index===e)break;i.hidden||n.unshift(i.dataset)}return n}function kG(t,e,n){const r=[];for(let s=0;s<n.length;s++){const i=n[s],{first:o,last:a,point:l}=EG(i,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function EG(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const s=r[n],i=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<i.length;c++){const u=i[c],f=o[u.start][n],m=o[u.end][n];if(uo(s,f,m)){a=s===f,l=s===m;break}}return{first:a,last:l,point:r}}class PM{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:s,y:i,radius:o}=this;return n=n||{start:0,end:et},e.arc(s,i,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:s}=this,i=e.angle;return{x:n+Math.cos(i)*s,y:r+Math.sin(i)*s,angle:i}}}function TG(t){const{chart:e,fill:n,line:r}=t;if(en(n))return SG(e,n);if(n==="stack")return bG(t);if(n==="shape")return!0;const s=IG(t);return s instanceof PM?s:AM(s,r)}function SG(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function IG(t){return(t.scale||{}).getPointPositionForValue?AG(t):CG(t)}function CG(t){const{scale:e={},fill:n}=t,r=vG(n,e);if(en(r)){const s=e.isHorizontal();return{x:s?r:null,y:s?null:r}}return null}function AG(t){const{scale:e,fill:n}=t,r=e.options,s=e.getLabels().length,i=r.reverse?e.max:e.min,o=xG(n,e,i),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,i);return new PM({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<s;++l)a.push(e.getPointPositionForValue(l,o));return a}function s0(t,e,n){const r=TG(e),{chart:s,index:i,line:o,scale:a,axis:l}=e,c=o.options,u=c.fill,f=c.backgroundColor,{above:m=f,below:p=f}=u||{},y=s.getDatasetMeta(i),v=pM(s,y);r&&o.points.length&&(xp(t,n),PG(t,{line:o,target:r,above:m,below:p,area:n,scale:a,axis:l,clip:v}),_p(t))}function PG(t,e){const{line:n,target:r,above:s,below:i,area:o,scale:a,clip:l}=e,c=n._loop?"angle":e.axis;t.save();let u=i;i!==s&&(c==="x"?(NS(t,r,o.top),i0(t,{line:n,target:r,color:s,scale:a,property:c,clip:l}),t.restore(),t.save(),NS(t,r,o.bottom)):c==="y"&&(RS(t,r,o.left),i0(t,{line:n,target:r,color:i,scale:a,property:c,clip:l}),t.restore(),t.save(),RS(t,r,o.right),u=s)),i0(t,{line:n,target:r,color:u,scale:a,property:c,clip:l}),t.restore()}function NS(t,e,n){const{segments:r,points:s}=e;let i=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=s[l],f=s[kp(l,c,s)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(f.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function RS(t,e,n){const{segments:r,points:s}=e;let i=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=s[l],f=s[kp(l,c,s)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(n,u.y),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(n,f.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function i0(t,e){const{line:n,target:r,property:s,color:i,scale:o,clip:a}=e,l=fG(n,r,s);for(const{source:c,target:u,start:f,end:m}of l){const{style:{backgroundColor:p=i}={}}=c,y=r!==!0;t.save(),t.fillStyle=p,NG(t,o,a,y&&_v(s,f,m)),t.beginPath();const v=!!n.pathSegment(t,c);let E;if(y){v?t.closePath():MS(t,r,m,s);const x=!!r.pathSegment(t,u,{move:v,reverse:!0});E=v&&x,E||MS(t,r,f,s)}t.closePath(),t.fill(E?"evenodd":"nonzero"),t.restore()}}function NG(t,e,n,r){const s=e.chart.chartArea,{property:i,start:o,end:a}=r||{};if(i==="x"||i==="y"){let l,c,u,f;i==="x"?(l=o,c=s.top,u=a,f=s.bottom):(l=s.left,c=o,u=s.right,f=a),t.beginPath(),n&&(l=Math.max(l,n.left),u=Math.min(u,n.right),c=Math.max(c,n.top),f=Math.min(f,n.bottom)),t.rect(l,c,u-l,f-c),t.clip()}}function MS(t,e,n,r){const s=e.interpolate(n,r);s&&t.lineTo(s.x,s.y)}var NM={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,s=[];let i,o,a,l;for(o=0;o<r;++o)i=t.getDatasetMeta(o),a=i.dataset,l=null,a&&a.options&&a instanceof ls&&(l={visible:t.isDatasetVisible(o),index:o,fill:gG(a,o,r),chart:t,axis:i.controller.options.indexAxis,scale:i.vScale,line:a}),i.$filler=l,s.push(l);for(o=0;o<r;++o)l=s[o],!(!l||l.fill===!1)&&(l.fill=pG(s,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",s=t.getSortedVisibleDatasetMetas(),i=t.chartArea;for(let o=s.length-1;o>=0;--o){const a=s[o].$filler;a&&(a.line.updateControlPoints(i,a.axis),r&&a.fill&&s0(t.ctx,a,i))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let s=r.length-1;s>=0;--s){const i=r[s].$filler;PS(i)&&s0(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!PS(r)||n.drawTime!=="beforeDatasetDraw"||s0(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const DS=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},RG=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class jS extends Fi{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Ke(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=Xt(r.font),i=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=DS(r,i);let c,u;n.font=s.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,i,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,s){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=s+a;let f=e;i.textAlign="left",i.textBaseline="middle";let m=-1,p=-u;return this.legendItems.forEach((y,v)=>{const E=r+n/2+i.measureText(y.text).width;(v===0||c[c.length-1]+E+2*a>o)&&(f+=u,c[c.length-(v>0?0:1)]=0,p+=u,m++),l[v]={left:0,top:p,row:m,width:E,height:s},c[c.length-1]+=E+a}),f}_fitCols(e,n,r,s){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let f=a,m=0,p=0,y=0,v=0;return this.legendItems.forEach((E,x)=>{const{itemWidth:_,itemHeight:w}=MG(r,n,i,E,s);x>0&&p+w+2*a>u&&(f+=m+a,c.push({width:m,height:p}),y+=m+a,v++,m=p=0),l[x]={left:y,top:p,col:v,width:_,height:w},m=Math.max(m,_),p+=w+a}),f+=m,c.push({width:m,height:p}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:i}}=this,o=Ua(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=qt(r,this.left+s,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=qt(r,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=qt(r,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=qt(r,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;xp(e,this),this._draw(),_p(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:s}=this,{align:i,labels:o}=e,a=ht.color,l=Ua(e.rtl,this.left,this.width),c=Xt(o.font),{padding:u}=o,f=c.size,m=f/2;let p;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:y,boxHeight:v,itemHeight:E}=DS(o,f),x=function(R,T,k){if(isNaN(y)||y<=0||isNaN(v)||v<0)return;s.save();const S=_e(k.lineWidth,1);if(s.fillStyle=_e(k.fillStyle,a),s.lineCap=_e(k.lineCap,"butt"),s.lineDashOffset=_e(k.lineDashOffset,0),s.lineJoin=_e(k.lineJoin,"miter"),s.lineWidth=S,s.strokeStyle=_e(k.strokeStyle,a),s.setLineDash(_e(k.lineDash,[])),o.usePointStyle){const I={radius:v*Math.SQRT2/2,pointStyle:k.pointStyle,rotation:k.rotation,borderWidth:S},N=l.xPlus(R,y/2),D=T+m;sM(s,I,N,D,o.pointStyleWidth&&y)}else{const I=T+Math.max((f-v)/2,0),N=l.leftForLtr(R,y),D=ru(k.borderRadius);s.beginPath(),Object.values(D).some(M=>M!==0)?gv(s,{x:N,y:I,w:y,h:v,radius:D}):s.rect(N,I,y,v),s.fill(),S!==0&&s.stroke()}s.restore()},_=function(R,T,k){Qu(s,k.text,R,T+E/2,c,{strikethrough:k.hidden,textAlign:l.textAlign(k.textAlign)})},w=this.isHorizontal(),P=this._computeTitleHeight();w?p={x:qt(i,this.left+u,this.right-r[0]),y:this.top+u+P,line:0}:p={x:this.left+u,y:qt(i,this.top+P+u,this.bottom-n[0].height),line:0},uM(this.ctx,e.textDirection);const C=E+u;this.legendItems.forEach((R,T)=>{s.strokeStyle=R.fontColor,s.fillStyle=R.fontColor;const k=s.measureText(R.text).width,S=l.textAlign(R.textAlign||(R.textAlign=o.textAlign)),I=y+m+k;let N=p.x,D=p.y;l.setWidth(this.width),w?T>0&&N+I+u>this.right&&(D=p.y+=C,p.line++,N=p.x=qt(i,this.left+u,this.right-r[p.line])):T>0&&D+C>this.bottom&&(N=p.x=N+n[p.line].width+u,p.line++,D=p.y=qt(i,this.top+P+u,this.bottom-n[p.line].height));const M=l.x(N);if(x(M,D,R),N=EH(S,N+y+m,w?N+I:this.right,e.rtl),_(l.x(N),D,R),w)p.x+=I+u;else if(typeof R.text!="string"){const Z=c.lineHeight;p.y+=RM(R,Z)+u}else p.y+=C}),dM(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=Xt(n.font),s=nr(n.padding);if(!n.display)return;const i=Ua(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=s.top+l;let u,f=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),u=this.top+c,f=qt(e.align,f,this.right-m);else{const y=this.columnSizes.reduce((v,E)=>Math.max(v,E.height),0);u=c+qt(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}const p=qt(a,f,f+m);o.textAlign=i.textAlign(db(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Qu(o,n.text,p,u,r)}_computeTitleHeight(){const e=this.options.title,n=Xt(e.font),r=nr(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,s,i;if(uo(e,this.left,this.right)&&uo(n,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],uo(e,s.left,s.left+s.width)&&uo(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!OG(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,i=RG(s,r);s&&!i&&Ke(n.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!i&&Ke(n.onHover,[e,r,this],this)}else r&&Ke(n.onClick,[e,r,this],this)}}function MG(t,e,n,r,s){const i=DG(r,t,e,n),o=jG(s,r,e.lineHeight);return{itemWidth:i,itemHeight:o}}function DG(t,e,n,r){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+r.measureText(s).width}function jG(t,e,n){let r=t;return typeof e.text!="string"&&(r=RM(e,n)),r}function RM(t,e){const n=t.text?t.text.length:0;return e*n}function OG(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var MM={id:"legend",_element:jS,start(t,e,n){const r=t.legend=new jS({ctx:t.ctx,options:n,chart:t});Yn.configure(t,r,n),Yn.addBox(t,r)},stop(t){Yn.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Yn.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=nr(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class DM extends Fi{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const s=_t(r.text)?r.text.length:1;this._padding=nr(r.padding);const i=s*Xt(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:s,right:i,options:o}=this,a=o.align;let l=0,c,u,f;return this.isHorizontal()?(u=qt(a,r,i),f=n+e,c=i-r):(o.position==="left"?(u=r+e,f=qt(a,s,n),l=Ve*-.5):(u=i-e,f=qt(a,n,s),l=Ve*.5),c=s-n),{titleX:u,titleY:f,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=Xt(n.font),i=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(i);Qu(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:db(n.align),textBaseline:"middle",translation:[o,a]})}}function LG(t,e){const n=new DM({ctx:t.ctx,options:e,chart:t});Yn.configure(t,n,e),Yn.addBox(t,n),t.titleBlock=n}var VG={id:"title",_element:DM,start(t,e,n){LG(t,n)},stop(t){const e=t.titleBlock;Yn.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;Yn.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Rc={average(t){if(!t.length)return!1;let e,n,r=new Set,s=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),s+=l.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:s/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,s=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=fv(e,c);u<s&&(s=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function wr(t,e){return e&&(_t(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Gr(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function FG(t,e){const{element:n,datasetIndex:r,index:s}=e,i=t.getDatasetMeta(r).controller,{label:o,value:a}=i.getLabelAndValue(s);return{chart:t,label:o,parsed:i.getParsed(s),raw:t.data.datasets[r].data[s],formattedValue:a,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function OS(t,e){const n=t.chart.ctx,{body:r,footer:s,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=Xt(e.bodyFont),c=Xt(e.titleFont),u=Xt(e.footerFont),f=i.length,m=s.length,p=r.length,y=nr(e.padding);let v=y.height,E=0,x=r.reduce((P,C)=>P+C.before.length+C.lines.length+C.after.length,0);if(x+=t.beforeBody.length+t.afterBody.length,f&&(v+=f*c.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),x){const P=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;v+=p*P+(x-p)*l.lineHeight+(x-1)*e.bodySpacing}m&&(v+=e.footerMarginTop+m*u.lineHeight+(m-1)*e.footerSpacing);let _=0;const w=function(P){E=Math.max(E,n.measureText(P).width+_)};return n.save(),n.font=c.string,Le(t.title,w),n.font=l.string,Le(t.beforeBody.concat(t.afterBody),w),_=e.displayColors?o+2+e.boxPadding:0,Le(r,P=>{Le(P.before,w),Le(P.lines,w),Le(P.after,w)}),_=0,n.font=u.string,Le(t.footer,w),n.restore(),E+=y.width,{width:E,height:v}}function UG(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function BG(t,e,n,r){const{x:s,width:i}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&s+i+o>e.width||t==="right"&&s-i-o<0)return!0}function zG(t,e,n,r){const{x:s,width:i}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=s<=(a+l)/2?"left":"right":s<=i/2?c="left":s>=o-i/2&&(c="right"),BG(c,t,e,n)&&(c="center"),c}function LS(t,e,n){const r=n.yAlign||e.yAlign||UG(t,n);return{xAlign:n.xAlign||e.xAlign||zG(t,e,n,r),yAlign:r}}function $G(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function WG(t,e,n){let{y:r,height:s}=t;return e==="top"?r+=n:e==="bottom"?r-=s+n:r-=s/2,r}function VS(t,e,n,r){const{caretSize:s,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=s+i,{topLeft:u,topRight:f,bottomLeft:m,bottomRight:p}=ru(o);let y=$G(e,a);const v=WG(e,l,c);return l==="center"?a==="left"?y+=c:a==="right"&&(y-=c):a==="left"?y-=Math.max(u,m)+s:a==="right"&&(y+=Math.max(f,p)+s),{x:un(y,0,r.width-e.width),y:un(v,0,r.height-e.height)}}function Nh(t,e,n){const r=nr(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function FS(t){return wr([],Gr(t))}function HG(t,e,n){return Zo(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function US(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const jM={beforeTitle:Wr,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:Wr,beforeBody:Wr,beforeLabel:Wr,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return We(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Wr,afterBody:Wr,beforeFooter:Wr,footer:Wr,afterFooter:Wr};function yn(t,e,n,r){const s=t[e].call(n,r);return typeof s>"u"?jM[e].call(n,r):s}class bv extends Fi{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,i=new gM(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=HG(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=yn(r,"beforeTitle",this,e),i=yn(r,"title",this,e),o=yn(r,"afterTitle",this,e);let a=[];return a=wr(a,Gr(s)),a=wr(a,Gr(i)),a=wr(a,Gr(o)),a}getBeforeBody(e,n){return FS(yn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,s=[];return Le(e,i=>{const o={before:[],lines:[],after:[]},a=US(r,i);wr(o.before,Gr(yn(a,"beforeLabel",this,i))),wr(o.lines,yn(a,"label",this,i)),wr(o.after,Gr(yn(a,"afterLabel",this,i))),s.push(o)}),s}getAfterBody(e,n){return FS(yn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,s=yn(r,"beforeFooter",this,e),i=yn(r,"footer",this,e),o=yn(r,"afterFooter",this,e);let a=[];return a=wr(a,Gr(s)),a=wr(a,Gr(i)),a=wr(a,Gr(o)),a}_createItems(e){const n=this._active,r=this.chart.data,s=[],i=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(FG(this.chart,n[l]));return e.filter&&(a=a.filter((u,f,m)=>e.filter(u,f,m,r))),e.itemSort&&(a=a.sort((u,f)=>e.itemSort(u,f,r))),Le(a,u=>{const f=US(e.callbacks,u);s.push(yn(f,"labelColor",this,u)),i.push(yn(f,"labelPointStyle",this,u)),o.push(yn(f,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let i,o=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const a=Rc[r.position].call(this,s,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=OS(this,r),c=Object.assign({},a,l),u=LS(this.chart,r,c),f=VS(r,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const i=this.getCaretPosition(e,r,s);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:i}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:f}=ru(a),{x:m,y:p}=e,{width:y,height:v}=n;let E,x,_,w,P,C;return i==="center"?(P=p+v/2,s==="left"?(E=m,x=E-o,w=P+o,C=P-o):(E=m+y,x=E+o,w=P-o,C=P+o),_=E):(s==="left"?x=m+Math.max(l,u)+o:s==="right"?x=m+y-Math.max(c,f)-o:x=this.caretX,i==="top"?(w=p,P=w-o,E=x-o,_=x+o):(w=p+v,P=w+o,E=x+o,_=x-o),C=w),{x1:E,x2:x,x3:_,y1:w,y2:P,y3:C}}drawTitle(e,n,r){const s=this.title,i=s.length;let o,a,l;if(i){const c=Ua(r.rtl,this.x,this.width);for(e.x=Nh(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=Xt(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,s,i){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=i,u=Xt(i.bodyFont),f=Nh(this,"left",i),m=s.x(f),p=l<u.lineHeight?(u.lineHeight-l)/2:0,y=n.y+p;if(i.usePointStyle){const v={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},E=s.leftForLtr(m,c)+c/2,x=y+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,pv(e,v,E,x),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,pv(e,v,E,x)}else{e.lineWidth=Ie(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const v=s.leftForLtr(m,c),E=s.leftForLtr(s.xPlus(m,1),c-2),x=ru(o.borderRadius);Object.values(x).some(_=>_!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,gv(e,{x:v,y,w:c,h:l,radius:x}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),gv(e,{x:E,y:y+1,w:c-2,h:l-2,radius:x}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(v,y,c,l),e.strokeRect(v,y,c,l),e.fillStyle=o.backgroundColor,e.fillRect(E,y+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=r,f=Xt(r.bodyFont);let m=f.lineHeight,p=0;const y=Ua(r.rtl,this.x,this.width),v=function(k){n.fillText(k,y.x(e.x+p),e.y+m/2),e.y+=m+i},E=y.textAlign(o);let x,_,w,P,C,R,T;for(n.textAlign=o,n.textBaseline="middle",n.font=f.string,e.x=Nh(this,E,r),n.fillStyle=r.bodyColor,Le(this.beforeBody,v),p=a&&E!=="right"?o==="center"?c/2+u:c+2+u:0,P=0,R=s.length;P<R;++P){for(x=s[P],_=this.labelTextColors[P],n.fillStyle=_,Le(x.before,v),w=x.lines,a&&w.length&&(this._drawColorBox(n,e,P,y,r),m=Math.max(f.lineHeight,l)),C=0,T=w.length;C<T;++C)v(w[C]),m=f.lineHeight;Le(x.after,v)}p=0,m=f.lineHeight,Le(this.afterBody,v),e.y-=i}drawFooter(e,n,r){const s=this.footer,i=s.length;let o,a;if(i){const l=Ua(r.rtl,this.x,this.width);for(e.x=Nh(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=Xt(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=r,{topLeft:f,topRight:m,bottomLeft:p,bottomRight:y}=ru(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+f,l),o==="top"&&this.drawCaret(e,n,r,s),n.lineTo(a+c-m,l),n.quadraticCurveTo(a+c,l,a+c,l+m),o==="center"&&i==="right"&&this.drawCaret(e,n,r,s),n.lineTo(a+c,l+u-y),n.quadraticCurveTo(a+c,l+u,a+c-y,l+u),o==="bottom"&&this.drawCaret(e,n,r,s),n.lineTo(a+p,l+u),n.quadraticCurveTo(a,l+u,a,l+u-p),o==="center"&&i==="left"&&this.drawCaret(e,n,r,s),n.lineTo(a,l+f),n.quadraticCurveTo(a,l,a+f,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const o=Rc[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=OS(this,e),l=Object.assign({},o,this._size),c=LS(n,e,l),u=VS(e,l,c,n);(s._to!==u.x||i._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=nr(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(i,e,s,n),uM(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),dM(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),i=!ym(r,s),o=this._positionChanged(s,n);(i||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,r),a=this._positionChanged(o,e),l=n||!ym(o,i)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,s){const i=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,r);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:s,options:i}=this,o=Rc[i.position].call(this,e,n);return o!==!1&&(r!==o.x||s!==o.y)}}Y(bv,"positioners",Rc);var OM={id:"tooltip",_element:bv,positioners:Rc,afterInit(t,e,n){n&&(t.tooltip=new bv({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:jM},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const qG=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function KG(t,e,n,r){const s=t.indexOf(e);if(s===-1)return qG(t,e,n,r);const i=t.lastIndexOf(e);return s!==i?n:s}const GG=(t,e)=>t===null?null:un(Math.round(t),0,e);function BS(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Em extends Vl{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:i}of n)r[s]===i&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(We(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:KG(r,e,_e(n,e),this._addedLabels),GG(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,s=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return BS.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Y(Em,"id","category"),Y(Em,"defaults",{ticks:{callback:BS}});function QG(t,e){const n=[],{bounds:s,step:i,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:f,includeBounds:m}=t,p=i||1,y=u-1,{min:v,max:E}=e,x=!We(o),_=!We(a),w=!We(c),P=(E-v)/(f+1);let C=BT((E-v)/y/p)*p,R,T,k,S;if(C<1e-14&&!x&&!_)return[{value:v},{value:E}];S=Math.ceil(E/C)-Math.floor(v/C),S>y&&(C=BT(S*C/y/p)*p),We(l)||(R=Math.pow(10,l),C=Math.ceil(C*R)/R),s==="ticks"?(T=Math.floor(v/C)*C,k=Math.ceil(E/C)*C):(T=v,k=E),x&&_&&i&&mH((a-o)/i,C/1e3)?(S=Math.round(Math.min((a-o)/C,u)),C=(a-o)/S,T=o,k=a):w?(T=x?o:T,k=_?a:k,S=c-1,C=(k-T)/S):(S=(k-T)/C,eu(S,Math.round(S),C/1e3)?S=Math.round(S):S=Math.ceil(S));const I=Math.max(zT(C),zT(T));R=Math.pow(10,We(l)?I:l),T=Math.round(T*R)/R,k=Math.round(k*R)/R;let N=0;for(x&&(m&&T!==o?(n.push({value:o}),T<o&&N++,eu(Math.round((T+N*C)*R)/R,o,zS(o,P,t))&&N++):T<o&&N++);N<S;++N){const D=Math.round((T+N*C)*R)/R;if(_&&D>a)break;n.push({value:D})}return _&&m&&k!==a?n.length&&eu(n[n.length-1].value,a,zS(a,P,t))?n[n.length-1].value=a:n.push({value:a}):(!_||k===a)&&n.push({value:k}),n}function zS(t,e,{horizontal:n,minRotation:r}){const s=as(r),i=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class YG extends Vl{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return We(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:i}=this;const o=l=>s=n?s:l,a=l=>i=r?i:l;if(e){const l=wl(s),c=wl(i);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===i){let l=i===0?1:Math.abs(i*.05);a(i+l),e||o(s-l)}this.min=s,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=QG(s,i);return e.bounds==="ticks"&&pH(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const s=(r-n)/Math.max(e.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return fb(e,this.chart.options.locale,this.options.ticks.format)}}class Tm extends YG{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=en(e)?e:0,this.max=en(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=as(this.options.ticks.minRotation),s=(e?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Y(Tm,"id","linear"),Y(Tm,"defaults",{ticks:{callback:rM.formatters.numeric}});const Ep={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},wn=Object.keys(Ep);function $S(t,e){return t-e}function WS(t,e){if(We(e))return null;const n=t._adapter,{parser:r,round:s,isoWeekday:i}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),en(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(qu(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,s)),+o)}function HS(t,e,n,r){const s=wn.length;for(let i=wn.indexOf(t);i<s-1;++i){const o=Ep[wn[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return wn[i]}return wn[s-1]}function XG(t,e,n,r,s){for(let i=wn.length-1;i>=wn.indexOf(n);i--){const o=wn[i];if(Ep[o].common&&t._adapter.diff(s,r,o)>=e-1)return o}return wn[n?wn.indexOf(n):0]}function ZG(t){for(let e=wn.indexOf(t)+1,n=wn.length;e<n;++e)if(Ep[wn[e]].common)return wn[e]}function qS(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:s}=ub(n,e),i=n[r]>=e?n[r]:n[s];t[i]=!0}}function JG(t,e,n,r){const s=t._adapter,i=+s.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+s.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function KS(t,e,n){const r=[],s={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],s[a]=o,r.push({value:a,major:!1});return i===0||!n?r:JG(t,r,s,n)}class Sm extends Vl{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),s=this._adapter=new $q._date(e.adapters.date);s.init(n),Jc(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:WS(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(i=Math.max(i,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=en(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),i=en(i)&&!isNaN(i)?i:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,o=this.max,a=_H(s,i,o);return this._unit=n.unit||(r.autoSkip?HS(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):XG(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:ZG(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),KS(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,s,i;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?r=i:r=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=un(n,0,o),r=un(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,i=s.time,o=i.unit||HS(i.minUnit,n,r,this._getLabelCapacity(n)),a=_e(s.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,c=qu(l)||l===!0,u={};let f=n,m,p;if(c&&(f=+e.startOf(f,"isoWeek",l)),f=+e.startOf(f,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const y=s.ticks.source==="data"&&this.getDataTimestamps();for(m=f,p=0;m<r;m=+e.add(m,a,o),p++)qS(u,m,y);return(m===r||s.bounds==="ticks"||p===1)&&qS(u,m,y),Object.keys(u).sort($S).map(v=>+v)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,i=this._unit,o=n||s[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,s){const i=this.options,o=i.ticks.callback;if(o)return Ke(o,[e,n,r],this);const a=i.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],f=c&&a[c],m=r[n],p=c&&f&&m&&m.major;return this._adapter.format(e,s||(p?f:u))}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=as(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:r*i+a*o,h:r*o+a*i}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,i=this._tickFormatFunction(e,0,KS(this,[e],this._majorUnit),s),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(WS(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return wH(e.sort($S))}}Y(Sm,"id","time"),Y(Sm,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Rh(t,e,n){let r=0,s=t.length-1,i,o,a,l;n?(e>=t[r].pos&&e<=t[s].pos&&({lo:r,hi:s}=ho(t,"pos",e)),{pos:i,time:a}=t[r],{pos:o,time:l}=t[s]):(e>=t[r].time&&e<=t[s].time&&({lo:r,hi:s}=ho(t,"time",e)),{time:i,pos:a}=t[r],{time:o,pos:l}=t[s]);const c=o-i;return c?a+(l-a)*(e-i)/c:a}class GS extends Sm{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Rh(n,this.min),this._tableRange=Rh(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,s=[],i=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&s.push(c);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=s.length;o<a;++o)u=s[o+1],l=s[o-1],c=s[o],Math.round((u+l)/2)!==c&&i.push({time:c,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Rh(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return Rh(this._table,r*this._tableRange+this._minPos,!0)}}Y(GS,"id","timeseries"),Y(GS,"defaults",Sm.defaults);const LM="label";function QS(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function eQ(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function VM(t,e){t.labels=e}function FM(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:LM;const r=[];t.datasets=e.map(s=>{const i=t.datasets.find(o=>o[n]===s[n]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function tQ(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:LM;const n={labels:[],datasets:[]};return VM(n,t.labels),FM(n,t.datasets,e),n}function nQ(t,e){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:i,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:f,...m}=t,p=j.useRef(null),y=j.useRef(null),v=()=>{p.current&&(y.current=new Cd(p.current,{type:o,data:tQ(a,i),options:l&&{...l},plugins:c}),QS(e,y.current))},E=()=>{QS(e,null),y.current&&(y.current.destroy(),y.current=null)};return j.useEffect(()=>{!s&&y.current&&l&&eQ(y.current,l)},[s,l]),j.useEffect(()=>{!s&&y.current&&VM(y.current.config.data,a.labels)},[s,a.labels]),j.useEffect(()=>{!s&&y.current&&a.datasets&&FM(y.current.config.data,a.datasets,i)},[s,a.datasets]),j.useEffect(()=>{y.current&&(s?(E(),setTimeout(v)):y.current.update(f))},[s,l,a.labels,a.datasets,f]),j.useEffect(()=>{y.current&&(E(),setTimeout(v))},[o]),j.useEffect(()=>(v(),()=>E()),[]),Nt.createElement("canvas",{ref:p,role:"img",height:n,width:r,...m},u)}const rQ=j.forwardRef(nQ);function UM(t,e){return Cd.register(e),j.forwardRef((n,r)=>Nt.createElement(rQ,{...n,ref:r,type:t}))}const BM=UM("line",lf),sQ=UM("doughnut",Ac);Cd.register(Em,Tm,su,ls,NM,OM,MM);function zM({labels:t,datasets:e,weightData:n,units:r="metric"}){const s=sb(r),i=n&&n.length>0?n.every(l=>{var c;return l.weight===((c=n[0])==null?void 0:c.weight)}):!1,o={labels:n?n.map(l=>l.week):t,datasets:n?[{label:`Weight (${s})`,data:n.map(l=>l.weight),borderColor:"rgba(34, 197, 94, 1)",backgroundColor:"rgba(34, 197, 94, 0.15)",tension:i?0:.4,fill:!0,pointBackgroundColor:"rgba(34, 197, 94, 1)",pointBorderColor:"#fff",pointBorderWidth:2,pointRadius:6,pointHoverRadius:8}]:e??[{label:"Exercise",data:t.map((l,c)=>Math.round(Math.sin(c/4)*10+20)),borderColor:"rgba(59,130,246,1)",backgroundColor:"rgba(59,130,246,0.15)",tension:.4,fill:!0},{label:"Meals",data:t.map((l,c)=>Math.round(Math.cos(c/6)*8+14)),borderColor:"rgba(239,68,68,1)",backgroundColor:"rgba(239,68,68,0.12)",tension:.4,fill:!0},{label:"Sleep",data:t.map((l,c)=>Math.round(6+Math.abs(Math.sin(c/8))*2)),borderColor:"rgba(16,185,129,1)",backgroundColor:"rgba(16,185,129,0.12)",tension:.4,fill:!0}]},a={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{color:n?"#22c55e":void 0,font:{size:12,weight:"bold"}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",borderColor:"#22c55e",borderWidth:1,callbacks:n?{label:function(l){return`Weight: ${l.parsed.y} ${s}`}}:void 0}},scales:{x:{grid:{display:!1},ticks:{maxTicksLimit:12},title:{display:!!n,text:n?"Week of 3 Months":void 0,color:"#666",font:{size:12}}},y:{grid:{color:"rgba(0,0,0,0.05)"},title:{display:!!n,text:n?`Weight (${s})`:void 0,color:"#666",font:{size:12}},ticks:n?{callback:function(l){return l+` ${s}`},stepSize:5,min:20,max:void 0}:void 0,min:n?20:void 0}}};return d.jsx("div",{className:"bg-card rounded-xl p-4 shadow-sm aspect-[4/3]",children:d.jsx("div",{className:"h-full",children:d.jsx(BM,{data:o,options:a})})})}function iQ({onClose:t,labels:e,weightData:n,onUpdateWeight:r,currentWeight:s,isUpdating:i=!1,isSuccess:o=!1,units:a="metric"}){const[l,c]=j.useState(""),u=j.useRef(null),{showError:f}=Xo();j.useEffect(()=>{o&&c("")},[o]),j.useEffect(()=>{const y=u.current;if(!y)return;const v=()=>Array.from(y.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(_=>!_.hasAttribute("disabled"));(v()[0]??y).focus();const x=_=>{if(_.key==="Escape"){_.preventDefault(),t();return}if(_.key==="Tab"){const w=v();if(w.length===0)return;const P=w.findIndex(C=>C===document.activeElement);if(_.shiftKey){if(P<=0){_.preventDefault();const C=w[w.length-1];C&&C.focus()}}else if(P===-1||P>=w.length-1){_.preventDefault();const C=w[0];C&&C.focus()}}};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[t]);const m=async y=>{if(y.preventDefault(),!l||l.trim().length===0){f("Please enter a weight value");return}const v=parseFloat(l);if(isNaN(v)){f("Please enter a valid number");return}if(v<=0){f("Weight must be greater than 0");return}if(v>1e3){f("Weight must be less than 1000 kg");return}if(!r){console.error("onUpdateWeight callback is not provided");return}if(!i)try{await r(v)}catch(E){console.error("Failed to update weight:",E);const x=(E==null?void 0:E.message)||"Failed to update weight. Please try again.";f(x)}},p=y=>{y.stopPropagation()};return d.jsx("div",{className:"fixed inset-0 bg-black/95 z-50 flex items-center justify-center",onClick:t,children:d.jsxs("div",{ref:u,role:"dialog","aria-modal":"true","aria-label":"Weight progress details",className:"bg-card rounded-xl p-6 shadow-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto outline-none",onClick:p,tabIndex:-1,children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h2",{className:"text-2xl font-bold",children:"Weight Progress"}),d.jsx("button",{onClick:t,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Close"})]}),d.jsx("div",{className:"mt-4 text-sm text-gray-100 dark:text-gray-300 mb-4",children:"Track your weight progress over the last 3 months. Update your weight to see real-time changes in your chart."}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[d.jsx("div",{className:"lg:col-span-1 space-y-4",children:r&&d.jsxs("div",{className:"p-4 bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-xl border border-green-200 dark:border-green-800",children:[d.jsx("h4",{className:"text-lg font-semibold text-green-800 dark:text-green-200 mb-3",children:"Update Weight"}),d.jsxs("div",{className:"mb-2",children:[d.jsx("span",{className:"text-sm text-green-700 dark:text-green-300",children:"Current Weight: "}),d.jsxs("span",{className:"font-bold text-green-800 dark:text-green-200",children:[s||"N/A"," kg"]})]}),d.jsxs("form",{onSubmit:m,className:"space-y-3",children:[d.jsx("div",{children:d.jsx("input",{type:"number",step:"0.1",min:"0",className:"w-full px-3 py-2 border border-green-300 dark:border-green-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Enter new weight (kg)",value:l,onChange:y=>c(y.target.value),disabled:i})}),d.jsx(ie.button,{type:"submit",disabled:i||!l,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-semibold rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Updating...":o?" Updated!":"Update Weight"})]})]})}),d.jsx("div",{className:"lg:col-span-2 h-[60vh]",children:d.jsx(zM,{labels:e,weightData:n,units:a})})]})]})})}const fc=({title:t,icon:e,children:n})=>d.jsxs(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20 dark:border-gray-700/50",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[d.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:e}),d.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:t})]}),n]}),Ht=({label:t,description:e,children:n,warning:r})=>d.jsx("div",{className:`p-4 rounded-xl border transition-all duration-200 ${r?"border-orange-200 dark:border-orange-800 bg-orange-50/50 dark:bg-orange-900/20":"border-gray-200 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-900/20"}`,children:d.jsxs("div",{className:"flex items-start justify-between gap-4",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:t}),e&&d.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:e})]}),d.jsx("div",{className:"flex-shrink-0",children:n})]})});function oQ(){const{user:t,logout:e}=Cn(),n=rr(),r=rb(),{showSuccess:s,showError:i,showWarning:o}=Xo(),[a,l]=j.useState(!1),[c,u]=j.useState(!1),[f,m]=j.useState(!1),[p,y]=j.useState(""),[v,E]=j.useState(""),[x,_]=j.useState(""),[w,P]=j.useState(!1),{data:C}=ln({queryKey:["user","profile",t==null?void 0:t.uid],queryFn:()=>zu(t.uid),enabled:!!(t!=null&&t.uid)}),R=C||t,T=jn({mutationFn:N=>pp(t.uid,N),onSuccess:()=>{n.invalidateQueries({queryKey:["user","profile",t==null?void 0:t.uid]}),s("Settings updated successfully!")}}),k=async()=>{if(t!=null&&t.uid)try{const[N,D,M,Z]=await Promise.all([bd.getLogs(t.uid),$y.getHistory(t.uid),ib(t.uid),vp(t.uid)]),se={profile:R,workoutLogs:N,weightHistory:D,goals:M,schedule:Z,exportDate:new Date().toISOString(),version:"1.0"},J=new Blob([JSON.stringify(se,null,2)],{type:"application/json"}),Q=URL.createObjectURL(J),F=document.createElement("a");F.href=Q,F.download=`myfitness-data-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(F),F.click(),document.body.removeChild(F),URL.revokeObjectURL(Q),s("Data exported successfully!")}catch(N){console.error("Export failed:",N),i("Failed to export data. Please try again.")}},S=async()=>{if(t!=null&&t.uid)try{o("Account deletion is not implemented yet. Please contact support."),l(!1)}catch(N){console.error("Delete account failed:",N),i("Failed to delete account. Please try again.")}},I=async()=>{if(v!==x){i("New passwords do not match!");return}if(v.length<6){i("Password must be at least 6 characters long!");return}try{o("Password change is not implemented yet. Please use Firebase Auth directly."),u(!1),y(""),E(""),_("")}catch(N){console.error("Password change failed:",N),i("Failed to change password. Please try again.")}};return d.jsxs("div",{className:"min-h-screen gradient-modern-light dark:gradient-modern-dark",children:[d.jsxs("div",{className:"max-w-4xl mx-auto py-8 px-6",children:[d.jsx(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-8",children:d.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[d.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:d.jsx(LR,{className:"w-6 h-6 text-white"})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-4xl font-black bg-gradient-to-r from-slate-900 via-blue-900 to-indigo-900 dark:from-white dark:via-blue-100 dark:to-indigo-100 bg-clip-text text-transparent",children:"Settings"}),d.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 mt-2 font-medium",children:"Manage your account preferences and app settings"})]})]})}),d.jsxs("div",{className:"space-y-8",children:[d.jsx(fc,{title:"Account",icon:d.jsx(fp,{className:"w-5 h-5 text-white"}),children:d.jsxs("div",{className:"space-y-4",children:[d.jsx(Ht,{label:"Email Address",description:"Your account email address",children:d.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 font-mono",children:(R==null?void 0:R.email)||"Not set"})}),d.jsx(Ht,{label:"Display Name",description:"Your public display name",children:d.jsx("input",{type:"text",value:(R==null?void 0:R.name)||"",onChange:N=>T.mutate({name:N.target.value}),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your name"})}),d.jsx(Ht,{label:"Change Password",description:"Update your account password",children:d.jsx("button",{onClick:()=>u(!0),className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors duration-200",children:"Change Password"})}),d.jsx(Ht,{label:"Account Deletion",description:"Permanently delete your account and all data",warning:!0,children:d.jsxs("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors duration-200 flex items-center gap-2",children:[d.jsx(Gg,{className:"w-4 h-4"}),"Delete Account"]})})]})}),d.jsx(fc,{title:"Privacy & Security",icon:d.jsx(O$,{className:"w-5 h-5 text-white"}),children:d.jsxs("div",{className:"space-y-4",children:[d.jsx(Ht,{label:"Profile Visibility",description:"Control who can see your profile information",children:d.jsxs("select",{value:r.privacy,onChange:N=>r.setPrivacy(N.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[d.jsx("option",{value:"private",children:"Private"}),d.jsx("option",{value:"friends",children:"Friends Only"}),d.jsx("option",{value:"public",children:"Public"})]})}),d.jsx(Ht,{label:"Data Sharing",description:"Allow anonymous usage data to improve the app",children:d.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:r.dataSharing,onChange:N=>r.setDataSharing(N.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),d.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Enable data sharing"})]})}),d.jsx(Ht,{label:"Activity Tracking",description:"Track your workout activities and progress",children:d.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:r.activityTracking,onChange:N=>r.setActivityTracking(N.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),d.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Enable activity tracking"})]})})]})}),d.jsx(fc,{title:"Notifications",icon:d.jsx(i$,{className:"w-5 h-5 text-white"}),children:d.jsxs("div",{className:"space-y-4",children:[d.jsx(Ht,{label:"Workout Reminders",description:"Get notified about scheduled workouts",children:d.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:r.notifications.workoutReminders,onChange:N=>r.setNotifications({workoutReminders:N.target.checked}),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),d.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Enable reminders"})]})}),d.jsx(Ht,{label:"Goal Achievements",description:"Celebrate when you reach your fitness goals",children:d.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:r.notifications.goalAchievements,onChange:N=>r.setNotifications({goalAchievements:N.target.checked}),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),d.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Enable achievement notifications"})]})}),d.jsx(Ht,{label:"Weekly Progress",description:"Receive weekly progress summaries",children:d.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:r.notifications.weeklyProgress,onChange:N=>r.setNotifications({weeklyProgress:N.target.checked}),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),d.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Enable weekly summaries"})]})})]})}),d.jsx(fc,{title:"App Preferences",icon:d.jsx(T$,{className:"w-5 h-5 text-white"}),children:d.jsxs("div",{className:"space-y-4",children:[d.jsx(Ht,{label:"Theme",description:"Choose your preferred color theme",children:d.jsxs("select",{value:r.theme,onChange:N=>r.setTheme(N.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[d.jsx("option",{value:"light",children:"Light"}),d.jsx("option",{value:"dark",children:"Dark"}),d.jsx("option",{value:"system",children:"System"})]})}),d.jsx(Ht,{label:"Units",description:"Choose your preferred measurement units",children:d.jsxs("select",{value:r.units,onChange:N=>r.setUnits(N.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[d.jsx("option",{value:"metric",children:"Metric (kg, cm)"}),d.jsx("option",{value:"imperial",children:"Imperial (lbs, ft)"})]})}),d.jsx(Ht,{label:"Language",description:"Select your preferred language",children:d.jsxs("select",{value:r.language,onChange:N=>r.setLanguage(N.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[d.jsx("option",{value:"en",children:"English"}),d.jsx("option",{value:"es",children:"Espaol"}),d.jsx("option",{value:"fr",children:"Franais"}),d.jsx("option",{value:"de",children:"Deutsch"})]})})]})}),d.jsx(fc,{title:"Data Management",icon:d.jsx(RT,{className:"w-5 h-5 text-white"}),children:d.jsxs("div",{className:"space-y-4",children:[d.jsx(Ht,{label:"Export Data",description:"Download all your fitness data as a JSON file",children:d.jsxs("button",{onClick:k,className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors duration-200 flex items-center gap-2",children:[d.jsx(RT,{className:"w-4 h-4"}),"Export Data"]})}),d.jsx(Ht,{label:"Import Data",description:"Import fitness data from a JSON file",children:d.jsxs("button",{onClick:()=>{o("Data import is not implemented yet.")},className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors duration-200 flex items-center gap-2",children:[d.jsx(q$,{className:"w-4 h-4"}),"Import Data"]})}),d.jsx(Ht,{label:"Clear All Data",description:"Remove all your workout logs, goals, and progress data",warning:!0,children:d.jsxs("button",{onClick:()=>{m(!0)},className:"px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg transition-colors duration-200 flex items-center gap-2",children:[d.jsx(Gg,{className:"w-4 h-4"}),"Clear Data"]})})]})})]})]}),c&&d.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[d.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>u(!1)}),d.jsxs(ie.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},className:"relative bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-2xl w-full max-w-md border border-white/20 dark:border-gray-700/50",children:[d.jsx("h3",{className:"text-2xl font-bold mb-6 text-gray-900 dark:text-gray-100",children:"Change Password"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Password"}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:w?"text":"password",value:p,onChange:N=>y(N.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-10"}),d.jsx("button",{type:"button",onClick:()=>P(!w),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:w?d.jsx(dm,{className:"w-4 h-4"}):d.jsx(hm,{className:"w-4 h-4"})})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Password"}),d.jsx("input",{type:w?"text":"password",value:v,onChange:N=>E(N.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm New Password"}),d.jsx("input",{type:w?"text":"password",value:x,onChange:N=>_(N.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),d.jsxs("div",{className:"flex gap-3 mt-6",children:[d.jsx("button",{onClick:()=>u(!1),className:"flex-1 px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg transition-colors duration-200",children:"Cancel"}),d.jsxs("button",{onClick:I,className:"flex-1 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors duration-200 flex items-center justify-center gap-2",children:[d.jsx(OR,{className:"w-4 h-4"}),"Save Changes"]})]})]})]}),a&&d.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[d.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>l(!1)}),d.jsxs(ie.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},className:"relative bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-2xl w-full max-w-md border border-white/20 dark:border-gray-700/50",children:[d.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[d.jsx("div",{className:"w-12 h-12 rounded-xl bg-red-500 flex items-center justify-center",children:d.jsx(hp,{className:"w-6 h-6 text-white"})}),d.jsx("h3",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:"Delete Account"})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Are you sure you want to delete your account? This action cannot be undone and will permanently remove:"}),d.jsxs("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1 ml-4",children:[d.jsx("li",{children:" All your workout logs and progress"}),d.jsx("li",{children:" Your goals and achievements"}),d.jsx("li",{children:" Your schedule and preferences"}),d.jsx("li",{children:" Your profile information"})]}),d.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:d.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 font-medium",children:" This action is permanent and cannot be reversed."})})]}),d.jsxs("div",{className:"flex gap-3 mt-6",children:[d.jsx("button",{onClick:()=>l(!1),className:"flex-1 px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg transition-colors duration-200",children:"Cancel"}),d.jsxs("button",{onClick:S,className:"flex-1 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors duration-200 flex items-center justify-center gap-2",children:[d.jsx(Gg,{className:"w-4 h-4"}),"Delete Account"]})]})]})]}),d.jsx(gm,{open:f,title:"Clear All Data",message:"Are you sure you want to clear all your data? This action cannot be undone.",confirmText:"Clear Data",cancelText:"Cancel",variant:"danger",onConfirm:()=>{o("Data clearing is not implemented yet."),m(!1)},onCancel:()=>m(!1)}),d.jsx(gm,{open:a,title:"Delete Account",message:"Are you sure you want to delete your account? This action cannot be undone and will permanently remove all your data.",confirmText:"Delete Account",cancelText:"Cancel",variant:"danger",onConfirm:S,onCancel:()=>l(!1)})]})}const aQ={low:{bg:"bg-blue-50 dark:bg-blue-900/20",text:"text-blue-600 dark:text-blue-400",border:"border-blue-200 dark:border-blue-800"},medium:{bg:"bg-yellow-50 dark:bg-yellow-900/20",text:"text-yellow-600 dark:text-yellow-400",border:"border-yellow-200 dark:border-yellow-800"},high:{bg:"bg-red-50 dark:bg-red-900/20",text:"text-red-600 dark:text-red-400",border:"border-red-200 dark:border-red-800"}};function lQ(){const{user:t}=Cn(),e=rr(),[n,r]=j.useState("all"),[s,i]=j.useState(""),{data:o=[],isLoading:a}=ln({queryKey:["workouts","logs",t==null?void 0:t.uid],queryFn:()=>bd.getLogs(t.uid),enabled:!!(t!=null&&t.uid),staleTime:0,refetchOnMount:"always",refetchOnWindowFocus:!0});j.useEffect(()=>{t!=null&&t.uid&&e.refetchQueries({queryKey:["workouts","logs",t.uid]})},[t==null?void 0:t.uid,e]);const l=j.useCallback(m=>{for(const p of _i){const y=p.exercises.find(v=>v.id===m);if(y)return y.name}return"Unknown Exercise"},[]),c=j.useCallback(m=>{for(const p of _i){const y=p.exercises.find(v=>v.id===m);if(y)return y.imageUrl}return null},[]),u=j.useMemo(()=>{let m=o;if(n!=="all"&&(m=m.filter(p=>p.intensity===n)),s){const p=s.toLowerCase();m=m.filter(y=>l(y.exerciseId).toLowerCase().includes(p))}return m.sort((p,y)=>{const v=new Date(p.date).getTime();return new Date(y.date).getTime()-v})},[o,n,s,l]),f=j.useMemo(()=>{const m=o.length,p=o.reduce((x,_)=>x+_.durationMinutes,0),y=o.reduce((x,_)=>x+_.caloriesBurned,0),v=o.length>0?o.reduce((x,_)=>{const w=_.intensity==="low"?1:_.intensity==="medium"?2:3;return x+w},0)/o.length:0,E=v<1.5?"Low":v<2.5?"Medium":"High";return{totalWorkouts:m,totalMinutes:Math.round(p),totalCalories:y,avgIntensity:E}},[o]);return a?d.jsx("div",{className:"flex items-center justify-center py-12",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"flex items-center justify-between",children:d.jsxs("div",{children:[d.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Workout Logs"}),d.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"View all your completed workout sessions"})]})}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[d.jsxs(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 p-4 rounded-xl border border-blue-200/50 dark:border-blue-700/50",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx(xi,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),d.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400 font-medium",children:"Total Workouts"})]}),d.jsx("div",{className:"text-3xl font-bold text-blue-700 dark:text-blue-300",children:f.totalWorkouts})]}),d.jsxs(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/30 dark:to-purple-800/30 p-4 rounded-xl border border-purple-200/50 dark:border-purple-700/50",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx(Bu,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),d.jsx("div",{className:"text-sm text-purple-600 dark:text-purple-400 font-medium",children:"Total Minutes"})]}),d.jsx("div",{className:"text-3xl font-bold text-purple-700 dark:text-purple-300",children:f.totalMinutes})]}),d.jsxs(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/30 dark:to-orange-800/30 p-4 rounded-xl border border-orange-200/50 dark:border-orange-700/50",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx(fm,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"}),d.jsx("div",{className:"text-sm text-orange-600 dark:text-orange-400 font-medium",children:"Total Calories"})]}),d.jsx("div",{className:"text-3xl font-bold text-orange-700 dark:text-orange-300",children:f.totalCalories})]}),d.jsxs(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-800/30 p-4 rounded-xl border border-green-200/50 dark:border-green-700/50",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx(xi,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),d.jsx("div",{className:"text-sm text-green-600 dark:text-green-400 font-medium",children:"Avg Intensity"})]}),d.jsx("div",{className:"text-3xl font-bold text-green-700 dark:text-green-300",children:f.avgIntensity})]})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[d.jsx("div",{className:"flex-1",children:d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:"text",placeholder:"Search workouts by exercise name...",value:s,onChange:m=>i(m.target.value),className:"w-full px-4 py-2 pl-10 rounded-xl border-2 border-gray-300 dark:border-gray-600 bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:border-blue-500 transition-all duration-300"}),d.jsx("svg",{className:"absolute left-3 top-2.5 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(p$,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),d.jsxs("select",{value:n,onChange:m=>r(m.target.value),className:"px-4 py-2 rounded-xl border-2 border-gray-300 dark:border-gray-600 bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:border-blue-500 transition-all duration-300",children:[d.jsx("option",{value:"all",children:"All Intensities"}),d.jsx("option",{value:"low",children:"Low Intensity"}),d.jsx("option",{value:"medium",children:"Medium Intensity"}),d.jsx("option",{value:"high",children:"High Intensity"})]})]})]}),d.jsx("div",{className:"space-y-4",children:u.length===0?d.jsxs("div",{className:"text-center py-12 bg-white/50 dark:bg-gray-800/50 rounded-2xl border border-gray-200 dark:border-gray-700",children:[d.jsx(xi,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),d.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg font-medium",children:o.length===0?"No workouts logged yet":"No workouts match your filters"}),d.jsx("p",{className:"text-gray-500 dark:text-gray-500 text-sm mt-2",children:o.length===0?"Complete a timer workout to see it here!":"Try adjusting your search or filter"})]}):u.map((m,p)=>{const y=l(m.exerciseId),v=c(m.exerciseId),E=aQ[m.intensity],_=new Date(m.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"});return d.jsx(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:p*.05},className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-xl p-6 shadow-lg border border-gray-200/50 dark:border-gray-700/50 hover:shadow-xl transition-all duration-200",children:d.jsxs("div",{className:"flex items-start gap-4",children:[v&&d.jsx("div",{className:"flex-shrink-0",children:d.jsx("img",{src:v,alt:y,className:"w-20 h-20 rounded-xl object-cover border-2 border-gray-200 dark:border-gray-700"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-start justify-between gap-4 mb-2",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-1",children:y}),d.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600 dark:text-gray-400",children:[d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(um,{className:"w-4 h-4"}),d.jsx("span",{children:_})]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(Bu,{className:"w-4 h-4"}),d.jsxs("span",{children:[m.durationMinutes.toFixed(1)," mins"]})]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(fm,{className:"w-4 h-4"}),d.jsxs("span",{children:[m.caloriesBurned," kcal"]})]})]})]}),d.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-semibold ${E.bg} ${E.text} border ${E.border}`,children:m.intensity.charAt(0).toUpperCase()+m.intensity.slice(1)})]}),m.notes&&d.jsx("div",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400 italic bg-gray-50 dark:bg-gray-900/50 rounded-lg p-2",children:m.notes})]})]})},m.id)})})]})}Cd.register(Em,Tm,su,ls,VG,OM,NM,MM,Nc);const cQ=t=>{const e=[];for(let n=t-1;n>=0;n--){const r=new Date;r.setDate(r.getDate()-n),e.push(r.toLocaleDateString("en-US",{month:"short",day:"numeric"}))}return e},YS={cardio:{bg:"bg-blue-100 dark:bg-blue-900/30",text:"text-blue-700 dark:text-blue-300"},strength:{bg:"bg-red-100 dark:bg-red-900/30",text:"text-red-700 dark:text-red-300"},stretching:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-700 dark:text-green-300"},full_body:{bg:"bg-purple-100 dark:bg-purple-900/30",text:"text-purple-700 dark:text-purple-300"}},o0={low:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-700 dark:text-green-300",ring:"ring-green-500/20"},medium:{bg:"bg-yellow-100 dark:bg-yellow-900/30",text:"text-yellow-700 dark:text-yellow-300",ring:"ring-yellow-500/20"},high:{bg:"bg-red-100 dark:bg-red-900/30",text:"text-red-700 dark:text-red-300",ring:"ring-red-500/20"}};function uQ({open:t,title:e,progress:n,data:r,isExercise:s,onClose:i,onOpenGif:o}){if(!t)return null;const a=Nt.useMemo(()=>n?Math.round(n.value/Math.max(1,n.total)*100):0,[n]),l=Nt.useMemo(()=>cQ(7),[]),[c,u]=Nt.useState([]),[f,m]=Nt.useState(!0);Nt.useEffect(()=>{(async()=>{if(!s){m(!1);return}try{m(!0);const P=await tN.getExercises();u(P)}catch(P){console.error("Error fetching exercises:",P)}finally{m(!1)}})()},[s]);const p=Nt.useMemo(()=>{if(!s||!r||f)return null;const w=r.map(C=>({...C,exercise:c.find(R=>R.id===C.exerciseId)})),P=w.reduce((C,R)=>{var k;const T=((k=R.exercise)==null?void 0:k.category)||"other";return C[T]=(C[T]||0)+(R.durationMinutes??0),C},{});return{logs:w,categories:P}},[r,s,c,f]),[y,v]=Nt.useState(null);Nt.useEffect(()=>{var w,P;p&&p.logs.length>0&&((P=(w=p.logs[0])==null?void 0:w.exercise)!=null&&P.id)?v(p.logs[0].exercise.id):v(null)},[p]);const E={labels:l,datasets:[{label:e,data:s?l.map(w=>(r.filter(C=>(C.date??"").includes(w.split(" ")[1]??""))||[]).reduce((C,R)=>C+(R.durationMinutes??0),0)):(r==null?void 0:r.slice(-7).map(w=>w.value))??l.map(()=>Math.round(Math.random()*50+50)),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.3,fill:!0}]},x={responsive:!0,maintainAspectRatio:!1,animation:{duration:750,easing:"easeInOutQuart"},plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1,backgroundColor:"rgb(17 24 39 / 0.8)",titleColor:"rgb(243 244 246)",bodyColor:"rgb(243 244 246)",borderColor:"rgb(75 85 99)",borderWidth:1}},scales:{y:{beginAtZero:!1,grid:{color:"rgba(107, 114, 128, 0.1)"},ticks:{color:"#666",font:{size:11}}},x:{grid:{display:!1},ticks:{color:"#666",font:{size:11}}}}},_=Nt.useRef(null);return Nt.useEffect(()=>{const w=_.current;if(!w)return;const P=()=>Array.from(w.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(T=>!T.hasAttribute("disabled"));(P()[0]??w).focus();const R=T=>{if(T.key==="Escape"){T.preventDefault(),i();return}if(T.key==="Tab"){const k=P();if(k.length===0)return;const S=k.findIndex(I=>I===document.activeElement);if(T.shiftKey){if(S<=0){T.preventDefault();const I=k[k.length-1];I&&I.focus()}}else if(S===-1||S>=k.length-1){T.preventDefault();const I=k[0];I&&I.focus()}}};return document.addEventListener("keydown",R),()=>document.removeEventListener("keydown",R)},[i]),d.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[d.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:i}),d.jsxs(ie.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.25},className:"relative z-10 w-full max-w-lg bg-white dark:bg-neutral-800 rounded-xl p-6 shadow-lg max-h-[90vh] overflow-y-auto outline-none",role:"dialog","aria-modal":"true","aria-label":`${e} details`,ref:_,tabIndex:-1,children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-black dark:text-white",children:e}),d.jsx("div",{className:"text-sm text-muted-foreground",children:"Detailed progress"})]}),d.jsx("button",{onClick:i,className:"text-muted-foreground hover:text-black dark:hover:text-white",children:""})]}),s&&p&&(()=>{var P,C;const w=p.logs??[];return d.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-6",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-sm text-muted-foreground",children:"Exercises"}),d.jsxs("div",{className:"text-2xl font-bold",children:[w.length," Workouts"]})]}),d.jsx("div",{className:"w-28 h-28 rounded-xl overflow-hidden bg-gray-100 dark:bg-gray-900 flex items-center justify-center",children:y?d.jsx("img",{src:(C=(P=w.find(R=>{var T;return((T=R.exercise)==null?void 0:T.id)===y}))==null?void 0:P.exercise)==null?void 0:C.imageUrl,alt:"exercise gif",className:"w-full h-full object-cover"}):d.jsx("div",{className:"text-sm text-muted-foreground",children:"No image"})})]}),d.jsx("div",{className:"grid grid-cols-3 gap-3",children:w.map(R=>{var T,k,S,I;return d.jsx("button",{onClick:()=>{var D,M;const N=((D=R.exercise)==null?void 0:D.id)??null;N&&o?o(N):v(((M=R.exercise)==null?void 0:M.id)??null)},className:`rounded-lg overflow-hidden border ${y===((T=R.exercise)==null?void 0:T.id)?"ring-2 ring-blue-400":"border-transparent"}`,title:`${(k=R.exercise)==null?void 0:k.name}  ${R.durationMinutes} mins`,children:d.jsx("img",{src:(S=R.exercise)==null?void 0:S.imageUrl,alt:(I=R.exercise)==null?void 0:I.name,className:"w-full h-20 object-cover"})},R.id)})})]})})(),d.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-6",children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsxs("div",{className:"w-28 h-28 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-2xl font-bold",children:[a,"%"]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-sm text-muted-foreground",children:"Progress"}),d.jsxs("div",{className:"text-xl font-semibold",children:[(n==null?void 0:n.value)??0,"/",(n==null?void 0:n.total)??0]}),d.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:n!=null&&n.total&&(n!=null&&n.value)?`${n.total-n.value} remaining`:"No target set"})]})]}),s&&p&&d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsx("h4",{className:"font-medium",children:"Exercise Categories"}),d.jsx("div",{className:"space-y-2",children:Object.entries(p.categories).map(([w,P])=>{var C,R;return d.jsxs("div",{className:`flex items-center justify-between p-2 rounded-lg ${((C=YS[w])==null?void 0:C.bg)||"bg-gray-100"}`,children:[d.jsx("span",{className:`capitalize ${((R=YS[w])==null?void 0:R.text)||"text-gray-700"}`,children:w}),d.jsxs("span",{className:"font-medium",children:[P,"min"]})]},w)})})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("h4",{className:"font-medium",children:"Exercise Distribution"}),d.jsx("div",{className:"h-48",children:d.jsx(sQ,{data:{labels:Object.keys(p.categories).map(w=>w.charAt(0).toUpperCase()+w.slice(1)),datasets:[{data:Object.values(p.categories),backgroundColor:["#3B82F6","#EF4444","#10B981","#8B5CF6"],borderWidth:0}]},options:{plugins:{legend:{position:"bottom",labels:{boxWidth:10,padding:10}}}}})})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h4",{className:"font-medium",children:"Progress History"}),d.jsxs("select",{className:"text-sm bg-transparent border-gray-200 dark:border-gray-700 rounded-md",children:[d.jsx("option",{children:"Last 7 days"}),d.jsx("option",{children:"Last 30 days"}),d.jsx("option",{children:"Last 3 months"})]})]}),d.jsx("div",{className:"h-64",children:d.jsx(BM,{data:E,options:x})})]}),s&&p?(()=>{const w=p.logs??[],P=w.reduce((R,T)=>R+(T.caloriesBurned??0),0),C=w.length?Math.round(w.reduce((R,T)=>R+(T.durationMinutes??0),0)/w.length):0;return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[d.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 p-4 rounded-lg text-center",children:[d.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Total Calories"}),d.jsx("div",{className:"text-2xl font-bold",children:P}),d.jsx("div",{className:"text-sm text-muted-foreground",children:"kcal burned"})]}),d.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 p-4 rounded-lg text-center",children:[d.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Avg. Duration"}),d.jsx("div",{className:"text-2xl font-bold",children:C}),d.jsx("div",{className:"text-sm text-muted-foreground",children:"mins/session"})]}),d.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 p-4 rounded-lg text-center",children:[d.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Intensity Split"}),d.jsx("div",{className:"flex justify-center items-center gap-1 mt-2",children:["low","medium","high"].map(R=>{var k;const T=w.filter(S=>S.intensity===R).length;return d.jsx("div",{className:`h-8 w-3 rounded-full ${((k=o0[R])==null?void 0:k.bg)||"bg-gray-300"} ${T>0?"opacity-100":"opacity-30"}`,style:{height:`${w!=null&&w.length?T/w.length*32:0}px`}},R)})})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("h4",{className:"font-medium",children:"Recent Workouts"}),d.jsx("div",{className:"space-y-3",children:w.slice(0,3).map(R=>{var T,k,S,I,N;return d.jsx("div",{className:"bg-gray-50 dark:bg-gray-900/50 p-4 rounded-lg",children:d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-medium",children:((T=R.exercise)==null?void 0:T.name)||"Unknown Exercise"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${((k=o0[R.intensity])==null?void 0:k.bg)||"bg-gray-300"} ${((S=o0[R.intensity])==null?void 0:S.text)||"text-gray-700"}`,children:((I=R.intensity)==null?void 0:I.charAt(0).toUpperCase())+(((N=R.intensity)==null?void 0:N.slice(1))??"")}),d.jsx("span",{className:"text-sm text-muted-foreground",children:R.date?new Date(R.date).toLocaleDateString():"Unknown date"})]})]}),d.jsxs("div",{className:"text-right space-y-1",children:[d.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[d.jsxs("span",{className:"font-medium",children:[R.durationMinutes," mins"]}),d.jsx("span",{className:"text-sm text-muted-foreground",children:""}),d.jsxs("span",{className:"font-medium",children:[R.caloriesBurned," kcal"]})]}),R.notes&&d.jsx("div",{className:"text-sm text-muted-foreground italic",children:R.notes})]})]})},R.id)})})]})]})})():d.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[d.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 p-3 rounded-lg",children:[d.jsx("div",{className:"text-sm text-muted-foreground",children:"Average"}),d.jsx("div",{className:"font-semibold mt-1",children:r?Math.round(r.reduce((w,P)=>w+P.value,0)/r.length):"-"})]}),d.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 p-3 rounded-lg",children:[d.jsx("div",{className:"text-sm text-muted-foreground",children:"Best"}),d.jsx("div",{className:"font-semibold mt-1",children:r?Math.max(...r.map(w=>w.value)):"-"})]}),d.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 p-3 rounded-lg",children:[d.jsx("div",{className:"text-sm text-muted-foreground",children:"Recent"}),d.jsx("div",{className:"font-semibold mt-1",children:r?r[r.length-1].value:"-"})]})]})]})]})]})}const Hr=[{text:"The only bad workout is the one that didn't happen.",author:"Unknown"},{text:"It's not about being the best. It's about being better than you were yesterday.",author:"Unknown"},{text:"Your body can stand almost anything. It's your mind that you have to convince.",author:"Unknown"},{text:"The hard days are the best because that's when champions are made.",author:"Gabrielle Reece"},{text:"Don't wish for it. Work for it.",author:"Unknown"},{text:"Push yourself because no one else is going to do it for you.",author:"Unknown"},{text:"The only way to do great work is to love what you do.",author:"Steve Jobs"},{text:"Success is the sum of small efforts repeated day in and day out.",author:"Robert Collier"},{text:"The pain you feel today will be the strength you feel tomorrow.",author:"Unknown"},{text:"Motivation gets you started. Habit keeps you going.",author:"Jim Ryun"},{text:"Strength does not come from physical capacity. It comes from an indomitable will.",author:"Mahatma Gandhi"},{text:"Take care of your body. It's the only place you have to live.",author:"Jim Rohn"},{text:"The difference between try and triumph is just a little umph!",author:"Unknown"},{text:"If you want something you've never had, you must be willing to do something you've never done.",author:"Unknown"},{text:"The secret of getting ahead is getting started.",author:"Mark Twain"},{text:"You don't have to be great to start, but you have to start to be great.",author:"Zig Ziglar"},{text:"Fall seven times, stand up eight.",author:"Japanese Proverb"},{text:"Do something today that your future self will thank you for.",author:"Unknown"},{text:"Excellence is not a skill, it's an attitude.",author:"Ralph Marston"},{text:"The only person you should try to be better than is the person you were yesterday.",author:"Unknown"}];function Ca(){const[t,e]=j.useState(0);j.useEffect(()=>{if(!Hr||Hr.length===0){console.error("MotivationCard: No quotes available");return}const r=setInterval(()=>{e(s=>{let i,o=0;do if(i=Math.floor(Math.random()*Hr.length),o++,o>100)break;while(i===s&&Hr.length>1);return i<0||i>=Hr.length?0:i})},8e3);try{const s=Math.floor(Math.random()*Hr.length);s>=0&&s<Hr.length&&e(s)}catch(s){console.error("MotivationCard: Error setting initial quote:",s),e(0)}return()=>clearInterval(r)},[]);const n=Hr[t]||Hr[0]||{text:"Stay strong and keep pushing!",author:"Unknown"};return d.jsxs(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"bg-gradient-to-br from-orange-400 to-pink-600 rounded-2xl p-6 text-white relative overflow-hidden",children:[d.jsx("svg",{className:"h-8 w-8 text-orange-200 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),d.jsx(Td,{mode:"wait",children:d.jsxs(ie.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.5},children:[d.jsxs("blockquote",{className:"text-xl font-medium min-h-[3rem]",children:['"',n.text,'"']}),d.jsxs("p",{className:"mt-2 text-orange-200",children:[" ",n.author]})]},t)})]})}function dQ({goals:t}){const e=t.filter(s=>{const i=s.current/s.target*100;return i>0&&i<100}).length,n=t.filter(s=>s.current/s.target*100>=100).length,r=t.length>0?Math.round(t.reduce((s,i)=>s+Math.min(100,i.current/i.target*100),0)/t.length):0;return d.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20 dark:border-gray-700/50 space-y-6",children:[d.jsx("div",{className:"text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Goal Insights"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 p-4 rounded-xl border border-blue-200/50 dark:border-blue-700/50",children:[d.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400 font-medium",children:"Goals in progress"}),d.jsx("div",{className:"text-3xl font-bold text-blue-700 dark:text-blue-300 mt-2",children:e})]}),d.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-800/30 p-4 rounded-xl border border-green-200/50 dark:border-green-700/50",children:[d.jsx("div",{className:"text-sm text-green-600 dark:text-green-400 font-medium",children:"Completed goals"}),d.jsx("div",{className:"text-3xl font-bold text-green-700 dark:text-green-300 mt-2",children:n})]}),d.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 dark:from-purple-900/30 dark:to-purple-800/30 p-4 rounded-xl border border-purple-200/50 dark:border-purple-700/50",children:[d.jsx("div",{className:"text-sm text-purple-600 dark:text-purple-400 font-medium",children:"Average completion"}),d.jsxs("div",{className:"text-3xl font-bold text-purple-700 dark:text-purple-300 mt-2",children:[r,"%"]})]})]})]})}function hQ({schedule:t,onCreateSchedule:e,onEditSchedule:n,onDeleteSchedule:r,isDeleting:s}){return d.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20 dark:border-gray-700/50 space-y-6",children:[d.jsx("div",{className:"text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Schedule Actions"}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("button",{onClick:e,className:"w-full rounded-xl px-4 py-3 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-medium transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:"Create Schedule"}),d.jsx("button",{onClick:n,className:"w-full rounded-xl px-4 py-3 bg-white/80 dark:bg-gray-700/80 hover:bg-white dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 font-medium transition-all duration-200 border border-gray-200 dark:border-gray-600",children:"Edit Schedule"}),d.jsx("button",{onClick:r,disabled:!t||s,className:"w-full rounded-xl px-4 py-3 bg-red-500/10 hover:bg-red-500/20 text-red-600 dark:text-red-400 font-medium transition-all duration-200 border border-red-200 dark:border-red-800 disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Deleting...":"Delete Schedule"})]})]})}function fQ({currentUser:t}){const n=(()=>{if(!(t!=null&&t.weightKg)||!(t!=null&&t.heightCm)||t.weightKg<=0||t.heightCm<=0)return null;const i=t.heightCm/100;return(t.weightKg/(i*i)).toFixed(1)})(),s=(()=>{if(!n)return null;const i=parseFloat(n);return i<18.5?{status:"Underweight",color:"blue",bg:"from-blue-50 to-cyan-100",text:"text-blue-600",border:"border-blue-200"}:i<25?{status:"Normal",color:"green",bg:"from-green-50 to-emerald-100",text:"text-green-600",border:"border-green-200"}:i<30?{status:"Overweight",color:"yellow",bg:"from-yellow-50 to-amber-100",text:"text-yellow-600",border:"border-yellow-200"}:{status:"Obese",color:"red",bg:"from-red-50 to-orange-100",text:"text-red-600",border:"border-red-200"}})();return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20 dark:border-gray-700/50 space-y-6",children:[d.jsx("div",{className:"text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Account Details"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 p-4 rounded-xl border border-blue-200/50 dark:border-blue-700/50",children:[d.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400 font-medium",children:"Member Since"}),d.jsx("div",{className:"text-2xl font-bold text-blue-700 dark:text-blue-300 mt-2",children:new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"})})]}),d.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-800/30 p-4 rounded-xl border border-green-200/50 dark:border-green-700/50",children:[d.jsx("div",{className:"text-sm text-green-600 dark:text-green-400 font-medium",children:"Last Active"}),d.jsx("div",{className:"text-2xl font-bold text-green-700 dark:text-green-300 mt-2",children:"Today"})]}),!n||!s?d.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-900/30 dark:to-gray-800/30 p-4 rounded-xl border border-gray-200/50 dark:border-gray-700/50",children:[d.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 font-medium",children:"Health Status"}),d.jsx("div",{className:"text-lg font-bold text-gray-700 dark:text-gray-300 mt-2",children:"Complete profile to see BMI"})]}):d.jsxs("div",{className:`bg-gradient-to-r ${s.bg} dark:from-${s.color}-900/30 dark:to-${s.color}-800/30 p-4 rounded-xl border ${s.border} dark:border-${s.color}-700/50`,children:[d.jsx("div",{className:`text-sm ${s.text} dark:text-${s.color}-400 font-medium`,children:"Health Status"}),d.jsx("div",{className:`text-2xl font-bold ${s.text} dark:text-${s.color}-300 mt-2`,children:s.status}),d.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2",children:["BMI: ",n]})]})]})]}),d.jsx(Ca,{})]})}function mQ({title:t,weekLine:e,onNav:n}){return d.jsx("div",{className:"max-w-7xl mx-auto px-6 py-6",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"flex items-center space-x-8",children:d.jsx(ie.h1,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"text-5xl font-black tracking-tight bg-gradient-to-r from-slate-900 via-blue-900 to-indigo-900 dark:from-white dark:via-blue-100 dark:to-indigo-100 bg-clip-text text-transparent",children:t})}),d.jsxs("div",{className:"flex items-center gap-6",children:[e&&d.jsx(ie.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.4},className:"text-sm font-semibold text-gray-700 dark:text-gray-300 bg-gray-50 dark:bg-gray-800 px-4 py-2.5 rounded-2xl border border-gray-200 dark:border-gray-700",children:e}),n&&d.jsxs(ie.button,{initial:{opacity:0,scale:.9,y:-5},animate:{opacity:1,scale:1,y:0},transition:{delay:.3,duration:.4,ease:"easeOut"},whileHover:{scale:1.05,boxShadow:"0 20px 40px -12px rgba(99, 102, 241, 0.5)"},whileTap:{scale:.97},onClick:r=>{r.preventDefault(),n==null||n("exercises")},className:"group relative px-7 py-4 rounded-2xl bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 hover:from-blue-500 hover:via-indigo-500 hover:to-purple-500 text-white font-bold text-base tracking-wide transition-all duration-300 shadow-2xl hover:shadow-indigo-500/50 border border-white/20 overflow-hidden",children:[d.jsx(ie.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent",initial:{x:"-100%"},whileHover:{x:"200%"},transition:{duration:.6,ease:"easeInOut"}}),d.jsxs("div",{className:"relative flex items-center gap-2.5",children:[d.jsx(ie.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0,repeatDelay:3,ease:"easeInOut"},children:d.jsx(B$,{className:"w-5 h-5",strokeWidth:2.5})}),d.jsx("span",{className:"relative z-10",children:"Exercise with Timer"}),d.jsx(ie.div,{initial:{x:-4,opacity:0},animate:{x:0,opacity:1},transition:{delay:.5},whileHover:{x:2},children:d.jsx(I$,{className:"w-4 h-4",strokeWidth:3})})]})]})]})]})})}function $M({exercise:t,onClose:e}){const{user:n}=Cn(),r=rr(),[s,i]=j.useState(1),[o,a]=j.useState(0),[l,c]=j.useState(!1),u=j.useRef(null),f=j.useRef(0),m=j.useRef(0),p=j.useRef(!1),y=j.useRef(!1),[v,E]=j.useState(!1),[x,_]=j.useState(!1),[w,P]=j.useState(1),[C,R]=j.useState(!1),[T,k]=j.useState({x:0,y:0}),[S,I]=j.useState({x:0,y:0}),N=j.useRef(null),D=jn({mutationFn:async q=>{if(!(n!=null&&n.uid))throw new Error("User not authenticated");return bd.logWorkout(n.uid,{exerciseId:q.exerciseId,durationMinutes:Math.round(q.durationMinutes*10)/10,intensity:q.intensity,caloriesBurned:q.caloriesBurned,date:q.date,notes:q.notes||`Workout session: ${q.exerciseName} completed via timer`})},onSuccess:async(q,de)=>{if(q&&Array.isArray(q)&&r.setQueryData(["workouts","logs",n==null?void 0:n.uid],q),await r.invalidateQueries({queryKey:["workouts","logs",n==null?void 0:n.uid]}),await r.invalidateQueries({queryKey:["achievements",n==null?void 0:n.uid]}),n!=null&&n.uid){const{logUserActivity:Ne}=await hr(async()=>{const{logUserActivity:je}=await Promise.resolve().then(()=>Tr);return{logUserActivity:je}},void 0);Ne(n.uid,{type:"workout_completed",metadata:{exerciseId:de.exerciseId,exerciseName:de.exerciseName,durationMinutes:de.durationMinutes,caloriesBurned:de.caloriesBurned,intensity:de.intensity}})}E(!0),setTimeout(()=>{E(!1)},3e3)},onError:q=>{console.error("Failed to log workout:",q),p.current=!1}});j.useEffect(()=>(l?u.current=setInterval(()=>{a(q=>{if(q>0)return q-1;{let de=0,Ne=!1;return i(je=>je>0?(de=59,je-1):(console.log(" Timer countdown finished - reached 0:00 inside interval"),de=0,Ne=!0,0)),Ne&&(u.current&&(clearInterval(u.current),u.current=null),c(!1),_(!0),console.log(" Timer completion state set")),de}})},1e3):u.current&&(clearInterval(u.current),u.current=null),()=>{u.current&&(clearInterval(u.current),u.current=null)}),[l]),j.useEffect(()=>{!l&&s===0&&o===0&&!x&&!y.current&&f.current>0&&(console.log(" Timer reached 0:00 via state check - triggering completion"),_(!0))},[l,s,o,x]),j.useEffect(()=>{!l&&s===0&&o===0&&console.log(" Timer reached 0:00 - state check",{timerCompleted:x,hasLoggedWorkout:p.current,wasPaused:y.current,hasUser:!!(n!=null&&n.uid),initialMinutes:f.current,initialSeconds:m.current,exercise:t.name})},[l,s,o,x,t.name,n==null?void 0:n.uid]),j.useEffect(()=>{if(console.log(" timerCompleted effect triggered",{timerCompleted:x,hasLoggedWorkout:p.current,wasPaused:y.current,hasUser:!!(n!=null&&n.uid),initialMinutes:f.current,initialSeconds:m.current}),x&&!p.current&&!y.current&&(n!=null&&n.uid)){const q=f.current>0||f.current===0&&m.current>0;if(console.log(" Checking conditions for logging",{hasInitialValue:q}),q){p.current=!0,console.log(" Timer completed (via timerCompleted state) - logging workout",{initialMinutes:f.current,initialSeconds:m.current,exercise:t.name});const de=f.current+m.current/60;let Ne="low";de>=30?Ne="high":de>=15&&(Ne="medium");const Be=Math.round(de*(Ne==="high"?10:Ne==="medium"?9:8)),gn=new Date().toISOString().split("T")[0],Ui=new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});console.log("Attempting to log workout:",{exerciseId:t.id,exerciseName:t.name,durationMinutes:de,date:gn,intensity:Ne,caloriesBurned:Be}),D.mutate({exerciseId:t.id,exerciseName:t.name,durationMinutes:de,date:gn,intensity:Ne,caloriesBurned:Be,notes:`Workout session: ${t.name} completed via timer at ${Ui}`})}else console.warn(" Timer completed but no initial values captured - cannot log workout")}},[x,t,n==null?void 0:n.uid,D]);const M=()=>{f.current===0&&m.current===0?(f.current=s,m.current=o,console.log(" Fresh timer start - captured initial values",{minutes:s,seconds:o,exercise:t.name}),y.current=!1):s===f.current&&o===m.current?(console.log(" Starting after reset with same initial values - will log on completion"),y.current=!1):(console.log(" Resuming timer after pause - will NOT log on completion"),y.current=!0),p.current=!1,_(!1),E(!1),c(!0)},Z=()=>{c(!1),y.current=!0,console.log("Timer paused/stopped - will not log on completion")},se=()=>{c(!1),i(1),a(0),p.current=!1,y.current=!1,_(!1),E(!1),console.log("Timer reset - initial values preserved:",{initialMinutes:f.current,initialSeconds:m.current})},J=()=>{P(q=>Math.min(q+.25,3))},Q=()=>{P(q=>Math.max(q-.25,.5))},F=()=>{P(1),I({x:0,y:0})},W=q=>{w>1&&q.preventDefault();const de=q.deltaY>0?-.1:.1;P(Ne=>Math.max(.5,Math.min(3,Ne+de)))},te=q=>{w>1&&(R(!0),k({x:q.clientX-S.x,y:q.clientY-S.y}))},we=q=>{C&&w>1&&I({x:q.clientX-T.x,y:q.clientY-T.y})},ce=()=>{R(!1)};return j.useEffect(()=>{const q=N.current;if(!q)return;const de=()=>Array.from(q.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(Be=>!Be.hasAttribute("disabled"));(de()[0]??q).focus();const je=Be=>{if(Be.key==="Escape"){Be.preventDefault(),e();return}if(Be.key==="Tab"){const gn=de();if(gn.length===0)return;const Ui=gn.findIndex(Un=>Un===document.activeElement);if(Be.shiftKey){if(Ui<=0){Be.preventDefault();const Un=gn[gn.length-1];Un&&Un.focus()}}else if(Ui===-1||Ui>=gn.length-1){Be.preventDefault();const Un=gn[0];Un&&Un.focus()}}};return document.addEventListener("keydown",je),()=>document.removeEventListener("keydown",je)},[e]),d.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 overflow-y-auto",children:[d.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:e}),d.jsxs(ie.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.25},className:"relative z-10 bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto border border-white/20 dark:border-gray-700/50 my-4 outline-none",role:"dialog","aria-modal":"true","aria-label":`${t.name} details`,ref:N,tabIndex:-1,children:[d.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors","aria-label":"Close modal",children:d.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),d.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-6",children:t.name}),d.jsxs("div",{className:"relative bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 rounded-xl overflow-hidden mb-4 max-h-[50vh] border border-gray-200/50 dark:border-gray-700/50",children:[d.jsxs("div",{className:"absolute top-4 right-4 z-20 flex flex-col gap-2",children:[d.jsx(ie.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:J,className:"w-10 h-10 bg-white/90 dark:bg-gray-800/90 backdrop-blur-xl rounded-xl flex items-center justify-center shadow-lg hover:shadow-xl transition-all duration-200 border border-gray-200/50 dark:border-gray-700/50","aria-label":"Zoom in",children:d.jsx("svg",{className:"w-5 h-5 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),d.jsx(ie.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:Q,className:"w-10 h-10 bg-white/90 dark:bg-gray-800/90 backdrop-blur-xl rounded-xl flex items-center justify-center shadow-lg hover:shadow-xl transition-all duration-200 border border-gray-200/50 dark:border-gray-700/50","aria-label":"Zoom out",children:d.jsx("svg",{className:"w-5 h-5 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 12H6"})})}),d.jsx(ie.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:F,className:"w-10 h-10 bg-white/90 dark:bg-gray-800/90 backdrop-blur-xl rounded-xl flex items-center justify-center shadow-lg hover:shadow-xl transition-all duration-200 border border-gray-200/50 dark:border-gray-700/50","aria-label":"Reset zoom",children:d.jsx("svg",{className:"w-5 h-5 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),d.jsx("div",{className:"absolute top-4 left-4 z-20 bg-white/90 dark:bg-gray-800/90 backdrop-blur-xl rounded-xl px-3 py-2 shadow-lg border border-gray-200/50 dark:border-gray-700/50",children:d.jsxs("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:[Math.round(w*100),"%"]})}),d.jsx("div",{className:"absolute bottom-4 left-4 z-20 bg-white/90 dark:bg-gray-800/90 backdrop-blur-xl rounded-xl px-3 py-2 shadow-lg border border-gray-200/50 dark:border-gray-700/50",children:d.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Scroll to zoom  Drag to pan"})}),d.jsx("div",{className:"w-full h-full min-h-[40vh] flex items-center justify-center overflow-hidden cursor-grab active:cursor-grabbing",onWheel:W,onMouseDown:te,onMouseMove:we,onMouseUp:ce,onMouseLeave:ce,style:{cursor:C?"grabbing":"grab"},children:d.jsx("img",{src:t.imageUrl,alt:t.name,className:"transition-transform duration-200 ease-out",style:{transform:`scale(${w}) translate(${S.x/w}px, ${S.y/w}px)`,transformOrigin:"center center",maxWidth:"none",maxHeight:"none",width:"auto",height:"auto"},draggable:!1})})]}),d.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-xl p-4 border border-blue-200/50 dark:border-blue-700/50",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-2 text-center",children:"Exercise Timer"}),d.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 text-center mb-3",children:t.name}),v&&d.jsx(ie.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mb-4 p-3 bg-green-500/10 border border-green-500/30 rounded-lg text-center",children:d.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-600 dark:text-green-400",children:[d.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:d.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),d.jsx("span",{className:"font-medium",children:"Workout session saved!"})]})}),d.jsxs("div",{className:"text-center mb-4",children:[d.jsxs("div",{className:`text-4xl font-mono font-bold transition-colors duration-300 ${s===0&&o===0&&x?"text-red-600 dark:text-red-400 animate-pulse":"text-blue-600 dark:text-blue-400"}`,children:[String(s).padStart(2,"0"),":",String(o).padStart(2,"0")]}),s===0&&o===0&&x&&d.jsx(ie.p,{initial:{opacity:0},animate:{opacity:1},className:"text-sm font-medium text-red-600 dark:text-red-400 mt-2",children:"Timer completed!"})]}),d.jsxs("div",{className:"flex flex-wrap gap-3 justify-center",children:[d.jsxs("div",{className:"flex items-center gap-2 bg-white dark:bg-gray-700 rounded-lg px-4 py-2",children:[d.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Minutes:"}),d.jsx("input",{type:"number",min:"0",max:"99",value:s,onChange:q=>{const de=parseInt(q.target.value)||0;de>=0&&de<=99&&i(de)},disabled:l,className:"w-16 px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 disabled:opacity-50"})]}),d.jsxs("div",{className:"flex items-center gap-2 bg-white dark:bg-gray-700 rounded-lg px-4 py-2",children:[d.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Seconds:"}),d.jsx("input",{type:"number",min:"0",max:"59",value:o,onChange:q=>{const de=parseInt(q.target.value)||0;de>=0&&de<=59&&a(de)},disabled:l,className:"w-16 px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 disabled:opacity-50"})]})]}),d.jsxs("div",{className:"flex gap-3 justify-center mt-4",children:[l?d.jsxs("button",{onClick:Z,className:"px-6 py-3 rounded-xl bg-gradient-to-r from-yellow-500 to-orange-600 hover:from-yellow-600 hover:to-orange-700 text-white font-medium transition-all duration-200 shadow-lg hover:shadow-xl flex items-center gap-2",children:[d.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:d.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-2 0v6a1 1 0 102 0V7z",clipRule:"evenodd"})}),"Pause"]}):d.jsxs("button",{onClick:M,disabled:s===0&&o===0,className:"px-6 py-3 rounded-xl bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-medium transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[d.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:d.jsx("path",{d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"})}),"Start"]}),d.jsxs("button",{onClick:se,className:"px-6 py-3 rounded-xl bg-white dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 font-medium transition-all duration-200 border border-gray-300 dark:border-gray-600 flex items-center gap-2",children:[d.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:d.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})}),"Reset"]})]})]})]})]})}function pQ({onOpenExercise:t}){var l;const[e,n]=j.useState("Cardio"),[r,s]=j.useState(null),[i,o]=j.useState(!1),a=c=>{s(c),o(!0),t==null||t(c)};return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"bg-white/90 dark:bg-gray-900/90 backdrop-blur-xl rounded-3xl p-8 shadow-2xl border border-gray-200/50 dark:border-gray-700/50",children:[d.jsxs("div",{className:"flex items-center justify-between mb-8 gap-6 flex-wrap",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"w-2 h-10 bg-gradient-to-b from-blue-500 to-indigo-600 rounded-full"}),d.jsx("h2",{className:"text-4xl font-black text-gray-900 dark:text-gray-100",children:"Browse Exercises"})]}),d.jsx("select",{id:"category-select",value:e,onChange:c=>n(c.target.value),className:"px-6 py-3 rounded-2xl border-2 border-gray-300 dark:border-gray-600 bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:border-blue-500 transition-all duration-300 shadow-lg hover:shadow-xl font-semibold cursor-pointer","aria-label":"Select exercise category",children:_i.map(c=>d.jsx("option",{value:c.category,className:"bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:c.category},c.category))})]}),d.jsx("div",{children:d.jsx("div",{className:"grid grid-cols-2 gap-8",onKeyDown:c=>{const u=c.currentTarget,f=Array.from(u.querySelectorAll("button")).filter(v=>!v.disabled);if(f.length===0)return;const m=2,p=f.findIndex(v=>v===document.activeElement),y=v=>{const E=Math.max(0,Math.min(f.length-1,v)),x=f[E];x&&x.focus()};switch(c.key){case"ArrowRight":c.preventDefault(),y(p>=0?p+1:0);break;case"ArrowLeft":c.preventDefault(),y(p>=0?p-1:f.length-1);break;case"ArrowDown":c.preventDefault(),y(p>=0?p+m:0);break;case"ArrowUp":c.preventDefault(),y(p>=0?p-m:f.length-1);break;case"Home":c.preventDefault(),y(0);break;case"End":c.preventDefault(),y(f.length-1);break}},role:"grid","aria-label":`${e} exercises`,children:(l=_i.find(c=>c.category===e))==null?void 0:l.exercises.map(c=>d.jsxs(ie.button,{whileHover:{scale:1.02,y:-4},whileTap:{scale:.98},onClick:()=>a(c),className:"group relative overflow-hidden rounded-3xl bg-white/90 dark:bg-gray-800/90 backdrop-blur-xl border border-gray-200/50 dark:border-gray-700/50 hover:border-blue-500/50 dark:hover:border-blue-400/50 transition-all duration-300 aspect-square shadow-lg hover:shadow-2xl","aria-label":`View ${c.name} exercise`,children:[d.jsx("img",{src:c.imageUrl,alt:c.name,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",loading:"lazy"}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),d.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6",children:d.jsx("span",{className:"text-white font-bold text-lg block group-hover:text-white transition-colors duration-300",children:c.name})}),d.jsx("div",{className:"absolute top-4 right-4 w-8 h-8 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:d.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h1m4 0h1m-6-8h8a2 2 0 012 2v8a2 2 0 01-2 2H8a2 2 0 01-2-2V8a2 2 0 012-2z"})})})]},c.id))})})]}),i&&r&&d.jsx($M,{exercise:r,onClose:()=>{o(!1),s(null)}})]})}function gQ({onNav:t}){const{user:e}=Cn(),n=rr(),[r,s]=j.useState(null),{data:i,isLoading:o}=ln({queryKey:["schedule",e==null?void 0:e.uid],queryFn:()=>vp(e.uid),enabled:!!(e!=null&&e.uid)});jn({mutationFn:u=>WR(e.uid,u),onSuccess:()=>{n.invalidateQueries({queryKey:["schedule",e==null?void 0:e.uid]})}});const a=new Date().toLocaleDateString("en-US",{weekday:"long"}),l=a.toLowerCase(),c=(i==null?void 0:i[l])||[];return o?d.jsxs("div",{className:"bg-white/90 dark:bg-gray-900/90 backdrop-blur-xl rounded-3xl p-8 shadow-2xl border border-gray-200/50 dark:border-gray-700/50 h-full",children:[d.jsx("div",{className:"text-lg font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-6",children:"Today's Schedule"}),d.jsx("div",{className:"flex items-center justify-center py-8",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})]}):d.jsxs("div",{className:"bg-white/90 dark:bg-gray-900/90 backdrop-blur-xl rounded-3xl p-8 shadow-2xl border border-gray-200/50 dark:border-gray-700/50 h-full",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("div",{children:d.jsx("div",{className:"text-lg font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Today's Schedule"})}),d.jsxs("button",{onClick:u=>{u.preventDefault(),t==null||t("schedule")},className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium transition-colors flex items-center gap-1",children:[d.jsx(um,{className:"w-4 h-4"}),"View All"]})]}),d.jsx("div",{className:"space-y-4",children:c.length===0?d.jsxs("div",{className:"text-center py-8",children:[d.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:d.jsx(um,{className:"w-8 h-8 text-gray-400"})}),d.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-4",children:"No activities scheduled for today"}),d.jsx("button",{onClick:u=>{u.preventDefault(),t==null||t("schedule")},className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-medium rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:"Create Schedule"})]}):Array.isArray(c)&&c.map((u,f)=>d.jsx(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:f*.1},className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 p-4 rounded-xl border border-blue-200/50 dark:border-blue-700/50 hover:shadow-lg transition-all duration-200",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"bg-blue-500/10 p-2 rounded-lg",children:d.jsx(Bu,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),d.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:u.time})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(xi,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),d.jsx("span",{className:"font-semibold text-sm text-gray-800 dark:text-white",children:u.activity})]})]})},f))}),c.length>0&&d.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700"}),d.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-4 font-medium text-center",children:a})]})}function yQ({labels:t,weightData:e,units:n,onUpdateWeight:r}){return d.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20 dark:border-gray-700/50",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs("div",{className:"text-lg font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:["Weight progress for 3 months (",sb(n),")"]}),d.jsx("button",{onClick:r,className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium transition-colors",children:"Update weight "})]}),d.jsx(zM,{labels:t,weightData:e,units:n})]})}function vQ({labels:t,weightData:e,units:n,onUpdateWeight:r,onNav:s,onOpenExercise:i}){return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"bg-white/90 dark:bg-gray-900/90 backdrop-blur-xl rounded-3xl p-8 shadow-2xl border border-gray-200/50 dark:border-gray-700/50",children:d.jsx(mQ,{title:"FITNESS TRACKER",onNav:s})}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[d.jsx("div",{className:"lg:col-span-2",children:d.jsx(pQ,{onOpenExercise:i})}),d.jsx("div",{className:"lg:col-span-1",children:d.jsx(gQ,{onNav:s})})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[d.jsx("div",{className:"lg:col-span-2",children:d.jsx(yQ,{labels:t,weightData:e,units:n,onUpdateWeight:r})}),d.jsx("div",{className:"lg:col-span-1 space-y-6",children:d.jsx(Ca,{})})]})]})}function xQ({onNav:t,onOpenGif:e,centerPage:n}){const{showSuccess:r}=Xo(),[s,i]=j.useState(!1),{user:o}=Cn(),a=rr(),l=rb();j.useRef(0);const c=j.useRef(n);j.useEffect(()=>{const Z=sessionStorage.getItem("sidebar_nav")==="true";if(c.current!==n)if(Z){const F=`myfitness_scroll_${n}`;sessionStorage.removeItem(F),sessionStorage.removeItem("sidebar_nav"),requestAnimationFrame(()=>{window.scrollTo({top:0,behavior:"smooth"})})}else{const F=`myfitness_scroll_${n}`,W=sessionStorage.getItem(F);if(W){const te=parseInt(W,10);!isNaN(te)&&te>0?requestAnimationFrame(()=>{window.scrollTo({top:te,behavior:"instant"})}):requestAnimationFrame(()=>{window.scrollTo({top:0,behavior:"instant"})})}else requestAnimationFrame(()=>{window.scrollTo({top:0,behavior:"instant"})})}const se=`myfitness_scroll_${n}`,J=()=>{sessionStorage.getItem("sidebar_nav")!=="true"&&sessionStorage.setItem(se,String(window.scrollY))},Q=setTimeout(()=>{window.addEventListener("scroll",J,{passive:!0})},1e3);return c.current=n,()=>{clearTimeout(Q),window.removeEventListener("scroll",J)}},[n]);const{data:u}=ln({queryKey:["user","profile",o==null?void 0:o.uid],queryFn:async()=>{if(!(o!=null&&o.uid))return null;const{getUserFromFirestore:Z}=await hr(async()=>{const{getUserFromFirestore:se}=await Promise.resolve().then(()=>aW);return{getUserFromFirestore:se}},void 0);return Z(o.uid)},enabled:!!(o!=null&&o.uid),staleTime:0,refetchOnWindowFocus:!1,refetchOnMount:!0}),f=u||(o?{uid:o.uid,name:o.name,email:o.email,age:o.age,weightKg:o.weightKg,heightCm:o.heightCm,theme:o.theme,fitnessGoal:o.fitnessGoal,units:"metric",language:"en",privacy:"private",notifications:{workoutReminders:!0,goalAchievements:!0,weeklyProgress:!1},dataSharing:!0,activityTracking:!0}:null),{data:m=[]}=ln({queryKey:["weight","history",o==null?void 0:o.uid],queryFn:()=>$y.getHistory(o.uid),enabled:!!(o!=null&&o.uid)}),{data:p=[]}=ln({queryKey:["goals",o==null?void 0:o.uid],queryFn:()=>ib(o.uid),enabled:!!(o!=null&&o.uid)}),y=j.useCallback(()=>{var J,Q;const Z=(f==null?void 0:f.weightKg)||70,se=["Week 1","Week 2","Week 3","Week 4","Week 5","Week 6","Week 7","Week 8","Week 9","Week 10","Week 11","Week 12"];if(m.length>0){const F=m.sort((ce,q)=>new Date(ce.date).getTime()-new Date(q.date).getTime()),W=new Date,te=new Date(W.getTime()-12*7*24*60*60*1e3),we=F.filter(ce=>new Date(ce.date)>=te);if(we.length===1||F.length===1){const ce=((J=F[0])==null?void 0:J.weight)||Z;return se.map(q=>({week:q,weight:ce}))}if(we.length>1){const ce=[];for(let q=0;q<12;q++){const de=new Date(te.getTime()+q*7*24*60*60*1e3),Ne=new Date(de.getTime()+7*24*60*60*1e3),je=we.filter(Be=>{const gn=new Date(Be.date);return gn>=de&&gn<Ne});if(je.length>0){const Be=je[je.length-1];Be?ce.push({week:se[q],weight:Be.weight}):ce.push({week:se[q],weight:Z})}else if(ce.length>0){const Be=((Q=ce[ce.length-1])==null?void 0:Q.weight)||Z;ce.push({week:se[q],weight:Be})}else ce.push({week:se[q],weight:Z})}return ce}}return se.map(F=>({week:F,weight:Z}))},[m,f==null?void 0:f.weightKg]),v=j.useMemo(()=>y(),[y]),E=j.useMemo(()=>hW(v,l.units),[v,l.units]),x=j.useMemo(()=>Array.from({length:12}).map((Z,se)=>`W${se+1}`),[]),[_,w]=Nt.useState(null),[P,C]=Nt.useState(!1),[R,T]=Nt.useState(!1),[k,S]=Nt.useState(!1),{data:I}=ln({queryKey:["schedule",o==null?void 0:o.uid],queryFn:()=>vp(o.uid),enabled:!!(o!=null&&o.uid)}),N=jn({mutationFn:Z=>_W(o.uid,Z),onSuccess:()=>{a.invalidateQueries({queryKey:["schedule",o==null?void 0:o.uid]}),C(!1)}}),D=jn({mutationFn:()=>bW(o.uid),onSuccess:()=>{a.invalidateQueries({queryKey:["schedule",o==null?void 0:o.uid]}),r("Schedule deleted successfully!"),i(!1)}}),M=jn({mutationFn:Z=>$y.addEntry(o.uid,Z),onSuccess:()=>{a.invalidateQueries({queryKey:["weight","history",o==null?void 0:o.uid]}),a.invalidateQueries({queryKey:["user","profile",o==null?void 0:o.uid]})}});return d.jsx(d.Fragment,{children:d.jsxs("div",{className:"min-h-screen gradient-elegant-light dark:gradient-elegant-dark",children:[d.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[d.jsx("div",{className:"absolute -top-40 -right-40 w-96 h-96 bg-blue-200/10 dark:bg-blue-900/10 rounded-full mix-blend-multiply dark:mix-blend-screen filter blur-3xl opacity-60 animate-pulse"}),d.jsx("div",{className:"absolute -bottom-40 -left-40 w-96 h-96 bg-indigo-200/10 dark:bg-indigo-900/10 rounded-full mix-blend-multiply dark:mix-blend-screen filter blur-3xl opacity-60 animate-pulse",style:{animationDelay:"2s"}}),d.jsx("div",{className:"absolute top-40 left-1/2 w-96 h-96 bg-emerald-200/10 dark:bg-emerald-900/10 rounded-full mix-blend-multiply dark:mix-blend-screen filter blur-3xl opacity-60 animate-pulse",style:{animationDelay:"4s"}})]}),d.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto py-8 grid grid-cols-1 lg:grid-cols-12 gap-8",children:[d.jsx("div",{className:"lg:col-span-3",children:d.jsx(fW,{profile:f,onNav:t})}),d.jsxs("div",{id:"main-content",role:"main",className:"lg:col-span-9 space-y-8",children:[n==="goals"?d.jsx("div",{className:"space-y-6",children:d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[d.jsx("div",{className:"lg:col-span-2",children:d.jsx("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20 dark:border-gray-700/50",children:d.jsx(wW,{})})}),d.jsx("div",{className:"lg:col-span-1",children:d.jsx(dQ,{goals:p})})]})}):n==="profile"?d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[d.jsx("div",{className:"lg:col-span-2",children:d.jsx("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 dark:border-gray-700/50 overflow-hidden",children:d.jsx(EW,{onClose:()=>t==null?void 0:t("dashboard")})})}),d.jsx("div",{className:"lg:col-span-1",children:d.jsx(fQ,{currentUser:f})})]}):n==="schedule"?d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[d.jsx("div",{className:"lg:col-span-2",children:d.jsx("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20 dark:border-gray-700/50",children:d.jsx(IW,{})})}),d.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[d.jsx(hQ,{schedule:I||null,onCreateSchedule:()=>C(!0),onEditSchedule:()=>S(!0),onDeleteSchedule:()=>i(!0),isDeleting:D.isPending}),d.jsx(Ca,{})]})]}):n==="achievements"?d.jsx("div",{className:"space-y-6",children:d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[d.jsx("div",{className:"lg:col-span-2",children:d.jsx("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20 dark:border-gray-700/50",children:d.jsx(DW,{})})}),d.jsx("div",{className:"lg:col-span-1 space-y-6",children:d.jsx(Ca,{})})]})}):n==="settings"?d.jsx("div",{className:"space-y-6",children:d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[d.jsx("div",{className:"lg:col-span-2",children:d.jsx("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20 dark:border-gray-700/50",children:d.jsx(oQ,{})})}),d.jsx("div",{className:"lg:col-span-1 space-y-6",children:d.jsx(Ca,{})})]})}):n==="workouts"||n==="workout-logs"?d.jsx("div",{className:"space-y-6",children:d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[d.jsx("div",{className:"lg:col-span-2",children:d.jsx("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20 dark:border-gray-700/50",children:d.jsx(lQ,{})})}),d.jsx("div",{className:"lg:col-span-1 space-y-6",children:d.jsx(Ca,{})})]})}):d.jsx(vQ,{labels:x,weightData:E,units:l.units,onUpdateWeight:()=>T(!0),onNav:t,onOpenExercise:Z=>e==null?void 0:e(Z.id)}),_&&d.jsx(uQ,{open:!!_,title:_.title,progress:_.progress,data:_.data,isExercise:_.isExercise,onClose:()=>w(null),onOpenGif:Z=>{w(null),e==null||e(Z)}}),P&&d.jsx(AW,{onClose:()=>C(!1),onSave:Z=>{const se={monday:Z.monday||[],tuesday:Z.tuesday||[],wednesday:Z.wednesday||[],thursday:Z.thursday||[],friday:Z.friday||[],saturday:Z.saturday||[],sunday:Z.sunday||[]};N.mutate(se)}}),R&&d.jsx(iQ,{onClose:()=>T(!1),labels:x,weightData:E,onUpdateWeight:Z=>M.mutate(Z),currentWeight:f==null?void 0:f.weightKg,isUpdating:M.isPending,isSuccess:M.isSuccess,units:l.units}),k&&d.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[d.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>S(!1)}),d.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-2xl w-full max-w-md border border-white/20 dark:border-gray-700/50",children:[d.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[d.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:d.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),d.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Edit Schedule"})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:"To edit your schedule, simply click on any day card in your weekly schedule. You can add, modify, or remove activities for each day."}),d.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 p-4 rounded-xl border border-blue-200 dark:border-blue-700",children:d.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:" Tip: You can click on any day (Monday through Sunday) to open the edit form for that specific day."})})]}),d.jsx("div",{className:"mt-6 flex justify-end",children:d.jsx("button",{onClick:()=>S(!1),className:"px-6 py-3 rounded-xl bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-medium transition-all duration-200 shadow-lg hover:shadow-xl",children:"Got it!"})})]})]}),d.jsx(gm,{open:s,title:"Delete Schedule",message:"Are you sure you want to delete your entire workout schedule? This action cannot be undone and will remove all your scheduled activities for all days of the week.",confirmText:"Delete Schedule",cancelText:"Cancel",variant:"danger",onConfirm:()=>D.mutate(),onCancel:()=>i(!1)})]})]})]})})}function _Q({onBack:t}){const[e,n]=j.useState(!1),[r,s]=j.useState(null),[i,o]=j.useState(""),[a,l]=j.useState({message:"",type:null}),[c,u]=j.useState(!1),f=100,m=j.useCallback(x=>{if(!x||x.trim().length===0)return{valid:!0};const _=x.trim();return _.length>f?{valid:!1,error:`Search query must be less than ${f} characters`}:/[<>{}[\]]/g.test(_)?{valid:!1,error:"Search query contains invalid characters"}:{valid:!0}},[]),p=j.useCallback(x=>{const _=x.target.value;l({message:"",type:null});const w=m(_);if(!w.valid&&w.error){l({message:w.error,type:"invalid_input"});return}o(_),_.trim().length>0?u(!0):u(!1)},[m]),y=j.useCallback(()=>{o(""),l({message:"",type:null}),u(!1)},[]),v=j.useMemo(()=>{try{if(!i||i.trim().length===0)return _i;const x=i.trim().toLowerCase(),_=_i.map(w=>{const P=w.exercises.filter(C=>{try{const R=C.name.toLowerCase(),T=w.category.toLowerCase();return R.includes(x)||T.includes(x)}catch(R){return console.error("Error filtering exercise:",R),!1}});return P.length>0?{...w,exercises:P}:null}).filter(w=>w!==null);return _.length===0&&c?l({message:`No exercises found for "${i}"`,type:"no_results"}):l({message:"",type:null}),_}catch(x){return console.error("Error filtering exercises:",x),l({message:"An error occurred while searching. Please try again.",type:"network_error"}),_i}},[i,c]),E=j.useMemo(()=>v.reduce((x,_)=>x+_.exercises.length,0),[v]);return d.jsxs("div",{className:"min-h-screen gradient-clean-light dark:gradient-clean-dark",children:[d.jsxs("div",{className:"max-w-7xl mx-auto py-12 px-6",children:[d.jsxs(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-12",children:[d.jsxs("div",{className:"flex items-center gap-6 mb-6",children:[t&&d.jsx(ie.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,className:"p-3 rounded-2xl bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-300 shadow-lg hover:shadow-xl border border-gray-200/50 dark:border-gray-700/50",children:d.jsx("svg",{className:"w-6 h-6 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h1",{className:"text-5xl font-black bg-gradient-to-r from-slate-900 via-blue-900 to-indigo-900 dark:from-white dark:via-blue-100 dark:to-indigo-100 bg-clip-text text-transparent",children:"Exercise Library"}),d.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 mt-2 font-medium",children:"Click on any exercise to start exercising"})]})]}),d.jsxs(ie.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4,delay:.2},className:"mb-8",children:[d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:d.jsx(MT,{className:"h-5 w-5 text-gray-400 dark:text-gray-500"})}),d.jsx("input",{type:"text",value:i,onChange:p,placeholder:"Search exercises by name or category...",maxLength:f,className:"w-full pl-12 pr-12 py-4 bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl border border-gray-200/50 dark:border-gray-700/50 rounded-2xl text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 shadow-lg hover:shadow-xl"}),i&&d.jsx("button",{onClick:y,className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors","aria-label":"Clear search",children:d.jsx(mp,{className:"h-5 w-5"})})]}),c&&d.jsx(ie.p,{initial:{opacity:0},animate:{opacity:1},className:"text-sm text-gray-600 dark:text-gray-400 mt-2 ml-1",children:E>0?`Found ${E} exercise${E!==1?"s":""}`:"No results found"}),d.jsx(Td,{children:a.message&&d.jsxs(ie.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mt-3 flex items-center gap-2 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl",children:[d.jsx(eb,{className:"h-5 w-5 text-red-600 dark:text-red-400 flex-shrink-0"}),d.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:a.message})]})})]})]}),v.length>0?d.jsx("div",{className:"space-y-16",children:v.map((x,_)=>d.jsxs(ie.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:_*.1},children:[d.jsxs("h2",{className:"text-3xl font-bold mb-8 text-gray-900 dark:text-gray-100 flex items-center gap-3",children:[d.jsx("div",{className:"w-2 h-8 bg-gradient-to-b from-blue-500 to-indigo-600 rounded-full"}),x.category]}),d.jsx("div",{className:"grid grid-cols-4 gap-8",children:x.exercises.map((w,P)=>d.jsxs(ie.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.4,delay:_*.1+P*.05},whileHover:{scale:1.02,y:-4},whileTap:{scale:.98},onClick:()=>{try{s(w),n(!0)}catch(C){console.error("Error opening exercise modal:",C),l({message:"Failed to open exercise. Please try again.",type:"network_error"})}},className:"group relative overflow-hidden rounded-3xl bg-white/90 dark:bg-gray-800/90 backdrop-blur-xl border border-gray-200/50 dark:border-gray-700/50 hover:border-blue-500/50 dark:hover:border-blue-400/50 transition-all duration-300 aspect-square shadow-lg hover:shadow-2xl",children:[d.jsx("img",{src:w.imageUrl,alt:w.name,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",onError:C=>{console.error("Error loading exercise image:",w.imageUrl);const R=C.target;R.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="200" height="200"%3E%3Crect fill="%23ddd" width="200" height="200"/%3E%3Ctext fill="%23999" font-family="sans-serif" font-size="14" x="50%25" y="50%25" text-anchor="middle" dy=".3em"%3EImage%3C/text%3E%3C/svg%3E',R.alt=`${w.name} (image unavailable)`},loading:"lazy"}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),d.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6",children:d.jsx("span",{className:"text-white font-bold text-lg block group-hover:text-white transition-colors duration-300",children:w.name})}),d.jsx("div",{className:"absolute top-4 right-4 w-8 h-8 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:d.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h1m4 0h1m-6-8h8a2 2 0 012 2v8a2 2 0 01-2 2H8a2 2 0 01-2-2V8a2 2 0 012-2z"})})})]},w.id))})]},x.category))}):d.jsx(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-16",children:d.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl rounded-3xl p-12 border border-gray-200/50 dark:border-gray-700/50 shadow-lg",children:[d.jsx("div",{className:"w-24 h-24 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-6",children:d.jsx(MT,{className:"w-12 h-12 text-gray-400 dark:text-gray-500"})}),d.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"No exercises found"}),d.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6 max-w-md mx-auto",children:[`We couldn't find any exercises matching "`,i,'". Try searching with different keywords or browse all exercises.']}),d.jsx("button",{onClick:y,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-medium rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl",children:"Clear Search & Show All"})]})})]}),e&&r&&d.jsx($M,{exercise:r,onClose:()=>{n(!1),s(null)}})]})}function bQ(){const{user:t}=Cn();rr();const{data:e}=ln({queryKey:["userPreferences",t==null?void 0:t.uid],queryFn:()=>HR(t.uid),enabled:!!(t!=null&&t.uid)}),[n,r]=j.useState(()=>{if(e!=null&&e.lastActivePage&&["dashboard","profile","goals","gifs","achievements","exercises","workouts","schedule","settings"].includes(e.lastActivePage))return e.lastActivePage;const l=localStorage.getItem("myfitness_active_page");return l&&["dashboard","profile","goals","gifs","achievements","exercises","workouts","schedule","settings"].includes(l)?l:"dashboard"});j.useEffect(()=>{e!=null&&e.lastActivePage&&["dashboard","profile","goals","gifs","achievements","exercises","workouts","schedule","settings"].includes(e.lastActivePage)&&r(e.lastActivePage)},[e==null?void 0:e.lastActivePage]);const[s,i]=j.useState(()=>(e==null?void 0:e.lastSelectedGifId)||null),o=jn({mutationFn:l=>qR(t.uid,l)});j.useEffect(()=>{t!=null&&t.uid&&n&&(localStorage.setItem("myfitness_active_page",n),o.mutate({lastActivePage:n}),Zc(t.uid,{type:"page_view",page:n}))},[n,t==null?void 0:t.uid]),j.useEffect(()=>{t!=null&&t.uid&&s?o.mutate({lastSelectedGifId:s}):t!=null&&t.uid},[s,t==null?void 0:t.uid]);const a=l=>{const c=n;c&&sessionStorage.setItem(`myfitness_scroll_${c}`,String(window.scrollY)),r(l)};return d.jsxs("div",{children:[d.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:fixed focus:top-2 focus:left-2 focus:z-[100] focus:bg-blue-600 focus:text-white focus:px-4 focus:py-2 focus:rounded",children:"Skip to main content"}),n==="exercises"?d.jsx(_Q,{onBack:()=>a("dashboard")}):d.jsxs(d.Fragment,{children:[d.jsx(xQ,{onNav:a,onOpenGif:l=>{i(l),a("gifs")},centerPage:n}),n==="gifs"&&d.jsx(pU,{exerciseId:s,onBack:()=>a("dashboard")})]})]})}function wQ(){return d.jsx(rW,{children:d.jsx(bQ,{})})}function kQ({children:t}){const[e]=j.useState(()=>new g4({defaultOptions:{queries:{staleTime:0,retry:!1}}}));return d.jsx(y4,{client:e,children:t})}class EQ extends j.Component{constructor(n){super(n);Y(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n,errorInfo:null}}componentDidCatch(n,r){console.error("ErrorBoundary caught an error:",n,r),this.setState({error:n,errorInfo:r})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 p-4",children:d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-200 dark:border-gray-700 p-8 max-w-md w-full",children:[d.jsx("div",{className:"flex items-center justify-center mb-6",children:d.jsx("div",{className:"bg-red-100 dark:bg-red-900/20 p-4 rounded-full",children:d.jsx(hp,{className:"w-12 h-12 text-red-600 dark:text-red-400"})})}),d.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white text-center mb-4",children:"Something went wrong"}),d.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"We're sorry, but something unexpected happened. Please try refreshing the page."}),this.state.error&&!1,d.jsxs("div",{className:"flex gap-4",children:[d.jsxs("button",{onClick:this.handleReset,className:"flex-1 px-4 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-medium rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl flex items-center justify-center gap-2",children:[d.jsx(A$,{className:"w-4 h-4"}),"Try Again"]}),d.jsx("button",{onClick:()=>window.location.reload(),className:"flex-1 px-4 py-3 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 font-medium rounded-xl transition-all duration-200",children:"Reload Page"})]})]})}):this.props.children}}a0.createRoot(document.getElementById("root")).render(d.jsx(Nt.StrictMode,{children:d.jsx(EQ,{children:d.jsx(sW,{children:d.jsx(kQ,{children:d.jsx(A4,{children:d.jsx(lW,{children:d.jsx(gW,{children:d.jsx(wQ,{})})})})})})})}));
