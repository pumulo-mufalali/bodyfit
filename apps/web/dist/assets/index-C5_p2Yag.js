var aM=Object.defineProperty;var Eb=t=>{throw TypeError(t)};var lM=(t,e,n)=>e in t?aM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ee=(t,e,n)=>lM(t,typeof e!="symbol"?e+"":e,n),sp=(t,e,n)=>e.has(t)||Eb("Cannot "+n);var j=(t,e,n)=>(sp(t,e,"read from private field"),n?n.call(t):e.get(t)),te=(t,e,n)=>e.has(t)?Eb("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),q=(t,e,n,r)=>(sp(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),he=(t,e,n)=>(sp(t,e,"access private method"),n);var cd=(t,e,n,r)=>({set _(i){q(t,e,i,n)},get _(){return j(t,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function cM(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var YT={exports:{}},Vf={},XT={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wu=Symbol.for("react.element"),uM=Symbol.for("react.portal"),dM=Symbol.for("react.fragment"),hM=Symbol.for("react.strict_mode"),fM=Symbol.for("react.profiler"),mM=Symbol.for("react.provider"),pM=Symbol.for("react.context"),gM=Symbol.for("react.forward_ref"),yM=Symbol.for("react.suspense"),vM=Symbol.for("react.memo"),xM=Symbol.for("react.lazy"),Tb=Symbol.iterator;function wM(t){return t===null||typeof t!="object"?null:(t=Tb&&t[Tb]||t["@@iterator"],typeof t=="function"?t:null)}var JT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ZT=Object.assign,eS={};function Ga(t,e,n){this.props=t,this.context=e,this.refs=eS,this.updater=n||JT}Ga.prototype.isReactComponent={};Ga.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ga.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function tS(){}tS.prototype=Ga.prototype;function Cy(t,e,n){this.props=t,this.context=e,this.refs=eS,this.updater=n||JT}var Py=Cy.prototype=new tS;Py.constructor=Cy;ZT(Py,Ga.prototype);Py.isPureReactComponent=!0;var Sb=Array.isArray,nS=Object.prototype.hasOwnProperty,Ay={current:null},rS={key:!0,ref:!0,__self:!0,__source:!0};function iS(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)nS.call(e,r)&&!rS.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:wu,type:t,key:s,ref:o,props:i,_owner:Ay.current}}function bM(t,e){return{$$typeof:wu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ny(t){return typeof t=="object"&&t!==null&&t.$$typeof===wu}function _M(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ib=/\/+/g;function op(t,e){return typeof t=="object"&&t!==null&&t.key!=null?_M(""+t.key):e.toString(36)}function Xd(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case wu:case uM:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+op(o,0):r,Sb(i)?(n="",t!=null&&(n=t.replace(Ib,"$&/")+"/"),Xd(i,e,n,"",function(c){return c})):i!=null&&(Ny(i)&&(i=bM(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Ib,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Sb(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+op(s,a);o+=Xd(s,e,n,l,i)}else if(l=wM(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+op(s,a++),o+=Xd(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ud(t,e,n){if(t==null)return t;var r=[],i=0;return Xd(t,r,"","",function(s){return e.call(n,s,i++)}),r}function kM(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var en={current:null},Jd={transition:null},EM={ReactCurrentDispatcher:en,ReactCurrentBatchConfig:Jd,ReactCurrentOwner:Ay};function sS(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:ud,forEach:function(t,e,n){ud(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ud(t,function(){e++}),e},toArray:function(t){return ud(t,function(e){return e})||[]},only:function(t){if(!Ny(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};me.Component=Ga;me.Fragment=dM;me.Profiler=fM;me.PureComponent=Cy;me.StrictMode=hM;me.Suspense=yM;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EM;me.act=sS;me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ZT({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Ay.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)nS.call(e,l)&&!rS.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:wu,type:t.type,key:i,ref:s,props:r,_owner:o}};me.createContext=function(t){return t={$$typeof:pM,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:mM,_context:t},t.Consumer=t};me.createElement=iS;me.createFactory=function(t){var e=iS.bind(null,t);return e.type=t,e};me.createRef=function(){return{current:null}};me.forwardRef=function(t){return{$$typeof:gM,render:t}};me.isValidElement=Ny;me.lazy=function(t){return{$$typeof:xM,_payload:{_status:-1,_result:t},_init:kM}};me.memo=function(t,e){return{$$typeof:vM,type:t,compare:e===void 0?null:e}};me.startTransition=function(t){var e=Jd.transition;Jd.transition={};try{t()}finally{Jd.transition=e}};me.unstable_act=sS;me.useCallback=function(t,e){return en.current.useCallback(t,e)};me.useContext=function(t){return en.current.useContext(t)};me.useDebugValue=function(){};me.useDeferredValue=function(t){return en.current.useDeferredValue(t)};me.useEffect=function(t,e){return en.current.useEffect(t,e)};me.useId=function(){return en.current.useId()};me.useImperativeHandle=function(t,e,n){return en.current.useImperativeHandle(t,e,n)};me.useInsertionEffect=function(t,e){return en.current.useInsertionEffect(t,e)};me.useLayoutEffect=function(t,e){return en.current.useLayoutEffect(t,e)};me.useMemo=function(t,e){return en.current.useMemo(t,e)};me.useReducer=function(t,e,n){return en.current.useReducer(t,e,n)};me.useRef=function(t){return en.current.useRef(t)};me.useState=function(t){return en.current.useState(t)};me.useSyncExternalStore=function(t,e,n){return en.current.useSyncExternalStore(t,e,n)};me.useTransition=function(){return en.current.useTransition()};me.version="18.3.1";XT.exports=me;var O=XT.exports;const Zn=cM(O);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TM=O,SM=Symbol.for("react.element"),IM=Symbol.for("react.fragment"),CM=Object.prototype.hasOwnProperty,PM=TM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,AM={key:!0,ref:!0,__self:!0,__source:!0};function oS(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)CM.call(e,r)&&!AM.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:SM,type:t,key:s,ref:o,props:i,_owner:PM.current}}Vf.Fragment=IM;Vf.jsx=oS;Vf.jsxs=oS;YT.exports=Vf;var h=YT.exports,yg={},aS={exports:{}},En={},lS={exports:{}},cS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,$){var K=F.length;F.push($);e:for(;0<K;){var de=K-1>>>1,H=F[de];if(0<i(H,$))F[de]=$,F[K]=H,K=de;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var $=F[0],K=F.pop();if(K!==$){F[0]=K;e:for(var de=0,H=F.length,ne=H>>>1;de<ne;){var ge=2*(de+1)-1,Ae=F[ge],Be=ge+1,Sn=F[Be];if(0>i(Ae,K))Be<H&&0>i(Sn,Ae)?(F[de]=Sn,F[Be]=K,de=Be):(F[de]=Ae,F[ge]=K,de=ge);else if(Be<H&&0>i(Sn,K))F[de]=Sn,F[Be]=K,de=Be;else break e}}return $}function i(F,$){var K=F.sortIndex-$.sortIndex;return K!==0?K:F.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,m=3,p=!1,y=!1,x=!1,k=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(F){for(var $=n(c);$!==null;){if($.callback===null)r(c);else if($.startTime<=F)r(c),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(c)}}function P(F){if(x=!1,_(F),!y)if(n(l)!==null)y=!0,X(A);else{var $=n(c);$!==null&&G(P,$.startTime-F)}}function A(F,$){y=!1,x&&(x=!1,v(E),E=-1),p=!0;var K=m;try{for(_($),f=n(l);f!==null&&(!(f.expirationTime>$)||F&&!M());){var de=f.callback;if(typeof de=="function"){f.callback=null,m=f.priorityLevel;var H=de(f.expirationTime<=$);$=t.unstable_now(),typeof H=="function"?f.callback=H:f===n(l)&&r(l),_($)}else r(l);f=n(l)}if(f!==null)var ne=!0;else{var ge=n(c);ge!==null&&G(P,ge.startTime-$),ne=!1}return ne}finally{f=null,m=K,p=!1}}var N=!1,T=null,E=-1,S=5,C=-1;function M(){return!(t.unstable_now()-C<S)}function D(){if(T!==null){var F=t.unstable_now();C=F;var $=!0;try{$=T(!0,F)}finally{$?R():(N=!1,T=null)}}else N=!1}var R;if(typeof w=="function")R=function(){w(D)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,se=ie.port2;ie.port1.onmessage=D,R=function(){se.postMessage(null)}}else R=function(){k(D,0)};function X(F){T=F,N||(N=!0,R())}function G(F,$){E=k(function(){F(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,X(A))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(m){case 1:case 2:case 3:var $=3;break;default:$=m}var K=m;m=$;try{return F()}finally{m=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,$){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var K=m;m=F;try{return $()}finally{m=K}},t.unstable_scheduleCallback=function(F,$,K){var de=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?de+K:de):K=de,F){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=K+H,F={id:u++,callback:$,priorityLevel:F,startTime:K,expirationTime:H,sortIndex:-1},K>de?(F.sortIndex=K,e(c,F),n(l)===null&&F===n(c)&&(x?(v(E),E=-1):x=!0,G(P,K-de))):(F.sortIndex=H,e(l,F),y||p||(y=!0,X(A))),F},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(F){var $=m;return function(){var K=m;m=$;try{return F.apply(this,arguments)}finally{m=K}}}})(cS);lS.exports=cS;var NM=lS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RM=O,kn=NM;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var uS=new Set,Sc={};function xo(t,e){Ia(t,e),Ia(t+"Capture",e)}function Ia(t,e){for(Sc[t]=e,t=0;t<e.length;t++)uS.add(e[t])}var Jr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vg=Object.prototype.hasOwnProperty,MM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cb={},Pb={};function DM(t){return vg.call(Pb,t)?!0:vg.call(Cb,t)?!1:MM.test(t)?Pb[t]=!0:(Cb[t]=!0,!1)}function jM(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function OM(t,e,n,r){if(e===null||typeof e>"u"||jM(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function tn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Et[t]=new tn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Et[e]=new tn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Et[t]=new tn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Et[t]=new tn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Et[t]=new tn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Et[t]=new tn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Et[t]=new tn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Et[t]=new tn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Et[t]=new tn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ry=/[\-:]([a-z])/g;function My(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ry,My);Et[e]=new tn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ry,My);Et[e]=new tn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ry,My);Et[e]=new tn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Et[t]=new tn(t,1,!1,t.toLowerCase(),null,!1,!1)});Et.xlinkHref=new tn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Et[t]=new tn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Dy(t,e,n,r){var i=Et.hasOwnProperty(e)?Et[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(OM(e,n,i,r)&&(n=null),r||i===null?DM(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var li=RM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,dd=Symbol.for("react.element"),Lo=Symbol.for("react.portal"),Vo=Symbol.for("react.fragment"),jy=Symbol.for("react.strict_mode"),xg=Symbol.for("react.profiler"),dS=Symbol.for("react.provider"),hS=Symbol.for("react.context"),Oy=Symbol.for("react.forward_ref"),wg=Symbol.for("react.suspense"),bg=Symbol.for("react.suspense_list"),Ly=Symbol.for("react.memo"),xi=Symbol.for("react.lazy"),fS=Symbol.for("react.offscreen"),Ab=Symbol.iterator;function bl(t){return t===null||typeof t!="object"?null:(t=Ab&&t[Ab]||t["@@iterator"],typeof t=="function"?t:null)}var qe=Object.assign,ap;function Ll(t){if(ap===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ap=e&&e[1]||""}return`
`+ap+t}var lp=!1;function cp(t,e){if(!t||lp)return"";lp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{lp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ll(t):""}function LM(t){switch(t.tag){case 5:return Ll(t.type);case 16:return Ll("Lazy");case 13:return Ll("Suspense");case 19:return Ll("SuspenseList");case 0:case 2:case 15:return t=cp(t.type,!1),t;case 11:return t=cp(t.type.render,!1),t;case 1:return t=cp(t.type,!0),t;default:return""}}function _g(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Vo:return"Fragment";case Lo:return"Portal";case xg:return"Profiler";case jy:return"StrictMode";case wg:return"Suspense";case bg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case hS:return(t.displayName||"Context")+".Consumer";case dS:return(t._context.displayName||"Context")+".Provider";case Oy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ly:return e=t.displayName||null,e!==null?e:_g(t.type)||"Memo";case xi:e=t._payload,t=t._init;try{return _g(t(e))}catch{}}return null}function VM(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _g(e);case 8:return e===jy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function rs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function mS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function FM(t){var e=mS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function hd(t){t._valueTracker||(t._valueTracker=FM(t))}function pS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=mS(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ih(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function kg(t,e){var n=e.checked;return qe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Nb(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=rs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gS(t,e){e=e.checked,e!=null&&Dy(t,"checked",e,!1)}function Eg(t,e){gS(t,e);var n=rs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Tg(t,e.type,n):e.hasOwnProperty("defaultValue")&&Tg(t,e.type,rs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Rb(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Tg(t,e,n){(e!=="number"||Ih(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Vl=Array.isArray;function na(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+rs(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Sg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return qe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Mb(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(Vl(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:rs(n)}}function yS(t,e){var n=rs(e.value),r=rs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Db(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function vS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ig(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?vS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var fd,xS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(fd=fd||document.createElement("div"),fd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=fd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ic(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ec={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},UM=["Webkit","ms","Moz","O"];Object.keys(ec).forEach(function(t){UM.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ec[e]=ec[t]})});function wS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ec.hasOwnProperty(t)&&ec[t]?(""+e).trim():e+"px"}function bS(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=wS(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var BM=qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cg(t,e){if(e){if(BM[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function Pg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ag=null;function Vy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ng=null,ra=null,ia=null;function jb(t){if(t=ku(t)){if(typeof Ng!="function")throw Error(z(280));var e=t.stateNode;e&&(e=$f(e),Ng(t.stateNode,t.type,e))}}function _S(t){ra?ia?ia.push(t):ia=[t]:ra=t}function kS(){if(ra){var t=ra,e=ia;if(ia=ra=null,jb(t),e)for(t=0;t<e.length;t++)jb(e[t])}}function ES(t,e){return t(e)}function TS(){}var up=!1;function SS(t,e,n){if(up)return t(e,n);up=!0;try{return ES(t,e,n)}finally{up=!1,(ra!==null||ia!==null)&&(TS(),kS())}}function Cc(t,e){var n=t.stateNode;if(n===null)return null;var r=$f(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var Rg=!1;if(Jr)try{var _l={};Object.defineProperty(_l,"passive",{get:function(){Rg=!0}}),window.addEventListener("test",_l,_l),window.removeEventListener("test",_l,_l)}catch{Rg=!1}function zM(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var tc=!1,Ch=null,Ph=!1,Mg=null,$M={onError:function(t){tc=!0,Ch=t}};function WM(t,e,n,r,i,s,o,a,l){tc=!1,Ch=null,zM.apply($M,arguments)}function HM(t,e,n,r,i,s,o,a,l){if(WM.apply(this,arguments),tc){if(tc){var c=Ch;tc=!1,Ch=null}else throw Error(z(198));Ph||(Ph=!0,Mg=c)}}function wo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function IS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ob(t){if(wo(t)!==t)throw Error(z(188))}function qM(t){var e=t.alternate;if(!e){if(e=wo(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Ob(i),t;if(s===r)return Ob(i),e;s=s.sibling}throw Error(z(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function CS(t){return t=qM(t),t!==null?PS(t):null}function PS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=PS(t);if(e!==null)return e;t=t.sibling}return null}var AS=kn.unstable_scheduleCallback,Lb=kn.unstable_cancelCallback,KM=kn.unstable_shouldYield,GM=kn.unstable_requestPaint,et=kn.unstable_now,QM=kn.unstable_getCurrentPriorityLevel,Fy=kn.unstable_ImmediatePriority,NS=kn.unstable_UserBlockingPriority,Ah=kn.unstable_NormalPriority,YM=kn.unstable_LowPriority,RS=kn.unstable_IdlePriority,Ff=null,yr=null;function XM(t){if(yr&&typeof yr.onCommitFiberRoot=="function")try{yr.onCommitFiberRoot(Ff,t,void 0,(t.current.flags&128)===128)}catch{}}var er=Math.clz32?Math.clz32:eD,JM=Math.log,ZM=Math.LN2;function eD(t){return t>>>=0,t===0?32:31-(JM(t)/ZM|0)|0}var md=64,pd=4194304;function Fl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Nh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Fl(a):(s&=o,s!==0&&(r=Fl(s)))}else o=n&~i,o!==0?r=Fl(o):s!==0&&(r=Fl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-er(e),i=1<<n,r|=t[n],e&=~i;return r}function tD(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nD(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-er(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=tD(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Dg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function MS(){var t=md;return md<<=1,!(md&4194240)&&(md=64),t}function dp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function bu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-er(e),t[e]=n}function rD(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-er(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Uy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-er(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ce=0;function DS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var jS,By,OS,LS,VS,jg=!1,gd=[],Bi=null,zi=null,$i=null,Pc=new Map,Ac=new Map,bi=[],iD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vb(t,e){switch(t){case"focusin":case"focusout":Bi=null;break;case"dragenter":case"dragleave":zi=null;break;case"mouseover":case"mouseout":$i=null;break;case"pointerover":case"pointerout":Pc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ac.delete(e.pointerId)}}function kl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ku(e),e!==null&&By(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function sD(t,e,n,r,i){switch(e){case"focusin":return Bi=kl(Bi,t,e,n,r,i),!0;case"dragenter":return zi=kl(zi,t,e,n,r,i),!0;case"mouseover":return $i=kl($i,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Pc.set(s,kl(Pc.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ac.set(s,kl(Ac.get(s)||null,t,e,n,r,i)),!0}return!1}function FS(t){var e=Ms(t.target);if(e!==null){var n=wo(e);if(n!==null){if(e=n.tag,e===13){if(e=IS(n),e!==null){t.blockedOn=e,VS(t.priority,function(){OS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Zd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Og(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ag=r,n.target.dispatchEvent(r),Ag=null}else return e=ku(n),e!==null&&By(e),t.blockedOn=n,!1;e.shift()}return!0}function Fb(t,e,n){Zd(t)&&n.delete(e)}function oD(){jg=!1,Bi!==null&&Zd(Bi)&&(Bi=null),zi!==null&&Zd(zi)&&(zi=null),$i!==null&&Zd($i)&&($i=null),Pc.forEach(Fb),Ac.forEach(Fb)}function El(t,e){t.blockedOn===e&&(t.blockedOn=null,jg||(jg=!0,kn.unstable_scheduleCallback(kn.unstable_NormalPriority,oD)))}function Nc(t){function e(i){return El(i,t)}if(0<gd.length){El(gd[0],t);for(var n=1;n<gd.length;n++){var r=gd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Bi!==null&&El(Bi,t),zi!==null&&El(zi,t),$i!==null&&El($i,t),Pc.forEach(e),Ac.forEach(e),n=0;n<bi.length;n++)r=bi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<bi.length&&(n=bi[0],n.blockedOn===null);)FS(n),n.blockedOn===null&&bi.shift()}var sa=li.ReactCurrentBatchConfig,Rh=!0;function aD(t,e,n,r){var i=Ce,s=sa.transition;sa.transition=null;try{Ce=1,zy(t,e,n,r)}finally{Ce=i,sa.transition=s}}function lD(t,e,n,r){var i=Ce,s=sa.transition;sa.transition=null;try{Ce=4,zy(t,e,n,r)}finally{Ce=i,sa.transition=s}}function zy(t,e,n,r){if(Rh){var i=Og(t,e,n,r);if(i===null)bp(t,e,r,Mh,n),Vb(t,r);else if(sD(i,t,e,n,r))r.stopPropagation();else if(Vb(t,r),e&4&&-1<iD.indexOf(t)){for(;i!==null;){var s=ku(i);if(s!==null&&jS(s),s=Og(t,e,n,r),s===null&&bp(t,e,r,Mh,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else bp(t,e,r,null,n)}}var Mh=null;function Og(t,e,n,r){if(Mh=null,t=Vy(r),t=Ms(t),t!==null)if(e=wo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=IS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Mh=t,null}function US(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(QM()){case Fy:return 1;case NS:return 4;case Ah:case YM:return 16;case RS:return 536870912;default:return 16}default:return 16}}var Oi=null,$y=null,eh=null;function BS(){if(eh)return eh;var t,e=$y,n=e.length,r,i="value"in Oi?Oi.value:Oi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return eh=i.slice(t,1<r?1-r:void 0)}function th(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function yd(){return!0}function Ub(){return!1}function Tn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?yd:Ub,this.isPropagationStopped=Ub,this}return qe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=yd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=yd)},persist:function(){},isPersistent:yd}),e}var Qa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wy=Tn(Qa),_u=qe({},Qa,{view:0,detail:0}),cD=Tn(_u),hp,fp,Tl,Uf=qe({},_u,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Tl&&(Tl&&t.type==="mousemove"?(hp=t.screenX-Tl.screenX,fp=t.screenY-Tl.screenY):fp=hp=0,Tl=t),hp)},movementY:function(t){return"movementY"in t?t.movementY:fp}}),Bb=Tn(Uf),uD=qe({},Uf,{dataTransfer:0}),dD=Tn(uD),hD=qe({},_u,{relatedTarget:0}),mp=Tn(hD),fD=qe({},Qa,{animationName:0,elapsedTime:0,pseudoElement:0}),mD=Tn(fD),pD=qe({},Qa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),gD=Tn(pD),yD=qe({},Qa,{data:0}),zb=Tn(yD),vD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=wD[t])?!!e[t]:!1}function Hy(){return bD}var _D=qe({},_u,{key:function(t){if(t.key){var e=vD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=th(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?xD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hy,charCode:function(t){return t.type==="keypress"?th(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?th(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),kD=Tn(_D),ED=qe({},Uf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$b=Tn(ED),TD=qe({},_u,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hy}),SD=Tn(TD),ID=qe({},Qa,{propertyName:0,elapsedTime:0,pseudoElement:0}),CD=Tn(ID),PD=qe({},Uf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),AD=Tn(PD),ND=[9,13,27,32],qy=Jr&&"CompositionEvent"in window,nc=null;Jr&&"documentMode"in document&&(nc=document.documentMode);var RD=Jr&&"TextEvent"in window&&!nc,zS=Jr&&(!qy||nc&&8<nc&&11>=nc),Wb=" ",Hb=!1;function $S(t,e){switch(t){case"keyup":return ND.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function WS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fo=!1;function MD(t,e){switch(t){case"compositionend":return WS(e);case"keypress":return e.which!==32?null:(Hb=!0,Wb);case"textInput":return t=e.data,t===Wb&&Hb?null:t;default:return null}}function DD(t,e){if(Fo)return t==="compositionend"||!qy&&$S(t,e)?(t=BS(),eh=$y=Oi=null,Fo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return zS&&e.locale!=="ko"?null:e.data;default:return null}}var jD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!jD[t.type]:e==="textarea"}function HS(t,e,n,r){_S(r),e=Dh(e,"onChange"),0<e.length&&(n=new Wy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var rc=null,Rc=null;function OD(t){n2(t,0)}function Bf(t){var e=zo(t);if(pS(e))return t}function LD(t,e){if(t==="change")return e}var qS=!1;if(Jr){var pp;if(Jr){var gp="oninput"in document;if(!gp){var Kb=document.createElement("div");Kb.setAttribute("oninput","return;"),gp=typeof Kb.oninput=="function"}pp=gp}else pp=!1;qS=pp&&(!document.documentMode||9<document.documentMode)}function Gb(){rc&&(rc.detachEvent("onpropertychange",KS),Rc=rc=null)}function KS(t){if(t.propertyName==="value"&&Bf(Rc)){var e=[];HS(e,Rc,t,Vy(t)),SS(OD,e)}}function VD(t,e,n){t==="focusin"?(Gb(),rc=e,Rc=n,rc.attachEvent("onpropertychange",KS)):t==="focusout"&&Gb()}function FD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Bf(Rc)}function UD(t,e){if(t==="click")return Bf(e)}function BD(t,e){if(t==="input"||t==="change")return Bf(e)}function zD(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nr=typeof Object.is=="function"?Object.is:zD;function Mc(t,e){if(nr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!vg.call(e,i)||!nr(t[i],e[i]))return!1}return!0}function Qb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Yb(t,e){var n=Qb(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Qb(n)}}function GS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?GS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function QS(){for(var t=window,e=Ih();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ih(t.document)}return e}function Ky(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function $D(t){var e=QS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&GS(n.ownerDocument.documentElement,n)){if(r!==null&&Ky(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Yb(n,s);var o=Yb(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var WD=Jr&&"documentMode"in document&&11>=document.documentMode,Uo=null,Lg=null,ic=null,Vg=!1;function Xb(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Vg||Uo==null||Uo!==Ih(r)||(r=Uo,"selectionStart"in r&&Ky(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ic&&Mc(ic,r)||(ic=r,r=Dh(Lg,"onSelect"),0<r.length&&(e=new Wy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Uo)))}function vd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Bo={animationend:vd("Animation","AnimationEnd"),animationiteration:vd("Animation","AnimationIteration"),animationstart:vd("Animation","AnimationStart"),transitionend:vd("Transition","TransitionEnd")},yp={},YS={};Jr&&(YS=document.createElement("div").style,"AnimationEvent"in window||(delete Bo.animationend.animation,delete Bo.animationiteration.animation,delete Bo.animationstart.animation),"TransitionEvent"in window||delete Bo.transitionend.transition);function zf(t){if(yp[t])return yp[t];if(!Bo[t])return t;var e=Bo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in YS)return yp[t]=e[n];return t}var XS=zf("animationend"),JS=zf("animationiteration"),ZS=zf("animationstart"),e2=zf("transitionend"),t2=new Map,Jb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ds(t,e){t2.set(t,e),xo(e,[t])}for(var vp=0;vp<Jb.length;vp++){var xp=Jb[vp],HD=xp.toLowerCase(),qD=xp[0].toUpperCase()+xp.slice(1);ds(HD,"on"+qD)}ds(XS,"onAnimationEnd");ds(JS,"onAnimationIteration");ds(ZS,"onAnimationStart");ds("dblclick","onDoubleClick");ds("focusin","onFocus");ds("focusout","onBlur");ds(e2,"onTransitionEnd");Ia("onMouseEnter",["mouseout","mouseover"]);Ia("onMouseLeave",["mouseout","mouseover"]);Ia("onPointerEnter",["pointerout","pointerover"]);Ia("onPointerLeave",["pointerout","pointerover"]);xo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xo("onBeforeInput",["compositionend","keypress","textInput","paste"]);xo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ul="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ul));function Zb(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,HM(r,e,void 0,t),t.currentTarget=null}function n2(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Zb(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Zb(i,a,c),s=l}}}if(Ph)throw t=Mg,Ph=!1,Mg=null,t}function je(t,e){var n=e[$g];n===void 0&&(n=e[$g]=new Set);var r=t+"__bubble";n.has(r)||(r2(e,t,2,!1),n.add(r))}function wp(t,e,n){var r=0;e&&(r|=4),r2(n,t,r,e)}var xd="_reactListening"+Math.random().toString(36).slice(2);function Dc(t){if(!t[xd]){t[xd]=!0,uS.forEach(function(n){n!=="selectionchange"&&(KD.has(n)||wp(n,!1,t),wp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[xd]||(e[xd]=!0,wp("selectionchange",!1,e))}}function r2(t,e,n,r){switch(US(e)){case 1:var i=aD;break;case 4:i=lD;break;default:i=zy}n=i.bind(null,e,n,t),i=void 0,!Rg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function bp(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ms(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}SS(function(){var c=s,u=Vy(n),f=[];e:{var m=t2.get(t);if(m!==void 0){var p=Wy,y=t;switch(t){case"keypress":if(th(n)===0)break e;case"keydown":case"keyup":p=kD;break;case"focusin":y="focus",p=mp;break;case"focusout":y="blur",p=mp;break;case"beforeblur":case"afterblur":p=mp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Bb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=dD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=SD;break;case XS:case JS:case ZS:p=mD;break;case e2:p=CD;break;case"scroll":p=cD;break;case"wheel":p=AD;break;case"copy":case"cut":case"paste":p=gD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=$b}var x=(e&4)!==0,k=!x&&t==="scroll",v=x?m!==null?m+"Capture":null:m;x=[];for(var w=c,_;w!==null;){_=w;var P=_.stateNode;if(_.tag===5&&P!==null&&(_=P,v!==null&&(P=Cc(w,v),P!=null&&x.push(jc(w,P,_)))),k)break;w=w.return}0<x.length&&(m=new p(m,y,null,n,u),f.push({event:m,listeners:x}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",m&&n!==Ag&&(y=n.relatedTarget||n.fromElement)&&(Ms(y)||y[Zr]))break e;if((p||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,p?(y=n.relatedTarget||n.toElement,p=c,y=y?Ms(y):null,y!==null&&(k=wo(y),y!==k||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=c),p!==y)){if(x=Bb,P="onMouseLeave",v="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(x=$b,P="onPointerLeave",v="onPointerEnter",w="pointer"),k=p==null?m:zo(p),_=y==null?m:zo(y),m=new x(P,w+"leave",p,n,u),m.target=k,m.relatedTarget=_,P=null,Ms(u)===c&&(x=new x(v,w+"enter",y,n,u),x.target=_,x.relatedTarget=k,P=x),k=P,p&&y)t:{for(x=p,v=y,w=0,_=x;_;_=No(_))w++;for(_=0,P=v;P;P=No(P))_++;for(;0<w-_;)x=No(x),w--;for(;0<_-w;)v=No(v),_--;for(;w--;){if(x===v||v!==null&&x===v.alternate)break t;x=No(x),v=No(v)}x=null}else x=null;p!==null&&e_(f,m,p,x,!1),y!==null&&k!==null&&e_(f,k,y,x,!0)}}e:{if(m=c?zo(c):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var A=LD;else if(qb(m))if(qS)A=BD;else{A=FD;var N=VD}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(A=UD);if(A&&(A=A(t,c))){HS(f,A,n,u);break e}N&&N(t,m,c),t==="focusout"&&(N=m._wrapperState)&&N.controlled&&m.type==="number"&&Tg(m,"number",m.value)}switch(N=c?zo(c):window,t){case"focusin":(qb(N)||N.contentEditable==="true")&&(Uo=N,Lg=c,ic=null);break;case"focusout":ic=Lg=Uo=null;break;case"mousedown":Vg=!0;break;case"contextmenu":case"mouseup":case"dragend":Vg=!1,Xb(f,n,u);break;case"selectionchange":if(WD)break;case"keydown":case"keyup":Xb(f,n,u)}var T;if(qy)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Fo?$S(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(zS&&n.locale!=="ko"&&(Fo||E!=="onCompositionStart"?E==="onCompositionEnd"&&Fo&&(T=BS()):(Oi=u,$y="value"in Oi?Oi.value:Oi.textContent,Fo=!0)),N=Dh(c,E),0<N.length&&(E=new zb(E,t,null,n,u),f.push({event:E,listeners:N}),T?E.data=T:(T=WS(n),T!==null&&(E.data=T)))),(T=RD?MD(t,n):DD(t,n))&&(c=Dh(c,"onBeforeInput"),0<c.length&&(u=new zb("onBeforeInput","beforeinput",null,n,u),f.push({event:u,listeners:c}),u.data=T))}n2(f,e)})}function jc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Dh(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Cc(t,n),s!=null&&r.unshift(jc(t,s,i)),s=Cc(t,e),s!=null&&r.push(jc(t,s,i))),t=t.return}return r}function No(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function e_(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Cc(n,s),l!=null&&o.unshift(jc(n,l,a))):i||(l=Cc(n,s),l!=null&&o.push(jc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var GD=/\r\n?/g,QD=/\u0000|\uFFFD/g;function t_(t){return(typeof t=="string"?t:""+t).replace(GD,`
`).replace(QD,"")}function wd(t,e,n){if(e=t_(e),t_(t)!==e&&n)throw Error(z(425))}function jh(){}var Fg=null,Ug=null;function Bg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zg=typeof setTimeout=="function"?setTimeout:void 0,YD=typeof clearTimeout=="function"?clearTimeout:void 0,n_=typeof Promise=="function"?Promise:void 0,XD=typeof queueMicrotask=="function"?queueMicrotask:typeof n_<"u"?function(t){return n_.resolve(null).then(t).catch(JD)}:zg;function JD(t){setTimeout(function(){throw t})}function _p(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Nc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Nc(e)}function Wi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function r_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ya=Math.random().toString(36).slice(2),pr="__reactFiber$"+Ya,Oc="__reactProps$"+Ya,Zr="__reactContainer$"+Ya,$g="__reactEvents$"+Ya,ZD="__reactListeners$"+Ya,ej="__reactHandles$"+Ya;function Ms(t){var e=t[pr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Zr]||n[pr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=r_(t);t!==null;){if(n=t[pr])return n;t=r_(t)}return e}t=n,n=t.parentNode}return null}function ku(t){return t=t[pr]||t[Zr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function zo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function $f(t){return t[Oc]||null}var Wg=[],$o=-1;function hs(t){return{current:t}}function Ve(t){0>$o||(t.current=Wg[$o],Wg[$o]=null,$o--)}function Re(t,e){$o++,Wg[$o]=t.current,t.current=e}var is={},Ut=hs(is),hn=hs(!1),ro=is;function Ca(t,e){var n=t.type.contextTypes;if(!n)return is;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function fn(t){return t=t.childContextTypes,t!=null}function Oh(){Ve(hn),Ve(Ut)}function i_(t,e,n){if(Ut.current!==is)throw Error(z(168));Re(Ut,e),Re(hn,n)}function i2(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(z(108,VM(t)||"Unknown",i));return qe({},n,r)}function Lh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||is,ro=Ut.current,Re(Ut,t),Re(hn,hn.current),!0}function s_(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=i2(t,e,ro),r.__reactInternalMemoizedMergedChildContext=t,Ve(hn),Ve(Ut),Re(Ut,t)):Ve(hn),Re(hn,n)}var jr=null,Wf=!1,kp=!1;function s2(t){jr===null?jr=[t]:jr.push(t)}function tj(t){Wf=!0,s2(t)}function fs(){if(!kp&&jr!==null){kp=!0;var t=0,e=Ce;try{var n=jr;for(Ce=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}jr=null,Wf=!1}catch(i){throw jr!==null&&(jr=jr.slice(t+1)),AS(Fy,fs),i}finally{Ce=e,kp=!1}}return null}var Wo=[],Ho=0,Vh=null,Fh=0,Rn=[],Mn=0,io=null,Br=1,zr="";function Is(t,e){Wo[Ho++]=Fh,Wo[Ho++]=Vh,Vh=t,Fh=e}function o2(t,e,n){Rn[Mn++]=Br,Rn[Mn++]=zr,Rn[Mn++]=io,io=t;var r=Br;t=zr;var i=32-er(r)-1;r&=~(1<<i),n+=1;var s=32-er(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Br=1<<32-er(e)+i|n<<i|r,zr=s+t}else Br=1<<s|n<<i|r,zr=t}function Gy(t){t.return!==null&&(Is(t,1),o2(t,1,0))}function Qy(t){for(;t===Vh;)Vh=Wo[--Ho],Wo[Ho]=null,Fh=Wo[--Ho],Wo[Ho]=null;for(;t===io;)io=Rn[--Mn],Rn[Mn]=null,zr=Rn[--Mn],Rn[Mn]=null,Br=Rn[--Mn],Rn[Mn]=null}var bn=null,xn=null,Fe=!1,Jn=null;function a2(t,e){var n=Dn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function o_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,bn=t,xn=Wi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,bn=t,xn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=io!==null?{id:Br,overflow:zr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Dn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,bn=t,xn=null,!0):!1;default:return!1}}function Hg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function qg(t){if(Fe){var e=xn;if(e){var n=e;if(!o_(t,e)){if(Hg(t))throw Error(z(418));e=Wi(n.nextSibling);var r=bn;e&&o_(t,e)?a2(r,n):(t.flags=t.flags&-4097|2,Fe=!1,bn=t)}}else{if(Hg(t))throw Error(z(418));t.flags=t.flags&-4097|2,Fe=!1,bn=t}}}function a_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;bn=t}function bd(t){if(t!==bn)return!1;if(!Fe)return a_(t),Fe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Bg(t.type,t.memoizedProps)),e&&(e=xn)){if(Hg(t))throw l2(),Error(z(418));for(;e;)a2(t,e),e=Wi(e.nextSibling)}if(a_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){xn=Wi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}xn=null}}else xn=bn?Wi(t.stateNode.nextSibling):null;return!0}function l2(){for(var t=xn;t;)t=Wi(t.nextSibling)}function Pa(){xn=bn=null,Fe=!1}function Yy(t){Jn===null?Jn=[t]:Jn.push(t)}var nj=li.ReactCurrentBatchConfig;function Sl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function _d(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function l_(t){var e=t._init;return e(t._payload)}function c2(t){function e(v,w){if(t){var _=v.deletions;_===null?(v.deletions=[w],v.flags|=16):_.push(w)}}function n(v,w){if(!t)return null;for(;w!==null;)e(v,w),w=w.sibling;return null}function r(v,w){for(v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function i(v,w){return v=Gi(v,w),v.index=0,v.sibling=null,v}function s(v,w,_){return v.index=_,t?(_=v.alternate,_!==null?(_=_.index,_<w?(v.flags|=2,w):_):(v.flags|=2,w)):(v.flags|=1048576,w)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,w,_,P){return w===null||w.tag!==6?(w=Ap(_,v.mode,P),w.return=v,w):(w=i(w,_),w.return=v,w)}function l(v,w,_,P){var A=_.type;return A===Vo?u(v,w,_.props.children,P,_.key):w!==null&&(w.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===xi&&l_(A)===w.type)?(P=i(w,_.props),P.ref=Sl(v,w,_),P.return=v,P):(P=lh(_.type,_.key,_.props,null,v.mode,P),P.ref=Sl(v,w,_),P.return=v,P)}function c(v,w,_,P){return w===null||w.tag!==4||w.stateNode.containerInfo!==_.containerInfo||w.stateNode.implementation!==_.implementation?(w=Np(_,v.mode,P),w.return=v,w):(w=i(w,_.children||[]),w.return=v,w)}function u(v,w,_,P,A){return w===null||w.tag!==7?(w=Js(_,v.mode,P,A),w.return=v,w):(w=i(w,_),w.return=v,w)}function f(v,w,_){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Ap(""+w,v.mode,_),w.return=v,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case dd:return _=lh(w.type,w.key,w.props,null,v.mode,_),_.ref=Sl(v,null,w),_.return=v,_;case Lo:return w=Np(w,v.mode,_),w.return=v,w;case xi:var P=w._init;return f(v,P(w._payload),_)}if(Vl(w)||bl(w))return w=Js(w,v.mode,_,null),w.return=v,w;_d(v,w)}return null}function m(v,w,_,P){var A=w!==null?w.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return A!==null?null:a(v,w,""+_,P);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case dd:return _.key===A?l(v,w,_,P):null;case Lo:return _.key===A?c(v,w,_,P):null;case xi:return A=_._init,m(v,w,A(_._payload),P)}if(Vl(_)||bl(_))return A!==null?null:u(v,w,_,P,null);_d(v,_)}return null}function p(v,w,_,P,A){if(typeof P=="string"&&P!==""||typeof P=="number")return v=v.get(_)||null,a(w,v,""+P,A);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case dd:return v=v.get(P.key===null?_:P.key)||null,l(w,v,P,A);case Lo:return v=v.get(P.key===null?_:P.key)||null,c(w,v,P,A);case xi:var N=P._init;return p(v,w,_,N(P._payload),A)}if(Vl(P)||bl(P))return v=v.get(_)||null,u(w,v,P,A,null);_d(w,P)}return null}function y(v,w,_,P){for(var A=null,N=null,T=w,E=w=0,S=null;T!==null&&E<_.length;E++){T.index>E?(S=T,T=null):S=T.sibling;var C=m(v,T,_[E],P);if(C===null){T===null&&(T=S);break}t&&T&&C.alternate===null&&e(v,T),w=s(C,w,E),N===null?A=C:N.sibling=C,N=C,T=S}if(E===_.length)return n(v,T),Fe&&Is(v,E),A;if(T===null){for(;E<_.length;E++)T=f(v,_[E],P),T!==null&&(w=s(T,w,E),N===null?A=T:N.sibling=T,N=T);return Fe&&Is(v,E),A}for(T=r(v,T);E<_.length;E++)S=p(T,v,E,_[E],P),S!==null&&(t&&S.alternate!==null&&T.delete(S.key===null?E:S.key),w=s(S,w,E),N===null?A=S:N.sibling=S,N=S);return t&&T.forEach(function(M){return e(v,M)}),Fe&&Is(v,E),A}function x(v,w,_,P){var A=bl(_);if(typeof A!="function")throw Error(z(150));if(_=A.call(_),_==null)throw Error(z(151));for(var N=A=null,T=w,E=w=0,S=null,C=_.next();T!==null&&!C.done;E++,C=_.next()){T.index>E?(S=T,T=null):S=T.sibling;var M=m(v,T,C.value,P);if(M===null){T===null&&(T=S);break}t&&T&&M.alternate===null&&e(v,T),w=s(M,w,E),N===null?A=M:N.sibling=M,N=M,T=S}if(C.done)return n(v,T),Fe&&Is(v,E),A;if(T===null){for(;!C.done;E++,C=_.next())C=f(v,C.value,P),C!==null&&(w=s(C,w,E),N===null?A=C:N.sibling=C,N=C);return Fe&&Is(v,E),A}for(T=r(v,T);!C.done;E++,C=_.next())C=p(T,v,E,C.value,P),C!==null&&(t&&C.alternate!==null&&T.delete(C.key===null?E:C.key),w=s(C,w,E),N===null?A=C:N.sibling=C,N=C);return t&&T.forEach(function(D){return e(v,D)}),Fe&&Is(v,E),A}function k(v,w,_,P){if(typeof _=="object"&&_!==null&&_.type===Vo&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case dd:e:{for(var A=_.key,N=w;N!==null;){if(N.key===A){if(A=_.type,A===Vo){if(N.tag===7){n(v,N.sibling),w=i(N,_.props.children),w.return=v,v=w;break e}}else if(N.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===xi&&l_(A)===N.type){n(v,N.sibling),w=i(N,_.props),w.ref=Sl(v,N,_),w.return=v,v=w;break e}n(v,N);break}else e(v,N);N=N.sibling}_.type===Vo?(w=Js(_.props.children,v.mode,P,_.key),w.return=v,v=w):(P=lh(_.type,_.key,_.props,null,v.mode,P),P.ref=Sl(v,w,_),P.return=v,v=P)}return o(v);case Lo:e:{for(N=_.key;w!==null;){if(w.key===N)if(w.tag===4&&w.stateNode.containerInfo===_.containerInfo&&w.stateNode.implementation===_.implementation){n(v,w.sibling),w=i(w,_.children||[]),w.return=v,v=w;break e}else{n(v,w);break}else e(v,w);w=w.sibling}w=Np(_,v.mode,P),w.return=v,v=w}return o(v);case xi:return N=_._init,k(v,w,N(_._payload),P)}if(Vl(_))return y(v,w,_,P);if(bl(_))return x(v,w,_,P);_d(v,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,w!==null&&w.tag===6?(n(v,w.sibling),w=i(w,_),w.return=v,v=w):(n(v,w),w=Ap(_,v.mode,P),w.return=v,v=w),o(v)):n(v,w)}return k}var Aa=c2(!0),u2=c2(!1),Uh=hs(null),Bh=null,qo=null,Xy=null;function Jy(){Xy=qo=Bh=null}function Zy(t){var e=Uh.current;Ve(Uh),t._currentValue=e}function Kg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function oa(t,e){Bh=t,Xy=qo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(un=!0),t.firstContext=null)}function Un(t){var e=t._currentValue;if(Xy!==t)if(t={context:t,memoizedValue:e,next:null},qo===null){if(Bh===null)throw Error(z(308));qo=t,Bh.dependencies={lanes:0,firstContext:t}}else qo=qo.next=t;return e}var Ds=null;function ev(t){Ds===null?Ds=[t]:Ds.push(t)}function d2(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,ev(e)):(n.next=i.next,i.next=n),e.interleaved=n,ei(t,r)}function ei(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var wi=!1;function tv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function h2(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Gr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Hi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,_e&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ei(t,n)}return i=r.interleaved,i===null?(e.next=e,ev(r)):(e.next=i.next,i.next=e),r.interleaved=e,ei(t,n)}function nh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Uy(t,n)}}function c_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function zh(t,e,n,r){var i=t.updateQueue;wi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,u=c=l=null,a=s;do{var m=a.lane,p=a.eventTime;if((r&m)===m){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,x=a;switch(m=e,p=n,x.tag){case 1:if(y=x.payload,typeof y=="function"){f=y.call(p,f,m);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=x.payload,m=typeof y=="function"?y.call(p,f,m):y,m==null)break e;f=qe({},f,m);break e;case 2:wi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else p={eventTime:p,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=f):u=u.next=p,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(u===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);oo|=o,t.lanes=o,t.memoizedState=f}}function u_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(z(191,i));i.call(r)}}}var Eu={},vr=hs(Eu),Lc=hs(Eu),Vc=hs(Eu);function js(t){if(t===Eu)throw Error(z(174));return t}function nv(t,e){switch(Re(Vc,e),Re(Lc,t),Re(vr,Eu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ig(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ig(e,t)}Ve(vr),Re(vr,e)}function Na(){Ve(vr),Ve(Lc),Ve(Vc)}function f2(t){js(Vc.current);var e=js(vr.current),n=Ig(e,t.type);e!==n&&(Re(Lc,t),Re(vr,n))}function rv(t){Lc.current===t&&(Ve(vr),Ve(Lc))}var ze=hs(0);function $h(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ep=[];function iv(){for(var t=0;t<Ep.length;t++)Ep[t]._workInProgressVersionPrimary=null;Ep.length=0}var rh=li.ReactCurrentDispatcher,Tp=li.ReactCurrentBatchConfig,so=0,He=null,at=null,pt=null,Wh=!1,sc=!1,Fc=0,rj=0;function At(){throw Error(z(321))}function sv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!nr(t[n],e[n]))return!1;return!0}function ov(t,e,n,r,i,s){if(so=s,He=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,rh.current=t===null||t.memoizedState===null?aj:lj,t=n(r,i),sc){s=0;do{if(sc=!1,Fc=0,25<=s)throw Error(z(301));s+=1,pt=at=null,e.updateQueue=null,rh.current=cj,t=n(r,i)}while(sc)}if(rh.current=Hh,e=at!==null&&at.next!==null,so=0,pt=at=He=null,Wh=!1,e)throw Error(z(300));return t}function av(){var t=Fc!==0;return Fc=0,t}function cr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?He.memoizedState=pt=t:pt=pt.next=t,pt}function Bn(){if(at===null){var t=He.alternate;t=t!==null?t.memoizedState:null}else t=at.next;var e=pt===null?He.memoizedState:pt.next;if(e!==null)pt=e,at=t;else{if(t===null)throw Error(z(310));at=t,t={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},pt===null?He.memoizedState=pt=t:pt=pt.next=t}return pt}function Uc(t,e){return typeof e=="function"?e(t):e}function Sp(t){var e=Bn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=at,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((so&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,He.lanes|=u,oo|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,nr(r,e.memoizedState)||(un=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,He.lanes|=s,oo|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ip(t){var e=Bn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);nr(s,e.memoizedState)||(un=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function m2(){}function p2(t,e){var n=He,r=Bn(),i=e(),s=!nr(r.memoizedState,i);if(s&&(r.memoizedState=i,un=!0),r=r.queue,lv(v2.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||pt!==null&&pt.memoizedState.tag&1){if(n.flags|=2048,Bc(9,y2.bind(null,n,r,i,e),void 0,null),gt===null)throw Error(z(349));so&30||g2(n,e,i)}return i}function g2(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function y2(t,e,n,r){e.value=n,e.getSnapshot=r,x2(e)&&w2(t)}function v2(t,e,n){return n(function(){x2(e)&&w2(t)})}function x2(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!nr(t,n)}catch{return!0}}function w2(t){var e=ei(t,1);e!==null&&tr(e,t,1,-1)}function d_(t){var e=cr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uc,lastRenderedState:t},e.queue=t,t=t.dispatch=oj.bind(null,He,t),[e.memoizedState,t]}function Bc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function b2(){return Bn().memoizedState}function ih(t,e,n,r){var i=cr();He.flags|=t,i.memoizedState=Bc(1|e,n,void 0,r===void 0?null:r)}function Hf(t,e,n,r){var i=Bn();r=r===void 0?null:r;var s=void 0;if(at!==null){var o=at.memoizedState;if(s=o.destroy,r!==null&&sv(r,o.deps)){i.memoizedState=Bc(e,n,s,r);return}}He.flags|=t,i.memoizedState=Bc(1|e,n,s,r)}function h_(t,e){return ih(8390656,8,t,e)}function lv(t,e){return Hf(2048,8,t,e)}function _2(t,e){return Hf(4,2,t,e)}function k2(t,e){return Hf(4,4,t,e)}function E2(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function T2(t,e,n){return n=n!=null?n.concat([t]):null,Hf(4,4,E2.bind(null,e,t),n)}function cv(){}function S2(t,e){var n=Bn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function I2(t,e){var n=Bn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function C2(t,e,n){return so&21?(nr(n,e)||(n=MS(),He.lanes|=n,oo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,un=!0),t.memoizedState=n)}function ij(t,e){var n=Ce;Ce=n!==0&&4>n?n:4,t(!0);var r=Tp.transition;Tp.transition={};try{t(!1),e()}finally{Ce=n,Tp.transition=r}}function P2(){return Bn().memoizedState}function sj(t,e,n){var r=Ki(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},A2(t))N2(e,n);else if(n=d2(t,e,n,r),n!==null){var i=Jt();tr(n,t,r,i),R2(n,e,r)}}function oj(t,e,n){var r=Ki(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(A2(t))N2(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,nr(a,o)){var l=e.interleaved;l===null?(i.next=i,ev(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=d2(t,e,i,r),n!==null&&(i=Jt(),tr(n,t,r,i),R2(n,e,r))}}function A2(t){var e=t.alternate;return t===He||e!==null&&e===He}function N2(t,e){sc=Wh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function R2(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Uy(t,n)}}var Hh={readContext:Un,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useInsertionEffect:At,useLayoutEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useMutableSource:At,useSyncExternalStore:At,useId:At,unstable_isNewReconciler:!1},aj={readContext:Un,useCallback:function(t,e){return cr().memoizedState=[t,e===void 0?null:e],t},useContext:Un,useEffect:h_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ih(4194308,4,E2.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ih(4194308,4,t,e)},useInsertionEffect:function(t,e){return ih(4,2,t,e)},useMemo:function(t,e){var n=cr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=cr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=sj.bind(null,He,t),[r.memoizedState,t]},useRef:function(t){var e=cr();return t={current:t},e.memoizedState=t},useState:d_,useDebugValue:cv,useDeferredValue:function(t){return cr().memoizedState=t},useTransition:function(){var t=d_(!1),e=t[0];return t=ij.bind(null,t[1]),cr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=He,i=cr();if(Fe){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),gt===null)throw Error(z(349));so&30||g2(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,h_(v2.bind(null,r,s,t),[t]),r.flags|=2048,Bc(9,y2.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=cr(),e=gt.identifierPrefix;if(Fe){var n=zr,r=Br;n=(r&~(1<<32-er(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Fc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=rj++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},lj={readContext:Un,useCallback:S2,useContext:Un,useEffect:lv,useImperativeHandle:T2,useInsertionEffect:_2,useLayoutEffect:k2,useMemo:I2,useReducer:Sp,useRef:b2,useState:function(){return Sp(Uc)},useDebugValue:cv,useDeferredValue:function(t){var e=Bn();return C2(e,at.memoizedState,t)},useTransition:function(){var t=Sp(Uc)[0],e=Bn().memoizedState;return[t,e]},useMutableSource:m2,useSyncExternalStore:p2,useId:P2,unstable_isNewReconciler:!1},cj={readContext:Un,useCallback:S2,useContext:Un,useEffect:lv,useImperativeHandle:T2,useInsertionEffect:_2,useLayoutEffect:k2,useMemo:I2,useReducer:Ip,useRef:b2,useState:function(){return Ip(Uc)},useDebugValue:cv,useDeferredValue:function(t){var e=Bn();return at===null?e.memoizedState=t:C2(e,at.memoizedState,t)},useTransition:function(){var t=Ip(Uc)[0],e=Bn().memoizedState;return[t,e]},useMutableSource:m2,useSyncExternalStore:p2,useId:P2,unstable_isNewReconciler:!1};function Kn(t,e){if(t&&t.defaultProps){e=qe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Gg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:qe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var qf={isMounted:function(t){return(t=t._reactInternals)?wo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Jt(),i=Ki(t),s=Gr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Hi(t,s,i),e!==null&&(tr(e,t,i,r),nh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Jt(),i=Ki(t),s=Gr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Hi(t,s,i),e!==null&&(tr(e,t,i,r),nh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Jt(),r=Ki(t),i=Gr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Hi(t,i,r),e!==null&&(tr(e,t,r,n),nh(e,t,r))}};function f_(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Mc(n,r)||!Mc(i,s):!0}function M2(t,e,n){var r=!1,i=is,s=e.contextType;return typeof s=="object"&&s!==null?s=Un(s):(i=fn(e)?ro:Ut.current,r=e.contextTypes,s=(r=r!=null)?Ca(t,i):is),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=qf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function m_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&qf.enqueueReplaceState(e,e.state,null)}function Qg(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},tv(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Un(s):(s=fn(e)?ro:Ut.current,i.context=Ca(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Gg(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&qf.enqueueReplaceState(i,i.state,null),zh(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ra(t,e){try{var n="",r=e;do n+=LM(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Cp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Yg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var uj=typeof WeakMap=="function"?WeakMap:Map;function D2(t,e,n){n=Gr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Kh||(Kh=!0,o0=r),Yg(t,e)},n}function j2(t,e,n){n=Gr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Yg(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Yg(t,e),typeof r!="function"&&(qi===null?qi=new Set([this]):qi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function p_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new uj;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Ej.bind(null,t,e,n),e.then(t,t))}function g_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function y_(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Gr(-1,1),e.tag=2,Hi(n,e,1))),n.lanes|=1),t)}var dj=li.ReactCurrentOwner,un=!1;function Kt(t,e,n,r){e.child=t===null?u2(e,null,n,r):Aa(e,t.child,n,r)}function v_(t,e,n,r,i){n=n.render;var s=e.ref;return oa(e,i),r=ov(t,e,n,r,s,i),n=av(),t!==null&&!un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ti(t,e,i)):(Fe&&n&&Gy(e),e.flags|=1,Kt(t,e,r,i),e.child)}function x_(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!yv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,O2(t,e,s,r,i)):(t=lh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Mc,n(o,r)&&t.ref===e.ref)return ti(t,e,i)}return e.flags|=1,t=Gi(s,r),t.ref=e.ref,t.return=e,e.child=t}function O2(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Mc(s,r)&&t.ref===e.ref)if(un=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(un=!0);else return e.lanes=t.lanes,ti(t,e,i)}return Xg(t,e,n,r,i)}function L2(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Re(Go,yn),yn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Re(Go,yn),yn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Re(Go,yn),yn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Re(Go,yn),yn|=r;return Kt(t,e,i,n),e.child}function V2(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Xg(t,e,n,r,i){var s=fn(n)?ro:Ut.current;return s=Ca(e,s),oa(e,i),n=ov(t,e,n,r,s,i),r=av(),t!==null&&!un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ti(t,e,i)):(Fe&&r&&Gy(e),e.flags|=1,Kt(t,e,n,i),e.child)}function w_(t,e,n,r,i){if(fn(n)){var s=!0;Lh(e)}else s=!1;if(oa(e,i),e.stateNode===null)sh(t,e),M2(e,n,r),Qg(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Un(c):(c=fn(n)?ro:Ut.current,c=Ca(e,c));var u=n.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&m_(e,o,r,c),wi=!1;var m=e.memoizedState;o.state=m,zh(e,r,o,i),l=e.memoizedState,a!==r||m!==l||hn.current||wi?(typeof u=="function"&&(Gg(e,n,u,r),l=e.memoizedState),(a=wi||f_(e,n,a,r,m,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,h2(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Kn(e.type,a),o.props=c,f=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Un(l):(l=fn(n)?ro:Ut.current,l=Ca(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==l)&&m_(e,o,r,l),wi=!1,m=e.memoizedState,o.state=m,zh(e,r,o,i);var y=e.memoizedState;a!==f||m!==y||hn.current||wi?(typeof p=="function"&&(Gg(e,n,p,r),y=e.memoizedState),(c=wi||f_(e,n,c,r,m,y,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Jg(t,e,n,r,s,i)}function Jg(t,e,n,r,i,s){V2(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&s_(e,n,!1),ti(t,e,s);r=e.stateNode,dj.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Aa(e,t.child,null,s),e.child=Aa(e,null,a,s)):Kt(t,e,a,s),e.memoizedState=r.state,i&&s_(e,n,!0),e.child}function F2(t){var e=t.stateNode;e.pendingContext?i_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&i_(t,e.context,!1),nv(t,e.containerInfo)}function b_(t,e,n,r,i){return Pa(),Yy(i),e.flags|=256,Kt(t,e,n,r),e.child}var Zg={dehydrated:null,treeContext:null,retryLane:0};function e0(t){return{baseLanes:t,cachePool:null,transitions:null}}function U2(t,e,n){var r=e.pendingProps,i=ze.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Re(ze,i&1),t===null)return qg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Qf(o,r,0,null),t=Js(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=e0(n),e.memoizedState=Zg,t):uv(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return hj(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Gi(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Gi(a,s):(s=Js(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?e0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Zg,r}return s=t.child,t=s.sibling,r=Gi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function uv(t,e){return e=Qf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function kd(t,e,n,r){return r!==null&&Yy(r),Aa(e,t.child,null,n),t=uv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function hj(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Cp(Error(z(422))),kd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Qf({mode:"visible",children:r.children},i,0,null),s=Js(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Aa(e,t.child,null,o),e.child.memoizedState=e0(o),e.memoizedState=Zg,s);if(!(e.mode&1))return kd(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(z(419)),r=Cp(s,r,void 0),kd(t,e,o,r)}if(a=(o&t.childLanes)!==0,un||a){if(r=gt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ei(t,i),tr(r,t,i,-1))}return gv(),r=Cp(Error(z(421))),kd(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Tj.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,xn=Wi(i.nextSibling),bn=e,Fe=!0,Jn=null,t!==null&&(Rn[Mn++]=Br,Rn[Mn++]=zr,Rn[Mn++]=io,Br=t.id,zr=t.overflow,io=e),e=uv(e,r.children),e.flags|=4096,e)}function __(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Kg(t.return,e,n)}function Pp(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function B2(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Kt(t,e,r.children,n),r=ze.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&__(t,n,e);else if(t.tag===19)__(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Re(ze,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&$h(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Pp(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&$h(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Pp(e,!0,n,null,s);break;case"together":Pp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function sh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ti(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),oo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=Gi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Gi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function fj(t,e,n){switch(e.tag){case 3:F2(e),Pa();break;case 5:f2(e);break;case 1:fn(e.type)&&Lh(e);break;case 4:nv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Re(Uh,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Re(ze,ze.current&1),e.flags|=128,null):n&e.child.childLanes?U2(t,e,n):(Re(ze,ze.current&1),t=ti(t,e,n),t!==null?t.sibling:null);Re(ze,ze.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return B2(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Re(ze,ze.current),r)break;return null;case 22:case 23:return e.lanes=0,L2(t,e,n)}return ti(t,e,n)}var z2,t0,$2,W2;z2=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};t0=function(){};$2=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,js(vr.current);var s=null;switch(n){case"input":i=kg(t,i),r=kg(t,r),s=[];break;case"select":i=qe({},i,{value:void 0}),r=qe({},r,{value:void 0}),s=[];break;case"textarea":i=Sg(t,i),r=Sg(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=jh)}Cg(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Sc.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Sc.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&je("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};W2=function(t,e,n,r){n!==r&&(e.flags|=4)};function Il(t,e){if(!Fe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Nt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function mj(t,e,n){var r=e.pendingProps;switch(Qy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(e),null;case 1:return fn(e.type)&&Oh(),Nt(e),null;case 3:return r=e.stateNode,Na(),Ve(hn),Ve(Ut),iv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(bd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Jn!==null&&(c0(Jn),Jn=null))),t0(t,e),Nt(e),null;case 5:rv(e);var i=js(Vc.current);if(n=e.type,t!==null&&e.stateNode!=null)$2(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return Nt(e),null}if(t=js(vr.current),bd(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[pr]=e,r[Oc]=s,t=(e.mode&1)!==0,n){case"dialog":je("cancel",r),je("close",r);break;case"iframe":case"object":case"embed":je("load",r);break;case"video":case"audio":for(i=0;i<Ul.length;i++)je(Ul[i],r);break;case"source":je("error",r);break;case"img":case"image":case"link":je("error",r),je("load",r);break;case"details":je("toggle",r);break;case"input":Nb(r,s),je("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},je("invalid",r);break;case"textarea":Mb(r,s),je("invalid",r)}Cg(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&wd(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&wd(r.textContent,a,t),i=["children",""+a]):Sc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&je("scroll",r)}switch(n){case"input":hd(r),Rb(r,s,!0);break;case"textarea":hd(r),Db(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=jh)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=vS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[pr]=e,t[Oc]=r,z2(t,e,!1,!1),e.stateNode=t;e:{switch(o=Pg(n,r),n){case"dialog":je("cancel",t),je("close",t),i=r;break;case"iframe":case"object":case"embed":je("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ul.length;i++)je(Ul[i],t);i=r;break;case"source":je("error",t),i=r;break;case"img":case"image":case"link":je("error",t),je("load",t),i=r;break;case"details":je("toggle",t),i=r;break;case"input":Nb(t,r),i=kg(t,r),je("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=qe({},r,{value:void 0}),je("invalid",t);break;case"textarea":Mb(t,r),i=Sg(t,r),je("invalid",t);break;default:i=r}Cg(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?bS(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&xS(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ic(t,l):typeof l=="number"&&Ic(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Sc.hasOwnProperty(s)?l!=null&&s==="onScroll"&&je("scroll",t):l!=null&&Dy(t,s,l,o))}switch(n){case"input":hd(t),Rb(t,r,!1);break;case"textarea":hd(t),Db(t);break;case"option":r.value!=null&&t.setAttribute("value",""+rs(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?na(t,!!r.multiple,s,!1):r.defaultValue!=null&&na(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=jh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Nt(e),null;case 6:if(t&&e.stateNode!=null)W2(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=js(Vc.current),js(vr.current),bd(e)){if(r=e.stateNode,n=e.memoizedProps,r[pr]=e,(s=r.nodeValue!==n)&&(t=bn,t!==null))switch(t.tag){case 3:wd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&wd(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[pr]=e,e.stateNode=r}return Nt(e),null;case 13:if(Ve(ze),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Fe&&xn!==null&&e.mode&1&&!(e.flags&128))l2(),Pa(),e.flags|=98560,s=!1;else if(s=bd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(z(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(z(317));s[pr]=e}else Pa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Nt(e),s=!1}else Jn!==null&&(c0(Jn),Jn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ze.current&1?ut===0&&(ut=3):gv())),e.updateQueue!==null&&(e.flags|=4),Nt(e),null);case 4:return Na(),t0(t,e),t===null&&Dc(e.stateNode.containerInfo),Nt(e),null;case 10:return Zy(e.type._context),Nt(e),null;case 17:return fn(e.type)&&Oh(),Nt(e),null;case 19:if(Ve(ze),s=e.memoizedState,s===null)return Nt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Il(s,!1);else{if(ut!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=$h(t),o!==null){for(e.flags|=128,Il(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Re(ze,ze.current&1|2),e.child}t=t.sibling}s.tail!==null&&et()>Ma&&(e.flags|=128,r=!0,Il(s,!1),e.lanes=4194304)}else{if(!r)if(t=$h(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Il(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Fe)return Nt(e),null}else 2*et()-s.renderingStartTime>Ma&&n!==1073741824&&(e.flags|=128,r=!0,Il(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=et(),e.sibling=null,n=ze.current,Re(ze,r?n&1|2:n&1),e):(Nt(e),null);case 22:case 23:return pv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?yn&1073741824&&(Nt(e),e.subtreeFlags&6&&(e.flags|=8192)):Nt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function pj(t,e){switch(Qy(e),e.tag){case 1:return fn(e.type)&&Oh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Na(),Ve(hn),Ve(Ut),iv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return rv(e),null;case 13:if(Ve(ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));Pa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ve(ze),null;case 4:return Na(),null;case 10:return Zy(e.type._context),null;case 22:case 23:return pv(),null;case 24:return null;default:return null}}var Ed=!1,Ot=!1,gj=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Ko(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Xe(t,e,r)}else n.current=null}function n0(t,e,n){try{n()}catch(r){Xe(t,e,r)}}var k_=!1;function yj(t,e){if(Fg=Rh,t=QS(),Ky(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,f=t,m=null;t:for(;;){for(var p;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(p=f.firstChild)!==null;)m=f,f=p;for(;;){if(f===t)break t;if(m===n&&++c===i&&(a=o),m===s&&++u===r&&(l=o),(p=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ug={focusedElem:t,selectionRange:n},Rh=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var x=y.memoizedProps,k=y.memoizedState,v=e.stateNode,w=v.getSnapshotBeforeUpdate(e.elementType===e.type?x:Kn(e.type,x),k);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(P){Xe(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return y=k_,k_=!1,y}function oc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&n0(e,n,s)}i=i.next}while(i!==r)}}function Kf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function r0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function H2(t){var e=t.alternate;e!==null&&(t.alternate=null,H2(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[pr],delete e[Oc],delete e[$g],delete e[ZD],delete e[ej])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function q2(t){return t.tag===5||t.tag===3||t.tag===4}function E_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||q2(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function i0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=jh));else if(r!==4&&(t=t.child,t!==null))for(i0(t,e,n),t=t.sibling;t!==null;)i0(t,e,n),t=t.sibling}function s0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(s0(t,e,n),t=t.sibling;t!==null;)s0(t,e,n),t=t.sibling}var vt=null,Yn=!1;function mi(t,e,n){for(n=n.child;n!==null;)K2(t,e,n),n=n.sibling}function K2(t,e,n){if(yr&&typeof yr.onCommitFiberUnmount=="function")try{yr.onCommitFiberUnmount(Ff,n)}catch{}switch(n.tag){case 5:Ot||Ko(n,e);case 6:var r=vt,i=Yn;vt=null,mi(t,e,n),vt=r,Yn=i,vt!==null&&(Yn?(t=vt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):vt.removeChild(n.stateNode));break;case 18:vt!==null&&(Yn?(t=vt,n=n.stateNode,t.nodeType===8?_p(t.parentNode,n):t.nodeType===1&&_p(t,n),Nc(t)):_p(vt,n.stateNode));break;case 4:r=vt,i=Yn,vt=n.stateNode.containerInfo,Yn=!0,mi(t,e,n),vt=r,Yn=i;break;case 0:case 11:case 14:case 15:if(!Ot&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&n0(n,e,o),i=i.next}while(i!==r)}mi(t,e,n);break;case 1:if(!Ot&&(Ko(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Xe(n,e,a)}mi(t,e,n);break;case 21:mi(t,e,n);break;case 22:n.mode&1?(Ot=(r=Ot)||n.memoizedState!==null,mi(t,e,n),Ot=r):mi(t,e,n);break;default:mi(t,e,n)}}function T_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new gj),e.forEach(function(r){var i=Sj.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Hn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:vt=a.stateNode,Yn=!1;break e;case 3:vt=a.stateNode.containerInfo,Yn=!0;break e;case 4:vt=a.stateNode.containerInfo,Yn=!0;break e}a=a.return}if(vt===null)throw Error(z(160));K2(s,o,i),vt=null,Yn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Xe(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)G2(e,t),e=e.sibling}function G2(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Hn(e,t),or(t),r&4){try{oc(3,t,t.return),Kf(3,t)}catch(x){Xe(t,t.return,x)}try{oc(5,t,t.return)}catch(x){Xe(t,t.return,x)}}break;case 1:Hn(e,t),or(t),r&512&&n!==null&&Ko(n,n.return);break;case 5:if(Hn(e,t),or(t),r&512&&n!==null&&Ko(n,n.return),t.flags&32){var i=t.stateNode;try{Ic(i,"")}catch(x){Xe(t,t.return,x)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&gS(i,s),Pg(a,o);var c=Pg(a,s);for(o=0;o<l.length;o+=2){var u=l[o],f=l[o+1];u==="style"?bS(i,f):u==="dangerouslySetInnerHTML"?xS(i,f):u==="children"?Ic(i,f):Dy(i,u,f,c)}switch(a){case"input":Eg(i,s);break;case"textarea":yS(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?na(i,!!s.multiple,p,!1):m!==!!s.multiple&&(s.defaultValue!=null?na(i,!!s.multiple,s.defaultValue,!0):na(i,!!s.multiple,s.multiple?[]:"",!1))}i[Oc]=s}catch(x){Xe(t,t.return,x)}}break;case 6:if(Hn(e,t),or(t),r&4){if(t.stateNode===null)throw Error(z(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(x){Xe(t,t.return,x)}}break;case 3:if(Hn(e,t),or(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Nc(e.containerInfo)}catch(x){Xe(t,t.return,x)}break;case 4:Hn(e,t),or(t);break;case 13:Hn(e,t),or(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(fv=et())),r&4&&T_(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Ot=(c=Ot)||u,Hn(e,t),Ot=c):Hn(e,t),or(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Y=t,u=t.child;u!==null;){for(f=Y=u;Y!==null;){switch(m=Y,p=m.child,m.tag){case 0:case 11:case 14:case 15:oc(4,m,m.return);break;case 1:Ko(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(x){Xe(r,n,x)}}break;case 5:Ko(m,m.return);break;case 22:if(m.memoizedState!==null){I_(f);continue}}p!==null?(p.return=m,Y=p):I_(f)}u=u.sibling}e:for(u=null,f=t;;){if(f.tag===5){if(u===null){u=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=wS("display",o))}catch(x){Xe(t,t.return,x)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(x){Xe(t,t.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Hn(e,t),or(t),r&4&&T_(t);break;case 21:break;default:Hn(e,t),or(t)}}function or(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(q2(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ic(i,""),r.flags&=-33);var s=E_(t);s0(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=E_(t);i0(t,a,o);break;default:throw Error(z(161))}}catch(l){Xe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function vj(t,e,n){Y=t,Q2(t)}function Q2(t,e,n){for(var r=(t.mode&1)!==0;Y!==null;){var i=Y,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Ed;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ot;a=Ed;var c=Ot;if(Ed=o,(Ot=l)&&!c)for(Y=i;Y!==null;)o=Y,l=o.child,o.tag===22&&o.memoizedState!==null?C_(i):l!==null?(l.return=o,Y=l):C_(i);for(;s!==null;)Y=s,Q2(s),s=s.sibling;Y=i,Ed=a,Ot=c}S_(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Y=s):S_(t)}}function S_(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ot||Kf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ot)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Kn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&u_(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}u_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&Nc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Ot||e.flags&512&&r0(e)}catch(m){Xe(e,e.return,m)}}if(e===t){Y=null;break}if(n=e.sibling,n!==null){n.return=e.return,Y=n;break}Y=e.return}}function I_(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Y=n;break}Y=e.return}}function C_(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Kf(4,e)}catch(l){Xe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Xe(e,i,l)}}var s=e.return;try{r0(e)}catch(l){Xe(e,s,l)}break;case 5:var o=e.return;try{r0(e)}catch(l){Xe(e,o,l)}}}catch(l){Xe(e,e.return,l)}if(e===t){Y=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Y=a;break}Y=e.return}}var xj=Math.ceil,qh=li.ReactCurrentDispatcher,dv=li.ReactCurrentOwner,Ln=li.ReactCurrentBatchConfig,_e=0,gt=null,st=null,_t=0,yn=0,Go=hs(0),ut=0,zc=null,oo=0,Gf=0,hv=0,ac=null,an=null,fv=0,Ma=1/0,Dr=null,Kh=!1,o0=null,qi=null,Td=!1,Li=null,Gh=0,lc=0,a0=null,oh=-1,ah=0;function Jt(){return _e&6?et():oh!==-1?oh:oh=et()}function Ki(t){return t.mode&1?_e&2&&_t!==0?_t&-_t:nj.transition!==null?(ah===0&&(ah=MS()),ah):(t=Ce,t!==0||(t=window.event,t=t===void 0?16:US(t.type)),t):1}function tr(t,e,n,r){if(50<lc)throw lc=0,a0=null,Error(z(185));bu(t,n,r),(!(_e&2)||t!==gt)&&(t===gt&&(!(_e&2)&&(Gf|=n),ut===4&&_i(t,_t)),mn(t,r),n===1&&_e===0&&!(e.mode&1)&&(Ma=et()+500,Wf&&fs()))}function mn(t,e){var n=t.callbackNode;nD(t,e);var r=Nh(t,t===gt?_t:0);if(r===0)n!==null&&Lb(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Lb(n),e===1)t.tag===0?tj(P_.bind(null,t)):s2(P_.bind(null,t)),XD(function(){!(_e&6)&&fs()}),n=null;else{switch(DS(r)){case 1:n=Fy;break;case 4:n=NS;break;case 16:n=Ah;break;case 536870912:n=RS;break;default:n=Ah}n=rI(n,Y2.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Y2(t,e){if(oh=-1,ah=0,_e&6)throw Error(z(327));var n=t.callbackNode;if(aa()&&t.callbackNode!==n)return null;var r=Nh(t,t===gt?_t:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Qh(t,r);else{e=r;var i=_e;_e|=2;var s=J2();(gt!==t||_t!==e)&&(Dr=null,Ma=et()+500,Xs(t,e));do try{_j();break}catch(a){X2(t,a)}while(!0);Jy(),qh.current=s,_e=i,st!==null?e=0:(gt=null,_t=0,e=ut)}if(e!==0){if(e===2&&(i=Dg(t),i!==0&&(r=i,e=l0(t,i))),e===1)throw n=zc,Xs(t,0),_i(t,r),mn(t,et()),n;if(e===6)_i(t,r);else{if(i=t.current.alternate,!(r&30)&&!wj(i)&&(e=Qh(t,r),e===2&&(s=Dg(t),s!==0&&(r=s,e=l0(t,s))),e===1))throw n=zc,Xs(t,0),_i(t,r),mn(t,et()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:Cs(t,an,Dr);break;case 3:if(_i(t,r),(r&130023424)===r&&(e=fv+500-et(),10<e)){if(Nh(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Jt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=zg(Cs.bind(null,t,an,Dr),e);break}Cs(t,an,Dr);break;case 4:if(_i(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-er(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=et()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xj(r/1960))-r,10<r){t.timeoutHandle=zg(Cs.bind(null,t,an,Dr),r);break}Cs(t,an,Dr);break;case 5:Cs(t,an,Dr);break;default:throw Error(z(329))}}}return mn(t,et()),t.callbackNode===n?Y2.bind(null,t):null}function l0(t,e){var n=ac;return t.current.memoizedState.isDehydrated&&(Xs(t,e).flags|=256),t=Qh(t,e),t!==2&&(e=an,an=n,e!==null&&c0(e)),t}function c0(t){an===null?an=t:an.push.apply(an,t)}function wj(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!nr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function _i(t,e){for(e&=~hv,e&=~Gf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-er(e),r=1<<n;t[n]=-1,e&=~r}}function P_(t){if(_e&6)throw Error(z(327));aa();var e=Nh(t,0);if(!(e&1))return mn(t,et()),null;var n=Qh(t,e);if(t.tag!==0&&n===2){var r=Dg(t);r!==0&&(e=r,n=l0(t,r))}if(n===1)throw n=zc,Xs(t,0),_i(t,e),mn(t,et()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Cs(t,an,Dr),mn(t,et()),null}function mv(t,e){var n=_e;_e|=1;try{return t(e)}finally{_e=n,_e===0&&(Ma=et()+500,Wf&&fs())}}function ao(t){Li!==null&&Li.tag===0&&!(_e&6)&&aa();var e=_e;_e|=1;var n=Ln.transition,r=Ce;try{if(Ln.transition=null,Ce=1,t)return t()}finally{Ce=r,Ln.transition=n,_e=e,!(_e&6)&&fs()}}function pv(){yn=Go.current,Ve(Go)}function Xs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,YD(n)),st!==null)for(n=st.return;n!==null;){var r=n;switch(Qy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Oh();break;case 3:Na(),Ve(hn),Ve(Ut),iv();break;case 5:rv(r);break;case 4:Na();break;case 13:Ve(ze);break;case 19:Ve(ze);break;case 10:Zy(r.type._context);break;case 22:case 23:pv()}n=n.return}if(gt=t,st=t=Gi(t.current,null),_t=yn=e,ut=0,zc=null,hv=Gf=oo=0,an=ac=null,Ds!==null){for(e=0;e<Ds.length;e++)if(n=Ds[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ds=null}return t}function X2(t,e){do{var n=st;try{if(Jy(),rh.current=Hh,Wh){for(var r=He.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Wh=!1}if(so=0,pt=at=He=null,sc=!1,Fc=0,dv.current=null,n===null||n.return===null){ut=1,zc=e,st=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=_t,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=g_(o);if(p!==null){p.flags&=-257,y_(p,o,a,s,e),p.mode&1&&p_(s,c,e),e=p,l=c;var y=e.updateQueue;if(y===null){var x=new Set;x.add(l),e.updateQueue=x}else y.add(l);break e}else{if(!(e&1)){p_(s,c,e),gv();break e}l=Error(z(426))}}else if(Fe&&a.mode&1){var k=g_(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),y_(k,o,a,s,e),Yy(Ra(l,a));break e}}s=l=Ra(l,a),ut!==4&&(ut=2),ac===null?ac=[s]:ac.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=D2(s,l,e);c_(s,v);break e;case 1:a=l;var w=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(qi===null||!qi.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var P=j2(s,a,e);c_(s,P);break e}}s=s.return}while(s!==null)}eI(n)}catch(A){e=A,st===n&&n!==null&&(st=n=n.return);continue}break}while(!0)}function J2(){var t=qh.current;return qh.current=Hh,t===null?Hh:t}function gv(){(ut===0||ut===3||ut===2)&&(ut=4),gt===null||!(oo&268435455)&&!(Gf&268435455)||_i(gt,_t)}function Qh(t,e){var n=_e;_e|=2;var r=J2();(gt!==t||_t!==e)&&(Dr=null,Xs(t,e));do try{bj();break}catch(i){X2(t,i)}while(!0);if(Jy(),_e=n,qh.current=r,st!==null)throw Error(z(261));return gt=null,_t=0,ut}function bj(){for(;st!==null;)Z2(st)}function _j(){for(;st!==null&&!KM();)Z2(st)}function Z2(t){var e=nI(t.alternate,t,yn);t.memoizedProps=t.pendingProps,e===null?eI(t):st=e,dv.current=null}function eI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=pj(n,e),n!==null){n.flags&=32767,st=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ut=6,st=null;return}}else if(n=mj(n,e,yn),n!==null){st=n;return}if(e=e.sibling,e!==null){st=e;return}st=e=t}while(e!==null);ut===0&&(ut=5)}function Cs(t,e,n){var r=Ce,i=Ln.transition;try{Ln.transition=null,Ce=1,kj(t,e,n,r)}finally{Ln.transition=i,Ce=r}return null}function kj(t,e,n,r){do aa();while(Li!==null);if(_e&6)throw Error(z(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(rD(t,s),t===gt&&(st=gt=null,_t=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Td||(Td=!0,rI(Ah,function(){return aa(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ln.transition,Ln.transition=null;var o=Ce;Ce=1;var a=_e;_e|=4,dv.current=null,yj(t,n),G2(n,t),$D(Ug),Rh=!!Fg,Ug=Fg=null,t.current=n,vj(n),GM(),_e=a,Ce=o,Ln.transition=s}else t.current=n;if(Td&&(Td=!1,Li=t,Gh=i),s=t.pendingLanes,s===0&&(qi=null),XM(n.stateNode),mn(t,et()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Kh)throw Kh=!1,t=o0,o0=null,t;return Gh&1&&t.tag!==0&&aa(),s=t.pendingLanes,s&1?t===a0?lc++:(lc=0,a0=t):lc=0,fs(),null}function aa(){if(Li!==null){var t=DS(Gh),e=Ln.transition,n=Ce;try{if(Ln.transition=null,Ce=16>t?16:t,Li===null)var r=!1;else{if(t=Li,Li=null,Gh=0,_e&6)throw Error(z(331));var i=_e;for(_e|=4,Y=t.current;Y!==null;){var s=Y,o=s.child;if(Y.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Y=c;Y!==null;){var u=Y;switch(u.tag){case 0:case 11:case 15:oc(8,u,s)}var f=u.child;if(f!==null)f.return=u,Y=f;else for(;Y!==null;){u=Y;var m=u.sibling,p=u.return;if(H2(u),u===c){Y=null;break}if(m!==null){m.return=p,Y=m;break}Y=p}}}var y=s.alternate;if(y!==null){var x=y.child;if(x!==null){y.child=null;do{var k=x.sibling;x.sibling=null,x=k}while(x!==null)}}Y=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Y=o;else e:for(;Y!==null;){if(s=Y,s.flags&2048)switch(s.tag){case 0:case 11:case 15:oc(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Y=v;break e}Y=s.return}}var w=t.current;for(Y=w;Y!==null;){o=Y;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,Y=_;else e:for(o=w;Y!==null;){if(a=Y,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Kf(9,a)}}catch(A){Xe(a,a.return,A)}if(a===o){Y=null;break e}var P=a.sibling;if(P!==null){P.return=a.return,Y=P;break e}Y=a.return}}if(_e=i,fs(),yr&&typeof yr.onPostCommitFiberRoot=="function")try{yr.onPostCommitFiberRoot(Ff,t)}catch{}r=!0}return r}finally{Ce=n,Ln.transition=e}}return!1}function A_(t,e,n){e=Ra(n,e),e=D2(t,e,1),t=Hi(t,e,1),e=Jt(),t!==null&&(bu(t,1,e),mn(t,e))}function Xe(t,e,n){if(t.tag===3)A_(t,t,n);else for(;e!==null;){if(e.tag===3){A_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qi===null||!qi.has(r))){t=Ra(n,t),t=j2(e,t,1),e=Hi(e,t,1),t=Jt(),e!==null&&(bu(e,1,t),mn(e,t));break}}e=e.return}}function Ej(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Jt(),t.pingedLanes|=t.suspendedLanes&n,gt===t&&(_t&n)===n&&(ut===4||ut===3&&(_t&130023424)===_t&&500>et()-fv?Xs(t,0):hv|=n),mn(t,e)}function tI(t,e){e===0&&(t.mode&1?(e=pd,pd<<=1,!(pd&130023424)&&(pd=4194304)):e=1);var n=Jt();t=ei(t,e),t!==null&&(bu(t,e,n),mn(t,n))}function Tj(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),tI(t,n)}function Sj(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),tI(t,n)}var nI;nI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||hn.current)un=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return un=!1,fj(t,e,n);un=!!(t.flags&131072)}else un=!1,Fe&&e.flags&1048576&&o2(e,Fh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;sh(t,e),t=e.pendingProps;var i=Ca(e,Ut.current);oa(e,n),i=ov(null,e,r,t,i,n);var s=av();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,fn(r)?(s=!0,Lh(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,tv(e),i.updater=qf,e.stateNode=i,i._reactInternals=e,Qg(e,r,t,n),e=Jg(null,e,r,!0,s,n)):(e.tag=0,Fe&&s&&Gy(e),Kt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(sh(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Cj(r),t=Kn(r,t),i){case 0:e=Xg(null,e,r,t,n);break e;case 1:e=w_(null,e,r,t,n);break e;case 11:e=v_(null,e,r,t,n);break e;case 14:e=x_(null,e,r,Kn(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kn(r,i),Xg(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kn(r,i),w_(t,e,r,i,n);case 3:e:{if(F2(e),t===null)throw Error(z(387));r=e.pendingProps,s=e.memoizedState,i=s.element,h2(t,e),zh(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ra(Error(z(423)),e),e=b_(t,e,r,n,i);break e}else if(r!==i){i=Ra(Error(z(424)),e),e=b_(t,e,r,n,i);break e}else for(xn=Wi(e.stateNode.containerInfo.firstChild),bn=e,Fe=!0,Jn=null,n=u2(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Pa(),r===i){e=ti(t,e,n);break e}Kt(t,e,r,n)}e=e.child}return e;case 5:return f2(e),t===null&&qg(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Bg(r,i)?o=null:s!==null&&Bg(r,s)&&(e.flags|=32),V2(t,e),Kt(t,e,o,n),e.child;case 6:return t===null&&qg(e),null;case 13:return U2(t,e,n);case 4:return nv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Aa(e,null,r,n):Kt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kn(r,i),v_(t,e,r,i,n);case 7:return Kt(t,e,e.pendingProps,n),e.child;case 8:return Kt(t,e,e.pendingProps.children,n),e.child;case 12:return Kt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Re(Uh,r._currentValue),r._currentValue=o,s!==null)if(nr(s.value,o)){if(s.children===i.children&&!hn.current){e=ti(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Gr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Kg(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(z(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Kg(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Kt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,oa(e,n),i=Un(i),r=r(i),e.flags|=1,Kt(t,e,r,n),e.child;case 14:return r=e.type,i=Kn(r,e.pendingProps),i=Kn(r.type,i),x_(t,e,r,i,n);case 15:return O2(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kn(r,i),sh(t,e),e.tag=1,fn(r)?(t=!0,Lh(e)):t=!1,oa(e,n),M2(e,r,i),Qg(e,r,i,n),Jg(null,e,r,!0,t,n);case 19:return B2(t,e,n);case 22:return L2(t,e,n)}throw Error(z(156,e.tag))};function rI(t,e){return AS(t,e)}function Ij(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(t,e,n,r){return new Ij(t,e,n,r)}function yv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Cj(t){if(typeof t=="function")return yv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Oy)return 11;if(t===Ly)return 14}return 2}function Gi(t,e){var n=t.alternate;return n===null?(n=Dn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function lh(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")yv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Vo:return Js(n.children,i,s,e);case jy:o=8,i|=8;break;case xg:return t=Dn(12,n,e,i|2),t.elementType=xg,t.lanes=s,t;case wg:return t=Dn(13,n,e,i),t.elementType=wg,t.lanes=s,t;case bg:return t=Dn(19,n,e,i),t.elementType=bg,t.lanes=s,t;case fS:return Qf(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case dS:o=10;break e;case hS:o=9;break e;case Oy:o=11;break e;case Ly:o=14;break e;case xi:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=Dn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Js(t,e,n,r){return t=Dn(7,t,r,e),t.lanes=n,t}function Qf(t,e,n,r){return t=Dn(22,t,r,e),t.elementType=fS,t.lanes=n,t.stateNode={isHidden:!1},t}function Ap(t,e,n){return t=Dn(6,t,null,e),t.lanes=n,t}function Np(t,e,n){return e=Dn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Pj(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dp(0),this.expirationTimes=dp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function vv(t,e,n,r,i,s,o,a,l){return t=new Pj(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Dn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},tv(s),t}function Aj(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Lo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function iI(t){if(!t)return is;t=t._reactInternals;e:{if(wo(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(fn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(fn(n))return i2(t,n,e)}return e}function sI(t,e,n,r,i,s,o,a,l){return t=vv(n,r,!0,t,i,s,o,a,l),t.context=iI(null),n=t.current,r=Jt(),i=Ki(n),s=Gr(r,i),s.callback=e??null,Hi(n,s,i),t.current.lanes=i,bu(t,i,r),mn(t,r),t}function Yf(t,e,n,r){var i=e.current,s=Jt(),o=Ki(i);return n=iI(n),e.context===null?e.context=n:e.pendingContext=n,e=Gr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Hi(i,e,o),t!==null&&(tr(t,i,o,s),nh(t,i,o)),o}function Yh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function N_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function xv(t,e){N_(t,e),(t=t.alternate)&&N_(t,e)}function Nj(){return null}var oI=typeof reportError=="function"?reportError:function(t){console.error(t)};function wv(t){this._internalRoot=t}Xf.prototype.render=wv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Yf(t,e,null,null)};Xf.prototype.unmount=wv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ao(function(){Yf(null,t,null,null)}),e[Zr]=null}};function Xf(t){this._internalRoot=t}Xf.prototype.unstable_scheduleHydration=function(t){if(t){var e=LS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<bi.length&&e!==0&&e<bi[n].priority;n++);bi.splice(n,0,t),n===0&&FS(t)}};function bv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Jf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function R_(){}function Rj(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Yh(o);s.call(c)}}var o=sI(e,r,t,0,null,!1,!1,"",R_);return t._reactRootContainer=o,t[Zr]=o.current,Dc(t.nodeType===8?t.parentNode:t),ao(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Yh(l);a.call(c)}}var l=vv(t,0,!1,null,null,!1,!1,"",R_);return t._reactRootContainer=l,t[Zr]=l.current,Dc(t.nodeType===8?t.parentNode:t),ao(function(){Yf(e,l,n,r)}),l}function Zf(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Yh(o);a.call(l)}}Yf(e,o,t,i)}else o=Rj(n,e,t,i,r);return Yh(o)}jS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Fl(e.pendingLanes);n!==0&&(Uy(e,n|1),mn(e,et()),!(_e&6)&&(Ma=et()+500,fs()))}break;case 13:ao(function(){var r=ei(t,1);if(r!==null){var i=Jt();tr(r,t,1,i)}}),xv(t,1)}};By=function(t){if(t.tag===13){var e=ei(t,134217728);if(e!==null){var n=Jt();tr(e,t,134217728,n)}xv(t,134217728)}};OS=function(t){if(t.tag===13){var e=Ki(t),n=ei(t,e);if(n!==null){var r=Jt();tr(n,t,e,r)}xv(t,e)}};LS=function(){return Ce};VS=function(t,e){var n=Ce;try{return Ce=t,e()}finally{Ce=n}};Ng=function(t,e,n){switch(e){case"input":if(Eg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=$f(r);if(!i)throw Error(z(90));pS(r),Eg(r,i)}}}break;case"textarea":yS(t,n);break;case"select":e=n.value,e!=null&&na(t,!!n.multiple,e,!1)}};ES=mv;TS=ao;var Mj={usingClientEntryPoint:!1,Events:[ku,zo,$f,_S,kS,mv]},Cl={findFiberByHostInstance:Ms,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Dj={bundleType:Cl.bundleType,version:Cl.version,rendererPackageName:Cl.rendererPackageName,rendererConfig:Cl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:li.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=CS(t),t===null?null:t.stateNode},findFiberByHostInstance:Cl.findFiberByHostInstance||Nj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sd.isDisabled&&Sd.supportsFiber)try{Ff=Sd.inject(Dj),yr=Sd}catch{}}En.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mj;En.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bv(e))throw Error(z(200));return Aj(t,e,null,n)};En.createRoot=function(t,e){if(!bv(t))throw Error(z(299));var n=!1,r="",i=oI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=vv(t,1,!1,null,null,n,!1,r,i),t[Zr]=e.current,Dc(t.nodeType===8?t.parentNode:t),new wv(e)};En.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=CS(e),t=t===null?null:t.stateNode,t};En.flushSync=function(t){return ao(t)};En.hydrate=function(t,e,n){if(!Jf(e))throw Error(z(200));return Zf(null,t,e,!0,n)};En.hydrateRoot=function(t,e,n){if(!bv(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=oI;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=sI(e,null,t,1,n??null,i,!1,s,o),t[Zr]=e.current,Dc(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Xf(e)};En.render=function(t,e,n){if(!Jf(e))throw Error(z(200));return Zf(null,t,e,!1,n)};En.unmountComponentAtNode=function(t){if(!Jf(t))throw Error(z(40));return t._reactRootContainer?(ao(function(){Zf(null,null,t,!1,function(){t._reactRootContainer=null,t[Zr]=null})}),!0):!1};En.unstable_batchedUpdates=mv;En.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Jf(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Zf(t,e,n,!1,r)};En.version="18.3.1-next-f1338f8080-20240426";function aI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(aI)}catch(t){console.error(t)}}aI(),aS.exports=En;var jj=aS.exports,M_=jj;yg.createRoot=M_.createRoot,yg.hydrateRoot=M_.hydrateRoot;var Xa=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Oj={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Ii,Iy,FT,Lj=(FT=class{constructor(){te(this,Ii,Oj);te(this,Iy,!1)}setTimeoutProvider(t){q(this,Ii,t)}setTimeout(t,e){return j(this,Ii).setTimeout(t,e)}clearTimeout(t){j(this,Ii).clearTimeout(t)}setInterval(t,e){return j(this,Ii).setInterval(t,e)}clearInterval(t){j(this,Ii).clearInterval(t)}},Ii=new WeakMap,Iy=new WeakMap,FT),Os=new Lj;function Vj(t){setTimeout(t,0)}var lo=typeof window>"u"||"Deno"in globalThis;function Gt(){}function Fj(t,e){return typeof t=="function"?t(e):t}function u0(t){return typeof t=="number"&&t>=0&&t!==1/0}function lI(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Qi(t,e){return typeof t=="function"?t(e):t}function Nn(t,e){return typeof t=="function"?t(e):t}function D_(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==_v(o,e.options))return!1}else if(!$c(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function j_(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(co(e.options.mutationKey)!==co(s))return!1}else if(!$c(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function _v(t,e){return((e==null?void 0:e.queryKeyHashFn)||co)(t)}function co(t){return JSON.stringify(t,(e,n)=>d0(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function $c(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>$c(t[n],e[n])):!1}var Uj=Object.prototype.hasOwnProperty;function cI(t,e){if(t===e)return t;const n=O_(t)&&O_(e);if(!n&&!(d0(t)&&d0(e)))return e;const i=(n?t:Object.keys(t)).length,s=n?e:Object.keys(e),o=s.length,a=n?new Array(o):{};let l=0;for(let c=0;c<o;c++){const u=n?c:s[c],f=t[u],m=e[u];if(f===m){a[u]=f,(n?c<i:Uj.call(t,u))&&l++;continue}if(f===null||m===null||typeof f!="object"||typeof m!="object"){a[u]=m;continue}const p=cI(f,m);a[u]=p,p===f&&l++}return i===o&&l===i?t:a}function Xh(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function O_(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function d0(t){if(!L_(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!L_(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function L_(t){return Object.prototype.toString.call(t)==="[object Object]"}function Bj(t){return new Promise(e=>{Os.setTimeout(e,t)})}function h0(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?cI(t,e):e}function zj(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function $j(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var kv=Symbol();function uI(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===kv?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function dI(t,e){return typeof t=="function"?t(...e):!!t}var zs,Ci,pa,UT,Wj=(UT=class extends Xa{constructor(){super();te(this,zs);te(this,Ci);te(this,pa);q(this,pa,e=>{if(!lo&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){j(this,Ci)||this.setEventListener(j(this,pa))}onUnsubscribe(){var e;this.hasListeners()||((e=j(this,Ci))==null||e.call(this),q(this,Ci,void 0))}setEventListener(e){var n;q(this,pa,e),(n=j(this,Ci))==null||n.call(this),q(this,Ci,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){j(this,zs)!==e&&(q(this,zs,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof j(this,zs)=="boolean"?j(this,zs):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},zs=new WeakMap,Ci=new WeakMap,pa=new WeakMap,UT),Ev=new Wj;function f0(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}var Hj=Vj;function qj(){let t=[],e=0,n=a=>{a()},r=a=>{a()},i=Hj;const s=a=>{e?t.push(a):i(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&i(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var lt=qj(),ga,Pi,ya,BT,Kj=(BT=class extends Xa{constructor(){super();te(this,ga,!0);te(this,Pi);te(this,ya);q(this,ya,e=>{if(!lo&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){j(this,Pi)||this.setEventListener(j(this,ya))}onUnsubscribe(){var e;this.hasListeners()||((e=j(this,Pi))==null||e.call(this),q(this,Pi,void 0))}setEventListener(e){var n;q(this,ya,e),(n=j(this,Pi))==null||n.call(this),q(this,Pi,e(this.setOnline.bind(this)))}setOnline(e){j(this,ga)!==e&&(q(this,ga,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return j(this,ga)}},ga=new WeakMap,Pi=new WeakMap,ya=new WeakMap,BT),Jh=new Kj;function Gj(t){return Math.min(1e3*2**t,3e4)}function hI(t){return(t??"online")==="online"?Jh.isOnline():!0}var m0=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function fI(t){let e=!1,n=0,r;const i=f0(),s=()=>i.status!=="pending",o=x=>{var k;if(!s()){const v=new m0(x);m(v),(k=t.onCancel)==null||k.call(t,v)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>Ev.isFocused()&&(t.networkMode==="always"||Jh.isOnline())&&t.canRun(),u=()=>hI(t.networkMode)&&t.canRun(),f=x=>{s()||(r==null||r(),i.resolve(x))},m=x=>{s()||(r==null||r(),i.reject(x))},p=()=>new Promise(x=>{var k;r=v=>{(s()||c())&&x(v)},(k=t.onPause)==null||k.call(t)}).then(()=>{var x;r=void 0,s()||(x=t.onContinue)==null||x.call(t)}),y=()=>{if(s())return;let x;const k=n===0?t.initialPromise:void 0;try{x=k??t.fn()}catch(v){x=Promise.reject(v)}Promise.resolve(x).then(f).catch(v=>{var N;if(s())return;const w=t.retry??(lo?0:3),_=t.retryDelay??Gj,P=typeof _=="function"?_(n,v):_,A=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,v);if(e||!A){m(v);return}n++,(N=t.onFail)==null||N.call(t,n,v),Bj(P).then(()=>c()?void 0:p()).then(()=>{e?m(v):y()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(r==null||r(),i),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?y():p().then(y),i)}}var $s,zT,mI=(zT=class{constructor(){te(this,$s)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),u0(this.gcTime)&&q(this,$s,Os.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(lo?1/0:5*60*1e3))}clearGcTimeout(){j(this,$s)&&(Os.clearTimeout(j(this,$s)),q(this,$s,void 0))}},$s=new WeakMap,zT),Ws,va,An,Hs,ft,pu,qs,Gn,Nr,$T,Qj=($T=class extends mI{constructor(n){super();te(this,Gn);te(this,Ws);te(this,va);te(this,An);te(this,Hs);te(this,ft);te(this,pu);te(this,qs);q(this,qs,!1),q(this,pu,n.defaultOptions),this.setOptions(n.options),this.observers=[],q(this,Hs,n.client),q(this,An,j(this,Hs).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,q(this,Ws,V_(this.options)),this.state=n.state??j(this,Ws),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=j(this,ft))==null?void 0:n.promise}setOptions(n){if(this.options={...j(this,pu),...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=V_(this.options);r.data!==void 0&&(this.setData(r.data,{updatedAt:r.dataUpdatedAt,manual:!0}),q(this,Ws,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&j(this,An).remove(this)}setData(n,r){const i=h0(this.state.data,n,this.options);return he(this,Gn,Nr).call(this,{data:i,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),i}setState(n,r){he(this,Gn,Nr).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var i,s;const r=(i=j(this,ft))==null?void 0:i.promise;return(s=j(this,ft))==null||s.cancel(n),r?r.then(Gt).catch(Gt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(j(this,Ws))}isActive(){return this.observers.some(n=>Nn(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===kv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>Qi(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!lI(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(i=>i.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=j(this,ft))==null||r.continue()}onOnline(){var r;const n=this.observers.find(i=>i.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=j(this,ft))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),j(this,An).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(j(this,ft)&&(j(this,qs)?j(this,ft).cancel({revert:!0}):j(this,ft).cancelRetry()),this.scheduleGc()),j(this,An).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||he(this,Gn,Nr).call(this,{type:"invalidate"})}async fetch(n,r){var c,u,f,m,p,y,x,k,v,w,_,P;if(this.state.fetchStatus!=="idle"&&((c=j(this,ft))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(j(this,ft))return j(this,ft).continueRetry(),j(this,ft).promise}if(n&&this.setOptions(n),!this.options.queryFn){const A=this.observers.find(N=>N.options.queryFn);A&&this.setOptions(A.options)}const i=new AbortController,s=A=>{Object.defineProperty(A,"signal",{enumerable:!0,get:()=>(q(this,qs,!0),i.signal)})},o=()=>{const A=uI(this.options,r),T=(()=>{const E={client:j(this,Hs),queryKey:this.queryKey,meta:this.meta};return s(E),E})();return q(this,qs,!1),this.options.persister?this.options.persister(A,T,this):A(T)},l=(()=>{const A={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:j(this,Hs),state:this.state,fetchFn:o};return s(A),A})();(u=this.options.behavior)==null||u.onFetch(l,this),q(this,va,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&he(this,Gn,Nr).call(this,{type:"fetch",meta:(m=l.fetchOptions)==null?void 0:m.meta}),q(this,ft,fI({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:A=>{A instanceof m0&&A.revert&&this.setState({...j(this,va),fetchStatus:"idle"}),i.abort()},onFail:(A,N)=>{he(this,Gn,Nr).call(this,{type:"failed",failureCount:A,error:N})},onPause:()=>{he(this,Gn,Nr).call(this,{type:"pause"})},onContinue:()=>{he(this,Gn,Nr).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const A=await j(this,ft).start();if(A===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(A),(y=(p=j(this,An).config).onSuccess)==null||y.call(p,A,this),(k=(x=j(this,An).config).onSettled)==null||k.call(x,A,this.state.error,this),A}catch(A){if(A instanceof m0){if(A.silent)return j(this,ft).promise;if(A.revert){if(this.state.data===void 0)throw A;return this.state.data}}throw he(this,Gn,Nr).call(this,{type:"error",error:A}),(w=(v=j(this,An).config).onError)==null||w.call(v,A,this),(P=(_=j(this,An).config).onSettled)==null||P.call(_,this.state.data,A,this),A}finally{this.scheduleGc()}}},Ws=new WeakMap,va=new WeakMap,An=new WeakMap,Hs=new WeakMap,ft=new WeakMap,pu=new WeakMap,qs=new WeakMap,Gn=new WeakSet,Nr=function(n){const r=i=>{switch(n.type){case"failed":return{...i,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...pI(i.data,this.options),fetchMeta:n.meta??null};case"success":const s={...i,data:n.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return q(this,va,n.manual?s:void 0),s;case"error":const o=n.error;return{...i,error:o,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...n.state}}};this.state=r(this.state),lt.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),j(this,An).notify({query:this,type:"updated",action:n})})},$T);function pI(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:hI(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function V_(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var sn,ye,gu,Ht,Ks,xa,Lr,Ai,yu,wa,ba,Gs,Qs,Ni,_a,Te,Bl,p0,g0,y0,v0,x0,w0,b0,gI,WT,Yj=(WT=class extends Xa{constructor(e,n){super();te(this,Te);te(this,sn);te(this,ye);te(this,gu);te(this,Ht);te(this,Ks);te(this,xa);te(this,Lr);te(this,Ai);te(this,yu);te(this,wa);te(this,ba);te(this,Gs);te(this,Qs);te(this,Ni);te(this,_a,new Set);this.options=n,q(this,sn,e),q(this,Ai,null),q(this,Lr,f0()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(j(this,ye).addObserver(this),F_(j(this,ye),this.options)?he(this,Te,Bl).call(this):this.updateResult(),he(this,Te,v0).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return _0(j(this,ye),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return _0(j(this,ye),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,he(this,Te,x0).call(this),he(this,Te,w0).call(this),j(this,ye).removeObserver(this)}setOptions(e){const n=this.options,r=j(this,ye);if(this.options=j(this,sn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Nn(this.options.enabled,j(this,ye))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");he(this,Te,b0).call(this),j(this,ye).setOptions(this.options),n._defaulted&&!Xh(this.options,n)&&j(this,sn).getQueryCache().notify({type:"observerOptionsUpdated",query:j(this,ye),observer:this});const i=this.hasListeners();i&&U_(j(this,ye),r,this.options,n)&&he(this,Te,Bl).call(this),this.updateResult(),i&&(j(this,ye)!==r||Nn(this.options.enabled,j(this,ye))!==Nn(n.enabled,j(this,ye))||Qi(this.options.staleTime,j(this,ye))!==Qi(n.staleTime,j(this,ye)))&&he(this,Te,p0).call(this);const s=he(this,Te,g0).call(this);i&&(j(this,ye)!==r||Nn(this.options.enabled,j(this,ye))!==Nn(n.enabled,j(this,ye))||s!==j(this,Ni))&&he(this,Te,y0).call(this,s)}getOptimisticResult(e){const n=j(this,sn).getQueryCache().build(j(this,sn),e),r=this.createResult(n,e);return Jj(this,r)&&(q(this,Ht,r),q(this,xa,this.options),q(this,Ks,j(this,ye).state)),r}getCurrentResult(){return j(this,Ht)}trackResult(e,n){return new Proxy(e,{get:(r,i)=>(this.trackProp(i),n==null||n(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&j(this,Lr).status==="pending"&&j(this,Lr).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,i))})}trackProp(e){j(this,_a).add(e)}getCurrentQuery(){return j(this,ye)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=j(this,sn).defaultQueryOptions(e),r=j(this,sn).getQueryCache().build(j(this,sn),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return he(this,Te,Bl).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),j(this,Ht)))}createResult(e,n){var S;const r=j(this,ye),i=this.options,s=j(this,Ht),o=j(this,Ks),a=j(this,xa),c=e!==r?e.state:j(this,gu),{state:u}=e;let f={...u},m=!1,p;if(n._optimisticResults){const C=this.hasListeners(),M=!C&&F_(e,n),D=C&&U_(e,r,n,i);(M||D)&&(f={...f,...pI(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:y,errorUpdatedAt:x,status:k}=f;p=f.data;let v=!1;if(n.placeholderData!==void 0&&p===void 0&&k==="pending"){let C;s!=null&&s.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(C=s.data,v=!0):C=typeof n.placeholderData=="function"?n.placeholderData((S=j(this,ba))==null?void 0:S.state.data,j(this,ba)):n.placeholderData,C!==void 0&&(k="success",p=h0(s==null?void 0:s.data,C,n),m=!0)}if(n.select&&p!==void 0&&!v)if(s&&p===(o==null?void 0:o.data)&&n.select===j(this,yu))p=j(this,wa);else try{q(this,yu,n.select),p=n.select(p),p=h0(s==null?void 0:s.data,p,n),q(this,wa,p),q(this,Ai,null)}catch(C){q(this,Ai,C)}j(this,Ai)&&(y=j(this,Ai),p=j(this,wa),x=Date.now(),k="error");const w=f.fetchStatus==="fetching",_=k==="pending",P=k==="error",A=_&&w,N=p!==void 0,E={status:k,fetchStatus:f.fetchStatus,isPending:_,isSuccess:k==="success",isError:P,isInitialLoading:A,isLoading:A,data:p,dataUpdatedAt:f.dataUpdatedAt,error:y,errorUpdatedAt:x,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>c.dataUpdateCount||f.errorUpdateCount>c.errorUpdateCount,isFetching:w,isRefetching:w&&!_,isLoadingError:P&&!N,isPaused:f.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:P&&N,isStale:Tv(e,n),refetch:this.refetch,promise:j(this,Lr),isEnabled:Nn(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const C=R=>{E.status==="error"?R.reject(E.error):E.data!==void 0&&R.resolve(E.data)},M=()=>{const R=q(this,Lr,E.promise=f0());C(R)},D=j(this,Lr);switch(D.status){case"pending":e.queryHash===r.queryHash&&C(D);break;case"fulfilled":(E.status==="error"||E.data!==D.value)&&M();break;case"rejected":(E.status!=="error"||E.error!==D.reason)&&M();break}}return E}updateResult(){const e=j(this,Ht),n=this.createResult(j(this,ye),this.options);if(q(this,Ks,j(this,ye).state),q(this,xa,this.options),j(this,Ks).data!==void 0&&q(this,ba,j(this,ye)),Xh(n,e))return;q(this,Ht,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!j(this,_a).size)return!0;const o=new Set(s??j(this,_a));return this.options.throwOnError&&o.add("error"),Object.keys(j(this,Ht)).some(a=>{const l=a;return j(this,Ht)[l]!==e[l]&&o.has(l)})};he(this,Te,gI).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&he(this,Te,v0).call(this)}},sn=new WeakMap,ye=new WeakMap,gu=new WeakMap,Ht=new WeakMap,Ks=new WeakMap,xa=new WeakMap,Lr=new WeakMap,Ai=new WeakMap,yu=new WeakMap,wa=new WeakMap,ba=new WeakMap,Gs=new WeakMap,Qs=new WeakMap,Ni=new WeakMap,_a=new WeakMap,Te=new WeakSet,Bl=function(e){he(this,Te,b0).call(this);let n=j(this,ye).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Gt)),n},p0=function(){he(this,Te,x0).call(this);const e=Qi(this.options.staleTime,j(this,ye));if(lo||j(this,Ht).isStale||!u0(e))return;const r=lI(j(this,Ht).dataUpdatedAt,e)+1;q(this,Gs,Os.setTimeout(()=>{j(this,Ht).isStale||this.updateResult()},r))},g0=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(j(this,ye)):this.options.refetchInterval)??!1},y0=function(e){he(this,Te,w0).call(this),q(this,Ni,e),!(lo||Nn(this.options.enabled,j(this,ye))===!1||!u0(j(this,Ni))||j(this,Ni)===0)&&q(this,Qs,Os.setInterval(()=>{(this.options.refetchIntervalInBackground||Ev.isFocused())&&he(this,Te,Bl).call(this)},j(this,Ni)))},v0=function(){he(this,Te,p0).call(this),he(this,Te,y0).call(this,he(this,Te,g0).call(this))},x0=function(){j(this,Gs)&&(Os.clearTimeout(j(this,Gs)),q(this,Gs,void 0))},w0=function(){j(this,Qs)&&(Os.clearInterval(j(this,Qs)),q(this,Qs,void 0))},b0=function(){const e=j(this,sn).getQueryCache().build(j(this,sn),this.options);if(e===j(this,ye))return;const n=j(this,ye);q(this,ye,e),q(this,gu,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},gI=function(e){lt.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(j(this,Ht))}),j(this,sn).getQueryCache().notify({query:j(this,ye),type:"observerResultsUpdated"})})},WT);function Xj(t,e){return Nn(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function F_(t,e){return Xj(t,e)||t.state.data!==void 0&&_0(t,e,e.refetchOnMount)}function _0(t,e,n){if(Nn(e.enabled,t)!==!1&&Qi(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Tv(t,e)}return!1}function U_(t,e,n,r){return(t!==e||Nn(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Tv(t,n)}function Tv(t,e){return Nn(e.enabled,t)!==!1&&t.isStaleByTime(Qi(e.staleTime,t))}function Jj(t,e){return!Xh(t.getCurrentResult(),e)}function B_(t){return{onFetch:(e,n)=>{var u,f,m,p,y;const r=e.options,i=(m=(f=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,s=((p=e.state.data)==null?void 0:p.pages)||[],o=((y=e.state.data)==null?void 0:y.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let x=!1;const k=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(e.signal.aborted?x=!0:e.signal.addEventListener("abort",()=>{x=!0}),e.signal)})},v=uI(e.options,e.fetchOptions),w=async(_,P,A)=>{if(x)return Promise.reject();if(P==null&&_.pages.length)return Promise.resolve(_);const T=(()=>{const M={client:e.client,queryKey:e.queryKey,pageParam:P,direction:A?"backward":"forward",meta:e.options.meta};return k(M),M})(),E=await v(T),{maxPages:S}=e.options,C=A?$j:zj;return{pages:C(_.pages,E,S),pageParams:C(_.pageParams,P,S)}};if(i&&s.length){const _=i==="backward",P=_?Zj:z_,A={pages:s,pageParams:o},N=P(r,A);a=await w(A,N,_)}else{const _=t??s.length;do{const P=l===0?o[0]??r.initialPageParam:z_(r,a);if(l>0&&P==null)break;a=await w(a,P),l++}while(l<_)}return a};e.options.persister?e.fetchFn=()=>{var x,k;return(k=(x=e.options).persister)==null?void 0:k.call(x,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function z_(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function Zj(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var vu,hr,qt,Ys,fr,yi,HT,eO=(HT=class extends mI{constructor(n){super();te(this,fr);te(this,vu);te(this,hr);te(this,qt);te(this,Ys);q(this,vu,n.client),this.mutationId=n.mutationId,q(this,qt,n.mutationCache),q(this,hr,[]),this.state=n.state||yI(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){j(this,hr).includes(n)||(j(this,hr).push(n),this.clearGcTimeout(),j(this,qt).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){q(this,hr,j(this,hr).filter(r=>r!==n)),this.scheduleGc(),j(this,qt).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){j(this,hr).length||(this.state.status==="pending"?this.scheduleGc():j(this,qt).remove(this))}continue(){var n;return((n=j(this,Ys))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var a,l,c,u,f,m,p,y,x,k,v,w,_,P,A,N,T,E,S,C;const r=()=>{he(this,fr,yi).call(this,{type:"continue"})},i={client:j(this,vu),meta:this.options.meta,mutationKey:this.options.mutationKey};q(this,Ys,fI({fn:()=>this.options.mutationFn?this.options.mutationFn(n,i):Promise.reject(new Error("No mutationFn found")),onFail:(M,D)=>{he(this,fr,yi).call(this,{type:"failed",failureCount:M,error:D})},onPause:()=>{he(this,fr,yi).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>j(this,qt).canRun(this)}));const s=this.state.status==="pending",o=!j(this,Ys).canStart();try{if(s)r();else{he(this,fr,yi).call(this,{type:"pending",variables:n,isPaused:o}),await((l=(a=j(this,qt).config).onMutate)==null?void 0:l.call(a,n,this,i));const D=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,n,i));D!==this.state.context&&he(this,fr,yi).call(this,{type:"pending",context:D,variables:n,isPaused:o})}const M=await j(this,Ys).start();return await((m=(f=j(this,qt).config).onSuccess)==null?void 0:m.call(f,M,n,this.state.context,this,i)),await((y=(p=this.options).onSuccess)==null?void 0:y.call(p,M,n,this.state.context,i)),await((k=(x=j(this,qt).config).onSettled)==null?void 0:k.call(x,M,null,this.state.variables,this.state.context,this,i)),await((w=(v=this.options).onSettled)==null?void 0:w.call(v,M,null,n,this.state.context,i)),he(this,fr,yi).call(this,{type:"success",data:M}),M}catch(M){try{throw await((P=(_=j(this,qt).config).onError)==null?void 0:P.call(_,M,n,this.state.context,this,i)),await((N=(A=this.options).onError)==null?void 0:N.call(A,M,n,this.state.context,i)),await((E=(T=j(this,qt).config).onSettled)==null?void 0:E.call(T,void 0,M,this.state.variables,this.state.context,this,i)),await((C=(S=this.options).onSettled)==null?void 0:C.call(S,void 0,M,n,this.state.context,i)),M}finally{he(this,fr,yi).call(this,{type:"error",error:M})}}finally{j(this,qt).runNext(this)}}},vu=new WeakMap,hr=new WeakMap,qt=new WeakMap,Ys=new WeakMap,fr=new WeakSet,yi=function(n){const r=i=>{switch(n.type){case"failed":return{...i,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...i,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:n.error,failureCount:i.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),lt.batch(()=>{j(this,hr).forEach(i=>{i.onMutationUpdate(n)}),j(this,qt).notify({mutation:this,type:"updated",action:n})})},HT);function yI(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Vr,Qn,xu,qT,tO=(qT=class extends Xa{constructor(e={}){super();te(this,Vr);te(this,Qn);te(this,xu);this.config=e,q(this,Vr,new Set),q(this,Qn,new Map),q(this,xu,0)}build(e,n,r){const i=new eO({client:e,mutationCache:this,mutationId:++cd(this,xu)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){j(this,Vr).add(e);const n=Id(e);if(typeof n=="string"){const r=j(this,Qn).get(n);r?r.push(e):j(this,Qn).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(j(this,Vr).delete(e)){const n=Id(e);if(typeof n=="string"){const r=j(this,Qn).get(n);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&j(this,Qn).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Id(e);if(typeof n=="string"){const r=j(this,Qn).get(n),i=r==null?void 0:r.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const n=Id(e);if(typeof n=="string"){const i=(r=j(this,Qn).get(n))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){lt.batch(()=>{j(this,Vr).forEach(e=>{this.notify({type:"removed",mutation:e})}),j(this,Vr).clear(),j(this,Qn).clear()})}getAll(){return Array.from(j(this,Vr))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>j_(n,r))}findAll(e={}){return this.getAll().filter(n=>j_(e,n))}notify(e){lt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return lt.batch(()=>Promise.all(e.map(n=>n.continue().catch(Gt))))}},Vr=new WeakMap,Qn=new WeakMap,xu=new WeakMap,qT);function Id(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Fr,Ri,on,Ur,Xr,ch,k0,KT,nO=(KT=class extends Xa{constructor(n,r){super();te(this,Xr);te(this,Fr);te(this,Ri);te(this,on);te(this,Ur);q(this,Fr,n),this.setOptions(r),this.bindMethods(),he(this,Xr,ch).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var i;const r=this.options;this.options=j(this,Fr).defaultMutationOptions(n),Xh(this.options,r)||j(this,Fr).getMutationCache().notify({type:"observerOptionsUpdated",mutation:j(this,on),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&co(r.mutationKey)!==co(this.options.mutationKey)?this.reset():((i=j(this,on))==null?void 0:i.state.status)==="pending"&&j(this,on).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=j(this,on))==null||n.removeObserver(this)}onMutationUpdate(n){he(this,Xr,ch).call(this),he(this,Xr,k0).call(this,n)}getCurrentResult(){return j(this,Ri)}reset(){var n;(n=j(this,on))==null||n.removeObserver(this),q(this,on,void 0),he(this,Xr,ch).call(this),he(this,Xr,k0).call(this)}mutate(n,r){var i;return q(this,Ur,r),(i=j(this,on))==null||i.removeObserver(this),q(this,on,j(this,Fr).getMutationCache().build(j(this,Fr),this.options)),j(this,on).addObserver(this),j(this,on).execute(n)}},Fr=new WeakMap,Ri=new WeakMap,on=new WeakMap,Ur=new WeakMap,Xr=new WeakSet,ch=function(){var r;const n=((r=j(this,on))==null?void 0:r.state)??yI();q(this,Ri,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},k0=function(n){lt.batch(()=>{var r,i,s,o,a,l,c,u;if(j(this,Ur)&&this.hasListeners()){const f=j(this,Ri).variables,m=j(this,Ri).context,p={client:j(this,Fr),meta:this.options.meta,mutationKey:this.options.mutationKey};(n==null?void 0:n.type)==="success"?((i=(r=j(this,Ur)).onSuccess)==null||i.call(r,n.data,f,m,p),(o=(s=j(this,Ur)).onSettled)==null||o.call(s,n.data,null,f,m,p)):(n==null?void 0:n.type)==="error"&&((l=(a=j(this,Ur)).onError)==null||l.call(a,n.error,f,m,p),(u=(c=j(this,Ur)).onSettled)==null||u.call(c,void 0,n.error,f,m,p))}this.listeners.forEach(f=>{f(j(this,Ri))})})},KT),mr,GT,rO=(GT=class extends Xa{constructor(e={}){super();te(this,mr);this.config=e,q(this,mr,new Map)}build(e,n,r){const i=n.queryKey,s=n.queryHash??_v(i,n);let o=this.get(s);return o||(o=new Qj({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){j(this,mr).has(e.queryHash)||(j(this,mr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=j(this,mr).get(e.queryHash);n&&(e.destroy(),n===e&&j(this,mr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){lt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return j(this,mr).get(e)}getAll(){return[...j(this,mr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>D_(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>D_(e,r)):n}notify(e){lt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){lt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){lt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},mr=new WeakMap,GT),Qe,Mi,Di,ka,Ea,ji,Ta,Sa,QT,iO=(QT=class{constructor(t={}){te(this,Qe);te(this,Mi);te(this,Di);te(this,ka);te(this,Ea);te(this,ji);te(this,Ta);te(this,Sa);q(this,Qe,t.queryCache||new rO),q(this,Mi,t.mutationCache||new tO),q(this,Di,t.defaultOptions||{}),q(this,ka,new Map),q(this,Ea,new Map),q(this,ji,0)}mount(){cd(this,ji)._++,j(this,ji)===1&&(q(this,Ta,Ev.subscribe(async t=>{t&&(await this.resumePausedMutations(),j(this,Qe).onFocus())})),q(this,Sa,Jh.subscribe(async t=>{t&&(await this.resumePausedMutations(),j(this,Qe).onOnline())})))}unmount(){var t,e;cd(this,ji)._--,j(this,ji)===0&&((t=j(this,Ta))==null||t.call(this),q(this,Ta,void 0),(e=j(this,Sa))==null||e.call(this),q(this,Sa,void 0))}isFetching(t){return j(this,Qe).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return j(this,Mi).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=j(this,Qe).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=j(this,Qe).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Qi(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return j(this,Qe).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=j(this,Qe).get(r.queryHash),s=i==null?void 0:i.state.data,o=Fj(e,s);if(o!==void 0)return j(this,Qe).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return lt.batch(()=>j(this,Qe).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=j(this,Qe).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=j(this,Qe);lt.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=j(this,Qe);return lt.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=lt.batch(()=>j(this,Qe).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(Gt).catch(Gt)}invalidateQueries(t,e={}){return lt.batch(()=>(j(this,Qe).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=lt.batch(()=>j(this,Qe).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(Gt)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(Gt)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=j(this,Qe).build(this,e);return n.isStaleByTime(Qi(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Gt).catch(Gt)}fetchInfiniteQuery(t){return t.behavior=B_(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Gt).catch(Gt)}ensureInfiniteQueryData(t){return t.behavior=B_(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Jh.isOnline()?j(this,Mi).resumePausedMutations():Promise.resolve()}getQueryCache(){return j(this,Qe)}getMutationCache(){return j(this,Mi)}getDefaultOptions(){return j(this,Di)}setDefaultOptions(t){q(this,Di,t)}setQueryDefaults(t,e){j(this,ka).set(co(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...j(this,ka).values()],n={};return e.forEach(r=>{$c(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){j(this,Ea).set(co(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...j(this,Ea).values()],n={};return e.forEach(r=>{$c(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...j(this,Di).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=_v(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===kv&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...j(this,Di).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){j(this,Qe).clear(),j(this,Mi).clear()}},Qe=new WeakMap,Mi=new WeakMap,Di=new WeakMap,ka=new WeakMap,Ea=new WeakMap,ji=new WeakMap,Ta=new WeakMap,Sa=new WeakMap,QT),vI=O.createContext(void 0),$n=t=>{const e=O.useContext(vI);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},sO=({client:t,children:e})=>(O.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),h.jsx(vI.Provider,{value:t,children:e})),xI=O.createContext(!1),oO=()=>O.useContext(xI);xI.Provider;function aO(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var lO=O.createContext(aO()),cO=()=>O.useContext(lO),uO=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},dO=t=>{O.useEffect(()=>{t.clearReset()},[t])},hO=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(i&&t.data===void 0||dI(n,[t.error,r])),fO=t=>{if(t.suspense){const n=i=>i==="static"?i:Math.max(i??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...i)=>n(r(...i)):n(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},mO=(t,e)=>t.isLoading&&t.isFetching&&!e,pO=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,$_=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function gO(t,e,n){var f,m,p,y,x;const r=oO(),i=cO(),s=$n(),o=s.defaultQueryOptions(t);(m=(f=s.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||m.call(f,o),o._optimisticResults=r?"isRestoring":"optimistic",fO(o),uO(o,i),dO(i);const a=!s.getQueryCache().get(o.queryHash),[l]=O.useState(()=>new e(s,o)),c=l.getOptimisticResult(o),u=!r&&t.subscribed!==!1;if(O.useSyncExternalStore(O.useCallback(k=>{const v=u?l.subscribe(lt.batchCalls(k)):Gt;return l.updateResult(),v},[l,u]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),O.useEffect(()=>{l.setOptions(o)},[o,l]),pO(o,c))throw $_(o,l,i);if(hO({result:c,errorResetBoundary:i,throwOnError:o.throwOnError,query:s.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw c.error;if((y=(p=s.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||y.call(p,o,c),o.experimental_prefetchInRender&&!lo&&mO(c,r)){const k=a?$_(o,l,i):(x=s.getQueryCache().get(o.queryHash))==null?void 0:x.promise;k==null||k.catch(Gt).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?c:l.trackResult(c)}function Qt(t,e){return gO(t,Yj)}function _n(t,e){const n=$n(),[r]=O.useState(()=>new nO(n,t));O.useEffect(()=>{r.setOptions(t)},[r,t]);const i=O.useSyncExternalStore(O.useCallback(o=>r.subscribe(lt.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=O.useCallback((o,a)=>{r.mutate(o,a).catch(Gt)},[r]);if(i.error&&dI(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}const wI=O.createContext(void 0);function yO({children:t}){const[e,n]=O.useState(null),[r,i]=O.useState(!0);O.useEffect(()=>{const l=localStorage.getItem("myfitness_user");if(l)try{n(JSON.parse(l))}catch(c){console.error("Failed to parse saved user:",c),localStorage.removeItem("myfitness_user")}i(!1)},[]);const a={user:e,isAuthenticated:!!e,isLoading:r,login:l=>{n(l),localStorage.setItem("myfitness_user",JSON.stringify(l))},logout:()=>{n(null),localStorage.removeItem("myfitness_user")}};return h.jsx(wI.Provider,{value:a,children:t})}function pn(){const t=O.useContext(wI);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const bI=[{id:"ex1",name:"Running",description:"Outdoor or treadmill running for cardiovascular fitness",category:"cardio",imageUrl:"https://media.giphy.com/media/3o7TKtnuHOHHUjR38Y/giphy.gif"},{id:"ex2",name:"Push-ups",description:"Basic bodyweight exercise for upper body strength",category:"strength",imageUrl:"https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif"},{id:"ex3",name:"Yoga Flow",description:"Dynamic stretching and flexibility routine",category:"stretching",imageUrl:"https://media.giphy.com/media/3o6ZtaO9BZHcOjmErm/giphy.gif"},{id:"ex4",name:"HIIT Workout",description:"High-intensity interval training for full body conditioning",category:"full_body",imageUrl:"https://media.giphy.com/media/26xBwdIuRJiAiWithi/giphy.gif"}];function vO({exerciseId:t,onBack:e}){const n=bI.find(r=>r.id===t);return h.jsxs("div",{className:"max-w-3xl mx-auto py-10 px-4",children:[h.jsxs("div",{className:"flex items-center justify-between mb-6",children:[h.jsx("button",{onClick:e,className:"text-sm px-3 py-2 rounded-md bg-gray-200 dark:bg-gray-800 text-gray-700 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-700",children:"← Back"}),h.jsx("h1",{className:"text-2xl font-semibold",children:(n==null?void 0:n.name)??"Exercise GIF"}),h.jsx("div",{})]}),h.jsxs("div",{className:"bg-white dark:bg-gray-900 p-6 rounded-xl shadow",children:[n!=null&&n.imageUrl?h.jsx("img",{src:n.imageUrl,alt:n.name,className:"w-full h-[60vh] object-contain mx-auto"}):h.jsx("div",{className:"text-center text-muted-foreground",children:"No GIF available"}),n&&h.jsxs("div",{className:"mt-4",children:[h.jsx("h3",{className:"font-medium",children:n.name}),h.jsx("p",{className:"text-sm text-muted-foreground",children:n.description})]})]})]})}const Sv=O.createContext({});function Iv(t){const e=O.useRef(null);return e.current===null&&(e.current=t()),e.current}const Cv=typeof window<"u",_I=Cv?O.useLayoutEffect:O.useEffect,em=O.createContext(null);function Pv(t,e){t.indexOf(e)===-1&&t.push(e)}function Av(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ni=(t,e,n)=>n>e?e:n<t?t:n;let Nv=()=>{};const ri={},kI=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function EI(t){return typeof t=="object"&&t!==null}const TI=t=>/^0[^.\s]+$/u.test(t);function Rv(t){let e;return()=>(e===void 0&&(e=t()),e)}const Vn=t=>t,xO=(t,e)=>n=>e(t(n)),Tu=(...t)=>t.reduce(xO),Wc=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class Mv{constructor(){this.subscriptions=[]}add(e){return Pv(this.subscriptions,e),()=>Av(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const xr=t=>t*1e3,jn=t=>t/1e3;function SI(t,e){return e?t*(1e3/e):0}const II=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,wO=1e-7,bO=12;function _O(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=II(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>wO&&++a<bO);return o}function Su(t,e,n,r){if(t===e&&n===r)return Vn;const i=s=>_O(s,0,1,t,n);return s=>s===0||s===1?s:II(i(s),e,r)}const CI=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,PI=t=>e=>1-t(1-e),AI=Su(.33,1.53,.69,.99),Dv=PI(AI),NI=CI(Dv),RI=t=>(t*=2)<1?.5*Dv(t):.5*(2-Math.pow(2,-10*(t-1))),jv=t=>1-Math.sin(Math.acos(t)),MI=PI(jv),DI=CI(jv),kO=Su(.42,0,1,1),EO=Su(0,0,.58,1),jI=Su(.42,0,.58,1),TO=t=>Array.isArray(t)&&typeof t[0]!="number",OI=t=>Array.isArray(t)&&typeof t[0]=="number",SO={linear:Vn,easeIn:kO,easeInOut:jI,easeOut:EO,circIn:jv,circInOut:DI,circOut:MI,backIn:Dv,backInOut:NI,backOut:AI,anticipate:RI},IO=t=>typeof t=="string",W_=t=>{if(OI(t)){Nv(t.length===4);const[e,n,r,i]=t;return Su(e,n,r,i)}else if(IO(t))return SO[t];return t},Cd=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function CO(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(u){o.has(u)&&(c.schedule(u),t()),u(a)}const c={schedule:(u,f=!1,m=!1)=>{const y=m&&i?n:r;return f&&o.add(u),y.has(u)||y.add(u),u},cancel:u=>{r.delete(u),o.delete(u)},process:u=>{if(a=u,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(l),n.clear(),i=!1,s&&(s=!1,c.process(u))}};return c}const PO=40;function LI(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Cd.reduce((_,P)=>(_[P]=CO(s),_),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:u,update:f,preRender:m,render:p,postRender:y}=o,x=()=>{const _=ri.useManualTiming?i.timestamp:performance.now();n=!1,ri.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(_-i.timestamp,PO),1)),i.timestamp=_,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),u.process(i),f.process(i),m.process(i),p.process(i),y.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(x))},k=()=>{n=!0,r=!0,i.isProcessing||t(x)};return{schedule:Cd.reduce((_,P)=>{const A=o[P];return _[P]=(N,T=!1,E=!1)=>(n||k(),A.schedule(N,T,E)),_},{}),cancel:_=>{for(let P=0;P<Cd.length;P++)o[Cd[P]].cancel(_)},state:i,steps:o}}const{schedule:Ue,cancel:ss,state:xt,steps:Rp}=LI(typeof requestAnimationFrame<"u"?requestAnimationFrame:Vn,!0);let uh;function AO(){uh=void 0}const dn={now:()=>(uh===void 0&&dn.set(xt.isProcessing||ri.useManualTiming?xt.timestamp:performance.now()),uh),set:t=>{uh=t,queueMicrotask(AO)}},VI=t=>e=>typeof e=="string"&&e.startsWith(t),Ov=VI("--"),NO=VI("var(--"),Lv=t=>NO(t)?RO.test(t.split("/*")[0].trim()):!1,RO=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ja={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Hc={...Ja,transform:t=>ni(0,1,t)},Pd={...Ja,default:1},cc=t=>Math.round(t*1e5)/1e5,Vv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function MO(t){return t==null}const DO=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Fv=(t,e)=>n=>!!(typeof n=="string"&&DO.test(n)&&n.startsWith(t)||e&&!MO(n)&&Object.prototype.hasOwnProperty.call(n,e)),FI=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(Vv);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},jO=t=>ni(0,255,t),Mp={...Ja,transform:t=>Math.round(jO(t))},Ls={test:Fv("rgb","red"),parse:FI("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Mp.transform(t)+", "+Mp.transform(e)+", "+Mp.transform(n)+", "+cc(Hc.transform(r))+")"};function OO(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const E0={test:Fv("#"),parse:OO,transform:Ls.transform},Iu=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),vi=Iu("deg"),wr=Iu("%"),oe=Iu("px"),LO=Iu("vh"),VO=Iu("vw"),H_={...wr,parse:t=>wr.parse(t)/100,transform:t=>wr.transform(t*100)},Qo={test:Fv("hsl","hue"),parse:FI("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+wr.transform(cc(e))+", "+wr.transform(cc(n))+", "+cc(Hc.transform(r))+")"},it={test:t=>Ls.test(t)||E0.test(t)||Qo.test(t),parse:t=>Ls.test(t)?Ls.parse(t):Qo.test(t)?Qo.parse(t):E0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ls.transform(t):Qo.transform(t),getAnimatableNone:t=>{const e=it.parse(t);return e.alpha=0,it.transform(e)}},FO=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function UO(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Vv))==null?void 0:e.length)||0)+(((n=t.match(FO))==null?void 0:n.length)||0)>0}const UI="number",BI="color",BO="var",zO="var(",q_="${}",$O=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function qc(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace($O,l=>(it.test(l)?(r.color.push(s),i.push(BI),n.push(it.parse(l))):l.startsWith(zO)?(r.var.push(s),i.push(BO),n.push(l)):(r.number.push(s),i.push(UI),n.push(parseFloat(l))),++s,q_)).split(q_);return{values:n,split:a,indexes:r,types:i}}function zI(t){return qc(t).values}function $I(t){const{split:e,types:n}=qc(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===UI?s+=cc(i[o]):a===BI?s+=it.transform(i[o]):s+=i[o]}return s}}const WO=t=>typeof t=="number"?0:it.test(t)?it.getAnimatableNone(t):t;function HO(t){const e=zI(t);return $I(t)(e.map(WO))}const os={test:UO,parse:zI,createTransformer:$I,getAnimatableNone:HO};function Dp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function qO({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=Dp(l,a,t+1/3),s=Dp(l,a,t),o=Dp(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Zh(t,e){return n=>n>0?e:t}const $e=(t,e,n)=>t+(e-t)*n,jp=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},KO=[E0,Ls,Qo],GO=t=>KO.find(e=>e.test(t));function K_(t){const e=GO(t);if(!e)return!1;let n=e.parse(t);return e===Qo&&(n=qO(n)),n}const G_=(t,e)=>{const n=K_(t),r=K_(e);if(!n||!r)return Zh(t,e);const i={...n};return s=>(i.red=jp(n.red,r.red,s),i.green=jp(n.green,r.green,s),i.blue=jp(n.blue,r.blue,s),i.alpha=$e(n.alpha,r.alpha,s),Ls.transform(i))},T0=new Set(["none","hidden"]);function QO(t,e){return T0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function YO(t,e){return n=>$e(t,e,n)}function Uv(t){return typeof t=="number"?YO:typeof t=="string"?Lv(t)?Zh:it.test(t)?G_:ZO:Array.isArray(t)?WI:typeof t=="object"?it.test(t)?G_:XO:Zh}function WI(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>Uv(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function XO(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=Uv(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function JO(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][r[s]],a=t.values[o]??0;n[i]=a,r[s]++}return n}const ZO=(t,e)=>{const n=os.createTransformer(e),r=qc(t),i=qc(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?T0.has(t)&&!i.values.length||T0.has(e)&&!r.values.length?QO(t,e):Tu(WI(JO(r,i),i.values),n):Zh(t,e)};function HI(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?$e(t,e,n):Uv(t)(t,e)}const e4=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Ue.update(e,n),stop:()=>ss(e),now:()=>xt.isProcessing?xt.timestamp:dn.now()}},qI=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},ef=2e4;function Bv(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<ef;)e+=n,r=t.next(e);return e>=ef?1/0:e}function t4(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(Bv(r),ef);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:jn(i)}}const n4=5;function KI(t,e,n){const r=Math.max(e-n4,0);return SI(n-t(r),e-r)}const Ye={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Op=.001;function r4({duration:t=Ye.duration,bounce:e=Ye.bounce,velocity:n=Ye.velocity,mass:r=Ye.mass}){let i,s,o=1-e;o=ni(Ye.minDamping,Ye.maxDamping,o),t=ni(Ye.minDuration,Ye.maxDuration,jn(t)),o<1?(i=c=>{const u=c*o,f=u*t,m=u-n,p=S0(c,o),y=Math.exp(-f);return Op-m/p*y},s=c=>{const f=c*o*t,m=f*n+n,p=Math.pow(o,2)*Math.pow(c,2)*t,y=Math.exp(-f),x=S0(Math.pow(c,2),o);return(-i(c)+Op>0?-1:1)*((m-p)*y)/x}):(i=c=>{const u=Math.exp(-c*t),f=(c-n)*t+1;return-Op+u*f},s=c=>{const u=Math.exp(-c*t),f=(n-c)*(t*t);return u*f});const a=5/t,l=s4(i,s,a);if(t=xr(t),isNaN(l))return{stiffness:Ye.stiffness,damping:Ye.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const i4=12;function s4(t,e,n){let r=n;for(let i=1;i<i4;i++)r=r-t(r)/e(r);return r}function S0(t,e){return t*Math.sqrt(1-e*e)}const o4=["duration","bounce"],a4=["stiffness","damping","mass"];function Q_(t,e){return e.some(n=>t[n]!==void 0)}function l4(t){let e={velocity:Ye.velocity,stiffness:Ye.stiffness,damping:Ye.damping,mass:Ye.mass,isResolvedFromDuration:!1,...t};if(!Q_(t,a4)&&Q_(t,o4))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*ni(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Ye.mass,stiffness:i,damping:s}}else{const n=r4(t);e={...e,...n,mass:Ye.mass},e.isResolvedFromDuration=!0}return e}function tf(t=Ye.visualDuration,e=Ye.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:f,velocity:m,isResolvedFromDuration:p}=l4({...n,velocity:-jn(n.velocity||0)}),y=m||0,x=c/(2*Math.sqrt(l*u)),k=o-s,v=jn(Math.sqrt(l/u)),w=Math.abs(k)<5;r||(r=w?Ye.restSpeed.granular:Ye.restSpeed.default),i||(i=w?Ye.restDelta.granular:Ye.restDelta.default);let _;if(x<1){const A=S0(v,x);_=N=>{const T=Math.exp(-x*v*N);return o-T*((y+x*v*k)/A*Math.sin(A*N)+k*Math.cos(A*N))}}else if(x===1)_=A=>o-Math.exp(-v*A)*(k+(y+v*k)*A);else{const A=v*Math.sqrt(x*x-1);_=N=>{const T=Math.exp(-x*v*N),E=Math.min(A*N,300);return o-T*((y+x*v*k)*Math.sinh(E)+A*k*Math.cosh(E))/A}}const P={calculatedDuration:p&&f||null,next:A=>{const N=_(A);if(p)a.done=A>=f;else{let T=A===0?y:0;x<1&&(T=A===0?xr(y):KI(_,A,N));const E=Math.abs(T)<=r,S=Math.abs(o-N)<=i;a.done=E&&S}return a.value=a.done?o:N,a},toString:()=>{const A=Math.min(Bv(P),ef),N=qI(T=>P.next(A*T).value,A,30);return A+"ms "+N},toTransition:()=>{}};return P}tf.applyToOptions=t=>{const e=t4(t,100,tf);return t.ease=e.ease,t.duration=xr(e.duration),t.type="keyframes",t};function I0({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const f=t[0],m={done:!1,value:f},p=E=>a!==void 0&&E<a||l!==void 0&&E>l,y=E=>a===void 0?l:l===void 0||Math.abs(a-E)<Math.abs(l-E)?a:l;let x=n*e;const k=f+x,v=o===void 0?k:o(k);v!==k&&(x=v-f);const w=E=>-x*Math.exp(-E/r),_=E=>v+w(E),P=E=>{const S=w(E),C=_(E);m.done=Math.abs(S)<=c,m.value=m.done?v:C};let A,N;const T=E=>{p(m.value)&&(A=E,N=tf({keyframes:[m.value,y(m.value)],velocity:KI(_,E,m.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return T(0),{calculatedDuration:null,next:E=>{let S=!1;return!N&&A===void 0&&(S=!0,P(E),T(E)),A!==void 0&&E>=A?N.next(E-A):(!S&&P(E),m)}}}function c4(t,e,n){const r=[],i=n||ri.mix||HI,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Vn:e;a=Tu(l,a)}r.push(a)}return r}function u4(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(Nv(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=c4(e,r,i),l=a.length,c=u=>{if(o&&u<t[0])return e[0];let f=0;if(l>1)for(;f<t.length-2&&!(u<t[f+1]);f++);const m=Wc(t[f],t[f+1],u);return a[f](m)};return n?u=>c(ni(t[0],t[s-1],u)):c}function d4(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Wc(0,e,r);t.push($e(n,1,i))}}function h4(t){const e=[0];return d4(e,t.length-1),e}function f4(t,e){return t.map(n=>n*e)}function m4(t,e){return t.map(()=>e||jI).splice(0,t.length-1)}function uc({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=TO(r)?r.map(W_):W_(r),s={done:!1,value:e[0]},o=f4(n&&n.length===e.length?n:h4(e),t),a=u4(o,e,{ease:Array.isArray(i)?i:m4(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const p4=t=>t!==null;function zv(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(p4),a=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const g4={decay:I0,inertia:I0,tween:uc,keyframes:uc,spring:tf};function GI(t){typeof t.type=="string"&&(t.type=g4[t.type])}class $v{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const y4=t=>t/100;class Wv extends $v{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==dn.now()&&this.tick(dn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;GI(e);const{type:n=uc,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const l=n||uc;l!==uc&&typeof a[0]!="number"&&(this.mixKeyframes=Tu(y4,HI(a[0],a[1])),a=[0,100]);const c=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=Bv(c));const{calculatedDuration:u}=c;this.calculatedDuration=u,this.resolvedDuration=u+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=c}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:u,repeat:f,repeatType:m,repeatDelay:p,type:y,onUpdate:x,finalKeyframe:k}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const v=this.currentTime-c*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?v<0:v>i;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let _=this.currentTime,P=r;if(f){const E=Math.min(this.currentTime,i)/a;let S=Math.floor(E),C=E%1;!C&&E>=1&&(C=1),C===1&&S--,S=Math.min(S,f+1),!!(S%2)&&(m==="reverse"?(C=1-C,p&&(C-=p/a)):m==="mirror"&&(P=o)),_=ni(0,1,C)*a}const A=w?{done:!1,value:u[0]}:P.next(_);s&&(A.value=s(A.value));let{done:N}=A;!w&&l!==null&&(N=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&N);return T&&y!==I0&&(A.value=zv(u,this.options,k,this.speed)),x&&x(A.value),T&&this.finish(),A}then(e,n){return this.finished.then(e,n)}get duration(){return jn(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+jn(e)}get time(){return jn(this.currentTime)}set time(e){var n;e=xr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(dn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=jn(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=e4,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(dn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function v4(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Vs=t=>t*180/Math.PI,C0=t=>{const e=Vs(Math.atan2(t[1],t[0]));return P0(e)},x4={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:C0,rotateZ:C0,skewX:t=>Vs(Math.atan(t[1])),skewY:t=>Vs(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},P0=t=>(t=t%360,t<0&&(t+=360),t),Y_=C0,X_=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),J_=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),w4={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:X_,scaleY:J_,scale:t=>(X_(t)+J_(t))/2,rotateX:t=>P0(Vs(Math.atan2(t[6],t[5]))),rotateY:t=>P0(Vs(Math.atan2(-t[2],t[0]))),rotateZ:Y_,rotate:Y_,skewX:t=>Vs(Math.atan(t[4])),skewY:t=>Vs(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function A0(t){return t.includes("scale")?1:0}function N0(t,e){if(!t||t==="none")return A0(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=w4,i=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=x4,i=a}if(!i)return A0(e);const s=r[e],o=i[1].split(",").map(_4);return typeof s=="function"?s(o):o[s]}const b4=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return N0(n,e)};function _4(t){return parseFloat(t.trim())}const Za=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],el=new Set(Za),Z_=t=>t===Ja||t===oe,k4=new Set(["x","y","z"]),E4=Za.filter(t=>!k4.has(t));function T4(t){const e=[];return E4.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Zs={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>N0(e,"x"),y:(t,{transform:e})=>N0(e,"y")};Zs.translateX=Zs.x;Zs.translateY=Zs.y;const eo=new Set;let R0=!1,M0=!1,D0=!1;function QI(){if(M0){const t=Array.from(eo).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=T4(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))==null||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}M0=!1,R0=!1,eo.forEach(t=>t.complete(D0)),eo.clear()}function YI(){eo.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(M0=!0)})}function S4(){D0=!0,YI(),QI(),D0=!1}class Hv{constructor(e,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(eo.add(this),R0||(R0=!0,Ue.read(YI),Ue.resolveKeyframes(QI))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const a=r.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}v4(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),eo.delete(this)}cancel(){this.state==="scheduled"&&(eo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const I4=t=>t.startsWith("--");function C4(t,e,n){I4(e)?t.style.setProperty(e,n):t.style[e]=n}const P4=Rv(()=>window.ScrollTimeline!==void 0),A4={};function N4(t,e){const n=Rv(t);return()=>A4[e]??n()}const XI=N4(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),zl=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,ek={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:zl([0,.65,.55,1]),circOut:zl([.55,0,1,.45]),backIn:zl([.31,.01,.66,-.59]),backOut:zl([.33,1.53,.69,.99])};function JI(t,e){if(t)return typeof t=="function"?XI()?qI(t,e):"ease-out":OI(t)?zl(t):Array.isArray(t)?t.map(n=>JI(n,e)||ek.easeOut):ek[t]}function R4(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},c=void 0){const u={[e]:n};l&&(u.offset=l);const f=JI(a,i);Array.isArray(f)&&(u.easing=f);const m={delay:r,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return c&&(m.pseudoElement=c),t.animate(u,m)}function ZI(t){return typeof t=="function"&&"applyToOptions"in t}function M4({type:t,...e}){return ZI(t)&&XI()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class D4 extends $v{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,Nv(typeof e.type!="string");const c=M4(e);this.animation=R4(n,r,i,c,s),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const u=zv(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(u):C4(n,r,u),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return jn(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+jn(e)}get time(){return jn(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=xr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&P4()?(this.animation.timeline=e,Vn):n(this)}}const eC={anticipate:RI,backInOut:NI,circInOut:DI};function j4(t){return t in eC}function O4(t){typeof t.ease=="string"&&j4(t.ease)&&(t.ease=eC[t.ease])}const tk=10;class L4 extends D4{constructor(e){O4(e),GI(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new Wv({...o,autoplay:!1}),l=xr(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-tk).value,a.sample(l).value,tk),a.stop()}}const nk=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(os.test(t)||t==="0")&&!t.startsWith("url("));function V4(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function F4(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=nk(i,e),a=nk(s,e);return!o||!a?!1:V4(t)||(n==="spring"||ZI(n))&&r}function j0(t){t.duration=0,t.type="keyframes"}const U4=new Set(["opacity","clipPath","filter","transform"]),B4=Rv(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function z4(t){var u;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;if(!(((u=e==null?void 0:e.owner)==null?void 0:u.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=e.owner.getProps();return B4()&&n&&U4.has(n)&&(n!=="transform"||!c)&&!l&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const $4=40;class W4 extends $v{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:c,element:u,...f}){var y;super(),this.stop=()=>{var x,k;this._animation&&(this._animation.stop(),(x=this.stopTimeline)==null||x.call(this)),(k=this.keyframeResolver)==null||k.cancel()},this.createdAt=dn.now();const m={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:l,motionValue:c,element:u,...f},p=(u==null?void 0:u.KeyframeResolver)||Hv;this.keyframeResolver=new p(a,(x,k,v)=>this.onKeyframesResolved(x,k,m,!v),l,c,u),(y=this.keyframeResolver)==null||y.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:c,onUpdate:u}=r;this.resolvedAt=dn.now(),F4(e,s,o,a)||((ri.instantAnimations||!l)&&(u==null||u(zv(e,r,n))),e[0]=e[e.length-1],j0(r),r.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>$4?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},p=!c&&z4(m)?new L4({...m,element:m.motionValue.owner.current}):new Wv(m);p.finished.then(()=>this.notifyFinished()).catch(Vn),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),S4()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const H4=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function q4(t){const e=H4.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function tC(t,e,n=1){const[r,i]=q4(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return kI(o)?parseFloat(o):o}return Lv(i)?tC(i,e,n+1):i}function qv(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const nC=new Set(["width","height","top","left","right","bottom",...Za]),K4={test:t=>t==="auto",parse:t=>t},rC=t=>e=>e.test(t),iC=[Ja,oe,wr,vi,VO,LO,K4],rk=t=>iC.find(rC(t));function G4(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||TI(t):!0}const Q4=new Set(["brightness","contrast","saturate","opacity"]);function Y4(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Vv)||[];if(!r)return t;const i=n.replace(r,"");let s=Q4.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const X4=/\b([a-z-]*)\(.*?\)/gu,O0={...os,getAnimatableNone:t=>{const e=t.match(X4);return e?e.map(Y4).join(" "):t}},ik={...Ja,transform:Math.round},J4={rotate:vi,rotateX:vi,rotateY:vi,rotateZ:vi,scale:Pd,scaleX:Pd,scaleY:Pd,scaleZ:Pd,skew:vi,skewX:vi,skewY:vi,distance:oe,translateX:oe,translateY:oe,translateZ:oe,x:oe,y:oe,z:oe,perspective:oe,transformPerspective:oe,opacity:Hc,originX:H_,originY:H_,originZ:oe},Kv={borderWidth:oe,borderTopWidth:oe,borderRightWidth:oe,borderBottomWidth:oe,borderLeftWidth:oe,borderRadius:oe,radius:oe,borderTopLeftRadius:oe,borderTopRightRadius:oe,borderBottomRightRadius:oe,borderBottomLeftRadius:oe,width:oe,maxWidth:oe,height:oe,maxHeight:oe,top:oe,right:oe,bottom:oe,left:oe,padding:oe,paddingTop:oe,paddingRight:oe,paddingBottom:oe,paddingLeft:oe,margin:oe,marginTop:oe,marginRight:oe,marginBottom:oe,marginLeft:oe,backgroundPositionX:oe,backgroundPositionY:oe,...J4,zIndex:ik,fillOpacity:Hc,strokeOpacity:Hc,numOctaves:ik},Z4={...Kv,color:it,backgroundColor:it,outlineColor:it,fill:it,stroke:it,borderColor:it,borderTopColor:it,borderRightColor:it,borderBottomColor:it,borderLeftColor:it,filter:O0,WebkitFilter:O0},sC=t=>Z4[t];function oC(t,e){let n=sC(t);return n!==O0&&(n=os),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const eL=new Set(["auto","none","0"]);function tL(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!eL.has(s)&&qc(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=oC(n,i)}class nL extends Hv{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),Lv(c))){const u=tC(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!nC.has(r)||e.length!==2)return;const[i,s]=e,o=rk(i),a=rk(s);if(o!==a)if(Z_(o)&&Z_(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else Zs[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||G4(e[i]))&&r.push(i);r.length&&tL(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Zs[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=Zs[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function rL(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const aC=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function lC(t){return EI(t)&&"offsetHeight"in t}const sk=30,iL=t=>!isNaN(parseFloat(t));class sL{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=dn.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=dn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=iL(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Mv);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ue.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=dn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>sk)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,sk);return SI(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Da(t,e){return new sL(t,e)}const{schedule:Gv}=LI(queueMicrotask,!1),qn={x:!1,y:!1};function cC(){return qn.x||qn.y}function oL(t){return t==="x"||t==="y"?qn[t]?null:(qn[t]=!0,()=>{qn[t]=!1}):qn.x||qn.y?null:(qn.x=qn.y=!0,()=>{qn.x=qn.y=!1})}function uC(t,e){const n=rL(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function ok(t){return!(t.pointerType==="touch"||cC())}function aL(t,e,n={}){const[r,i,s]=uC(t,n),o=a=>{if(!ok(a))return;const{target:l}=a,c=e(l,a);if(typeof c!="function"||!l)return;const u=f=>{ok(f)&&(c(f),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,i)};return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const dC=(t,e)=>e?t===e?!0:dC(t,e.parentElement):!1,Qv=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,lL=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function cL(t){return lL.has(t.tagName)||t.tabIndex!==-1}const dh=new WeakSet;function ak(t){return e=>{e.key==="Enter"&&t(e)}}function Lp(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const uL=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=ak(()=>{if(dh.has(n))return;Lp(n,"down");const i=ak(()=>{Lp(n,"up")}),s=()=>Lp(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function lk(t){return Qv(t)&&!cC()}function dL(t,e,n={}){const[r,i,s]=uC(t,n),o=a=>{const l=a.currentTarget;if(!lk(a))return;dh.add(l);const c=e(l,a),u=(p,y)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",m),dh.has(l)&&dh.delete(l),lk(p)&&typeof c=="function"&&c(p,{success:y})},f=p=>{u(p,l===window||l===document||n.useGlobalTarget||dC(l,p.target))},m=p=>{u(p,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",m,i)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),lC(a)&&(a.addEventListener("focus",c=>uL(c,i)),!cL(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function hC(t){return EI(t)&&"ownerSVGElement"in t}function hL(t){return hC(t)&&t.tagName==="svg"}const Vt=t=>!!(t&&t.getVelocity),fL=[...iC,it,os],mL=t=>fL.find(rC(t)),Yv=O.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function ck(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function pL(...t){return e=>{let n=!1;const r=t.map(i=>{const s=ck(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():ck(t[i],null)}}}}function gL(...t){return O.useCallback(pL(...t),t)}class yL extends O.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=lC(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function vL({children:t,isPresent:e,anchorX:n,root:r}){const i=O.useId(),s=O.useRef(null),o=O.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=O.useContext(Yv),l=gL(s,t==null?void 0:t.ref);return O.useInsertionEffect(()=>{const{width:c,height:u,top:f,left:m,right:p}=o.current;if(e||!s.current||!c||!u)return;const y=n==="left"?`left: ${m}`:`right: ${p}`;s.current.dataset.motionPopId=i;const x=document.createElement("style");a&&(x.nonce=a);const k=r??document.head;return k.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${u}px !important;
            ${y}px !important;
            top: ${f}px !important;
          }
        `),()=>{k.contains(x)&&k.removeChild(x)}},[e]),h.jsx(yL,{isPresent:e,childRef:s,sizeRef:o,children:O.cloneElement(t,{ref:l})})}const xL=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:a,root:l})=>{const c=Iv(wL),u=O.useId();let f=!0,m=O.useMemo(()=>(f=!1,{id:u,initial:e,isPresent:n,custom:i,onExitComplete:p=>{c.set(p,!0);for(const y of c.values())if(!y)return;r&&r()},register:p=>(c.set(p,!1),()=>c.delete(p))}),[n,c,r]);return s&&f&&(m={...m}),O.useMemo(()=>{c.forEach((p,y)=>c.set(y,!1))},[n]),O.useEffect(()=>{!n&&!c.size&&r&&r()},[n]),o==="popLayout"&&(t=h.jsx(vL,{isPresent:n,anchorX:a,root:l,children:t})),h.jsx(em.Provider,{value:m,children:t})};function wL(){return new Map}function fC(t=!0){const e=O.useContext(em);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=O.useId();O.useEffect(()=>{if(t)return i(s)},[t]);const o=O.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const Ad=t=>t.key||"";function uk(t){const e=[];return O.Children.forEach(t,n=>{O.isValidElement(n)&&e.push(n)}),e}const Xv=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[c,u]=fC(o),f=O.useMemo(()=>uk(t),[t]),m=o&&!c?[]:f.map(Ad),p=O.useRef(!0),y=O.useRef(f),x=Iv(()=>new Map),[k,v]=O.useState(f),[w,_]=O.useState(f);_I(()=>{p.current=!1,y.current=f;for(let N=0;N<w.length;N++){const T=Ad(w[N]);m.includes(T)?x.delete(T):x.get(T)!==!0&&x.set(T,!1)}},[w,m.length,m.join("-")]);const P=[];if(f!==k){let N=[...f];for(let T=0;T<w.length;T++){const E=w[T],S=Ad(E);m.includes(S)||(N.splice(T,0,E),P.push(E))}return s==="wait"&&P.length&&(N=P),_(uk(N)),v(f),null}const{forceRender:A}=O.useContext(Sv);return h.jsx(h.Fragment,{children:w.map(N=>{const T=Ad(N),E=o&&!c?!1:f===w||m.includes(T),S=()=>{if(x.has(T))x.set(T,!0);else return;let C=!0;x.forEach(M=>{M||(C=!1)}),C&&(A==null||A(),_(y.current),o&&(u==null||u()),r&&r())};return h.jsx(xL,{isPresent:E,initial:!p.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:l,onExitComplete:E?void 0:S,anchorX:a,children:N},T)})})},mC=O.createContext({strict:!1}),dk={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ja={};for(const t in dk)ja[t]={isEnabled:e=>dk[t].some(n=>!!e[n])};function bL(t){for(const e in t)ja[e]={...ja[e],...t[e]}}const _L=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function nf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||_L.has(t)}let pC=t=>!nf(t);function kL(t){typeof t=="function"&&(pC=e=>e.startsWith("on")?!nf(e):t(e))}try{kL(require("@emotion/is-prop-valid").default)}catch{}function EL(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(pC(i)||n===!0&&nf(i)||!e&&!nf(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const tm=O.createContext({});function nm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Kc(t){return typeof t=="string"||Array.isArray(t)}const Jv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Zv=["initial",...Jv];function rm(t){return nm(t.animate)||Zv.some(e=>Kc(t[e]))}function gC(t){return!!(rm(t)||t.variants)}function TL(t,e){if(rm(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Kc(n)?n:void 0,animate:Kc(r)?r:void 0}}return t.inherit!==!1?e:{}}function SL(t){const{initial:e,animate:n}=TL(t,O.useContext(tm));return O.useMemo(()=>({initial:e,animate:n}),[hk(e),hk(n)])}function hk(t){return Array.isArray(t)?t.join(" "):t}const Gc={};function IL(t){for(const e in t)Gc[e]=t[e],Ov(e)&&(Gc[e].isCSSVariable=!0)}function yC(t,{layout:e,layoutId:n}){return el.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Gc[t]||t==="opacity")}const CL={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},PL=Za.length;function AL(t,e,n){let r="",i=!0;for(let s=0;s<PL;s++){const o=Za[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=aC(a,Kv[o]);if(!l){i=!1;const u=CL[o]||o;r+=`${u}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function ex(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(el.has(l)){o=!0;continue}else if(Ov(l)){i[l]=c;continue}else{const u=aC(c,Kv[l]);l.startsWith("origin")?(a=!0,s[l]=u):r[l]=u}}if(e.transform||(o||n?r.transform=AL(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;r.transformOrigin=`${l} ${c} ${u}`}}const tx=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function vC(t,e,n){for(const r in e)!Vt(e[r])&&!yC(r,n)&&(t[r]=e[r])}function NL({transformTemplate:t},e){return O.useMemo(()=>{const n=tx();return ex(n,e,t),Object.assign({},n.vars,n.style)},[e])}function RL(t,e){const n=t.style||{},r={};return vC(r,n,t),Object.assign(r,NL(t,e)),r}function ML(t,e){const n={},r=RL(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const DL={offset:"stroke-dashoffset",array:"stroke-dasharray"},jL={offset:"strokeDashoffset",array:"strokeDasharray"};function OL(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?DL:jL;t[s.offset]=oe.transform(-r);const o=oe.transform(e),a=oe.transform(n);t[s.array]=`${o} ${a}`}function xC(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...a},l,c,u){if(ex(t,a,c),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:m}=t;f.transform&&(m.transform=f.transform,delete f.transform),(m.transform||f.transformOrigin)&&(m.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),m.transform&&(m.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete f.transformBox),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),i!==void 0&&OL(f,i,s,o,!1)}const wC=()=>({...tx(),attrs:{}}),bC=t=>typeof t=="string"&&t.toLowerCase()==="svg";function LL(t,e,n,r){const i=O.useMemo(()=>{const s=wC();return xC(s,e,bC(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};vC(s,t.style,t),i.style={...s,...i.style}}return i}const VL=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function nx(t){return typeof t!="string"||t.includes("-")?!1:!!(VL.indexOf(t)>-1||/[A-Z]/u.test(t))}function FL(t,e,n,{latestValues:r},i,s=!1){const a=(nx(t)?LL:ML)(e,r,i,t),l=EL(e,typeof t=="string",s),c=t!==O.Fragment?{...l,...a,ref:n}:{},{children:u}=e,f=O.useMemo(()=>Vt(u)?u.get():u,[u]);return O.createElement(t,{...c,children:f})}function fk(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function rx(t,e,n,r){if(typeof e=="function"){const[i,s]=fk(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=fk(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function hh(t){return Vt(t)?t.get():t}function UL({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:BL(n,r,i,t),renderState:e()}}function BL(t,e,n,r){const i={},s=r(t,{});for(const m in s)i[m]=hh(s[m]);let{initial:o,animate:a}=t;const l=rm(t),c=gC(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const f=u?a:o;if(f&&typeof f!="boolean"&&!nm(f)){const m=Array.isArray(f)?f:[f];for(let p=0;p<m.length;p++){const y=rx(t,m[p]);if(y){const{transitionEnd:x,transition:k,...v}=y;for(const w in v){let _=v[w];if(Array.isArray(_)){const P=u?_.length-1:0;_=_[P]}_!==null&&(i[w]=_)}for(const w in x)i[w]=x[w]}}}return i}const _C=t=>(e,n)=>{const r=O.useContext(tm),i=O.useContext(em),s=()=>UL(t,e,r,i);return n?s():Iv(s)};function ix(t,e,n){var s;const{style:r}=t,i={};for(const o in r)(Vt(r[o])||e.style&&Vt(e.style[o])||yC(o,t)||((s=n==null?void 0:n.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(i[o]=r[o]);return i}const zL=_C({scrapeMotionValuesFromProps:ix,createRenderState:tx});function kC(t,e,n){const r=ix(t,e,n);for(const i in t)if(Vt(t[i])||Vt(e[i])){const s=Za.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const $L=_C({scrapeMotionValuesFromProps:kC,createRenderState:wC}),WL=Symbol.for("motionComponentSymbol");function Yo(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function HL(t,e,n){return O.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Yo(n)&&(n.current=r))},[e])}const sx=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),qL="framerAppearId",EC="data-"+sx(qL),TC=O.createContext({});function KL(t,e,n,r,i){var x,k;const{visualElement:s}=O.useContext(tm),o=O.useContext(mC),a=O.useContext(em),l=O.useContext(Yv).reducedMotion,c=O.useRef(null);r=r||o.renderer,!c.current&&r&&(c.current=r(t,{visualState:e,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const u=c.current,f=O.useContext(TC);u&&!u.projection&&i&&(u.type==="html"||u.type==="svg")&&GL(c.current,n,i,f);const m=O.useRef(!1);O.useInsertionEffect(()=>{u&&m.current&&u.update(n,a)});const p=n[EC],y=O.useRef(!!p&&!((x=window.MotionHandoffIsComplete)!=null&&x.call(window,p))&&((k=window.MotionHasOptimisedAnimation)==null?void 0:k.call(window,p)));return _I(()=>{u&&(m.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),y.current&&u.animationState&&u.animationState.animateChanges())}),O.useEffect(()=>{u&&(!y.current&&u.animationState&&u.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)==null||v.call(window,p)}),y.current=!1),u.enteringChildren=void 0)}),u}function GL(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:SC(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Yo(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:l,layoutRoot:c})}function SC(t){if(t)return t.options.allowProjection!==!1?t.projection:SC(t.parent)}function Vp(t,{forwardMotionProps:e=!1}={},n,r){n&&bL(n);const i=nx(t)?$L:zL;function s(a,l){let c;const u={...O.useContext(Yv),...a,layoutId:QL(a)},{isStatic:f}=u,m=SL(a),p=i(a,f);if(!f&&Cv){YL();const y=XL(u);c=y.MeasureLayout,m.visualElement=KL(t,p,u,r,y.ProjectionNode)}return h.jsxs(tm.Provider,{value:m,children:[c&&m.visualElement?h.jsx(c,{visualElement:m.visualElement,...u}):null,FL(t,a,HL(p,m.visualElement,l),p,f,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=O.forwardRef(s);return o[WL]=t,o}function QL({layoutId:t}){const e=O.useContext(Sv).id;return e&&t!==void 0?e+"-"+t:t}function YL(t,e){O.useContext(mC).strict}function XL(t){const{drag:e,layout:n}=ja;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function JL(t,e){if(typeof Proxy>"u")return Vp;const n=new Map,r=(s,o)=>Vp(s,o,t,e),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,Vp(o,void 0,t,e)),n.get(o))})}function IC({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function ZL({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function e5(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Fp(t){return t===void 0||t===1}function L0({scale:t,scaleX:e,scaleY:n}){return!Fp(t)||!Fp(e)||!Fp(n)}function Ps(t){return L0(t)||CC(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function CC(t){return mk(t.x)||mk(t.y)}function mk(t){return t&&t!=="0%"}function rf(t,e,n){const r=t-n,i=e*r;return n+i}function pk(t,e,n,r,i){return i!==void 0&&(t=rf(t,i,r)),rf(t,n,r)+e}function V0(t,e=0,n=1,r,i){t.min=pk(t.min,e,n,r,i),t.max=pk(t.max,e,n,r,i)}function PC(t,{x:e,y:n}){V0(t.x,e.translate,e.scale,e.originPoint),V0(t.y,n.translate,n.scale,n.originPoint)}const gk=.999999999999,yk=1.0000000000001;function t5(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Jo(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,PC(t,o)),r&&Ps(s.latestValues)&&Jo(t,s.latestValues))}e.x<yk&&e.x>gk&&(e.x=1),e.y<yk&&e.y>gk&&(e.y=1)}function Xo(t,e){t.min=t.min+e,t.max=t.max+e}function vk(t,e,n,r,i=.5){const s=$e(t.min,t.max,i);V0(t,e,n,s,r)}function Jo(t,e){vk(t.x,e.x,e.scaleX,e.scale,e.originX),vk(t.y,e.y,e.scaleY,e.scale,e.originY)}function AC(t,e){return IC(e5(t.getBoundingClientRect(),e))}function n5(t,e,n){const r=AC(t,n),{scroll:i}=e;return i&&(Xo(r.x,i.offset.x),Xo(r.y,i.offset.y)),r}const xk=()=>({translate:0,scale:1,origin:0,originPoint:0}),Zo=()=>({x:xk(),y:xk()}),wk=()=>({min:0,max:0}),Je=()=>({x:wk(),y:wk()}),F0={current:null},NC={current:!1};function r5(){if(NC.current=!0,!!Cv)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>F0.current=t.matches;t.addEventListener("change",e),e()}else F0.current=!1}const i5=new WeakMap;function s5(t,e,n){for(const r in e){const i=e[r],s=n[r];if(Vt(i))t.addValue(r,i);else if(Vt(s))t.addValue(r,Da(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Da(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const bk=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class o5{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Hv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=dn.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Ue.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=rm(n),this.isVariantNode=gC(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in f){const p=f[m];l[m]!==void 0&&Vt(p)&&p.set(l[m])}}mount(e){var n;this.current=e,i5.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),NC.current||r5(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:F0.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),ss(this.notifyUpdate),ss(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=el.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Ue.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in ja){const n=ja[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Je()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<bk.length;r++){const i=bk[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=s5(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Da(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(kI(r)||TI(r))?r=parseFloat(r):!mL(r)&&os.test(n)&&(r=oC(e,n)),this.setBaseTarget(e,Vt(r)?r.get():r)),Vt(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=rx(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Vt(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Mv),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Gv.render(this.render)}}class RC extends o5{constructor(){super(...arguments),this.KeyframeResolver=nL}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Vt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function MC(t,{style:e,vars:n},r,i){const s=t.style;let o;for(o in e)s[o]=e[o];i==null||i.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function a5(t){return window.getComputedStyle(t)}class l5 extends RC{constructor(){super(...arguments),this.type="html",this.renderInstance=MC}readValueFromInstance(e,n){var r;if(el.has(n))return(r=this.projection)!=null&&r.isProjecting?A0(n):b4(e,n);{const i=a5(e),s=(Ov(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return AC(e,n)}build(e,n,r){ex(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return ix(e,n,r)}}const DC=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function c5(t,e,n,r){MC(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(DC.has(i)?i:sx(i),e.attrs[i])}class u5 extends RC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Je}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(el.has(n)){const r=sC(n);return r&&r.default||0}return n=DC.has(n)?n:sx(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return kC(e,n,r)}build(e,n,r){xC(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){c5(e,n,r,i)}mount(e){this.isSVGTag=bC(e.tagName),super.mount(e)}}const d5=(t,e)=>nx(t)?new u5(e):new l5(e,{allowProjection:t!==O.Fragment});function la(t,e,n){const r=t.getProps();return rx(r,e,n!==void 0?n:r.custom,t)}const U0=t=>Array.isArray(t);function h5(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Da(n))}function f5(t){return U0(t)?t[t.length-1]||0:t}function m5(t,e){const n=la(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=f5(s[o]);h5(t,o,a)}}function p5(t){return!!(Vt(t)&&t.add)}function B0(t,e){const n=t.getValue("willChange");if(p5(n))return n.add(e);if(!n&&ri.WillChange){const r=new ri.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function jC(t){return t.props[EC]}const g5=t=>t!==null;function y5(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(g5),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}const v5={type:"spring",stiffness:500,damping:25,restSpeed:10},x5=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),w5={type:"keyframes",duration:.8},b5={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},_5=(t,{keyframes:e})=>e.length>2?w5:el.has(t)?t.startsWith("scale")?x5(e[1]):v5:b5;function k5({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const ox=(t,e,n,r={},i,s)=>o=>{const a=qv(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-xr(l);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:m=>{e.set(m),a.onUpdate&&a.onUpdate(m)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};k5(a)||Object.assign(u,_5(t,u)),u.duration&&(u.duration=xr(u.duration)),u.repeatDelay&&(u.repeatDelay=xr(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let f=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(j0(u),u.delay===0&&(f=!0)),(ri.instantAnimations||ri.skipAnimations)&&(f=!0,j0(u),u.delay=0),u.allowFlatten=!a.type&&!a.ease,f&&!s&&e.get()!==void 0){const m=y5(u.keyframes,a);if(m!==void 0){Ue.update(()=>{u.onUpdate(m),u.onComplete()});return}}return a.isSync?new Wv(u):new W4(u)};function E5({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function OC(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(s=r);const l=[],c=i&&t.animationState&&t.animationState.getState()[i];for(const u in a){const f=t.getValue(u,t.latestValues[u]??null),m=a[u];if(m===void 0||c&&E5(c,u))continue;const p={delay:n,...qv(s||{},u)},y=f.get();if(y!==void 0&&!f.isAnimating&&!Array.isArray(m)&&m===y&&!p.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const v=jC(t);if(v){const w=window.MotionHandoffAnimation(v,u,Ue);w!==null&&(p.startTime=w,x=!0)}}B0(t,u),f.start(ox(u,f,m,t.shouldReduceMotion&&nC.has(u)?{type:!1}:p,t,x));const k=f.animation;k&&l.push(k)}return o&&Promise.all(l).then(()=>{Ue.update(()=>{o&&m5(t,o)})}),l}function LC(t,e,n,r=0,i=1){const s=Array.from(t).sort((c,u)=>c.sortNodePosition(u)).indexOf(e),o=t.size,a=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:a-s*r}function z0(t,e,n={}){var l;const r=la(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(OC(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:m}=i;return T5(t,e,c,u,f,m,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[c,u]=a==="beforeChildren"?[s,o]:[o,s];return c().then(()=>u())}else return Promise.all([s(),o(n.delay)])}function T5(t,e,n=0,r=0,i=0,s=1,o){const a=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),a.push(z0(l,e,{...o,delay:n+(typeof r=="function"?0:r)+LC(t.variantChildren,l,r,i,s)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(a)}function S5(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>z0(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=z0(t,e,n);else{const i=typeof e=="function"?la(t,e,n.custom):e;r=Promise.all(OC(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function VC(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const I5=Zv.length;function FC(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?FC(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<I5;n++){const r=Zv[n],i=t.props[r];(Kc(i)||i===!1)&&(e[r]=i)}return e}const C5=[...Jv].reverse(),P5=Jv.length;function A5(t){return e=>Promise.all(e.map(({animation:n,options:r})=>S5(t,n,r)))}function N5(t){let e=A5(t),n=_k(),r=!0;const i=l=>(c,u)=>{var m;const f=la(t,u,l==="exit"?(m=t.presenceContext)==null?void 0:m.custom:void 0);if(f){const{transition:p,transitionEnd:y,...x}=f;c={...c,...x,...y}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,u=FC(t.parent)||{},f=[],m=new Set;let p={},y=1/0;for(let k=0;k<P5;k++){const v=C5[k],w=n[v],_=c[v]!==void 0?c[v]:u[v],P=Kc(_),A=v===l?w.isActive:null;A===!1&&(y=k);let N=_===u[v]&&_!==c[v]&&P;if(N&&r&&t.manuallyAnimateOnMount&&(N=!1),w.protectedKeys={...p},!w.isActive&&A===null||!_&&!w.prevProp||nm(_)||typeof _=="boolean")continue;const T=R5(w.prevProp,_);let E=T||v===l&&w.isActive&&!N&&P||k>y&&P,S=!1;const C=Array.isArray(_)?_:[_];let M=C.reduce(i(v),{});A===!1&&(M={});const{prevResolvedValues:D={}}=w,R={...D,...M},ie=G=>{E=!0,m.has(G)&&(S=!0,m.delete(G)),w.needsAnimating[G]=!0;const F=t.getValue(G);F&&(F.liveStyle=!1)};for(const G in R){const F=M[G],$=D[G];if(p.hasOwnProperty(G))continue;let K=!1;U0(F)&&U0($)?K=!VC(F,$):K=F!==$,K?F!=null?ie(G):m.add(G):F!==void 0&&m.has(G)?ie(G):w.protectedKeys[G]=!0}w.prevProp=_,w.prevResolvedValues=M,w.isActive&&(p={...p,...M}),r&&t.blockInitialAnimation&&(E=!1);const se=N&&T;E&&(!se||S)&&f.push(...C.map(G=>{const F={type:v};if(typeof G=="string"&&r&&!se&&t.manuallyAnimateOnMount&&t.parent){const{parent:$}=t,K=la($,G);if($.enteringChildren&&K){const{delayChildren:de}=K.transition||{};F.delay=LC($.enteringChildren,t,de)}}return{animation:G,options:F}}))}if(m.size){const k={};if(typeof c.initial!="boolean"){const v=la(t,Array.isArray(c.initial)?c.initial[0]:c.initial);v&&v.transition&&(k.transition=v.transition)}m.forEach(v=>{const w=t.getBaseTarget(v),_=t.getValue(v);_&&(_.liveStyle=!0),k[v]=w??null}),f.push({animation:k})}let x=!!f.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(f):Promise.resolve()}function a(l,c){var f;if(n[l].isActive===c)return Promise.resolve();(f=t.variantChildren)==null||f.forEach(m=>{var p;return(p=m.animationState)==null?void 0:p.setActive(l,c)}),n[l].isActive=c;const u=o(l);for(const m in n)n[m].protectedKeys={};return u}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=_k()}}}function R5(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!VC(e,t):!1}function _s(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function _k(){return{animate:_s(!0),whileInView:_s(),whileHover:_s(),whileTap:_s(),whileDrag:_s(),whileFocus:_s(),exit:_s()}}class ms{constructor(e){this.isMounted=!1,this.node=e}update(){}}class M5 extends ms{constructor(e){super(e),e.animationState||(e.animationState=N5(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();nm(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let D5=0;class j5 extends ms{constructor(){super(...arguments),this.id=D5++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const O5={animation:{Feature:M5},exit:{Feature:j5}};function Qc(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Cu(t){return{point:{x:t.pageX,y:t.pageY}}}const L5=t=>e=>Qv(e)&&t(e,Cu(e));function dc(t,e,n,r){return Qc(t,e,L5(n),r)}const UC=1e-4,V5=1-UC,F5=1+UC,BC=.01,U5=0-BC,B5=0+BC;function Yt(t){return t.max-t.min}function z5(t,e,n){return Math.abs(t-e)<=n}function kk(t,e,n,r=.5){t.origin=r,t.originPoint=$e(e.min,e.max,t.origin),t.scale=Yt(n)/Yt(e),t.translate=$e(n.min,n.max,t.origin)-t.originPoint,(t.scale>=V5&&t.scale<=F5||isNaN(t.scale))&&(t.scale=1),(t.translate>=U5&&t.translate<=B5||isNaN(t.translate))&&(t.translate=0)}function hc(t,e,n,r){kk(t.x,e.x,n.x,r?r.originX:void 0),kk(t.y,e.y,n.y,r?r.originY:void 0)}function Ek(t,e,n){t.min=n.min+e.min,t.max=t.min+Yt(e)}function $5(t,e,n){Ek(t.x,e.x,n.x),Ek(t.y,e.y,n.y)}function Tk(t,e,n){t.min=e.min-n.min,t.max=t.min+Yt(e)}function fc(t,e,n){Tk(t.x,e.x,n.x),Tk(t.y,e.y,n.y)}function Pn(t){return[t("x"),t("y")]}const zC=({current:t})=>t?t.ownerDocument.defaultView:null,Sk=(t,e)=>Math.abs(t-e);function W5(t,e){const n=Sk(t.x,e.x),r=Sk(t.y,e.y);return Math.sqrt(n**2+r**2)}class $C{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Bp(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,y=W5(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!y)return;const{point:x}=m,{timestamp:k}=xt;this.history.push({...x,timestamp:k});const{onStart:v,onMove:w}=this.handlers;p||(v&&v(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,m)},this.handlePointerMove=(m,p)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Up(p,this.transformPagePoint),Ue.update(this.updatePoint,!0)},this.handlePointerUp=(m,p)=>{this.end();const{onEnd:y,onSessionEnd:x,resumeAnimation:k}=this.handlers;if(this.dragSnapToOrigin&&k&&k(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Bp(m.type==="pointercancel"?this.lastMoveEventInfo:Up(p,this.transformPagePoint),this.history);this.startEvent&&y&&y(m,v),x&&x(m,v)},!Qv(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const a=Cu(e),l=Up(a,this.transformPagePoint),{point:c}=l,{timestamp:u}=xt;this.history=[{...c,timestamp:u}];const{onSessionStart:f}=n;f&&f(e,Bp(l,this.history)),this.removeListeners=Tu(dc(this.contextWindow,"pointermove",this.handlePointerMove),dc(this.contextWindow,"pointerup",this.handlePointerUp),dc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ss(this.updatePoint)}}function Up(t,e){return e?{point:e(t.point)}:t}function Ik(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Bp({point:t},e){return{point:t,delta:Ik(t,WC(e)),offset:Ik(t,H5(e)),velocity:q5(e,.1)}}function H5(t){return t[0]}function WC(t){return t[t.length-1]}function q5(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=WC(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>xr(e)));)n--;if(!r)return{x:0,y:0};const s=jn(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function K5(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?$e(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?$e(n,t,r.max):Math.min(t,n)),t}function Ck(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function G5(t,{top:e,left:n,bottom:r,right:i}){return{x:Ck(t.x,n,i),y:Ck(t.y,e,r)}}function Pk(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Q5(t,e){return{x:Pk(t.x,e.x),y:Pk(t.y,e.y)}}function Y5(t,e){let n=.5;const r=Yt(t),i=Yt(e);return i>r?n=Wc(e.min,e.max-r,t.min):r>i&&(n=Wc(t.min,t.max-i,e.min)),ni(0,1,n)}function X5(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const $0=.35;function J5(t=$0){return t===!1?t=0:t===!0&&(t=$0),{x:Ak(t,"left","right"),y:Ak(t,"top","bottom")}}function Ak(t,e,n){return{min:Nk(t,e),max:Nk(t,n)}}function Nk(t,e){return typeof t=="number"?t:t[e]||0}const Z5=new WeakMap;class eV{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Je(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=f=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Cu(f).point)},o=(f,m)=>{const{drag:p,dragPropagation:y,onDragStart:x}=this.getProps();if(p&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=oL(p),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Pn(v=>{let w=this.getAxisMotionValue(v).get()||0;if(wr.test(w)){const{projection:_}=this.visualElement;if(_&&_.layout){const P=_.layout.layoutBox[v];P&&(w=Yt(P)*(parseFloat(w)/100))}}this.originPoint[v]=w}),x&&Ue.postRender(()=>x(f,m)),B0(this.visualElement,"transform");const{animationState:k}=this.visualElement;k&&k.setActive("whileDrag",!0)},a=(f,m)=>{this.latestPointerEvent=f,this.latestPanInfo=m;const{dragPropagation:p,dragDirectionLock:y,onDirectionLock:x,onDrag:k}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:v}=m;if(y&&this.currentDirection===null){this.currentDirection=tV(v),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",m.point,v),this.updateAxis("y",m.point,v),this.visualElement.render(),k&&k(f,m)},l=(f,m)=>{this.latestPointerEvent=f,this.latestPanInfo=m,this.stop(f,m),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>Pn(f=>{var m;return this.getAnimationState(f)==="paused"&&((m=this.getAxisMotionValue(f).animation)==null?void 0:m.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new $C(e,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:r,contextWindow:zC(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Ue.postRender(()=>a(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Nd(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=K5(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&Yo(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=G5(r.layoutBox,e):this.constraints=!1,this.elastic=J5(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Pn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=X5(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Yo(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=n5(r,i.root,this.visualElement.getTransformPagePoint());let o=Q5(i.layout.layoutBox,s);if(n){const a=n(ZL(o));this.hasMutatedConstraints=!!a,a&&(o=IC(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Pn(u=>{if(!Nd(u,n,this.currentDirection))return;let f=l&&l[u]||{};o&&(f={min:0,max:0});const m=i?200:1e6,p=i?40:1e7,y={type:"inertia",velocity:r?e[u]:0,bounceStiffness:m,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(u,y)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return B0(this.visualElement,e),r.start(ox(e,r,0,n,this.visualElement,!1))}stopAnimation(){Pn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Pn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Pn(n=>{const{drag:r}=this.getProps();if(!Nd(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-$e(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Yo(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Pn(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=Y5({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Pn(o=>{if(!Nd(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set($e(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;Z5.set(this.visualElement,this);const e=this.visualElement.current,n=dc(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Yo(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ue.read(r);const o=Qc(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Pn(u=>{const f=this.getAxisMotionValue(u);f&&(this.originPoint[u]+=l[u].translate,f.set(f.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=$0,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Nd(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function tV(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class nV extends ms{constructor(e){super(e),this.removeGroupControls=Vn,this.removeListeners=Vn,this.controls=new eV(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Vn}unmount(){this.removeGroupControls(),this.removeListeners()}}const Rk=t=>(e,n)=>{t&&Ue.postRender(()=>t(e,n))};class rV extends ms{constructor(){super(...arguments),this.removePointerDownListener=Vn}onPointerDown(e){this.session=new $C(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:zC(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Rk(e),onStart:Rk(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Ue.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=dc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const fh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Mk(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Pl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(oe.test(t))t=parseFloat(t);else return t;const n=Mk(t,e.target.x),r=Mk(t,e.target.y);return`${n}% ${r}%`}},iV={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=os.parse(t);if(i.length>5)return r;const s=os.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=$e(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};let zp=!1;class sV extends O.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;IL(oV),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),zp&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),fh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,zp=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Ue.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Gv.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;zp=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function HC(t){const[e,n]=fC(),r=O.useContext(Sv);return h.jsx(sV,{...t,layoutGroup:r,switchLayoutGroup:O.useContext(TC),isPresent:e,safeToRemove:n})}const oV={borderRadius:{...Pl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Pl,borderTopRightRadius:Pl,borderBottomLeftRadius:Pl,borderBottomRightRadius:Pl,boxShadow:iV};function aV(t,e,n){const r=Vt(t)?t:Da(t);return r.start(ox("",r,e,n)),r.animation}const lV=(t,e)=>t.depth-e.depth;class cV{constructor(){this.children=[],this.isDirty=!1}add(e){Pv(this.children,e),this.isDirty=!0}remove(e){Av(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(lV),this.isDirty=!1,this.children.forEach(e)}}function uV(t,e){const n=dn.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(ss(r),t(s-e))};return Ue.setup(r,!0),()=>ss(r)}const qC=["TopLeft","TopRight","BottomLeft","BottomRight"],dV=qC.length,Dk=t=>typeof t=="string"?parseFloat(t):t,jk=t=>typeof t=="number"||oe.test(t);function hV(t,e,n,r,i,s){i?(t.opacity=$e(0,n.opacity??1,fV(r)),t.opacityExit=$e(e.opacity??1,0,mV(r))):s&&(t.opacity=$e(e.opacity??1,n.opacity??1,r));for(let o=0;o<dV;o++){const a=`border${qC[o]}Radius`;let l=Ok(e,a),c=Ok(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||jk(l)===jk(c)?(t[a]=Math.max($e(Dk(l),Dk(c),r),0),(wr.test(c)||wr.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=$e(e.rotate||0,n.rotate||0,r))}function Ok(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const fV=KC(0,.5,MI),mV=KC(.5,.95,Vn);function KC(t,e,n){return r=>r<t?0:r>e?1:n(Wc(t,e,r))}function Lk(t,e){t.min=e.min,t.max=e.max}function In(t,e){Lk(t.x,e.x),Lk(t.y,e.y)}function Vk(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Fk(t,e,n,r,i){return t-=e,t=rf(t,1/n,r),i!==void 0&&(t=rf(t,1/i,r)),t}function pV(t,e=0,n=1,r=.5,i,s=t,o=t){if(wr.test(e)&&(e=parseFloat(e),e=$e(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=$e(s.min,s.max,r);t===s&&(a-=e),t.min=Fk(t.min,e,n,a,i),t.max=Fk(t.max,e,n,a,i)}function Uk(t,e,[n,r,i],s,o){pV(t,e[n],e[r],e[i],e.scale,s,o)}const gV=["x","scaleX","originX"],yV=["y","scaleY","originY"];function Bk(t,e,n,r){Uk(t.x,e,gV,n?n.x:void 0,r?r.x:void 0),Uk(t.y,e,yV,n?n.y:void 0,r?r.y:void 0)}function zk(t){return t.translate===0&&t.scale===1}function GC(t){return zk(t.x)&&zk(t.y)}function $k(t,e){return t.min===e.min&&t.max===e.max}function vV(t,e){return $k(t.x,e.x)&&$k(t.y,e.y)}function Wk(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function QC(t,e){return Wk(t.x,e.x)&&Wk(t.y,e.y)}function Hk(t){return Yt(t.x)/Yt(t.y)}function qk(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class xV{constructor(){this.members=[]}add(e){Pv(this.members,e),e.scheduleRender()}remove(e){if(Av(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function wV(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:f,rotateY:m,skewX:p,skewY:y}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),f&&(r+=`rotateX(${f}deg) `),m&&(r+=`rotateY(${m}deg) `),p&&(r+=`skewX(${p}deg) `),y&&(r+=`skewY(${y}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const $p=["","X","Y","Z"],bV=1e3;let _V=0;function Wp(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function YC(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=jC(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ue,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&YC(r)}function XC({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=_V++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(TV),this.nodes.forEach(PV),this.nodes.forEach(AV),this.nodes.forEach(SV)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new cV)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Mv),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=hC(o)&&!hL(o),this.instance=o;const{layoutId:a,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),t){let u,f=0;const m=()=>this.root.updateBlockedByResize=!1;Ue.read(()=>{f=window.innerWidth}),t(o,()=>{const p=window.innerWidth;p!==f&&(f=p,this.root.updateBlockedByResize=!0,u&&u(),u=uV(m,250),fh.hasAnimatedSinceResize&&(fh.hasAnimatedSinceResize=!1,this.nodes.forEach(Qk)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&c&&(a||l)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:f,hasRelativeLayoutChanged:m,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||c.getDefaultTransition()||jV,{onLayoutAnimationStart:x,onLayoutAnimationComplete:k}=c.getProps(),v=!this.targetLayout||!QC(this.targetLayout,p),w=!f&&m;if(this.options.layoutRoot||this.resumeFrom||w||f&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const _={...qv(y,"layout"),onPlay:x,onComplete:k};(c.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_),this.setAnimationOrigin(u,w)}else f||Qk(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ss(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(NV),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&YC(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const f=this.path[u];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Kk);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Gk);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(CV),this.nodes.forEach(kV),this.nodes.forEach(EV)):this.nodes.forEach(Gk),this.clearAllSnapshots();const a=dn.now();xt.delta=ni(0,1e3/60,a-xt.timestamp),xt.timestamp=a,xt.isProcessing=!0,Rp.update.process(xt),Rp.preRender.process(xt),Rp.render.process(xt),xt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Gv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(IV),this.sharedNodes.forEach(RV)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ue.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ue.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Yt(this.snapshot.measuredBox.x)&&!Yt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Je(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!GC(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&this.instance&&(a||Ps(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),OV(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:o}=this.options;if(!o)return Je();const a=o.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(LV))){const{scroll:u}=this.root;u&&(Xo(a.x,u.offset.x),Xo(a.y,u.offset.y))}return a}removeElementScroll(o){var l;const a=Je();if(In(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:f,options:m}=u;u!==this.root&&f&&m.layoutScroll&&(f.wasRoot&&In(a,o),Xo(a.x,f.offset.x),Xo(a.y,f.offset.y))}return a}applyTransform(o,a=!1){const l=Je();In(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Jo(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Ps(u.latestValues)&&Jo(l,u.latestValues)}return Ps(this.latestValues)&&Jo(l,this.latestValues),l}removeTransform(o){const a=Je();In(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Ps(c.latestValues))continue;L0(c.latestValues)&&c.updateSnapshot();const u=Je(),f=c.measurePageBox();In(u,f),Bk(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Ps(this.latestValues)&&Bk(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==xt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var m;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:f}=this.options;if(!(!this.layout||!(u||f))){if(this.resolvedRelativeTargetAt=xt.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Je(),this.relativeTargetOrigin=Je(),fc(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),In(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Je(),this.targetWithTransforms=Je()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),$5(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):In(this.target,this.layout.layoutBox),PC(this.target,this.targetDelta)):In(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Je(),this.relativeTargetOrigin=Je(),fc(this.relativeTargetOrigin,this.target,p.target),In(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||L0(this.parent.latestValues)||CC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var y;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===xt.timestamp&&(l=!1),l)return;const{layout:c,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||u))return;In(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;t5(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Je());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Vk(this.prevProjectionDelta.x,this.projectionDelta.x),Vk(this.prevProjectionDelta.y,this.projectionDelta.y)),hc(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==m||!qk(this.projectionDelta.x,this.prevProjectionDelta.x)||!qk(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Zo(),this.projectionDelta=Zo(),this.projectionDeltaWithTransform=Zo()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},f=Zo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=Je(),p=l?l.source:void 0,y=this.layout?this.layout.source:void 0,x=p!==y,k=this.getStack(),v=!k||k.members.length<=1,w=!!(x&&!v&&this.options.crossfade===!0&&!this.path.some(DV));this.animationProgress=0;let _;this.mixTargetDelta=P=>{const A=P/1e3;Yk(f.x,o.x,A),Yk(f.y,o.y,A),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(fc(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),MV(this.relativeTarget,this.relativeTargetOrigin,m,A),_&&vV(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=Je()),In(_,this.relativeTarget)),x&&(this.animationValues=u,hV(u,c,this.latestValues,A,w,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,c;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(ss(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ue.update(()=>{fh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Da(0)),this.currentAnimation=aV(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),o.onUpdate&&o.onUpdate(u)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(bV),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&JC(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Je();const f=Yt(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const m=Yt(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+m}In(a,l),Jo(a,u),hc(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new xV),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&Wp("z",o,c,this.animationValues);for(let u=0;u<$p.length;u++)Wp(`rotate${$p[u]}`,o,c,this.animationValues),Wp(`skew${$p[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=hh(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=hh(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Ps(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const u=c.animationValues||c.latestValues;this.applyTransformsToTarget();let f=wV(this.projectionDeltaWithTransform,this.treeScale,u);l&&(f=l(u,f)),o.transform=f;const{x:m,y:p}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${p.origin*100}% 0`,c.animationValues?o.opacity=c===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:o.opacity=c===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const y in Gc){if(u[y]===void 0)continue;const{correct:x,applyTo:k,isCSSVariable:v}=Gc[y],w=f==="none"?u[y]:x(u[y],c);if(k){const _=k.length;for(let P=0;P<_;P++)o[k[P]]=w}else v?this.options.visualElement.renderState.vars[y]=w:o[y]=w}this.options.layoutId&&(o.pointerEvents=c===this?hh(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(Kk),this.root.sharedNodes.clear()}}}function kV(t){t.updateLayout()}function EV(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?Pn(f=>{const m=o?e.measuredBox[f]:e.layoutBox[f],p=Yt(m);m.min=r[f].min,m.max=m.min+p}):JC(s,e.layoutBox,r)&&Pn(f=>{const m=o?e.measuredBox[f]:e.layoutBox[f],p=Yt(r[f]);m.max=m.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+p)});const a=Zo();hc(a,r,e.layoutBox);const l=Zo();o?hc(l,t.applyTransform(i,!0),e.measuredBox):hc(l,r,e.layoutBox);const c=!GC(a);let u=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:m,layout:p}=f;if(m&&p){const y=Je();fc(y,e.layoutBox,m.layoutBox);const x=Je();fc(x,r,p.layoutBox),QC(y,x)||(u=!0),f.options.layoutRoot&&(t.relativeTarget=x,t.relativeTargetOrigin=y,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function TV(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function SV(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function IV(t){t.clearSnapshot()}function Kk(t){t.clearMeasurements()}function Gk(t){t.isLayoutDirty=!1}function CV(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Qk(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function PV(t){t.resolveTargetDelta()}function AV(t){t.calcProjection()}function NV(t){t.resetSkewAndRotation()}function RV(t){t.removeLeadSnapshot()}function Yk(t,e,n){t.translate=$e(e.translate,0,n),t.scale=$e(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Xk(t,e,n,r){t.min=$e(e.min,n.min,r),t.max=$e(e.max,n.max,r)}function MV(t,e,n,r){Xk(t.x,e.x,n.x,r),Xk(t.y,e.y,n.y,r)}function DV(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const jV={duration:.45,ease:[.4,0,.1,1]},Jk=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Zk=Jk("applewebkit/")&&!Jk("chrome/")?Math.round:Vn;function e1(t){t.min=Zk(t.min),t.max=Zk(t.max)}function OV(t){e1(t.x),e1(t.y)}function JC(t,e,n){return t==="position"||t==="preserve-aspect"&&!z5(Hk(e),Hk(n),.2)}function LV(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const VV=XC({attachResizeListener:(t,e)=>Qc(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Hp={current:void 0},ZC=XC({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Hp.current){const t=new VV({});t.mount(window),t.setOptions({layoutScroll:!0}),Hp.current=t}return Hp.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),FV={pan:{Feature:rV},drag:{Feature:nV,ProjectionNode:ZC,MeasureLayout:HC}};function t1(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Ue.postRender(()=>s(e,Cu(e)))}class UV extends ms{mount(){const{current:e}=this.node;e&&(this.unmount=aL(e,(n,r)=>(t1(this.node,r,"Start"),i=>t1(this.node,i,"End"))))}unmount(){}}class BV extends ms{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Tu(Qc(this.node.current,"focus",()=>this.onFocus()),Qc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function n1(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Ue.postRender(()=>s(e,Cu(e)))}class zV extends ms{mount(){const{current:e}=this.node;e&&(this.unmount=dL(e,(n,r)=>(n1(this.node,r,"Start"),(i,{success:s})=>n1(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const W0=new WeakMap,qp=new WeakMap,$V=t=>{const e=W0.get(t.target);e&&e(t)},WV=t=>{t.forEach($V)};function HV({root:t,...e}){const n=t||document;qp.has(n)||qp.set(n,{});const r=qp.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(WV,{root:t,...e})),r[i]}function qV(t,e,n){const r=HV(e);return W0.set(t,n),r.observe(t),()=>{W0.delete(t),r.unobserve(t)}}const KV={some:0,all:1};class GV extends ms{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:KV[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:f}=this.node.getProps(),m=c?u:f;m&&m(l)};return qV(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(QV(e,n))&&this.startObserver()}unmount(){}}function QV({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const YV={inView:{Feature:GV},tap:{Feature:zV},focus:{Feature:BV},hover:{Feature:UV}},XV={layout:{ProjectionNode:ZC,MeasureLayout:HC}},JV={...O5,...YV,...FV,...XV},Z=JL(JV,d5);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZV=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),e6=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),r1=t=>{const e=e6(t);return e.charAt(0).toUpperCase()+e.slice(1)},eP=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),t6=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var n6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r6=O.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>O.createElement("svg",{ref:l,...n6,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:eP("lucide",i),...!s&&!t6(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,u])=>O.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=(t,e)=>{const n=O.forwardRef(({className:r,...i},s)=>O.createElement(r6,{ref:s,iconNode:e,className:eP(`lucide-${ZV(r1(t))}`,`lucide-${t}`,r),...i}));return n.displayName=r1(t),n};/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i6=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Yi=we("activity",i6);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],o6=we("award",s6);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a6=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],l6=we("bell",a6);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c6=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],sf=we("calendar",c6);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],tP=we("circle-alert",u6);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d6=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],h6=we("circle-check-big",d6);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f6=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Yc=we("clock",f6);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m6=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],i1=we("download",m6);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p6=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],of=we("eye-off",p6);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g6=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],af=we("eye",g6);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y6=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],lf=we("flame",y6);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v6=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],x6=we("funnel",v6);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w6=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],b6=we("house",w6);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _6=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],cf=we("lock",_6);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k6=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],E6=we("log-out",k6);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T6=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],H0=we("mail",T6);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S6=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],I6=we("palette",S6);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],P6=we("play",C6);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A6=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],N6=we("refresh-cw",A6);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R6=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],M6=we("ruler",R6);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D6=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],nP=we("save",D6);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j6=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],s1=we("search",j6);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O6=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],rP=we("settings",O6);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L6=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],V6=we("shield",L6);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F6=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],U6=we("star",F6);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],ax=we("target",B6);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z6=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],$6=we("timer",z6);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W6=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Kp=we("trash-2",W6);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H6=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],iP=we("triangle-alert",H6);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q6=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],uf=we("trophy",q6);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K6=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],G6=we("upload",K6);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q6=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],im=we("user",Q6);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y6=[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]],X6=we("weight",Y6);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J6=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],sP=we("x",J6);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z6=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],eF=we("zap",Z6);var o1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},tF=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},aP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,f=(s&3)<<4|a>>4;let m=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(m=64)),r.push(n[u],n[f],n[m],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(oP(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):tF(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||f==null)throw new nF;const m=s<<2|a>>4;if(r.push(m),c!==64){const p=a<<4&240|c>>2;if(r.push(p),f!==64){const y=c<<6&192|f;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class nF extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rF=function(t){const e=oP(t);return aP.encodeByteArray(e,!0)},df=function(t){return rF(t).replace(/\./g,"")},lP=function(t){try{return aP.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sF=()=>iF().__FIREBASE_DEFAULTS__,oF=()=>{if(typeof process>"u"||typeof o1>"u")return;const t=o1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},aF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&lP(t[1]);return e&&JSON.parse(e)},sm=()=>{try{return sF()||oF()||aF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},cP=t=>{var e,n;return(n=(e=sm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},lF=t=>{const e=cP(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},uP=()=>{var t;return(t=sm())===null||t===void 0?void 0:t.config},dP=t=>{var e;return(e=sm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uF(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[df(JSON.stringify(n)),df(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bt())}function hF(){var t;const e=(t=sm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mF(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function pF(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gF(){const t=Bt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function yF(){return!hF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vF(){try{return typeof indexedDB=="object"}catch{return!1}}function xF(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wF="FirebaseError";class ci extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=wF,Object.setPrototypeOf(this,ci.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pu.prototype.create)}}class Pu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?bF(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ci(i,a,r)}}function bF(t,e){return t.replace(_F,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const _F=/\{\$([^}]+)}/g;function kF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function hf(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(a1(s)&&a1(o)){if(!hf(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function a1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $l(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Wl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function EF(t,e){const n=new TF(t,e);return n.subscribe.bind(n)}class TF{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");SF(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Gp),i.error===void 0&&(i.error=Gp),i.complete===void 0&&(i.complete=Gp);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function SF(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Gp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(t){return t&&t._delegate?t._delegate:t}class uo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IF{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new cF;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PF(e))try{this.getOrInitializeService({instanceIdentifier:As})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=As){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=As){return this.instances.has(e)}getOptions(e=As){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:CF(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=As){return this.component?this.component.multipleInstances?e:As:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function CF(t){return t===As?void 0:t}function PF(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new IF(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ve||(ve={}));const NF={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},RF=ve.INFO,MF={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},DF=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=MF[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class lx{constructor(e){this.name=e,this._logLevel=RF,this._logHandler=DF,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?NF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}}const jF=(t,e)=>e.some(n=>t instanceof n);let l1,c1;function OF(){return l1||(l1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LF(){return c1||(c1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hP=new WeakMap,q0=new WeakMap,fP=new WeakMap,Qp=new WeakMap,cx=new WeakMap;function VF(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Xi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&hP.set(n,t)}).catch(()=>{}),cx.set(e,t),e}function FF(t){if(q0.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});q0.set(t,e)}let K0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return q0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||fP.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function UF(t){K0=t(K0)}function BF(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Yp(this),e,...n);return fP.set(r,e.sort?e.sort():[e]),Xi(r)}:LF().includes(t)?function(...e){return t.apply(Yp(this),e),Xi(hP.get(this))}:function(...e){return Xi(t.apply(Yp(this),e))}}function zF(t){return typeof t=="function"?BF(t):(t instanceof IDBTransaction&&FF(t),jF(t,OF())?new Proxy(t,K0):t)}function Xi(t){if(t instanceof IDBRequest)return VF(t);if(Qp.has(t))return Qp.get(t);const e=zF(t);return e!==t&&(Qp.set(t,e),cx.set(e,t)),e}const Yp=t=>cx.get(t);function $F(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Xi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Xi(o.result),l.oldVersion,l.newVersion,Xi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const WF=["get","getKey","getAll","getAllKeys","count"],HF=["put","add","delete","clear"],Xp=new Map;function u1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xp.get(e))return Xp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=HF.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||WF.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Xp.set(e,s),s}UF(t=>({...t,get:(e,n,r)=>u1(e,n)||t.get(e,n,r),has:(e,n)=>!!u1(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qF{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(KF(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function KF(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const G0="@firebase/app",d1="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii=new lx("@firebase/app"),GF="@firebase/app-compat",QF="@firebase/analytics-compat",YF="@firebase/analytics",XF="@firebase/app-check-compat",JF="@firebase/app-check",ZF="@firebase/auth",e3="@firebase/auth-compat",t3="@firebase/database",n3="@firebase/data-connect",r3="@firebase/database-compat",i3="@firebase/functions",s3="@firebase/functions-compat",o3="@firebase/installations",a3="@firebase/installations-compat",l3="@firebase/messaging",c3="@firebase/messaging-compat",u3="@firebase/performance",d3="@firebase/performance-compat",h3="@firebase/remote-config",f3="@firebase/remote-config-compat",m3="@firebase/storage",p3="@firebase/storage-compat",g3="@firebase/firestore",y3="@firebase/vertexai-preview",v3="@firebase/firestore-compat",x3="firebase",w3="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0="[DEFAULT]",b3={[G0]:"fire-core",[GF]:"fire-core-compat",[YF]:"fire-analytics",[QF]:"fire-analytics-compat",[JF]:"fire-app-check",[XF]:"fire-app-check-compat",[ZF]:"fire-auth",[e3]:"fire-auth-compat",[t3]:"fire-rtdb",[n3]:"fire-data-connect",[r3]:"fire-rtdb-compat",[i3]:"fire-fn",[s3]:"fire-fn-compat",[o3]:"fire-iid",[a3]:"fire-iid-compat",[l3]:"fire-fcm",[c3]:"fire-fcm-compat",[u3]:"fire-perf",[d3]:"fire-perf-compat",[h3]:"fire-rc",[f3]:"fire-rc-compat",[m3]:"fire-gcs",[p3]:"fire-gcs-compat",[g3]:"fire-fst",[v3]:"fire-fst-compat",[y3]:"fire-vertex","fire-js":"fire-js",[x3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff=new Map,_3=new Map,Y0=new Map;function h1(t,e){try{t.container.addComponent(e)}catch(n){ii.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Oa(t){const e=t.name;if(Y0.has(e))return ii.debug(`There were multiple attempts to register component ${e}.`),!1;Y0.set(e,t);for(const n of ff.values())h1(n,t);for(const n of _3.values())h1(n,t);return!0}function ux(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function gr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ji=new Pu("app","Firebase",k3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new uo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ji.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl=w3;function mP(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Q0,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ji.create("bad-app-name",{appName:String(i)});if(n||(n=uP()),!n)throw Ji.create("no-options");const s=ff.get(i);if(s){if(hf(n,s.options)&&hf(r,s.config))return s;throw Ji.create("duplicate-app",{appName:i})}const o=new AF(i);for(const l of Y0.values())o.addComponent(l);const a=new E3(n,r,o);return ff.set(i,a),a}function pP(t=Q0){const e=ff.get(t);if(!e&&t===Q0&&uP())return mP();if(!e)throw Ji.create("no-app",{appName:t});return e}function Zi(t,e,n){var r;let i=(r=b3[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ii.warn(a.join(" "));return}Oa(new uo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3="firebase-heartbeat-database",S3=1,Xc="firebase-heartbeat-store";let Jp=null;function gP(){return Jp||(Jp=$F(T3,S3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Xc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ji.create("idb-open",{originalErrorMessage:t.message})})),Jp}async function I3(t){try{const n=(await gP()).transaction(Xc),r=await n.objectStore(Xc).get(yP(t));return await n.done,r}catch(e){if(e instanceof ci)ii.warn(e.message);else{const n=Ji.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ii.warn(n.message)}}}async function f1(t,e){try{const r=(await gP()).transaction(Xc,"readwrite");await r.objectStore(Xc).put(e,yP(t)),await r.done}catch(n){if(n instanceof ci)ii.warn(n.message);else{const r=Ji.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ii.warn(r.message)}}}function yP(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3=1024,P3=30*24*60*60*1e3;class A3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new R3(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=m1();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=P3}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ii.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=m1(),{heartbeatsToSend:r,unsentEntries:i}=N3(this._heartbeatsCache.heartbeats),s=df(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ii.warn(n),""}}}function m1(){return new Date().toISOString().substring(0,10)}function N3(t,e=C3){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),p1(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),p1(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class R3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vF()?xF().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await I3(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return f1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return f1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function p1(t){return df(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M3(t){Oa(new uo("platform-logger",e=>new qF(e),"PRIVATE")),Oa(new uo("heartbeat",e=>new A3(e),"PRIVATE")),Zi(G0,d1,t),Zi(G0,d1,"esm2017"),Zi("fire-js","")}M3("");function dx(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function vP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const D3=vP,xP=new Pu("auth","Firebase",vP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf=new lx("@firebase/auth");function j3(t,...e){mf.logLevel<=ve.WARN&&mf.warn(`Auth (${tl}): ${t}`,...e)}function mh(t,...e){mf.logLevel<=ve.ERROR&&mf.error(`Auth (${tl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(t,...e){throw hx(t,...e)}function br(t,...e){return hx(t,...e)}function wP(t,e,n){const r=Object.assign(Object.assign({},D3()),{[e]:n});return new Pu("auth","Firebase",r).create(e,{appName:t.name})}function Qr(t){return wP(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hx(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return xP.create(t,...e)}function ae(t,e,...n){if(!t)throw hx(e,...n)}function $r(t){const e="INTERNAL ASSERTION FAILED: "+t;throw mh(e),new Error(e)}function si(t,e){t||$r(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function O3(){return g1()==="http:"||g1()==="https:"}function g1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(O3()||mF()||"connection"in navigator)?navigator.onLine:!0}function V3(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,n){this.shortDelay=e,this.longDelay=n,si(n>e,"Short delay should be less than long delay!"),this.isMobile=dF()||pF()}get(){return L3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(t,e){si(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$r("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$r("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$r("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U3=new Nu(3e4,6e4);function ui(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Sr(t,e,n,r,i={}){return _P(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Au(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return fF()||(c.referrerPolicy="no-referrer"),bP.fetch()(kP(t,t.config.apiHost,n,a),c)})}async function _P(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},F3),e);try{const i=new z3(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Rd(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rd(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Rd(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Rd(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw wP(t,u,c);rr(t,u)}}catch(i){if(i instanceof ci)throw i;rr(t,"network-request-failed",{message:String(i)})}}async function Ru(t,e,n,r,i={}){const s=await Sr(t,e,n,r,i);return"mfaPendingCredential"in s&&rr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function kP(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?fx(t.config,i):`${t.config.apiScheme}://${i}`}function B3(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class z3{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(br(this.auth,"network-request-failed")),U3.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=br(t,e,r);return i.customData._tokenResponse=n,i}function y1(t){return t!==void 0&&t.enterprise!==void 0}class $3{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return B3(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function W3(t,e){return Sr(t,"GET","/v2/recaptchaConfig",ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H3(t,e){return Sr(t,"POST","/v1/accounts:delete",e)}async function EP(t,e){return Sr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function q3(t,e=!1){const n=Tt(t),r=await n.getIdToken(e),i=mx(r);ae(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:mc(Zp(i.auth_time)),issuedAtTime:mc(Zp(i.iat)),expirationTime:mc(Zp(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Zp(t){return Number(t)*1e3}function mx(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return mh("JWT malformed, contained fewer than 3 sections"),null;try{const i=lP(n);return i?JSON.parse(i):(mh("Failed to decode base64 JWT payload"),null)}catch(i){return mh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function v1(t){const e=mx(t);return ae(e,"internal-error"),ae(typeof e.exp<"u","internal-error"),ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function La(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ci&&K3(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function K3({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=mc(this.lastLoginAt),this.creationTime=mc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pf(t){var e;const n=t.auth,r=await t.getIdToken(),i=await La(t,EP(n,{idToken:r}));ae(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?TP(s.providerUserInfo):[],a=Y3(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new J0(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function Q3(t){const e=Tt(t);await pf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Y3(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function TP(t){return t.map(e=>{var{providerId:n}=e,r=dx(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X3(t,e){const n=await _P(t,{},async()=>{const r=Au({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=kP(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",bP.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function J3(t,e){return Sr(t,"POST","/v2/accounts:revokeToken",ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ae(e.idToken,"internal-error"),ae(typeof e.idToken<"u","internal-error"),ae(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):v1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ae(e.length!==0,"internal-error");const n=v1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await X3(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new ca;return r&&(ae(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ae(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ae(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ca,this.toJSON())}_performRefresh(){return $r("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(t,e){ae(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Wr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=dx(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new G3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new J0(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await La(this,this.stsTokenManager.getToken(this.auth,e));return ae(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return q3(this,e)}reload(){return Q3(this)}_assign(e){this!==e&&(ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Wr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await pf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gr(this.auth.app))return Promise.reject(Qr(this.auth));const e=await this.getIdToken();return await La(this,H3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,u;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,p=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,k=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,w=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:_,emailVerified:P,isAnonymous:A,providerData:N,stsTokenManager:T}=n;ae(_&&T,e,"internal-error");const E=ca.fromJSON(this.name,T);ae(typeof _=="string",e,"internal-error"),pi(f,e.name),pi(m,e.name),ae(typeof P=="boolean",e,"internal-error"),ae(typeof A=="boolean",e,"internal-error"),pi(p,e.name),pi(y,e.name),pi(x,e.name),pi(k,e.name),pi(v,e.name),pi(w,e.name);const S=new Wr({uid:_,auth:e,email:m,emailVerified:P,displayName:f,isAnonymous:A,photoURL:y,phoneNumber:p,tenantId:x,stsTokenManager:E,createdAt:v,lastLoginAt:w});return N&&Array.isArray(N)&&(S.providerData=N.map(C=>Object.assign({},C))),k&&(S._redirectEventId=k),S}static async _fromIdTokenResponse(e,n,r=!1){const i=new ca;i.updateFromServerResponse(n);const s=new Wr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await pf(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ae(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?TP(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new ca;a.updateFromIdToken(r);const l=new Wr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new J0(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1=new Map;function Hr(t){si(t instanceof Function,"Expected a class definition");let e=x1.get(t);return e?(si(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,x1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}SP.type="NONE";const w1=SP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ph(t,e,n){return`firebase:${t}:${e}:${n}`}class ua{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=ph(this.userKey,i.apiKey,s),this.fullPersistenceKey=ph("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Wr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ua(Hr(w1),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Hr(w1);const o=ph(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const f=Wr._fromJSON(e,u);c!==s&&(a=f),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new ua(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new ua(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(AP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(IP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(RP(e))return"Blackberry";if(MP(e))return"Webos";if(CP(e))return"Safari";if((e.includes("chrome/")||PP(e))&&!e.includes("edge/"))return"Chrome";if(NP(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function IP(t=Bt()){return/firefox\//i.test(t)}function CP(t=Bt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function PP(t=Bt()){return/crios\//i.test(t)}function AP(t=Bt()){return/iemobile/i.test(t)}function NP(t=Bt()){return/android/i.test(t)}function RP(t=Bt()){return/blackberry/i.test(t)}function MP(t=Bt()){return/webos/i.test(t)}function px(t=Bt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Z3(t=Bt()){var e;return px(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function e9(){return gF()&&document.documentMode===10}function DP(t=Bt()){return px(t)||NP(t)||MP(t)||RP(t)||/windows phone/i.test(t)||AP(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(t,e=[]){let n;switch(t){case"Browser":n=b1(Bt());break;case"Worker":n=`${b1(Bt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${tl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t9{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n9(t,e={}){return Sr(t,"GET","/v2/passwordPolicy",ui(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r9=6;class i9{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:r9,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s9{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _1(this),this.idTokenSubscription=new _1(this),this.beforeStateQueue=new t9(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Hr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await ua.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await EP(this,{idToken:e}),r=await Wr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(gr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await pf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=V3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(gr(this.app))return Promise.reject(Qr(this));const n=e?Tt(e):null;return n&&ae(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return gr(this.app)?Promise.reject(Qr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return gr(this.app)?Promise.reject(Qr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await n9(this),n=new i9(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Pu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await J3(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Hr(e)||this._popupRedirectResolver;ae(n,this,"argument-error"),this.redirectPersistenceManager=await ua.create(this,[Hr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ae(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&j3(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ps(t){return Tt(t)}class _1{constructor(e){this.auth=e,this.observer=null,this.addObserver=EF(n=>this.observer=n)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let om={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function o9(t){om=t}function OP(t){return om.loadJS(t)}function a9(){return om.recaptchaEnterpriseScript}function l9(){return om.gapiScript}function c9(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const u9="recaptcha-enterprise",d9="NO_RECAPTCHA";class h9{constructor(e){this.type=u9,this.auth=ps(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{W3(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new $3(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;y1(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(d9)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&y1(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=a9();l.length!==0&&(l+=a),OP(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function k1(t,e,n,r=!1){const i=new h9(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function gf(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await k1(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await k1(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f9(t,e){const n=ux(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(hf(s,e??{}))return i;rr(i,"already-initialized")}return n.initialize({options:e})}function m9(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Hr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function p9(t,e,n){const r=ps(t);ae(r._canInitEmulator,r,"emulator-config-failed"),ae(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=LP(e),{host:o,port:a}=g9(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),y9()}function LP(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function g9(t){const e=LP(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:E1(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:E1(o)}}}function E1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function y9(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return $r("not implemented")}_getIdTokenResponse(e){return $r("not implemented")}_linkToIdToken(e,n){return $r("not implemented")}_getReauthenticationResolver(e){return $r("not implemented")}}async function v9(t,e){return Sr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x9(t,e){return Ru(t,"POST","/v1/accounts:signInWithPassword",ui(t,e))}async function w9(t,e){return Sr(t,"POST","/v1/accounts:sendOobCode",ui(t,e))}async function b9(t,e){return w9(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _9(t,e){return Ru(t,"POST","/v1/accounts:signInWithEmailLink",ui(t,e))}async function k9(t,e){return Ru(t,"POST","/v1/accounts:signInWithEmailLink",ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc extends gx{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Jc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Jc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gf(e,n,"signInWithPassword",x9);case"emailLink":return _9(e,{email:this._email,oobCode:this._password});default:rr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gf(e,r,"signUpPassword",v9);case"emailLink":return k9(e,{idToken:n,email:this._email,oobCode:this._password});default:rr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function da(t,e){return Ru(t,"POST","/v1/accounts:signInWithIdp",ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E9="http://localhost";class ho extends gx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ho(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):rr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=dx(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new ho(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return da(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,da(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,da(e,n)}buildRequest(){const e={requestUri:E9,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Au(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T9(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function S9(t){const e=$l(Wl(t)).link,n=e?$l(Wl(e)).deep_link_id:null,r=$l(Wl(t)).deep_link_id;return(r?$l(Wl(r)).link:null)||r||n||e||t}class yx{constructor(e){var n,r,i,s,o,a;const l=$l(Wl(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,f=T9((i=l.mode)!==null&&i!==void 0?i:null);ae(c&&u&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=u,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=S9(e);try{return new yx(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(){this.providerId=nl.PROVIDER_ID}static credential(e,n){return Jc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=yx.parseLink(n);return ae(r,"argument-error"),Jc._fromEmailAndCode(e,r.code,r.tenantId)}}nl.PROVIDER_ID="password";nl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";nl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu extends VP{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends Mu{constructor(){super("facebook.com")}static credential(e){return ho._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ki.credential(e.oauthAccessToken)}catch{return null}}}ki.FACEBOOK_SIGN_IN_METHOD="facebook.com";ki.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends Mu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ho._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ei.credential(n,r)}catch{return null}}}Ei.GOOGLE_SIGN_IN_METHOD="google.com";Ei.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends Mu{constructor(){super("github.com")}static credential(e){return ho._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ti.credential(e.oauthAccessToken)}catch{return null}}}Ti.GITHUB_SIGN_IN_METHOD="github.com";Ti.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends Mu{constructor(){super("twitter.com")}static credential(e,n){return ho._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Si.credential(n,r)}catch{return null}}}Si.TWITTER_SIGN_IN_METHOD="twitter.com";Si.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I9(t,e){return Ru(t,"POST","/v1/accounts:signUp",ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Wr._fromIdTokenResponse(e,r,i),o=T1(r);return new fo({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=T1(r);return new fo({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function T1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf extends ci{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,yf.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new yf(e,n,r,i)}}function FP(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?yf._fromErrorAndOperation(t,s,e,r):s})}async function C9(t,e,n=!1){const r=await La(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return fo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P9(t,e,n=!1){const{auth:r}=t;if(gr(r.app))return Promise.reject(Qr(r));const i="reauthenticate";try{const s=await La(t,FP(r,i,e,t),n);ae(s.idToken,r,"internal-error");const o=mx(s.idToken);ae(o,r,"internal-error");const{sub:a}=o;return ae(t.uid===a,r,"user-mismatch"),fo._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&rr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UP(t,e,n=!1){if(gr(t.app))return Promise.reject(Qr(t));const r="signIn",i=await FP(t,r,e),s=await fo._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function A9(t,e){return UP(ps(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BP(t){const e=ps(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function N9(t,e,n){const r=ps(t);await gf(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",b9)}async function R9(t,e,n){if(gr(t.app))return Promise.reject(Qr(t));const r=ps(t),o=await gf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",I9).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&BP(t),l}),a=await fo._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function M9(t,e,n){return gr(t.app)?Promise.reject(Qr(t)):A9(Tt(t),nl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&BP(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D9(t,e){return Sr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j9(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Tt(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await La(r,D9(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function O9(t,e,n,r){return Tt(t).onIdTokenChanged(e,n,r)}function L9(t,e,n){return Tt(t).beforeAuthStateChanged(e,n)}const vf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(vf,"1"),this.storage.removeItem(vf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V9=1e3,F9=10;class $P extends zP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=DP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);e9()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,F9):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},V9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}$P.type="LOCAL";const U9=$P;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP extends zP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}WP.type="SESSION";const HP=WP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B9(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new am(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await B9(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}am.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z9{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=vx("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const m=f;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(){return window}function $9(t){_r().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qP(){return typeof _r().WorkerGlobalScope<"u"&&typeof _r().importScripts=="function"}async function W9(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function H9(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function q9(){return qP()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP="firebaseLocalStorageDb",K9=1,xf="firebaseLocalStorage",GP="fbase_key";class Du{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function lm(t,e){return t.transaction([xf],e?"readwrite":"readonly").objectStore(xf)}function G9(){const t=indexedDB.deleteDatabase(KP);return new Du(t).toPromise()}function Z0(){const t=indexedDB.open(KP,K9);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(xf,{keyPath:GP})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(xf)?e(r):(r.close(),await G9(),e(await Z0()))})})}async function S1(t,e,n){const r=lm(t,!0).put({[GP]:e,value:n});return new Du(r).toPromise()}async function Q9(t,e){const n=lm(t,!1).get(e),r=await new Du(n).toPromise();return r===void 0?null:r.value}function I1(t,e){const n=lm(t,!0).delete(e);return new Du(n).toPromise()}const Y9=800,X9=3;class QP{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Z0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>X9)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return qP()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=am._getInstance(q9()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await W9(),!this.activeServiceWorker)return;this.sender=new z9(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||H9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Z0();return await S1(e,vf,"1"),await I1(e,vf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>S1(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Q9(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>I1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=lm(i,!1).getAll();return new Du(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Y9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}QP.type="LOCAL";const J9=QP;new Nu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z9(t,e){return e?Hr(e):(ae(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx extends gx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return da(e,this._buildIdpRequest())}_linkToIdToken(e,n){return da(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return da(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function eU(t){return UP(t.auth,new xx(t),t.bypassAuthState)}function tU(t){const{auth:e,user:n}=t;return ae(n,e,"internal-error"),P9(n,new xx(t),t.bypassAuthState)}async function nU(t){const{auth:e,user:n}=t;return ae(n,e,"internal-error"),C9(n,new xx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eU;case"linkViaPopup":case"linkViaRedirect":return nU;case"reauthViaPopup":case"reauthViaRedirect":return tU;default:rr(this.auth,"internal-error")}}resolve(e){si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rU=new Nu(2e3,1e4);class ea extends YP{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ea.currentPopupAction&&ea.currentPopupAction.cancel(),ea.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ae(e,this.auth,"internal-error"),e}async onExecution(){si(this.filter.length===1,"Popup operations only handle one event");const e=vx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(br(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(br(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ea.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(br(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rU.get())};e()}}ea.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU="pendingRedirect",gh=new Map;class sU extends YP{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=gh.get(this.auth._key());if(!e){try{const r=await oU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}gh.set(this.auth._key(),e)}return this.bypassAuthState||gh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function oU(t,e){const n=cU(e),r=lU(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function aU(t,e){gh.set(t._key(),e)}function lU(t){return Hr(t._redirectPersistence)}function cU(t){return ph(iU,t.config.apiKey,t.name)}async function uU(t,e,n=!1){if(gr(t.app))return Promise.reject(Qr(t));const r=ps(t),i=Z9(r,e),o=await new sU(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dU=10*60*1e3;class hU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fU(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!XP(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(br(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=dU&&this.cachedEventUids.clear(),this.cachedEventUids.has(C1(e))}saveEventToCache(e){this.cachedEventUids.add(C1(e)),this.lastProcessedEventTime=Date.now()}}function C1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function XP({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function fU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XP(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mU(t,e={}){return Sr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gU=/^https?/;async function yU(t){if(t.config.emulator)return;const{authorizedDomains:e}=await mU(t);for(const n of e)try{if(vU(n))return}catch{}rr(t,"unauthorized-domain")}function vU(t){const e=X0(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!gU.test(n))return!1;if(pU.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xU=new Nu(3e4,6e4);function P1(){const t=_r().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function wU(t){return new Promise((e,n)=>{var r,i,s;function o(){P1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{P1(),n(br(t,"network-request-failed"))},timeout:xU.get()})}if(!((i=(r=_r().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=_r().gapi)===null||s===void 0)&&s.load)o();else{const a=c9("iframefcb");return _r()[a]=()=>{gapi.load?o():n(br(t,"network-request-failed"))},OP(`${l9()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw yh=null,e})}let yh=null;function bU(t){return yh=yh||wU(t),yh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _U=new Nu(5e3,15e3),kU="__/auth/iframe",EU="emulator/auth/iframe",TU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},SU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function IU(t){const e=t.config;ae(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?fx(e,EU):`https://${t.config.authDomain}/${kU}`,r={apiKey:e.apiKey,appName:t.name,v:tl},i=SU.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Au(r).slice(1)}`}async function CU(t){const e=await bU(t),n=_r().gapi;return ae(n,t,"internal-error"),e.open({where:document.body,url:IU(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:TU,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=br(t,"network-request-failed"),a=_r().setTimeout(()=>{s(o)},_U.get());function l(){_r().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},AU=500,NU=600,RU="_blank",MU="http://localhost";class A1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function DU(t,e,n,r=AU,i=NU){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},PU),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Bt().toLowerCase();n&&(a=PP(c)?RU:n),IP(c)&&(e=e||MU,l.scrollbars="yes");const u=Object.entries(l).reduce((m,[p,y])=>`${m}${p}=${y},`,"");if(Z3(c)&&a!=="_self")return jU(e||"",a),new A1(null);const f=window.open(e||"",a,u);ae(f,t,"popup-blocked");try{f.focus()}catch{}return new A1(f)}function jU(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OU="__/auth/handler",LU="emulator/auth/handler",VU=encodeURIComponent("fac");async function N1(t,e,n,r,i,s){ae(t.config.authDomain,t,"auth-domain-config-required"),ae(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:tl,eventId:i};if(e instanceof VP){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",kF(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,f]of Object.entries({}))o[u]=f}if(e instanceof Mu){const u=e.getScopes().filter(f=>f!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${VU}=${encodeURIComponent(l)}`:"";return`${FU(t)}?${Au(a).slice(1)}${c}`}function FU({config:t}){return t.emulator?fx(t,LU):`https://${t.authDomain}/${OU}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg="webStorageSupport";class UU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=HP,this._completeRedirectFn=uU,this._overrideRedirectResult=aU}async _openPopup(e,n,r,i){var s;si((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await N1(e,n,r,X0(),i);return DU(e,o,vx())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await N1(e,n,r,X0(),i);return $9(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(si(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await CU(e),r=new hU(e);return n.register("authEvent",i=>(ae(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(eg,{type:eg},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[eg];o!==void 0&&n(!!o),rr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=yU(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return DP()||CP()||px()}}const BU=UU;var R1="@firebase/auth",M1="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $U(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function WU(t){Oa(new uo("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ae(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jP(t)},c=new s9(r,i,s,l);return m9(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Oa(new uo("auth-internal",e=>{const n=ps(e.getProvider("auth").getImmediate());return(r=>new zU(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zi(R1,M1,$U(t)),Zi(R1,M1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HU=5*60,qU=dP("authIdTokenMaxAge")||HU;let D1=null;const KU=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>qU)return;const i=n==null?void 0:n.token;D1!==i&&(D1=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function GU(t=pP()){const e=ux(t,"auth");if(e.isInitialized())return e.getImmediate();const n=f9(t,{popupRedirectResolver:BU,persistence:[J9,U9,HP]}),r=dP("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=KU(s.toString());L9(n,o,()=>o(n.currentUser)),O9(n,a=>o(a))}}const i=cP("auth");return i&&p9(n,`http://${i}`),n}function QU(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}o9({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=br("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",QU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});WU("Browser");var YU="firebase",XU="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zi(YU,XU,"app");var j1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var to,JP;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,E){function S(){}S.prototype=E.prototype,T.D=E.prototype,T.prototype=new S,T.prototype.constructor=T,T.C=function(C,M,D){for(var R=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)R[ie-2]=arguments[ie];return E.prototype[M].apply(C,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,E,S){S||(S=0);var C=Array(16);if(typeof E=="string")for(var M=0;16>M;++M)C[M]=E.charCodeAt(S++)|E.charCodeAt(S++)<<8|E.charCodeAt(S++)<<16|E.charCodeAt(S++)<<24;else for(M=0;16>M;++M)C[M]=E[S++]|E[S++]<<8|E[S++]<<16|E[S++]<<24;E=T.g[0],S=T.g[1],M=T.g[2];var D=T.g[3],R=E+(D^S&(M^D))+C[0]+3614090360&4294967295;E=S+(R<<7&4294967295|R>>>25),R=D+(M^E&(S^M))+C[1]+3905402710&4294967295,D=E+(R<<12&4294967295|R>>>20),R=M+(S^D&(E^S))+C[2]+606105819&4294967295,M=D+(R<<17&4294967295|R>>>15),R=S+(E^M&(D^E))+C[3]+3250441966&4294967295,S=M+(R<<22&4294967295|R>>>10),R=E+(D^S&(M^D))+C[4]+4118548399&4294967295,E=S+(R<<7&4294967295|R>>>25),R=D+(M^E&(S^M))+C[5]+1200080426&4294967295,D=E+(R<<12&4294967295|R>>>20),R=M+(S^D&(E^S))+C[6]+2821735955&4294967295,M=D+(R<<17&4294967295|R>>>15),R=S+(E^M&(D^E))+C[7]+4249261313&4294967295,S=M+(R<<22&4294967295|R>>>10),R=E+(D^S&(M^D))+C[8]+1770035416&4294967295,E=S+(R<<7&4294967295|R>>>25),R=D+(M^E&(S^M))+C[9]+2336552879&4294967295,D=E+(R<<12&4294967295|R>>>20),R=M+(S^D&(E^S))+C[10]+4294925233&4294967295,M=D+(R<<17&4294967295|R>>>15),R=S+(E^M&(D^E))+C[11]+2304563134&4294967295,S=M+(R<<22&4294967295|R>>>10),R=E+(D^S&(M^D))+C[12]+1804603682&4294967295,E=S+(R<<7&4294967295|R>>>25),R=D+(M^E&(S^M))+C[13]+4254626195&4294967295,D=E+(R<<12&4294967295|R>>>20),R=M+(S^D&(E^S))+C[14]+2792965006&4294967295,M=D+(R<<17&4294967295|R>>>15),R=S+(E^M&(D^E))+C[15]+1236535329&4294967295,S=M+(R<<22&4294967295|R>>>10),R=E+(M^D&(S^M))+C[1]+4129170786&4294967295,E=S+(R<<5&4294967295|R>>>27),R=D+(S^M&(E^S))+C[6]+3225465664&4294967295,D=E+(R<<9&4294967295|R>>>23),R=M+(E^S&(D^E))+C[11]+643717713&4294967295,M=D+(R<<14&4294967295|R>>>18),R=S+(D^E&(M^D))+C[0]+3921069994&4294967295,S=M+(R<<20&4294967295|R>>>12),R=E+(M^D&(S^M))+C[5]+3593408605&4294967295,E=S+(R<<5&4294967295|R>>>27),R=D+(S^M&(E^S))+C[10]+38016083&4294967295,D=E+(R<<9&4294967295|R>>>23),R=M+(E^S&(D^E))+C[15]+3634488961&4294967295,M=D+(R<<14&4294967295|R>>>18),R=S+(D^E&(M^D))+C[4]+3889429448&4294967295,S=M+(R<<20&4294967295|R>>>12),R=E+(M^D&(S^M))+C[9]+568446438&4294967295,E=S+(R<<5&4294967295|R>>>27),R=D+(S^M&(E^S))+C[14]+3275163606&4294967295,D=E+(R<<9&4294967295|R>>>23),R=M+(E^S&(D^E))+C[3]+4107603335&4294967295,M=D+(R<<14&4294967295|R>>>18),R=S+(D^E&(M^D))+C[8]+1163531501&4294967295,S=M+(R<<20&4294967295|R>>>12),R=E+(M^D&(S^M))+C[13]+2850285829&4294967295,E=S+(R<<5&4294967295|R>>>27),R=D+(S^M&(E^S))+C[2]+4243563512&4294967295,D=E+(R<<9&4294967295|R>>>23),R=M+(E^S&(D^E))+C[7]+1735328473&4294967295,M=D+(R<<14&4294967295|R>>>18),R=S+(D^E&(M^D))+C[12]+2368359562&4294967295,S=M+(R<<20&4294967295|R>>>12),R=E+(S^M^D)+C[5]+4294588738&4294967295,E=S+(R<<4&4294967295|R>>>28),R=D+(E^S^M)+C[8]+2272392833&4294967295,D=E+(R<<11&4294967295|R>>>21),R=M+(D^E^S)+C[11]+1839030562&4294967295,M=D+(R<<16&4294967295|R>>>16),R=S+(M^D^E)+C[14]+4259657740&4294967295,S=M+(R<<23&4294967295|R>>>9),R=E+(S^M^D)+C[1]+2763975236&4294967295,E=S+(R<<4&4294967295|R>>>28),R=D+(E^S^M)+C[4]+1272893353&4294967295,D=E+(R<<11&4294967295|R>>>21),R=M+(D^E^S)+C[7]+4139469664&4294967295,M=D+(R<<16&4294967295|R>>>16),R=S+(M^D^E)+C[10]+3200236656&4294967295,S=M+(R<<23&4294967295|R>>>9),R=E+(S^M^D)+C[13]+681279174&4294967295,E=S+(R<<4&4294967295|R>>>28),R=D+(E^S^M)+C[0]+3936430074&4294967295,D=E+(R<<11&4294967295|R>>>21),R=M+(D^E^S)+C[3]+3572445317&4294967295,M=D+(R<<16&4294967295|R>>>16),R=S+(M^D^E)+C[6]+76029189&4294967295,S=M+(R<<23&4294967295|R>>>9),R=E+(S^M^D)+C[9]+3654602809&4294967295,E=S+(R<<4&4294967295|R>>>28),R=D+(E^S^M)+C[12]+3873151461&4294967295,D=E+(R<<11&4294967295|R>>>21),R=M+(D^E^S)+C[15]+530742520&4294967295,M=D+(R<<16&4294967295|R>>>16),R=S+(M^D^E)+C[2]+3299628645&4294967295,S=M+(R<<23&4294967295|R>>>9),R=E+(M^(S|~D))+C[0]+4096336452&4294967295,E=S+(R<<6&4294967295|R>>>26),R=D+(S^(E|~M))+C[7]+1126891415&4294967295,D=E+(R<<10&4294967295|R>>>22),R=M+(E^(D|~S))+C[14]+2878612391&4294967295,M=D+(R<<15&4294967295|R>>>17),R=S+(D^(M|~E))+C[5]+4237533241&4294967295,S=M+(R<<21&4294967295|R>>>11),R=E+(M^(S|~D))+C[12]+1700485571&4294967295,E=S+(R<<6&4294967295|R>>>26),R=D+(S^(E|~M))+C[3]+2399980690&4294967295,D=E+(R<<10&4294967295|R>>>22),R=M+(E^(D|~S))+C[10]+4293915773&4294967295,M=D+(R<<15&4294967295|R>>>17),R=S+(D^(M|~E))+C[1]+2240044497&4294967295,S=M+(R<<21&4294967295|R>>>11),R=E+(M^(S|~D))+C[8]+1873313359&4294967295,E=S+(R<<6&4294967295|R>>>26),R=D+(S^(E|~M))+C[15]+4264355552&4294967295,D=E+(R<<10&4294967295|R>>>22),R=M+(E^(D|~S))+C[6]+2734768916&4294967295,M=D+(R<<15&4294967295|R>>>17),R=S+(D^(M|~E))+C[13]+1309151649&4294967295,S=M+(R<<21&4294967295|R>>>11),R=E+(M^(S|~D))+C[4]+4149444226&4294967295,E=S+(R<<6&4294967295|R>>>26),R=D+(S^(E|~M))+C[11]+3174756917&4294967295,D=E+(R<<10&4294967295|R>>>22),R=M+(E^(D|~S))+C[2]+718787259&4294967295,M=D+(R<<15&4294967295|R>>>17),R=S+(D^(M|~E))+C[9]+3951481745&4294967295,T.g[0]=T.g[0]+E&4294967295,T.g[1]=T.g[1]+(M+(R<<21&4294967295|R>>>11))&4294967295,T.g[2]=T.g[2]+M&4294967295,T.g[3]=T.g[3]+D&4294967295}r.prototype.u=function(T,E){E===void 0&&(E=T.length);for(var S=E-this.blockSize,C=this.B,M=this.h,D=0;D<E;){if(M==0)for(;D<=S;)i(this,T,D),D+=this.blockSize;if(typeof T=="string"){for(;D<E;)if(C[M++]=T.charCodeAt(D++),M==this.blockSize){i(this,C),M=0;break}}else for(;D<E;)if(C[M++]=T[D++],M==this.blockSize){i(this,C),M=0;break}}this.h=M,this.o+=E},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var E=1;E<T.length-8;++E)T[E]=0;var S=8*this.o;for(E=T.length-8;E<T.length;++E)T[E]=S&255,S/=256;for(this.u(T),T=Array(16),E=S=0;4>E;++E)for(var C=0;32>C;C+=8)T[S++]=this.g[E]>>>C&255;return T};function s(T,E){var S=a;return Object.prototype.hasOwnProperty.call(S,T)?S[T]:S[T]=E(T)}function o(T,E){this.h=E;for(var S=[],C=!0,M=T.length-1;0<=M;M--){var D=T[M]|0;C&&D==E||(S[M]=D,C=!1)}this.g=S}var a={};function l(T){return-128<=T&&128>T?s(T,function(E){return new o([E|0],0>E?-1:0)}):new o([T|0],0>T?-1:0)}function c(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return k(c(-T));for(var E=[],S=1,C=0;T>=S;C++)E[C]=T/S|0,S*=4294967296;return new o(E,0)}function u(T,E){if(T.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(T.charAt(0)=="-")return k(u(T.substring(1),E));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=c(Math.pow(E,8)),C=f,M=0;M<T.length;M+=8){var D=Math.min(8,T.length-M),R=parseInt(T.substring(M,M+D),E);8>D?(D=c(Math.pow(E,D)),C=C.j(D).add(c(R))):(C=C.j(S),C=C.add(c(R)))}return C}var f=l(0),m=l(1),p=l(16777216);t=o.prototype,t.m=function(){if(x(this))return-k(this).m();for(var T=0,E=1,S=0;S<this.g.length;S++){var C=this.i(S);T+=(0<=C?C:4294967296+C)*E,E*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(y(this))return"0";if(x(this))return"-"+k(this).toString(T);for(var E=c(Math.pow(T,6)),S=this,C="";;){var M=P(S,E).g;S=v(S,M.j(E));var D=((0<S.g.length?S.g[0]:S.h)>>>0).toString(T);if(S=M,y(S))return D+C;for(;6>D.length;)D="0"+D;C=D+C}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function y(T){if(T.h!=0)return!1;for(var E=0;E<T.g.length;E++)if(T.g[E]!=0)return!1;return!0}function x(T){return T.h==-1}t.l=function(T){return T=v(this,T),x(T)?-1:y(T)?0:1};function k(T){for(var E=T.g.length,S=[],C=0;C<E;C++)S[C]=~T.g[C];return new o(S,~T.h).add(m)}t.abs=function(){return x(this)?k(this):this},t.add=function(T){for(var E=Math.max(this.g.length,T.g.length),S=[],C=0,M=0;M<=E;M++){var D=C+(this.i(M)&65535)+(T.i(M)&65535),R=(D>>>16)+(this.i(M)>>>16)+(T.i(M)>>>16);C=R>>>16,D&=65535,R&=65535,S[M]=R<<16|D}return new o(S,S[S.length-1]&-2147483648?-1:0)};function v(T,E){return T.add(k(E))}t.j=function(T){if(y(this)||y(T))return f;if(x(this))return x(T)?k(this).j(k(T)):k(k(this).j(T));if(x(T))return k(this.j(k(T)));if(0>this.l(p)&&0>T.l(p))return c(this.m()*T.m());for(var E=this.g.length+T.g.length,S=[],C=0;C<2*E;C++)S[C]=0;for(C=0;C<this.g.length;C++)for(var M=0;M<T.g.length;M++){var D=this.i(C)>>>16,R=this.i(C)&65535,ie=T.i(M)>>>16,se=T.i(M)&65535;S[2*C+2*M]+=R*se,w(S,2*C+2*M),S[2*C+2*M+1]+=D*se,w(S,2*C+2*M+1),S[2*C+2*M+1]+=R*ie,w(S,2*C+2*M+1),S[2*C+2*M+2]+=D*ie,w(S,2*C+2*M+2)}for(C=0;C<E;C++)S[C]=S[2*C+1]<<16|S[2*C];for(C=E;C<2*E;C++)S[C]=0;return new o(S,0)};function w(T,E){for(;(T[E]&65535)!=T[E];)T[E+1]+=T[E]>>>16,T[E]&=65535,E++}function _(T,E){this.g=T,this.h=E}function P(T,E){if(y(E))throw Error("division by zero");if(y(T))return new _(f,f);if(x(T))return E=P(k(T),E),new _(k(E.g),k(E.h));if(x(E))return E=P(T,k(E)),new _(k(E.g),E.h);if(30<T.g.length){if(x(T)||x(E))throw Error("slowDivide_ only works with positive integers.");for(var S=m,C=E;0>=C.l(T);)S=A(S),C=A(C);var M=N(S,1),D=N(C,1);for(C=N(C,2),S=N(S,2);!y(C);){var R=D.add(C);0>=R.l(T)&&(M=M.add(S),D=R),C=N(C,1),S=N(S,1)}return E=v(T,M.j(E)),new _(M,E)}for(M=f;0<=T.l(E);){for(S=Math.max(1,Math.floor(T.m()/E.m())),C=Math.ceil(Math.log(S)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),D=c(S),R=D.j(E);x(R)||0<R.l(T);)S-=C,D=c(S),R=D.j(E);y(D)&&(D=m),M=M.add(D),T=v(T,R)}return new _(M,T)}t.A=function(T){return P(this,T).h},t.and=function(T){for(var E=Math.max(this.g.length,T.g.length),S=[],C=0;C<E;C++)S[C]=this.i(C)&T.i(C);return new o(S,this.h&T.h)},t.or=function(T){for(var E=Math.max(this.g.length,T.g.length),S=[],C=0;C<E;C++)S[C]=this.i(C)|T.i(C);return new o(S,this.h|T.h)},t.xor=function(T){for(var E=Math.max(this.g.length,T.g.length),S=[],C=0;C<E;C++)S[C]=this.i(C)^T.i(C);return new o(S,this.h^T.h)};function A(T){for(var E=T.g.length+1,S=[],C=0;C<E;C++)S[C]=T.i(C)<<1|T.i(C-1)>>>31;return new o(S,T.h)}function N(T,E){var S=E>>5;E%=32;for(var C=T.g.length-S,M=[],D=0;D<C;D++)M[D]=0<E?T.i(D+S)>>>E|T.i(D+S+1)<<32-E:T.i(D+S);return new o(M,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,JP=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,to=o}).apply(typeof j1<"u"?j1:typeof self<"u"?self:typeof window<"u"?window:{});var Md=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ZP,Hl,eA,vh,ey,tA,nA,rA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,g,b){return d==Array.prototype||d==Object.prototype||(d[g]=b.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Md=="object"&&Md];for(var g=0;g<d.length;++g){var b=d[g];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=n(this);function i(d,g){if(g)e:{var b=r;d=d.split(".");for(var I=0;I<d.length-1;I++){var L=d[I];if(!(L in b))break e;b=b[L]}d=d[d.length-1],I=b[d],g=g(I),g!=I&&g!=null&&e(b,d,{configurable:!0,writable:!0,value:g})}}function s(d,g){d instanceof String&&(d+="");var b=0,I=!1,L={next:function(){if(!I&&b<d.length){var V=b++;return{value:g(V,d[V]),done:!1}}return I=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(d){return d||function(){return s(this,function(g,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(d){var g=typeof d;return g=g!="object"?g:d?Array.isArray(d)?"array":g:"null",g=="array"||g=="object"&&typeof d.length=="number"}function c(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function u(d,g,b){return d.call.apply(d.bind,arguments)}function f(d,g,b){if(!d)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,I),d.apply(g,L)}}return function(){return d.apply(g,arguments)}}function m(d,g,b){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:f,m.apply(null,arguments)}function p(d,g){var b=Array.prototype.slice.call(arguments,1);return function(){var I=b.slice();return I.push.apply(I,arguments),d.apply(this,I)}}function y(d,g){function b(){}b.prototype=g.prototype,d.aa=g.prototype,d.prototype=new b,d.prototype.constructor=d,d.Qb=function(I,L,V){for(var W=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)W[Ne-2]=arguments[Ne];return g.prototype[L].apply(I,W)}}function x(d){const g=d.length;if(0<g){const b=Array(g);for(let I=0;I<g;I++)b[I]=d[I];return b}return[]}function k(d,g){for(let b=1;b<arguments.length;b++){const I=arguments[b];if(l(I)){const L=d.length||0,V=I.length||0;d.length=L+V;for(let W=0;W<V;W++)d[L+W]=I[W]}else d.push(I)}}class v{constructor(g,b){this.i=g,this.j=b,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function w(d){return/^[\s\xa0]*$/.test(d)}function _(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function P(d){return P[" "](d),d}P[" "]=function(){};var A=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function N(d,g,b){for(const I in d)g.call(b,d[I],I,d)}function T(d,g){for(const b in d)g.call(void 0,d[b],b,d)}function E(d){const g={};for(const b in d)g[b]=d[b];return g}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(d,g){let b,I;for(let L=1;L<arguments.length;L++){I=arguments[L];for(b in I)d[b]=I[b];for(let V=0;V<S.length;V++)b=S[V],Object.prototype.hasOwnProperty.call(I,b)&&(d[b]=I[b])}}function M(d){var g=1;d=d.split(":");const b=[];for(;0<g&&d.length;)b.push(d.shift()),g--;return d.length&&b.push(d.join(":")),b}function D(d){a.setTimeout(()=>{throw d},0)}function R(){var d=$;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class ie{constructor(){this.h=this.g=null}add(g,b){const I=se.get();I.set(g,b),this.h?this.h.next=I:this.g=I,this.h=I}}var se=new v(()=>new X,d=>d.reset());class X{constructor(){this.next=this.g=this.h=null}set(g,b){this.h=g,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let G,F=!1,$=new ie,K=()=>{const d=a.Promise.resolve(void 0);G=()=>{d.then(de)}};var de=()=>{for(var d;d=R();){try{d.h.call(d.g)}catch(b){D(b)}var g=se;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}F=!1};function H(){this.s=this.s,this.C=this.C}H.prototype.s=!1,H.prototype.ma=function(){this.s||(this.s=!0,this.N())},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ne(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}ne.prototype.h=function(){this.defaultPrevented=!0};var ge=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const b=()=>{};a.addEventListener("test",b,g),a.removeEventListener("test",b,g)}catch{}return d}();function Ae(d,g){if(ne.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var b=this.type=d.type,I=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if(A){e:{try{P(g.nodeName);var L=!0;break e}catch{}L=!1}L||(g=null)}}else b=="mouseover"?g=d.fromElement:b=="mouseout"&&(g=d.toElement);this.relatedTarget=g,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Be[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Ae.aa.h.call(this)}}y(Ae,ne);var Be={2:"touch",3:"pen",4:"mouse"};Ae.prototype.h=function(){Ae.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Sn="closure_listenable_"+(1e6*Math.random()|0),jm=0;function NR(d,g,b,I,L){this.listener=d,this.proxy=null,this.src=g,this.type=b,this.capture=!!I,this.ha=L,this.key=++jm,this.da=this.fa=!1}function Hu(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function qu(d){this.src=d,this.g={},this.h=0}qu.prototype.add=function(d,g,b,I,L){var V=d.toString();d=this.g[V],d||(d=this.g[V]=[],this.h++);var W=Lm(d,g,I,L);return-1<W?(g=d[W],b||(g.fa=!1)):(g=new NR(g,this.src,V,!!I,L),g.fa=b,d.push(g)),g};function Om(d,g){var b=g.type;if(b in d.g){var I=d.g[b],L=Array.prototype.indexOf.call(I,g,void 0),V;(V=0<=L)&&Array.prototype.splice.call(I,L,1),V&&(Hu(g),d.g[b].length==0&&(delete d.g[b],d.h--))}}function Lm(d,g,b,I){for(var L=0;L<d.length;++L){var V=d[L];if(!V.da&&V.listener==g&&V.capture==!!b&&V.ha==I)return L}return-1}var Vm="closure_lm_"+(1e6*Math.random()|0),Fm={};function Tw(d,g,b,I,L){if(Array.isArray(g)){for(var V=0;V<g.length;V++)Tw(d,g[V],b,I,L);return null}return b=Cw(b),d&&d[Sn]?d.K(g,b,c(I)?!!I.capture:!1,L):RR(d,g,b,!1,I,L)}function RR(d,g,b,I,L,V){if(!g)throw Error("Invalid event type");var W=c(L)?!!L.capture:!!L,Ne=Bm(d);if(Ne||(d[Vm]=Ne=new qu(d)),b=Ne.add(g,b,I,W,V),b.proxy)return b;if(I=MR(),b.proxy=I,I.src=d,I.listener=b,d.addEventListener)ge||(L=W),L===void 0&&(L=!1),d.addEventListener(g.toString(),I,L);else if(d.attachEvent)d.attachEvent(Iw(g.toString()),I);else if(d.addListener&&d.removeListener)d.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return b}function MR(){function d(b){return g.call(d.src,d.listener,b)}const g=DR;return d}function Sw(d,g,b,I,L){if(Array.isArray(g))for(var V=0;V<g.length;V++)Sw(d,g[V],b,I,L);else I=c(I)?!!I.capture:!!I,b=Cw(b),d&&d[Sn]?(d=d.i,g=String(g).toString(),g in d.g&&(V=d.g[g],b=Lm(V,b,I,L),-1<b&&(Hu(V[b]),Array.prototype.splice.call(V,b,1),V.length==0&&(delete d.g[g],d.h--)))):d&&(d=Bm(d))&&(g=d.g[g.toString()],d=-1,g&&(d=Lm(g,b,I,L)),(b=-1<d?g[d]:null)&&Um(b))}function Um(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[Sn])Om(g.i,d);else{var b=d.type,I=d.proxy;g.removeEventListener?g.removeEventListener(b,I,d.capture):g.detachEvent?g.detachEvent(Iw(b),I):g.addListener&&g.removeListener&&g.removeListener(I),(b=Bm(g))?(Om(b,d),b.h==0&&(b.src=null,g[Vm]=null)):Hu(d)}}}function Iw(d){return d in Fm?Fm[d]:Fm[d]="on"+d}function DR(d,g){if(d.da)d=!0;else{g=new Ae(g,this);var b=d.listener,I=d.ha||d.src;d.fa&&Um(d),d=b.call(I,g)}return d}function Bm(d){return d=d[Vm],d instanceof qu?d:null}var zm="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cw(d){return typeof d=="function"?d:(d[zm]||(d[zm]=function(g){return d.handleEvent(g)}),d[zm])}function It(){H.call(this),this.i=new qu(this),this.M=this,this.F=null}y(It,H),It.prototype[Sn]=!0,It.prototype.removeEventListener=function(d,g,b,I){Sw(this,d,g,b,I)};function $t(d,g){var b,I=d.F;if(I)for(b=[];I;I=I.F)b.push(I);if(d=d.M,I=g.type||g,typeof g=="string")g=new ne(g,d);else if(g instanceof ne)g.target=g.target||d;else{var L=g;g=new ne(I,d),C(g,L)}if(L=!0,b)for(var V=b.length-1;0<=V;V--){var W=g.g=b[V];L=Ku(W,I,!0,g)&&L}if(W=g.g=d,L=Ku(W,I,!0,g)&&L,L=Ku(W,I,!1,g)&&L,b)for(V=0;V<b.length;V++)W=g.g=b[V],L=Ku(W,I,!1,g)&&L}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var d=this.i,g;for(g in d.g){for(var b=d.g[g],I=0;I<b.length;I++)Hu(b[I]);delete d.g[g],d.h--}}this.F=null},It.prototype.K=function(d,g,b,I){return this.i.add(String(d),g,!1,b,I)},It.prototype.L=function(d,g,b,I){return this.i.add(String(d),g,!0,b,I)};function Ku(d,g,b,I){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();for(var L=!0,V=0;V<g.length;++V){var W=g[V];if(W&&!W.da&&W.capture==b){var Ne=W.listener,yt=W.ha||W.src;W.fa&&Om(d.i,W),L=Ne.call(yt,I)!==!1&&L}}return L&&!I.defaultPrevented}function Pw(d,g,b){if(typeof d=="function")b&&(d=m(d,b));else if(d&&typeof d.handleEvent=="function")d=m(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(d,g||0)}function Aw(d){d.g=Pw(()=>{d.g=null,d.i&&(d.i=!1,Aw(d))},d.l);const g=d.h;d.h=null,d.m.apply(null,g)}class jR extends H{constructor(g,b){super(),this.m=g,this.l=b,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Aw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ll(d){H.call(this),this.h=d,this.g={}}y(ll,H);var Nw=[];function Rw(d){N(d.g,function(g,b){this.g.hasOwnProperty(b)&&Um(g)},d),d.g={}}ll.prototype.N=function(){ll.aa.N.call(this),Rw(this)},ll.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $m=a.JSON.stringify,OR=a.JSON.parse,LR=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function Wm(){}Wm.prototype.h=null;function Mw(d){return d.h||(d.h=d.i())}function Dw(){}var cl={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Hm(){ne.call(this,"d")}y(Hm,ne);function qm(){ne.call(this,"c")}y(qm,ne);var vs={},jw=null;function Gu(){return jw=jw||new It}vs.La="serverreachability";function Ow(d){ne.call(this,vs.La,d)}y(Ow,ne);function ul(d){const g=Gu();$t(g,new Ow(g))}vs.STAT_EVENT="statevent";function Lw(d,g){ne.call(this,vs.STAT_EVENT,d),this.stat=g}y(Lw,ne);function Wt(d){const g=Gu();$t(g,new Lw(g,d))}vs.Ma="timingevent";function Vw(d,g){ne.call(this,vs.Ma,d),this.size=g}y(Vw,ne);function dl(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},g)}function hl(){this.g=!0}hl.prototype.xa=function(){this.g=!1};function VR(d,g,b,I,L,V){d.info(function(){if(d.g)if(V)for(var W="",Ne=V.split("&"),yt=0;yt<Ne.length;yt++){var ke=Ne[yt].split("=");if(1<ke.length){var Ct=ke[0];ke=ke[1];var Pt=Ct.split("_");W=2<=Pt.length&&Pt[1]=="type"?W+(Ct+"="+ke+"&"):W+(Ct+"=redacted&")}}else W=null;else W=V;return"XMLHTTP REQ ("+I+") [attempt "+L+"]: "+g+`
`+b+`
`+W})}function FR(d,g,b,I,L,V,W){d.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+L+"]: "+g+`
`+b+`
`+V+" "+W})}function Io(d,g,b,I){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+BR(d,b)+(I?" "+I:"")})}function UR(d,g){d.info(function(){return"TIMEOUT: "+g})}hl.prototype.info=function(){};function BR(d,g){if(!d.g)return g;if(!g)return null;try{var b=JSON.parse(g);if(b){for(d=0;d<b.length;d++)if(Array.isArray(b[d])){var I=b[d];if(!(2>I.length)){var L=I[1];if(Array.isArray(L)&&!(1>L.length)){var V=L[0];if(V!="noop"&&V!="stop"&&V!="close")for(var W=1;W<L.length;W++)L[W]=""}}}}return $m(b)}catch{return g}}var Qu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Fw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Km;function Yu(){}y(Yu,Wm),Yu.prototype.g=function(){return new XMLHttpRequest},Yu.prototype.i=function(){return{}},Km=new Yu;function di(d,g,b,I){this.j=d,this.i=g,this.l=b,this.R=I||1,this.U=new ll(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Uw}function Uw(){this.i=null,this.g="",this.h=!1}var Bw={},Gm={};function Qm(d,g,b){d.L=1,d.v=ed(Ir(g)),d.m=b,d.P=!0,zw(d,null)}function zw(d,g){d.F=Date.now(),Xu(d),d.A=Ir(d.v);var b=d.A,I=d.R;Array.isArray(I)||(I=[String(I)]),nb(b.i,"t",I),d.C=0,b=d.j.J,d.h=new Uw,d.g=wb(d.j,b?g:null,!d.m),0<d.O&&(d.M=new jR(m(d.Y,d,d.g),d.O)),g=d.U,b=d.g,I=d.ca;var L="readystatechange";Array.isArray(L)||(L&&(Nw[0]=L.toString()),L=Nw);for(var V=0;V<L.length;V++){var W=Tw(b,L[V],I||g.handleEvent,!1,g.h||g);if(!W)break;g.g[W.key]=W}g=d.H?E(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),ul(),VR(d.i,d.u,d.A,d.l,d.R,d.m)}di.prototype.ca=function(d){d=d.target;const g=this.M;g&&Cr(d)==3?g.j():this.Y(d)},di.prototype.Y=function(d){try{if(d==this.g)e:{const Pt=Cr(this.g);var g=this.g.Ba();const Ao=this.g.Z();if(!(3>Pt)&&(Pt!=3||this.g&&(this.h.h||this.g.oa()||cb(this.g)))){this.J||Pt!=4||g==7||(g==8||0>=Ao?ul(3):ul(2)),Ym(this);var b=this.g.Z();this.X=b;t:if($w(this)){var I=cb(this.g);d="";var L=I.length,V=Cr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){xs(this),fl(this);var W="";break t}this.h.i=new a.TextDecoder}for(g=0;g<L;g++)this.h.h=!0,d+=this.h.i.decode(I[g],{stream:!(V&&g==L-1)});I.length=0,this.h.g+=d,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=b==200,FR(this.i,this.u,this.A,this.l,this.R,Pt,b),this.o){if(this.T&&!this.K){t:{if(this.g){var Ne,yt=this.g;if((Ne=yt.g?yt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Ne)){var ke=Ne;break t}}ke=null}if(b=ke)Io(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xm(this,b);else{this.o=!1,this.s=3,Wt(12),xs(this),fl(this);break e}}if(this.P){b=!0;let Wn;for(;!this.J&&this.C<W.length;)if(Wn=zR(this,W),Wn==Gm){Pt==4&&(this.s=4,Wt(14),b=!1),Io(this.i,this.l,null,"[Incomplete Response]");break}else if(Wn==Bw){this.s=4,Wt(15),Io(this.i,this.l,W,"[Invalid Chunk]"),b=!1;break}else Io(this.i,this.l,Wn,null),Xm(this,Wn);if($w(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pt!=4||W.length!=0||this.h.h||(this.s=1,Wt(16),b=!1),this.o=this.o&&b,!b)Io(this.i,this.l,W,"[Invalid Chunked Response]"),xs(this),fl(this);else if(0<W.length&&!this.W){this.W=!0;var Ct=this.j;Ct.g==this&&Ct.ba&&!Ct.M&&(Ct.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),rp(Ct),Ct.M=!0,Wt(11))}}else Io(this.i,this.l,W,null),Xm(this,W);Pt==4&&xs(this),this.o&&!this.J&&(Pt==4?gb(this.j,this):(this.o=!1,Xu(this)))}else sM(this.g),b==400&&0<W.indexOf("Unknown SID")?(this.s=3,Wt(12)):(this.s=0,Wt(13)),xs(this),fl(this)}}}catch{}finally{}};function $w(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function zR(d,g){var b=d.C,I=g.indexOf(`
`,b);return I==-1?Gm:(b=Number(g.substring(b,I)),isNaN(b)?Bw:(I+=1,I+b>g.length?Gm:(g=g.slice(I,I+b),d.C=I+b,g)))}di.prototype.cancel=function(){this.J=!0,xs(this)};function Xu(d){d.S=Date.now()+d.I,Ww(d,d.I)}function Ww(d,g){if(d.B!=null)throw Error("WatchDog timer not null");d.B=dl(m(d.ba,d),g)}function Ym(d){d.B&&(a.clearTimeout(d.B),d.B=null)}di.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(UR(this.i,this.A),this.L!=2&&(ul(),Wt(17)),xs(this),this.s=2,fl(this)):Ww(this,this.S-d)};function fl(d){d.j.G==0||d.J||gb(d.j,d)}function xs(d){Ym(d);var g=d.M;g&&typeof g.ma=="function"&&g.ma(),d.M=null,Rw(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function Xm(d,g){try{var b=d.j;if(b.G!=0&&(b.g==d||Jm(b.h,d))){if(!d.K&&Jm(b.h,d)&&b.G==3){try{var I=b.Da.g.parse(g)}catch{I=null}if(Array.isArray(I)&&I.length==3){var L=I;if(L[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<d.F)od(b),id(b);else break e;np(b),Wt(18)}}else b.za=L[1],0<b.za-b.T&&37500>L[2]&&b.F&&b.v==0&&!b.C&&(b.C=dl(m(b.Za,b),6e3));if(1>=Kw(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else bs(b,11)}else if((d.K||b.g==d)&&od(b),!w(g))for(L=b.Da.g.parse(g),g=0;g<L.length;g++){let ke=L[g];if(b.T=ke[0],ke=ke[1],b.G==2)if(ke[0]=="c"){b.K=ke[1],b.ia=ke[2];const Ct=ke[3];Ct!=null&&(b.la=Ct,b.j.info("VER="+b.la));const Pt=ke[4];Pt!=null&&(b.Aa=Pt,b.j.info("SVER="+b.Aa));const Ao=ke[5];Ao!=null&&typeof Ao=="number"&&0<Ao&&(I=1.5*Ao,b.L=I,b.j.info("backChannelRequestTimeoutMs_="+I)),I=b;const Wn=d.g;if(Wn){const ld=Wn.g?Wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ld){var V=I.h;V.g||ld.indexOf("spdy")==-1&&ld.indexOf("quic")==-1&&ld.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Zm(V,V.h),V.h=null))}if(I.D){const ip=Wn.g?Wn.g.getResponseHeader("X-HTTP-Session-Id"):null;ip&&(I.ya=ip,De(I.I,I.D,ip))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-d.F,b.j.info("Handshake RTT: "+b.R+"ms")),I=b;var W=d;if(I.qa=xb(I,I.J?I.ia:null,I.W),W.K){Gw(I.h,W);var Ne=W,yt=I.L;yt&&(Ne.I=yt),Ne.B&&(Ym(Ne),Xu(Ne)),I.g=W}else mb(I);0<b.i.length&&sd(b)}else ke[0]!="stop"&&ke[0]!="close"||bs(b,7);else b.G==3&&(ke[0]=="stop"||ke[0]=="close"?ke[0]=="stop"?bs(b,7):tp(b):ke[0]!="noop"&&b.l&&b.l.ta(ke),b.v=0)}}ul(4)}catch{}}var $R=class{constructor(d,g){this.g=d,this.map=g}};function Hw(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function qw(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Kw(d){return d.h?1:d.g?d.g.size:0}function Jm(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function Zm(d,g){d.g?d.g.add(g):d.h=g}function Gw(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}Hw.prototype.cancel=function(){if(this.i=Qw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Qw(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let g=d.i;for(const b of d.g.values())g=g.concat(b.D);return g}return x(d.i)}function WR(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var g=[],b=d.length,I=0;I<b;I++)g.push(d[I]);return g}g=[],b=0;for(I in d)g[b++]=d[I];return g}function HR(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var g=[];d=d.length;for(var b=0;b<d;b++)g.push(b);return g}g=[],b=0;for(const I in d)g[b++]=I;return g}}}function Yw(d,g){if(d.forEach&&typeof d.forEach=="function")d.forEach(g,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,g,void 0);else for(var b=HR(d),I=WR(d),L=I.length,V=0;V<L;V++)g.call(void 0,I[V],b&&b[V],d)}var Xw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qR(d,g){if(d){d=d.split("&");for(var b=0;b<d.length;b++){var I=d[b].indexOf("="),L=null;if(0<=I){var V=d[b].substring(0,I);L=d[b].substring(I+1)}else V=d[b];g(V,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function ws(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof ws){this.h=d.h,Ju(this,d.j),this.o=d.o,this.g=d.g,Zu(this,d.s),this.l=d.l;var g=d.i,b=new gl;b.i=g.i,g.g&&(b.g=new Map(g.g),b.h=g.h),Jw(this,b),this.m=d.m}else d&&(g=String(d).match(Xw))?(this.h=!1,Ju(this,g[1]||"",!0),this.o=ml(g[2]||""),this.g=ml(g[3]||"",!0),Zu(this,g[4]),this.l=ml(g[5]||"",!0),Jw(this,g[6]||"",!0),this.m=ml(g[7]||"")):(this.h=!1,this.i=new gl(null,this.h))}ws.prototype.toString=function(){var d=[],g=this.j;g&&d.push(pl(g,Zw,!0),":");var b=this.g;return(b||g=="file")&&(d.push("//"),(g=this.o)&&d.push(pl(g,Zw,!0),"@"),d.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&d.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&d.push("/"),d.push(pl(b,b.charAt(0)=="/"?QR:GR,!0))),(b=this.i.toString())&&d.push("?",b),(b=this.m)&&d.push("#",pl(b,XR)),d.join("")};function Ir(d){return new ws(d)}function Ju(d,g,b){d.j=b?ml(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function Zu(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function Jw(d,g,b){g instanceof gl?(d.i=g,JR(d.i,d.h)):(b||(g=pl(g,YR)),d.i=new gl(g,d.h))}function De(d,g,b){d.i.set(g,b)}function ed(d){return De(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function ml(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function pl(d,g,b){return typeof d=="string"?(d=encodeURI(d).replace(g,KR),b&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function KR(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Zw=/[#\/\?@]/g,GR=/[#\?:]/g,QR=/[#\?]/g,YR=/[#\?@]/g,XR=/#/g;function gl(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function hi(d){d.g||(d.g=new Map,d.h=0,d.i&&qR(d.i,function(g,b){d.add(decodeURIComponent(g.replace(/\+/g," ")),b)}))}t=gl.prototype,t.add=function(d,g){hi(this),this.i=null,d=Co(this,d);var b=this.g.get(d);return b||this.g.set(d,b=[]),b.push(g),this.h+=1,this};function eb(d,g){hi(d),g=Co(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function tb(d,g){return hi(d),g=Co(d,g),d.g.has(g)}t.forEach=function(d,g){hi(this),this.g.forEach(function(b,I){b.forEach(function(L){d.call(g,L,I,this)},this)},this)},t.na=function(){hi(this);const d=Array.from(this.g.values()),g=Array.from(this.g.keys()),b=[];for(let I=0;I<g.length;I++){const L=d[I];for(let V=0;V<L.length;V++)b.push(g[I])}return b},t.V=function(d){hi(this);let g=[];if(typeof d=="string")tb(this,d)&&(g=g.concat(this.g.get(Co(this,d))));else{d=Array.from(this.g.values());for(let b=0;b<d.length;b++)g=g.concat(d[b])}return g},t.set=function(d,g){return hi(this),this.i=null,d=Co(this,d),tb(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},t.get=function(d,g){return d?(d=this.V(d),0<d.length?String(d[0]):g):g};function nb(d,g,b){eb(d,g),0<b.length&&(d.i=null,d.g.set(Co(d,g),x(b)),d.h+=b.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],g=Array.from(this.g.keys());for(var b=0;b<g.length;b++){var I=g[b];const V=encodeURIComponent(String(I)),W=this.V(I);for(I=0;I<W.length;I++){var L=V;W[I]!==""&&(L+="="+encodeURIComponent(String(W[I]))),d.push(L)}}return this.i=d.join("&")};function Co(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function JR(d,g){g&&!d.j&&(hi(d),d.i=null,d.g.forEach(function(b,I){var L=I.toLowerCase();I!=L&&(eb(this,I),nb(this,L,b))},d)),d.j=g}function ZR(d,g){const b=new hl;if(a.Image){const I=new Image;I.onload=p(fi,b,"TestLoadImage: loaded",!0,g,I),I.onerror=p(fi,b,"TestLoadImage: error",!1,g,I),I.onabort=p(fi,b,"TestLoadImage: abort",!1,g,I),I.ontimeout=p(fi,b,"TestLoadImage: timeout",!1,g,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=d}else g(!1)}function eM(d,g){const b=new hl,I=new AbortController,L=setTimeout(()=>{I.abort(),fi(b,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:I.signal}).then(V=>{clearTimeout(L),V.ok?fi(b,"TestPingServer: ok",!0,g):fi(b,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),fi(b,"TestPingServer: error",!1,g)})}function fi(d,g,b,I,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),I(b)}catch{}}function tM(){this.g=new LR}function nM(d,g,b){const I=b||"";try{Yw(d,function(L,V){let W=L;c(L)&&(W=$m(L)),g.push(I+V+"="+encodeURIComponent(W))})}catch(L){throw g.push(I+"type="+encodeURIComponent("_badmap")),L}}function td(d){this.l=d.Ub||null,this.j=d.eb||!1}y(td,Wm),td.prototype.g=function(){return new nd(this.l,this.j)},td.prototype.i=function(d){return function(){return d}}({});function nd(d,g){It.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(nd,It),t=nd.prototype,t.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,vl(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,yl(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,vl(this)),this.g&&(this.readyState=3,vl(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;rb(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function rb(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?yl(this):vl(this),this.readyState==3&&rb(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,yl(this))},t.Qa=function(d){this.g&&(this.response=d,yl(this))},t.ga=function(){this.g&&yl(this)};function yl(d){d.readyState=4,d.l=null,d.j=null,d.v=null,vl(d)}t.setRequestHeader=function(d,g){this.u.append(d,g)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],g=this.h.entries();for(var b=g.next();!b.done;)b=b.value,d.push(b[0]+": "+b[1]),b=g.next();return d.join(`\r
`)};function vl(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(nd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function ib(d){let g="";return N(d,function(b,I){g+=I,g+=":",g+=b,g+=`\r
`}),g}function ep(d,g,b){e:{for(I in b){var I=!1;break e}I=!0}I||(b=ib(b),typeof d=="string"?b!=null&&encodeURIComponent(String(b)):De(d,g,b))}function Ge(d){It.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(Ge,It);var rM=/^https?$/i,iM=["POST","PUT"];t=Ge.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,g,b,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Km.g(),this.v=this.o?Mw(this.o):Mw(Km),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(V){sb(this,V);return}if(d=b||"",b=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var L in I)b.set(L,I[L]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const V of I.keys())b.set(V,I.get(V));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(b.keys()).find(V=>V.toLowerCase()=="content-type"),L=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(iM,g,void 0))||I||L||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,W]of b)this.g.setRequestHeader(V,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{lb(this),this.u=!0,this.g.send(d),this.u=!1}catch(V){sb(this,V)}};function sb(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,ob(d),rd(d)}function ob(d){d.A||(d.A=!0,$t(d,"complete"),$t(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,$t(this,"complete"),$t(this,"abort"),rd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),rd(this,!0)),Ge.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ab(this):this.bb())},t.bb=function(){ab(this)};function ab(d){if(d.h&&typeof o<"u"&&(!d.v[1]||Cr(d)!=4||d.Z()!=2)){if(d.u&&Cr(d)==4)Pw(d.Ea,0,d);else if($t(d,"readystatechange"),Cr(d)==4){d.h=!1;try{const W=d.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var b;if(!(b=g)){var I;if(I=W===0){var L=String(d.D).match(Xw)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),I=!rM.test(L?L.toLowerCase():"")}b=I}if(b)$t(d,"complete"),$t(d,"success");else{d.m=6;try{var V=2<Cr(d)?d.g.statusText:""}catch{V=""}d.l=V+" ["+d.Z()+"]",ob(d)}}finally{rd(d)}}}}function rd(d,g){if(d.g){lb(d);const b=d.g,I=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||$t(d,"ready");try{b.onreadystatechange=I}catch{}}}function lb(d){d.I&&(a.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function Cr(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<Cr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),OR(g)}};function cb(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function sM(d){const g={};d=(d.g&&2<=Cr(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<d.length;I++){if(w(d[I]))continue;var b=M(d[I]);const L=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const V=g[L]||[];g[L]=V,V.push(b)}T(g,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function xl(d,g,b){return b&&b.internalChannelParams&&b.internalChannelParams[d]||g}function ub(d){this.Aa=0,this.i=[],this.j=new hl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=xl("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=xl("baseRetryDelayMs",5e3,d),this.cb=xl("retryDelaySeedMs",1e4,d),this.Wa=xl("forwardChannelMaxRetries",2,d),this.wa=xl("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Hw(d&&d.concurrentRequestLimit),this.Da=new tM,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ub.prototype,t.la=8,t.G=1,t.connect=function(d,g,b,I){Wt(0),this.W=d,this.H=g||{},b&&I!==void 0&&(this.H.OSID=b,this.H.OAID=I),this.F=this.X,this.I=xb(this,null,this.W),sd(this)};function tp(d){if(db(d),d.G==3){var g=d.U++,b=Ir(d.I);if(De(b,"SID",d.K),De(b,"RID",g),De(b,"TYPE","terminate"),wl(d,b),g=new di(d,d.j,g),g.L=2,g.v=ed(Ir(b)),b=!1,a.navigator&&a.navigator.sendBeacon)try{b=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!b&&a.Image&&(new Image().src=g.v,b=!0),b||(g.g=wb(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Xu(g)}vb(d)}function id(d){d.g&&(rp(d),d.g.cancel(),d.g=null)}function db(d){id(d),d.u&&(a.clearTimeout(d.u),d.u=null),od(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function sd(d){if(!qw(d.h)&&!d.s){d.s=!0;var g=d.Ga;G||K(),F||(G(),F=!0),$.add(g,d),d.B=0}}function oM(d,g){return Kw(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=g.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=dl(m(d.Ga,d,g),yb(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const L=new di(this,this.j,d);let V=this.o;if(this.S&&(V?(V=E(V),C(V,this.S)):V=this.S),this.m!==null||this.O||(L.H=V,V=null),this.P)e:{for(var g=0,b=0;b<this.i.length;b++){t:{var I=this.i[b];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(g+=I,4096<g){g=b;break e}if(g===4096||b===this.i.length-1){g=b+1;break e}}g=1e3}else g=1e3;g=fb(this,L,g),b=Ir(this.I),De(b,"RID",d),De(b,"CVER",22),this.D&&De(b,"X-HTTP-Session-Id",this.D),wl(this,b),V&&(this.O?g="headers="+encodeURIComponent(String(ib(V)))+"&"+g:this.m&&ep(b,this.m,V)),Zm(this.h,L),this.Ua&&De(b,"TYPE","init"),this.P?(De(b,"$req",g),De(b,"SID","null"),L.T=!0,Qm(L,b,null)):Qm(L,b,g),this.G=2}}else this.G==3&&(d?hb(this,d):this.i.length==0||qw(this.h)||hb(this))};function hb(d,g){var b;g?b=g.l:b=d.U++;const I=Ir(d.I);De(I,"SID",d.K),De(I,"RID",b),De(I,"AID",d.T),wl(d,I),d.m&&d.o&&ep(I,d.m,d.o),b=new di(d,d.j,b,d.B+1),d.m===null&&(b.H=d.o),g&&(d.i=g.D.concat(d.i)),g=fb(d,b,1e3),b.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Zm(d.h,b),Qm(b,I,g)}function wl(d,g){d.H&&N(d.H,function(b,I){De(g,I,b)}),d.l&&Yw({},function(b,I){De(g,I,b)})}function fb(d,g,b){b=Math.min(d.i.length,b);var I=d.l?m(d.l.Na,d.l,d):null;e:{var L=d.i;let V=-1;for(;;){const W=["count="+b];V==-1?0<b?(V=L[0].g,W.push("ofs="+V)):V=0:W.push("ofs="+V);let Ne=!0;for(let yt=0;yt<b;yt++){let ke=L[yt].g;const Ct=L[yt].map;if(ke-=V,0>ke)V=Math.max(0,L[yt].g-100),Ne=!1;else try{nM(Ct,W,"req"+ke+"_")}catch{I&&I(Ct)}}if(Ne){I=W.join("&");break e}}}return d=d.i.splice(0,b),g.D=d,I}function mb(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;G||K(),F||(G(),F=!0),$.add(g,d),d.v=0}}function np(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=dl(m(d.Fa,d),yb(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,pb(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=dl(m(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Wt(10),id(this),pb(this))};function rp(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function pb(d){d.g=new di(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var g=Ir(d.qa);De(g,"RID","rpc"),De(g,"SID",d.K),De(g,"AID",d.T),De(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&De(g,"TO",d.ja),De(g,"TYPE","xmlhttp"),wl(d,g),d.m&&d.o&&ep(g,d.m,d.o),d.L&&(d.g.I=d.L);var b=d.g;d=d.ia,b.L=1,b.v=ed(Ir(g)),b.m=null,b.P=!0,zw(b,d)}t.Za=function(){this.C!=null&&(this.C=null,id(this),np(this),Wt(19))};function od(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function gb(d,g){var b=null;if(d.g==g){od(d),rp(d),d.g=null;var I=2}else if(Jm(d.h,g))b=g.D,Gw(d.h,g),I=1;else return;if(d.G!=0){if(g.o)if(I==1){b=g.m?g.m.length:0,g=Date.now()-g.F;var L=d.B;I=Gu(),$t(I,new Vw(I,b)),sd(d)}else mb(d);else if(L=g.s,L==3||L==0&&0<g.X||!(I==1&&oM(d,g)||I==2&&np(d)))switch(b&&0<b.length&&(g=d.h,g.i=g.i.concat(b)),L){case 1:bs(d,5);break;case 4:bs(d,10);break;case 3:bs(d,6);break;default:bs(d,2)}}}function yb(d,g){let b=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(b*=2),b*g}function bs(d,g){if(d.j.info("Error code "+g),g==2){var b=m(d.fb,d),I=d.Xa;const L=!I;I=new ws(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ju(I,"https"),ed(I),L?ZR(I.toString(),b):eM(I.toString(),b)}else Wt(2);d.G=0,d.l&&d.l.sa(g),vb(d),db(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Wt(2)):(this.j.info("Failed to ping google.com"),Wt(1))};function vb(d){if(d.G=0,d.ka=[],d.l){const g=Qw(d.h);(g.length!=0||d.i.length!=0)&&(k(d.ka,g),k(d.ka,d.i),d.h.i.length=0,x(d.i),d.i.length=0),d.l.ra()}}function xb(d,g,b){var I=b instanceof ws?Ir(b):new ws(b);if(I.g!="")g&&(I.g=g+"."+I.g),Zu(I,I.s);else{var L=a.location;I=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;var V=new ws(null);I&&Ju(V,I),g&&(V.g=g),L&&Zu(V,L),b&&(V.l=b),I=V}return b=d.D,g=d.ya,b&&g&&De(I,b,g),De(I,"VER",d.la),wl(d,I),I}function wb(d,g,b){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Ca&&!d.pa?new Ge(new td({eb:b})):new Ge(d.pa),g.Ha(d.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function bb(){}t=bb.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ad(){}ad.prototype.g=function(d,g){return new gn(d,g)};function gn(d,g){It.call(this),this.g=new ub(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!w(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!w(g)&&(this.g.D=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new Po(this)}y(gn,It),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){tp(this.g)},gn.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var b={};b.__data__=d,d=b}else this.u&&(b={},b.__data__=$m(d),d=b);g.i.push(new $R(g.Ya++,d)),g.G==3&&sd(g)},gn.prototype.N=function(){this.g.l=null,delete this.j,tp(this.g),delete this.g,gn.aa.N.call(this)};function _b(d){Hm.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(const b in g){d=b;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}y(_b,Hm);function kb(){qm.call(this),this.status=1}y(kb,qm);function Po(d){this.g=d}y(Po,bb),Po.prototype.ua=function(){$t(this.g,"a")},Po.prototype.ta=function(d){$t(this.g,new _b(d))},Po.prototype.sa=function(d){$t(this.g,new kb)},Po.prototype.ra=function(){$t(this.g,"b")},ad.prototype.createWebChannel=ad.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,rA=function(){return new ad},nA=function(){return Gu()},tA=vs,ey={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Qu.NO_ERROR=0,Qu.TIMEOUT=8,Qu.HTTP_ERROR=6,vh=Qu,Fw.COMPLETE="complete",eA=Fw,Dw.EventType=cl,cl.OPEN="a",cl.CLOSE="b",cl.ERROR="c",cl.MESSAGE="d",It.prototype.listen=It.prototype.K,Hl=Dw,Ge.prototype.listenOnce=Ge.prototype.L,Ge.prototype.getLastError=Ge.prototype.Ka,Ge.prototype.getLastErrorCode=Ge.prototype.Ba,Ge.prototype.getStatus=Ge.prototype.Z,Ge.prototype.getResponseJson=Ge.prototype.Oa,Ge.prototype.getResponseText=Ge.prototype.oa,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Ha,ZP=Ge}).apply(typeof Md<"u"?Md:typeof self<"u"?self:typeof window<"u"?window:{});const O1="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jt.UNAUTHENTICATED=new jt(null),jt.GOOGLE_CREDENTIALS=new jt("google-credentials-uid"),jt.FIRST_PARTY=new jt("first-party-uid"),jt.MOCK_USER=new jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rl="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo=new lx("@firebase/firestore");function Al(){return mo.logLevel}function J(t,...e){if(mo.logLevel<=ve.DEBUG){const n=e.map(wx);mo.debug(`Firestore (${rl}): ${t}`,...n)}}function oi(t,...e){if(mo.logLevel<=ve.ERROR){const n=e.map(wx);mo.error(`Firestore (${rl}): ${t}`,...n)}}function Va(t,...e){if(mo.logLevel<=ve.WARN){const n=e.map(wx);mo.warn(`Firestore (${rl}): ${t}`,...n)}}function wx(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(t="Unexpected state"){const e=`FIRESTORE (${rl}) INTERNAL ASSERTION FAILED: `+t;throw oi(e),new Error(e)}function Pe(t,e){t||le()}function ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends ci{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class JU{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(jt.UNAUTHENTICATED))}shutdown(){}}class ZU{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class eB{constructor(e){this.t=e,this.currentUser=jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Pe(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Yr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Yr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Yr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pe(typeof r.accessToken=="string"),new iA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pe(e===null||typeof e=="string"),new jt(e)}}class tB{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=jt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class nB{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new tB(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class rB{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iB{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Pe(this.o===void 0);const r=s=>{s.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,J("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Pe(typeof n.token=="string"),this.R=n.token,new rB(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sB(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=sB(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Ee(t,e){return t<e?-1:t>e?1:0}function Fa(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Q(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ht.fromMillis(Date.now())}static fromDate(e){return ht.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ht(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ee(this.nanoseconds,e.nanoseconds):Ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ce(e)}static min(){return new ce(new ht(0,0))}static max(){return new ce(new ht(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,n,r){n===void 0?n=0:n>e.length&&le(),r===void 0?r=e.length-n:r>e.length-n&&le(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Zc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Zc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Le extends Zc{construct(e,n,r){return new Le(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Le(n)}static emptyPath(){return new Le([])}}const oB=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bt extends Zc{construct(e,n,r){return new bt(e,n,r)}static isValidIdentifier(e){return oB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new bt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Q(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Q(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Q(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Q(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bt(n)}static emptyPath(){return new bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.path=e}static fromPath(e){return new re(Le.fromString(e))}static fromName(e){return new re(Le.fromString(e).popFirst(5))}static empty(){return new re(Le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Le.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new re(new Le(e.slice()))}}function aB(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ce.fromTimestamp(r===1e9?new ht(n+1,0):new ht(n,r));return new as(i,re.empty(),e)}function lB(t){return new as(t.readTime,t.key,-1)}class as{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new as(ce.min(),re.empty(),-1)}static max(){return new as(ce.max(),re.empty(),-1)}}function cB(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=re.comparator(t.documentKey,e.documentKey),n!==0?n:Ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ju(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==uB)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&le(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(i=>i?B.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new B((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new B((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function hB(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ou(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}bx.oe=-1;function cm(t){return t==null}function wf(t){return t===0&&1/t==-1/0}function fB(t){return typeof t=="number"&&Number.isInteger(t)&&!wf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function bo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function oA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,n){this.comparator=e,this.root=n||wt.EMPTY}insert(e,n){return new Ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wt.BLACK,null,null))}remove(e){return new Ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dd(this.root,e,this.comparator,!0)}}class Dd{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??wt.RED,this.left=i??wt.EMPTY,this.right=s??wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new wt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return wt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw le();const e=this.left.check();if(e!==this.right.check())throw le();return e+(this.isRed()?0:1)}}wt.EMPTY=null,wt.RED=!0,wt.BLACK=!1;wt.EMPTY=new class{constructor(){this.size=0}get key(){throw le()}get value(){throw le()}get color(){throw le()}get left(){throw le()}get right(){throw le()}copy(e,n,r,i,s){return this}insert(e,n,r){return new wt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.comparator=e,this.data=new Ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new V1(this.data.getIterator())}getIteratorFrom(e){return new V1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof kt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new kt(this.comparator);return n.data=e,n}}class V1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.fields=e,e.sort(bt.comparator)}static empty(){return new wn([])}unionWith(e){let n=new kt(bt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new wn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Fa(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new aA("Invalid base64 string: "+s):s}}(e);return new St(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new St(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}St.EMPTY_BYTE_STRING=new St("");const mB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ls(t){if(Pe(!!t),typeof t=="string"){let e=0;const n=mB.exec(t);if(Pe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ze(t.seconds),nanos:Ze(t.nanos)}}function Ze(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function po(t){return typeof t=="string"?St.fromBase64String(t):St.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function kx(t){const e=t.mapValue.fields.__previous_value__;return _x(e)?kx(e):e}function eu(t){const e=ls(t.mapValue.fields.__local_write_time__.timestampValue);return new ht(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pB{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class tu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new tu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof tu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd={mapValue:{}};function go(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_x(t)?4:yB(t)?9007199254740991:gB(t)?10:11:le()}function Tr(t,e){if(t===e)return!0;const n=go(t);if(n!==go(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return eu(t).isEqual(eu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ls(i.timestampValue),a=ls(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return po(i.bytesValue).isEqual(po(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ze(i.geoPointValue.latitude)===Ze(s.geoPointValue.latitude)&&Ze(i.geoPointValue.longitude)===Ze(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ze(i.integerValue)===Ze(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ze(i.doubleValue),a=Ze(s.doubleValue);return o===a?wf(o)===wf(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Fa(t.arrayValue.values||[],e.arrayValue.values||[],Tr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(L1(o)!==L1(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Tr(o[l],a[l])))return!1;return!0}(t,e);default:return le()}}function nu(t,e){return(t.values||[]).find(n=>Tr(n,e))!==void 0}function Ua(t,e){if(t===e)return 0;const n=go(t),r=go(e);if(n!==r)return Ee(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ee(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ze(s.integerValue||s.doubleValue),l=Ze(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return F1(t.timestampValue,e.timestampValue);case 4:return F1(eu(t),eu(e));case 5:return Ee(t.stringValue,e.stringValue);case 6:return function(s,o){const a=po(s),l=po(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Ee(a[c],l[c]);if(u!==0)return u}return Ee(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Ee(Ze(s.latitude),Ze(o.latitude));return a!==0?a:Ee(Ze(s.longitude),Ze(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return U1(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,u;const f=s.fields||{},m=o.fields||{},p=(a=f.value)===null||a===void 0?void 0:a.arrayValue,y=(l=m.value)===null||l===void 0?void 0:l.arrayValue,x=Ee(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((u=y==null?void 0:y.values)===null||u===void 0?void 0:u.length)||0);return x!==0?x:U1(p,y)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===jd.mapValue&&o===jd.mapValue)return 0;if(s===jd.mapValue)return 1;if(o===jd.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let f=0;f<l.length&&f<u.length;++f){const m=Ee(l[f],u[f]);if(m!==0)return m;const p=Ua(a[l[f]],c[u[f]]);if(p!==0)return p}return Ee(l.length,u.length)}(t.mapValue,e.mapValue);default:throw le()}}function F1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ee(t,e);const n=ls(t),r=ls(e),i=Ee(n.seconds,r.seconds);return i!==0?i:Ee(n.nanos,r.nanos)}function U1(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ua(n[i],r[i]);if(s)return s}return Ee(n.length,r.length)}function Ba(t){return ty(t)}function ty(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ls(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return po(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return re.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=ty(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${ty(n.fields[o])}`;return i+"}"}(t.mapValue):le()}function B1(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ny(t){return!!t&&"integerValue"in t}function Ex(t){return!!t&&"arrayValue"in t}function z1(t){return!!t&&"nullValue"in t}function $1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function xh(t){return!!t&&"mapValue"in t}function gB(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function pc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return bo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=pc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=pc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function yB(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.value=e}static empty(){return new ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!xh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=pc(n)}setAll(e){let n=bt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=pc(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());xh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Tr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];xh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){bo(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ln(pc(this.value))}}function lA(t){const e=[];return bo(t.fields,(n,r)=>{const i=new bt([n]);if(xh(r)){const s=lA(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Lt(e,0,ce.min(),ce.min(),ce.min(),ln.empty(),0)}static newFoundDocument(e,n,r,i){return new Lt(e,1,n,ce.min(),r,i,0)}static newNoDocument(e,n){return new Lt(e,2,n,ce.min(),ce.min(),ln.empty(),0)}static newUnknownDocument(e,n){return new Lt(e,3,n,ce.min(),ce.min(),ln.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Lt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Lt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,n){this.position=e,this.inclusive=n}}function W1(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=re.comparator(re.fromName(o.referenceValue),n.key):r=Ua(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function H1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Tr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,n="asc"){this.field=e,this.dir=n}}function vB(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{}class ot extends cA{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new wB(e,n,r):n==="array-contains"?new kB(e,r):n==="in"?new EB(e,r):n==="not-in"?new TB(e,r):n==="array-contains-any"?new SB(e,r):new ot(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new bB(e,r):new _B(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ua(n,this.value)):n!==null&&go(this.value)===go(n)&&this.matchesComparison(Ua(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return le()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ir extends cA{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ir(e,n)}matches(e){return uA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function uA(t){return t.op==="and"}function dA(t){return xB(t)&&uA(t)}function xB(t){for(const e of t.filters)if(e instanceof ir)return!1;return!0}function ry(t){if(t instanceof ot)return t.field.canonicalString()+t.op.toString()+Ba(t.value);if(dA(t))return t.filters.map(e=>ry(e)).join(",");{const e=t.filters.map(n=>ry(n)).join(",");return`${t.op}(${e})`}}function hA(t,e){return t instanceof ot?function(r,i){return i instanceof ot&&r.op===i.op&&r.field.isEqual(i.field)&&Tr(r.value,i.value)}(t,e):t instanceof ir?function(r,i){return i instanceof ir&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&hA(o,i.filters[a]),!0):!1}(t,e):void le()}function fA(t){return t instanceof ot?function(n){return`${n.field.canonicalString()} ${n.op} ${Ba(n.value)}`}(t):t instanceof ir?function(n){return n.op.toString()+" {"+n.getFilters().map(fA).join(" ,")+"}"}(t):"Filter"}class wB extends ot{constructor(e,n,r){super(e,n,r),this.key=re.fromName(r.referenceValue)}matches(e){const n=re.comparator(e.key,this.key);return this.matchesComparison(n)}}class bB extends ot{constructor(e,n){super(e,"in",n),this.keys=mA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class _B extends ot{constructor(e,n){super(e,"not-in",n),this.keys=mA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function mA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>re.fromName(r.referenceValue))}class kB extends ot{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ex(n)&&nu(n.arrayValue,this.value)}}class EB extends ot{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&nu(this.value.arrayValue,n)}}class TB extends ot{constructor(e,n){super(e,"not-in",n)}matches(e){if(nu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!nu(this.value.arrayValue,n)}}class SB extends ot{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ex(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>nu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IB{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function q1(t,e=null,n=[],r=[],i=null,s=null,o=null){return new IB(t,e,n,r,i,s,o)}function Tx(t){const e=ue(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ry(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),cm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ba(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ba(r)).join(",")),e.ue=n}return e.ue}function Sx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!vB(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!hA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!H1(t.startAt,e.startAt)&&H1(t.endAt,e.endAt)}function iy(t){return re.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function CB(t,e,n,r,i,s,o,a){return new il(t,e,n,r,i,s,o,a)}function Ix(t){return new il(t)}function K1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function pA(t){return t.collectionGroup!==null}function gc(t){const e=ue(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new kt(bt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new ru(s,r))}),n.has(bt.keyField().canonicalString())||e.ce.push(new ru(bt.keyField(),r))}return e.ce}function kr(t){const e=ue(t);return e.le||(e.le=PB(e,gc(t))),e.le}function PB(t,e){if(t.limitType==="F")return q1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ru(i.field,s)});const n=t.endAt?new bf(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new bf(t.startAt.position,t.startAt.inclusive):null;return q1(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function sy(t,e){const n=t.filters.concat([e]);return new il(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function oy(t,e,n){return new il(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function um(t,e){return Sx(kr(t),kr(e))&&t.limitType===e.limitType}function gA(t){return`${Tx(kr(t))}|lt:${t.limitType}`}function Do(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>fA(i)).join(", ")}]`),cm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ba(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ba(i)).join(",")),`Target(${r})`}(kr(t))}; limitType=${t.limitType})`}function dm(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):re.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of gc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=W1(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,gc(r),i)||r.endAt&&!function(o,a,l){const c=W1(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,gc(r),i))}(t,e)}function AB(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function yA(t){return(e,n)=>{let r=!1;for(const i of gc(t)){const s=NB(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function NB(t,e,n){const r=t.field.isKeyField()?re.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Ua(l,c):le()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return le()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){bo(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return oA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RB=new Ke(re.comparator);function ai(){return RB}const vA=new Ke(re.comparator);function ql(...t){let e=vA;for(const n of t)e=e.insert(n.key,n);return e}function xA(t){let e=vA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Fs(){return yc()}function wA(){return yc()}function yc(){return new sl(t=>t.toString(),(t,e)=>t.isEqual(e))}const MB=new Ke(re.comparator),DB=new kt(re.comparator);function pe(...t){let e=DB;for(const n of t)e=e.add(n);return e}const jB=new kt(Ee);function OB(){return jB}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wf(e)?"-0":e}}function bA(t){return{integerValue:""+t}}function LB(t,e){return fB(e)?bA(e):Cx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(){this._=void 0}}function VB(t,e,n){return t instanceof _f?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&_x(s)&&(s=kx(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof iu?kA(t,e):t instanceof su?EA(t,e):function(i,s){const o=_A(i,s),a=G1(o)+G1(i.Pe);return ny(o)&&ny(i.Pe)?bA(a):Cx(i.serializer,a)}(t,e)}function FB(t,e,n){return t instanceof iu?kA(t,e):t instanceof su?EA(t,e):n}function _A(t,e){return t instanceof kf?function(r){return ny(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class _f extends hm{}class iu extends hm{constructor(e){super(),this.elements=e}}function kA(t,e){const n=TA(e);for(const r of t.elements)n.some(i=>Tr(i,r))||n.push(r);return{arrayValue:{values:n}}}class su extends hm{constructor(e){super(),this.elements=e}}function EA(t,e){let n=TA(e);for(const r of t.elements)n=n.filter(i=>!Tr(i,r));return{arrayValue:{values:n}}}class kf extends hm{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function G1(t){return Ze(t.integerValue||t.doubleValue)}function TA(t){return Ex(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function UB(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof iu&&i instanceof iu||r instanceof su&&i instanceof su?Fa(r.elements,i.elements,Tr):r instanceof kf&&i instanceof kf?Tr(r.Pe,i.Pe):r instanceof _f&&i instanceof _f}(t.transform,e.transform)}class BB{constructor(e,n){this.version=e,this.transformResults=n}}class Fn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Fn}static exists(e){return new Fn(void 0,e)}static updateTime(e){return new Fn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class fm{}function SA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Px(t.key,Fn.none()):new Lu(t.key,t.data,Fn.none());{const n=t.data,r=ln.empty();let i=new kt(bt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new gs(t.key,r,new wn(i.toArray()),Fn.none())}}function zB(t,e,n){t instanceof Lu?function(i,s,o){const a=i.value.clone(),l=Y1(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof gs?function(i,s,o){if(!wh(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Y1(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(IA(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function vc(t,e,n,r){return t instanceof Lu?function(s,o,a,l){if(!wh(s.precondition,o))return a;const c=s.value.clone(),u=X1(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof gs?function(s,o,a,l){if(!wh(s.precondition,o))return a;const c=X1(s.fieldTransforms,l,o),u=o.data;return u.setAll(IA(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return wh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function $B(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=_A(r.transform,i||null);s!=null&&(n===null&&(n=ln.empty()),n.set(r.field,s))}return n||null}function Q1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Fa(r,i,(s,o)=>UB(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Lu extends fm{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class gs extends fm{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function IA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Y1(t,e,n){const r=new Map;Pe(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,FB(o,a,n[i]))}return r}function X1(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,VB(s,o,e))}return r}class Px extends fm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class WB extends fm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HB{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&zB(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=vc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=vc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=wA();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=SA(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pe())}isEqual(e){return this.batchId===e.batchId&&Fa(this.mutations,e.mutations,(n,r)=>Q1(n,r))&&Fa(this.baseMutations,e.baseMutations,(n,r)=>Q1(n,r))}}class Ax{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Pe(e.mutations.length===r.length);let i=function(){return MB}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Ax(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qB{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KB{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt,be;function GB(t){switch(t){default:return le();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0}}function CA(t){if(t===void 0)return oi("GRPC error has no .code"),U.UNKNOWN;switch(t){case rt.OK:return U.OK;case rt.CANCELLED:return U.CANCELLED;case rt.UNKNOWN:return U.UNKNOWN;case rt.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case rt.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case rt.INTERNAL:return U.INTERNAL;case rt.UNAVAILABLE:return U.UNAVAILABLE;case rt.UNAUTHENTICATED:return U.UNAUTHENTICATED;case rt.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case rt.NOT_FOUND:return U.NOT_FOUND;case rt.ALREADY_EXISTS:return U.ALREADY_EXISTS;case rt.PERMISSION_DENIED:return U.PERMISSION_DENIED;case rt.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case rt.ABORTED:return U.ABORTED;case rt.OUT_OF_RANGE:return U.OUT_OF_RANGE;case rt.UNIMPLEMENTED:return U.UNIMPLEMENTED;case rt.DATA_LOSS:return U.DATA_LOSS;default:return le()}}(be=rt||(rt={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QB(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YB=new to([4294967295,4294967295],0);function J1(t){const e=QB().encode(t),n=new JP;return n.update(e),new Uint8Array(n.digest())}function Z1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new to([n,r],0),new to([i,s],0)]}class Nx{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Kl(`Invalid padding: ${n}`);if(r<0)throw new Kl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Kl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Kl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=to.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(to.fromNumber(r)));return i.compare(YB)===1&&(i=new to([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=J1(e),[r,i]=Z1(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Nx(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=J1(e),[r,i]=Z1(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Kl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Vu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new mm(ce.min(),i,new Ke(Ee),ai(),pe())}}class Vu{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Vu(r,n,pe(),pe(),pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class PA{constructor(e,n){this.targetId=e,this.me=n}}class AA{constructor(e,n,r=St.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class eE{constructor(){this.fe=0,this.ge=nE(),this.pe=St.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=pe(),n=pe(),r=pe();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:le()}}),new Vu(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=nE()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Pe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class XB{constructor(e){this.Le=e,this.Be=new Map,this.ke=ai(),this.qe=tE(),this.Qe=new Ke(Ee)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:le()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(iy(s))if(r===0){const o=new re(s.path);this.Ue(n,o,Lt.newNoDocument(o,ce.min()))}else Pe(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=po(r).toUint8Array()}catch(l){if(l instanceof aA)return Va("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Nx(o,i,s)}catch(l){return Va(l instanceof Kl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&iy(a.target)){const l=new re(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Lt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=pe();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new mm(e,n,this.Qe,this.ke,r);return this.ke=ai(),this.qe=tE(),this.Qe=new Ke(Ee),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new eE,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new kt(Ee),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new eE),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function tE(){return new Ke(re.comparator)}function nE(){return new Ke(re.comparator)}const JB={asc:"ASCENDING",desc:"DESCENDING"},ZB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},e8={and:"AND",or:"OR"};class t8{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ay(t,e){return t.useProto3Json||cm(e)?e:{value:e}}function Ef(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function NA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function n8(t,e){return Ef(t,e.toTimestamp())}function Er(t){return Pe(!!t),ce.fromTimestamp(function(n){const r=ls(n);return new ht(r.seconds,r.nanos)}(t))}function Rx(t,e){return ly(t,e).canonicalString()}function ly(t,e){const n=function(i){return new Le(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function RA(t){const e=Le.fromString(t);return Pe(LA(e)),e}function cy(t,e){return Rx(t.databaseId,e.path)}function tg(t,e){const n=RA(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new re(DA(n))}function MA(t,e){return Rx(t.databaseId,e)}function r8(t){const e=RA(t);return e.length===4?Le.emptyPath():DA(e)}function uy(t){return new Le(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function DA(t){return Pe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function rE(t,e,n){return{name:cy(t,e),fields:n.value.mapValue.fields}}function i8(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:le()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(Pe(u===void 0||typeof u=="string"),St.fromBase64String(u||"")):(Pe(u===void 0||u instanceof Buffer||u instanceof Uint8Array),St.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?U.UNKNOWN:CA(c.code);return new Q(u,c.message||"")}(o);n=new AA(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=tg(t,r.document.name),s=Er(r.document.updateTime),o=r.document.createTime?Er(r.document.createTime):ce.min(),a=new ln({mapValue:{fields:r.document.fields}}),l=Lt.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new bh(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=tg(t,r.document),s=r.readTime?Er(r.readTime):ce.min(),o=Lt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new bh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=tg(t,r.document),s=r.removedTargetIds||[];n=new bh([],s,i,null)}else{if(!("filter"in e))return le();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new KB(i,s),a=r.targetId;n=new PA(a,o)}}return n}function s8(t,e){let n;if(e instanceof Lu)n={update:rE(t,e.key,e.value)};else if(e instanceof Px)n={delete:cy(t,e.key)};else if(e instanceof gs)n={update:rE(t,e.key,e.data),updateMask:m8(e.fieldMask)};else{if(!(e instanceof WB))return le();n={verify:cy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof _f)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof iu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof su)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof kf)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw le()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:n8(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:le()}(t,e.precondition)),n}function o8(t,e){return t&&t.length>0?(Pe(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Er(i.updateTime):Er(s);return o.isEqual(ce.min())&&(o=Er(s)),new BB(o,i.transformResults||[])}(n,e))):[]}function a8(t,e){return{documents:[MA(t,e.path)]}}function l8(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=MA(t,i);const s=function(c){if(c.length!==0)return OA(ir.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(m){return{field:jo(m.field),direction:d8(m.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=ay(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function c8(t){let e=r8(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Pe(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(f){const m=jA(f);return m instanceof ir&&dA(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(y){return new ru(Oo(y.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,cm(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(f){const m=!!f.before,p=f.values||[];return new bf(p,m)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const m=!f.before,p=f.values||[];return new bf(p,m)}(n.endAt)),CB(e,i,o,s,a,"F",l,c)}function u8(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return le()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function jA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Oo(n.unaryFilter.field);return ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Oo(n.unaryFilter.field);return ot.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Oo(n.unaryFilter.field);return ot.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Oo(n.unaryFilter.field);return ot.create(o,"!=",{nullValue:"NULL_VALUE"});default:return le()}}(t):t.fieldFilter!==void 0?function(n){return ot.create(Oo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return le()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ir.create(n.compositeFilter.filters.map(r=>jA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return le()}}(n.compositeFilter.op))}(t):le()}function d8(t){return JB[t]}function h8(t){return ZB[t]}function f8(t){return e8[t]}function jo(t){return{fieldPath:t.canonicalString()}}function Oo(t){return bt.fromServerFormat(t.fieldPath)}function OA(t){return t instanceof ot?function(n){if(n.op==="=="){if($1(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NAN"}};if(z1(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if($1(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NOT_NAN"}};if(z1(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jo(n.field),op:h8(n.op),value:n.value}}}(t):t instanceof ir?function(n){const r=n.getFilters().map(i=>OA(i));return r.length===1?r[0]:{compositeFilter:{op:f8(n.op),filters:r}}}(t):le()}function m8(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function LA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,n,r,i,s=ce.min(),o=ce.min(),a=St.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Vi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Vi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p8{constructor(e){this.ct=e}}function g8(t){const e=c8({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?oy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{constructor(){this.un=new v8}addToCollectionParentIndex(e,n){return this.un.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(as.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(as.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class v8{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new kt(Le.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new kt(Le.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new za(0)}static kn(){return new za(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x8{constructor(){this.changes=new sl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Lt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w8{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b8{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&vc(r.mutation,i,wn.empty(),ht.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pe()){const i=Fs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ql();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Fs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=ai();const o=yc(),a=function(){return yc()}();return n.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof gs)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),vc(u.mutation,c,u.mutation.getFieldMask(),ht.now())):o.set(c.key,wn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var f;return a.set(c,new w8(u,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=yc();let i=new Ke((o,a)=>o-a),s=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||wn.empty();u=a.applyToLocalView(c,u),r.set(l,u);const f=(i.get(a.batchId)||pe()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,f=wA();u.forEach(m=>{if(!s.has(m)){const p=SA(n.get(m),r.get(m));p!==null&&f.set(m,p),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return B.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return re.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):pA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):B.resolve(Fs());let a=-1,l=s;return o.next(c=>B.forEach(c,(u,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(u)?B.resolve():this.remoteDocumentCache.getEntry(e,u).next(m=>{l=l.insert(u,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,pe())).next(u=>({batchId:a,changes:xA(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new re(n)).next(r=>{let i=ql();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=ql();return this.indexManager.getCollectionParents(e,s).next(a=>B.forEach(a,l=>{const c=function(f,m){return new il(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Lt.newInvalidDocument(u)))});let a=ql();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&vc(u.mutation,c,wn.empty(),ht.now()),dm(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _8{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return B.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Er(i.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:g8(i.bundledQuery),readTime:Er(i.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k8{constructor(){this.overlays=new Ke(re.comparator),this.Ir=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Fs();return B.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const i=Fs(),s=n.length+1,o=new re(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return B.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ke((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=Fs(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Fs(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return B.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new qB(n,r));let s=this.Ir.get(n);s===void 0&&(s=pe(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E8{constructor(){this.sessionToken=St.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(){this.Tr=new kt(mt.Er),this.dr=new kt(mt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new mt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new mt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new re(new Le([])),r=new mt(n,e),i=new mt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new re(new Le([])),r=new mt(n,e),i=new mt(n,e+1);let s=pe();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new mt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class mt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return re.comparator(e.key,n.key)||Ee(e.wr,n.wr)}static Ar(e,n){return Ee(e.wr,n.wr)||re.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T8{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new kt(mt.Er)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new HB(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new mt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return B.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new mt(n,0),i=new mt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),B.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new kt(Ee);return n.forEach(i=>{const s=new mt(i,0),o=new mt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),B.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;re.isDocumentKey(s)||(s=s.child(""));const o=new mt(new re(s),0);let a=new kt(Ee);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),B.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Pe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return B.forEach(n.mutations,i=>{const s=new mt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new mt(n,0),i=this.br.firstAfterOrEqual(r);return B.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S8{constructor(e){this.Mr=e,this.docs=function(){return new Ke(re.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():Lt.newInvalidDocument(n))}getEntries(e,n){let r=ai();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Lt.newInvalidDocument(i))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ai();const o=n.path,a=new re(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||cB(lB(u),r)<=0||(i.has(u.key)||dm(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return B.resolve(s)}getAllFromCollectionGroup(e,n,r,i){le()}Or(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new I8(this)}getSize(e){return B.resolve(this.size)}}class I8 extends x8{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C8{constructor(e){this.persistence=e,this.Nr=new sl(n=>Tx(n),Sx),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Mx,this.targetCount=0,this.kr=za.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),B.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new za(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Kn(n),B.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),B.waitFor(s).next(()=>i)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),B.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P8{constructor(e,n){this.qr={},this.overlays={},this.Qr=new bx(0),this.Kr=!1,this.Kr=!0,this.$r=new E8,this.referenceDelegate=e(this),this.Ur=new C8(this),this.indexManager=new y8,this.remoteDocumentCache=function(i){return new S8(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new p8(n),this.Gr=new _8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new k8,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new T8(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){J("MemoryPersistence","Starting transaction:",e);const i=new A8(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return B.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class A8 extends dB{constructor(e){super(),this.currentSequenceNumber=e}}class Dx{constructor(e){this.persistence=e,this.Jr=new Mx,this.Yr=null}static Zr(e){return new Dx(e)}get Xr(){if(this.Yr)return this.Yr;throw le()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),B.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Xr,r=>{const i=re.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ce.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return B.or([()=>B.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=pe(),i=pe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new jx(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R8{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return yF()?8:hB(Bt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new N8;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Al()<=ve.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",Do(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),B.resolve()):(Al()<=ve.DEBUG&&J("QueryEngine","Query:",Do(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Al()<=ve.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",Do(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kr(n))):B.resolve())}Yi(e,n){if(K1(n))return B.resolve(null);let r=kr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=oy(n,null,"F"),r=kr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=pe(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,oy(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return K1(n)||i.isEqual(ce.min())?B.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?B.resolve(null):(Al()<=ve.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Do(n)),this.rs(e,o,n,aB(i,-1)).next(a=>a))})}ts(e,n){let r=new kt(yA(e));return n.forEach((i,s)=>{dm(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Al()<=ve.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",Do(n)),this.Ji.getDocumentsMatchingQuery(e,n,as.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M8{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ke(Ee),this._s=new sl(s=>Tx(s),Sx),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new b8(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function D8(t,e,n,r){return new M8(t,e,n,r)}async function VA(t,e){const n=ue(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=pe();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function j8(t,e){const n=ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const f=c.batch,m=f.keys();let p=B.resolve();return m.forEach(y=>{p=p.next(()=>u.getEntry(l,y)).next(x=>{const k=c.docVersions.get(y);Pe(k!==null),x.version.compareTo(k)<0&&(f.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),u.addEntry(x)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=pe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function FA(t){const e=ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function O8(t,e){const n=ue(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((u,f)=>{const m=i.get(f);if(!m)return;a.push(n.Ur.removeMatchingKeys(s,u.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(s,u.addedDocuments,f)));let p=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?p=p.withResumeToken(St.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,r)),i=i.insert(f,p),function(x,k,v){return x.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(m,p,u)&&a.push(n.Ur.updateTargetData(s,p))});let l=ai(),c=pe();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(L8(s,o,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!r.isEqual(ce.min())){const u=n.Ur.getLastRemoteSnapshotVersion(s).next(f=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return B.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function L8(t,e,n){let r=pe(),i=pe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ai();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ce.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):J("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function V8(t,e){const n=ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function F8(t,e){const n=ue(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,B.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Vi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function dy(t,e,n){const r=ue(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ou(o))throw o;J("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function iE(t,e,n){const r=ue(t);let i=ce.min(),s=pe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const f=ue(l),m=f._s.get(u);return m!==void 0?B.resolve(f.os.get(m)):f.Ur.getTargetData(c,u)}(r,o,kr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:ce.min(),n?s:pe())).next(a=>(U8(r,AB(e),a),{documents:a,Ts:s})))}function U8(t,e,n){let r=t.us.get(e)||ce.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class sE{constructor(){this.activeTargetIds=OB()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class B8{constructor(){this.so=new sE,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new sE,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z8{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){J("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){J("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Od=null;function ng(){return Od===null?Od=function(){return 268435456+Math.round(2147483648*Math.random())}():Od++,"0x"+Od.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W8{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rt="WebChannelConnection";class H8 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=ng(),l=this.xo(n,r.toUriEncodedString());J("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,i).then(u=>(J("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Va("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",i),u})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+rl}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=$8[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=ng();return new Promise((o,a)=>{const l=new ZP;l.setWithCredentials(!0),l.listenOnce(eA.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case vh.NO_ERROR:const u=l.getResponseJson();J(Rt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case vh.TIMEOUT:J(Rt,`RPC '${e}' ${s} timed out`),a(new Q(U.DEADLINE_EXCEEDED,"Request time out"));break;case vh.HTTP_ERROR:const f=l.getStatus();if(J(Rt,`RPC '${e}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const p=m==null?void 0:m.error;if(p&&p.status&&p.message){const y=function(k){const v=k.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(v)>=0?v:U.UNKNOWN}(p.status);a(new Q(y,p.message))}else a(new Q(U.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Q(U.UNAVAILABLE,"Connection failed."));break;default:le()}}finally{J(Rt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);J(Rt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=ng(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=rA(),a=nA(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=s.join("");J(Rt,`Creating RPC '${e}' stream ${i}: ${u}`,l);const f=o.createWebChannel(u,l);let m=!1,p=!1;const y=new W8({Io:k=>{p?J(Rt,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(m||(J(Rt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),m=!0),J(Rt,`RPC '${e}' stream ${i} sending:`,k),f.send(k))},To:()=>f.close()}),x=(k,v,w)=>{k.listen(v,_=>{try{w(_)}catch(P){setTimeout(()=>{throw P},0)}})};return x(f,Hl.EventType.OPEN,()=>{p||(J(Rt,`RPC '${e}' stream ${i} transport opened.`),y.yo())}),x(f,Hl.EventType.CLOSE,()=>{p||(p=!0,J(Rt,`RPC '${e}' stream ${i} transport closed`),y.So())}),x(f,Hl.EventType.ERROR,k=>{p||(p=!0,Va(Rt,`RPC '${e}' stream ${i} transport errored:`,k),y.So(new Q(U.UNAVAILABLE,"The operation could not be completed")))}),x(f,Hl.EventType.MESSAGE,k=>{var v;if(!p){const w=k.data[0];Pe(!!w);const _=w,P=_.error||((v=_[0])===null||v===void 0?void 0:v.error);if(P){J(Rt,`RPC '${e}' stream ${i} received error:`,P);const A=P.status;let N=function(S){const C=rt[S];if(C!==void 0)return CA(C)}(A),T=P.message;N===void 0&&(N=U.INTERNAL,T="Unknown error status: "+A+" with message "+P.message),p=!0,y.So(new Q(N,T)),f.close()}else J(Rt,`RPC '${e}' stream ${i} received:`,w),y.bo(w)}}),x(a,tA.STAT_EVENT,k=>{k.stat===ey.PROXY?J(Rt,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===ey.NOPROXY&&J(Rt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}function rg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(t){return new t8(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&J("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new UA(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(oi(n.toString()),oi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new Q(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return J("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(J("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class q8 extends BA{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=i8(this.serializer,e),r=function(s){if(!("targetChange"in s))return ce.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ce.min():o.readTime?Er(o.readTime):ce.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=uy(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=iy(l)?{documents:a8(s,l)}:{query:l8(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=NA(s,o.resumeToken);const c=ay(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ce.min())>0){a.readTime=Ef(s,o.snapshotVersion.toTimestamp());const c=ay(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=u8(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=uy(this.serializer),n.removeTarget=e,this.a_(n)}}class K8 extends BA{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Pe(!!e.streamToken),this.lastStreamToken=e.streamToken,Pe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Pe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=o8(e.writeResults,e.commitTime),r=Er(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=uy(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>s8(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G8 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Q(U.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,ly(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Q(U.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,ly(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(U.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Q8{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(oi(n),this.D_=!1):J("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y8{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{_o(this)&&(J("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ue(l);c.L_.add(4),await Fu(c),c.q_.set("Unknown"),c.L_.delete(4),await gm(c)}(this))})}),this.q_=new Q8(r,i)}}async function gm(t){if(_o(t))for(const e of t.B_)await e(!0)}async function Fu(t){for(const e of t.B_)await e(!1)}function zA(t,e){const n=ue(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Fx(n)?Vx(n):ol(n).r_()&&Lx(n,e))}function Ox(t,e){const n=ue(t),r=ol(n);n.N_.delete(e),r.r_()&&$A(n,e),n.N_.size===0&&(r.r_()?r.o_():_o(n)&&n.q_.set("Unknown"))}function Lx(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ol(t).A_(e)}function $A(t,e){t.Q_.xe(e),ol(t).R_(e)}function Vx(t){t.Q_=new XB({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ol(t).start(),t.q_.v_()}function Fx(t){return _o(t)&&!ol(t).n_()&&t.N_.size>0}function _o(t){return ue(t).L_.size===0}function WA(t){t.Q_=void 0}async function X8(t){t.q_.set("Online")}async function J8(t){t.N_.forEach((e,n)=>{Lx(t,e)})}async function Z8(t,e){WA(t),Fx(t)?(t.q_.M_(e),Vx(t)):t.q_.set("Unknown")}async function ez(t,e,n){if(t.q_.set("Online"),e instanceof AA&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){J("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Tf(t,r)}else if(e instanceof bh?t.Q_.Ke(e):e instanceof PA?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ce.min()))try{const r=await FA(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.N_.get(c);u&&s.N_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.N_.get(l);if(!u)return;s.N_.set(l,u.withResumeToken(St.EMPTY_BYTE_STRING,u.snapshotVersion)),$A(s,l);const f=new Vi(u.target,l,c,u.sequenceNumber);Lx(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){J("RemoteStore","Failed to raise snapshot:",r),await Tf(t,r)}}async function Tf(t,e,n){if(!Ou(e))throw e;t.L_.add(1),await Fu(t),t.q_.set("Offline"),n||(n=()=>FA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await gm(t)})}function HA(t,e){return e().catch(n=>Tf(t,n,e))}async function ym(t){const e=ue(t),n=cs(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;tz(e);)try{const i=await V8(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,nz(e,i)}catch(i){await Tf(e,i)}qA(e)&&KA(e)}function tz(t){return _o(t)&&t.O_.length<10}function nz(t,e){t.O_.push(e);const n=cs(t);n.r_()&&n.V_&&n.m_(e.mutations)}function qA(t){return _o(t)&&!cs(t).n_()&&t.O_.length>0}function KA(t){cs(t).start()}async function rz(t){cs(t).p_()}async function iz(t){const e=cs(t);for(const n of t.O_)e.m_(n.mutations)}async function sz(t,e,n){const r=t.O_.shift(),i=Ax.from(r,e,n);await HA(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await ym(t)}async function oz(t,e){e&&cs(t).V_&&await async function(r,i){if(function(o){return GB(o)&&o!==U.ABORTED}(i.code)){const s=r.O_.shift();cs(r).s_(),await HA(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await ym(r)}}(t,e),qA(t)&&KA(t)}async function aE(t,e){const n=ue(t);n.asyncQueue.verifyOperationInProgress(),J("RemoteStore","RemoteStore received new credentials");const r=_o(n);n.L_.add(3),await Fu(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await gm(n)}async function az(t,e){const n=ue(t);e?(n.L_.delete(2),await gm(n)):e||(n.L_.add(2),await Fu(n),n.q_.set("Unknown"))}function ol(t){return t.K_||(t.K_=function(n,r,i){const s=ue(n);return s.w_(),new q8(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:X8.bind(null,t),Ro:J8.bind(null,t),mo:Z8.bind(null,t),d_:ez.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Fx(t)?Vx(t):t.q_.set("Unknown")):(await t.K_.stop(),WA(t))})),t.K_}function cs(t){return t.U_||(t.U_=function(n,r,i){const s=ue(n);return s.w_(),new K8(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:rz.bind(null,t),mo:oz.bind(null,t),f_:iz.bind(null,t),g_:sz.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await ym(t)):(await t.U_.stop(),t.O_.length>0&&(J("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Ux(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bx(t,e){if(oi("AsyncQueue",`${e}: ${t}`),Ou(t))return new Q(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e){this.comparator=e?(n,r)=>e(n,r)||re.comparator(n.key,r.key):(n,r)=>re.comparator(n.key,r.key),this.keyedMap=ql(),this.sortedSet=new Ke(this.comparator)}static emptySet(e){return new ha(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ha)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ha;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(){this.W_=new Ke(re.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):le():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class $a{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new $a(e,n,ha.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&um(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lz{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class cz{constructor(){this.queries=cE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ue(n),s=i.queries;i.queries=cE(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new Q(U.ABORTED,"Firestore shutting down"))}}function cE(){return new sl(t=>gA(t),um)}async function GA(t,e){const n=ue(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new lz,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Bx(o,`Initialization of query '${Do(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&zx(n)}async function QA(t,e){const n=ue(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function uz(t,e){const n=ue(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&zx(n)}function dz(t,e,n){const r=ue(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function zx(t){t.Y_.forEach(e=>{e.next()})}var hy,uE;(uE=hy||(hy={})).ea="default",uE.Cache="cache";class YA{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new $a(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=$a.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==hy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e){this.key=e}}class JA{constructor(e){this.key=e}}class hz{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=pe(),this.mutatedKeys=pe(),this.Aa=yA(e),this.Ra=new ha(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new lE,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,f)=>{const m=i.get(u),p=dm(this.query,f)?f:null,y=!!m&&this.mutatedKeys.has(m.key),x=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let k=!1;m&&p?m.data.isEqual(p.data)?y!==x&&(r.track({type:3,doc:p}),k=!0):this.ga(m,p)||(r.track({type:2,doc:p}),k=!0,(l&&this.Aa(p,l)>0||c&&this.Aa(p,c)<0)&&(a=!0)):!m&&p?(r.track({type:0,doc:p}),k=!0):m&&!p&&(r.track({type:1,doc:m}),k=!0,(l||c)&&(a=!0)),k&&(p?(o=o.add(p),s=x?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((u,f)=>function(p,y){const x=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return le()}};return x(p)-x(y)}(u.type,f.type)||this.Aa(u.doc,f.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new $a(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new lE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=pe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new JA(r))}),this.da.forEach(r=>{e.has(r)||n.push(new XA(r))}),n}ba(e){this.Ta=e.Ts,this.da=pe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return $a.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class fz{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class mz{constructor(e){this.key=e,this.va=!1}}class pz{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new sl(a=>gA(a),um),this.Ma=new Map,this.xa=new Set,this.Oa=new Ke(re.comparator),this.Na=new Map,this.La=new Mx,this.Ba={},this.ka=new Map,this.qa=za.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function gz(t,e,n=!0){const r=iN(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await ZA(r,e,n,!0),i}async function yz(t,e){const n=iN(t);await ZA(n,e,!0,!1)}async function ZA(t,e,n,r){const i=await F8(t.localStore,kr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await vz(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&zA(t.remoteStore,i),a}async function vz(t,e,n,r,i){t.Ka=(f,m,p)=>async function(x,k,v,w){let _=k.view.ma(v);_.ns&&(_=await iE(x.localStore,k.query,!1).then(({documents:T})=>k.view.ma(T,_)));const P=w&&w.targetChanges.get(k.targetId),A=w&&w.targetMismatches.get(k.targetId)!=null,N=k.view.applyChanges(_,x.isPrimaryClient,P,A);return hE(x,k.targetId,N.wa),N.snapshot}(t,f,m,p);const s=await iE(t.localStore,e,!0),o=new hz(e,s.Ts),a=o.ma(s.documents),l=Vu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);hE(t,n,c.wa);const u=new fz(e,n,o);return t.Fa.set(e,u),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function xz(t,e,n){const r=ue(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!um(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await dy(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Ox(r.remoteStore,i.targetId),fy(r,i.targetId)}).catch(ju)):(fy(r,i.targetId),await dy(r.localStore,i.targetId,!0))}async function wz(t,e){const n=ue(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ox(n.remoteStore,r.targetId))}async function bz(t,e,n){const r=Cz(t);try{const i=await function(o,a){const l=ue(o),c=ht.now(),u=a.reduce((p,y)=>p.add(y.key),pe());let f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let y=ai(),x=pe();return l.cs.getEntries(p,u).next(k=>{y=k,y.forEach((v,w)=>{w.isValidDocument()||(x=x.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,y)).next(k=>{f=k;const v=[];for(const w of a){const _=$B(w,f.get(w.key).overlayedDocument);_!=null&&v.push(new gs(w.key,_,lA(_.value.mapValue),Fn.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,v,a)}).next(k=>{m=k;const v=k.applyToLocalDocumentSet(f,x);return l.documentOverlayCache.saveOverlays(p,k.batchId,v)})}).then(()=>({batchId:m.batchId,changes:xA(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Ke(Ee)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await Uu(r,i.changes),await ym(r.remoteStore)}catch(i){const s=Bx(i,"Failed to persist write");n.reject(s)}}async function eN(t,e){const n=ue(t);try{const r=await O8(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Pe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Pe(o.va):i.removedDocuments.size>0&&(Pe(o.va),o.va=!1))}),await Uu(n,r,e)}catch(r){await ju(r)}}function dE(t,e,n){const r=ue(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ue(o);l.onlineState=a;let c=!1;l.queries.forEach((u,f)=>{for(const m of f.j_)m.Z_(a)&&(c=!0)}),c&&zx(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function _z(t,e,n){const r=ue(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ke(re.comparator);o=o.insert(s,Lt.newNoDocument(s,ce.min()));const a=pe().add(s),l=new mm(ce.min(),new Map,new Ke(Ee),o,a);await eN(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),$x(r)}else await dy(r.localStore,e,!1).then(()=>fy(r,e,n)).catch(ju)}async function kz(t,e){const n=ue(t),r=e.batch.batchId;try{const i=await j8(n.localStore,e);nN(n,r,null),tN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Uu(n,i)}catch(i){await ju(i)}}async function Ez(t,e,n){const r=ue(t);try{const i=await function(o,a){const l=ue(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(Pe(f!==null),u=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);nN(r,e,n),tN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Uu(r,i)}catch(i){await ju(i)}}function tN(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function nN(t,e,n){const r=ue(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function fy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||rN(t,r)})}function rN(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Ox(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),$x(t))}function hE(t,e,n){for(const r of n)r instanceof XA?(t.La.addReference(r.key,e),Tz(t,r)):r instanceof JA?(J("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||rN(t,r.key)):le()}function Tz(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(J("SyncEngine","New document in limbo: "+n),t.xa.add(r),$x(t))}function $x(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new re(Le.fromString(e)),r=t.qa.next();t.Na.set(r,new mz(n)),t.Oa=t.Oa.insert(n,r),zA(t.remoteStore,new Vi(kr(Ix(n.path)),r,"TargetPurposeLimboResolution",bx.oe))}}async function Uu(t,e,n){const r=ue(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var u;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){i.push(c);const f=jx.Wi(l.targetId,c);s.push(f)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const u=ue(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>B.forEach(c,m=>B.forEach(m.$i,p=>u.persistence.referenceDelegate.addReference(f,m.targetId,p)).next(()=>B.forEach(m.Ui,p=>u.persistence.referenceDelegate.removeReference(f,m.targetId,p)))))}catch(f){if(!Ou(f))throw f;J("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const m=f.targetId;if(!f.fromCache){const p=u.os.get(m),y=p.snapshotVersion,x=p.withLastLimboFreeSnapshotVersion(y);u.os=u.os.insert(m,x)}}}(r.localStore,s))}async function Sz(t,e){const n=ue(t);if(!n.currentUser.isEqual(e)){J("SyncEngine","User change. New user:",e.toKey());const r=await VA(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new Q(U.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Uu(n,r.hs)}}function Iz(t,e){const n=ue(t),r=n.Na.get(e);if(r&&r.va)return pe().add(r.key);{let i=pe();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function iN(t){const e=ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=eN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Iz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_z.bind(null,e),e.Ca.d_=uz.bind(null,e.eventManager),e.Ca.$a=dz.bind(null,e.eventManager),e}function Cz(t){const e=ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ez.bind(null,e),e}class Sf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=pm(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return D8(this.persistence,new R8,e.initialUser,this.serializer)}Ga(e){return new P8(Dx.Zr,this.serializer)}Wa(e){return new B8}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sf.provider={build:()=>new Sf};class my{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>dE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Sz.bind(null,this.syncEngine),await az(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new cz}()}createDatastore(e){const n=pm(e.databaseInfo.databaseId),r=function(s){return new H8(s)}(e.databaseInfo);return function(s,o,a,l){return new G8(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new Y8(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>dE(this.syncEngine,n,0),function(){return oE.D()?new oE:new z8}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,u){const f=new pz(i,s,o,a,l,c);return u&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ue(i);J("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Fu(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}my.provider={build:()=>new my};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):oi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pz{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=jt.UNAUTHENTICATED,this.clientId=sA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{J("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(J("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Bx(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ig(t,e){t.asyncQueue.verifyOperationInProgress(),J("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await VA(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function fE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Az(t);J("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>aE(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>aE(e.remoteStore,i)),t._onlineComponents=e}async function Az(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J("FirestoreClient","Using user provided OfflineComponentProvider");try{await ig(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===U.FAILED_PRECONDITION||i.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Va("Error using user provided cache. Falling back to memory cache: "+n),await ig(t,new Sf)}}else J("FirestoreClient","Using default OfflineComponentProvider"),await ig(t,new Sf);return t._offlineComponents}async function oN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J("FirestoreClient","Using user provided OnlineComponentProvider"),await fE(t,t._uninitializedComponentsProvider._online)):(J("FirestoreClient","Using default OnlineComponentProvider"),await fE(t,new my))),t._onlineComponents}function Nz(t){return oN(t).then(e=>e.syncEngine)}async function aN(t){const e=await oN(t),n=e.eventManager;return n.onListen=gz.bind(null,e.syncEngine),n.onUnlisten=xz.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=yz.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=wz.bind(null,e.syncEngine),n}function Rz(t,e,n={}){const r=new Yr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new sN({next:m=>{u.Za(),o.enqueueAndForget(()=>QA(s,f));const p=m.docs.has(a);!p&&m.fromCache?c.reject(new Q(U.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&m.fromCache&&l&&l.source==="server"?c.reject(new Q(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new YA(Ix(a.path),u,{includeMetadataChanges:!0,_a:!0});return GA(s,f)}(await aN(t),t.asyncQueue,e,n,r)),r.promise}function Mz(t,e,n={}){const r=new Yr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new sN({next:m=>{u.Za(),o.enqueueAndForget(()=>QA(s,f)),m.fromCache&&l.source==="server"?c.reject(new Q(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new YA(a,u,{includeMetadataChanges:!0,_a:!0});return GA(s,f)}(await aN(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(t,e,n){if(!n)throw new Q(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Dz(t,e,n,r){if(e===!0&&r===!0)throw new Q(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function pE(t){if(!re.isDocumentKey(t))throw new Q(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function gE(t){if(re.isDocumentKey(t))throw new Q(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function vm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":le()}function sr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=vm(t);throw new Q(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Q(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Dz("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Q(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Q(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Q(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xm{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yE({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yE(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new JU;switch(r.type){case"firstParty":return new nB(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=mE.get(n);r&&(J("ComponentProvider","Removing Datastore"),mE.delete(n),r.terminate())}(this),Promise.resolve()}}function jz(t,e,n,r={}){var i;const s=(t=sr(t,xm))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Va("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=jt.MOCK_USER;else{a=uF(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Q(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new jt(c)}t._authCredentials=new ZU(new iA(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ko(this.firestore,e,this._query)}}class Zt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new es(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zt(this.firestore,e,this._key)}}class es extends ko{constructor(e,n,r){super(e,n,Ix(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zt(this.firestore,null,new re(e))}withConverter(e){return new es(this.firestore,e,this._path)}}function yo(t,e,...n){if(t=Tt(t),cN("collection","path",e),t instanceof xm){const r=Le.fromString(e,...n);return gE(r),new es(t,null,r)}{if(!(t instanceof Zt||t instanceof es))throw new Q(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Le.fromString(e,...n));return gE(r),new es(t.firestore,null,r)}}function nn(t,e,...n){if(t=Tt(t),arguments.length===1&&(e=sA.newId()),cN("doc","path",e),t instanceof xm){const r=Le.fromString(e,...n);return pE(r),new Zt(t,null,new re(r))}{if(!(t instanceof Zt||t instanceof es))throw new Q(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Le.fromString(e,...n));return pE(r),new Zt(t.firestore,t instanceof es?t.converter:null,new re(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new UA(this,"async_queue_retry"),this.Vu=()=>{const r=rg();r&&J("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=rg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=rg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Yr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ou(e))throw e;J("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw oi("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Ux.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&le()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Eo extends xm{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new vE,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vE(e),this._firestoreClient=void 0,await e}}}function Oz(t,e){const n=typeof t=="object"?t:pP(),r=typeof t=="string"?t:"(default)",i=ux(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=lF("firestore");s&&jz(i,...s)}return i}function Wx(t){if(t._terminated)throw new Q(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Lz(t),t._firestoreClient}function Lz(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,u){return new pB(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,lN(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Pz(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wa(St.fromBase64String(e))}catch(n){throw new Q(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Wa(St.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ee(this._lat,e._lat)||Ee(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vz=/^__.*__$/;class Fz{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new gs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Lu(e,this.data,n,this.fieldTransforms)}}class uN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new gs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function dN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw le()}}class Gx{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Gx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return If(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(dN(this.Cu)&&Vz.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Uz{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||pm(e)}Qu(e,n,r,i=!1){return new Gx({Cu:e,methodName:n,qu:r,path:bt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bm(t){const e=t._freezeSettings(),n=pm(t._databaseId);return new Uz(t._databaseId,!!e.ignoreUndefinedProperties,n)}function hN(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Qx("Data must be an object, but it was:",o,r);const a=fN(r,o);let l,c;if(s.merge)l=new wn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const f of s.mergeFields){const m=py(e,f,n);if(!o.contains(m))throw new Q(U.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);pN(u,m)||u.push(m)}l=new wn(u),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new Fz(new ln(a),l,c)}class _m extends Hx{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _m}}function Bz(t,e,n,r){const i=t.Qu(1,e,n);Qx("Data must be an object, but it was:",i,r);const s=[],o=ln.empty();bo(r,(l,c)=>{const u=Yx(e,l,n);c=Tt(c);const f=i.Nu(u);if(c instanceof _m)s.push(u);else{const m=Bu(c,f);m!=null&&(s.push(u),o.set(u,m))}});const a=new wn(s);return new uN(o,a,i.fieldTransforms)}function zz(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[py(e,r,n)],l=[i];if(s.length%2!=0)throw new Q(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(py(e,s[m])),l.push(s[m+1]);const c=[],u=ln.empty();for(let m=a.length-1;m>=0;--m)if(!pN(c,a[m])){const p=a[m];let y=l[m];y=Tt(y);const x=o.Nu(p);if(y instanceof _m)c.push(p);else{const k=Bu(y,x);k!=null&&(c.push(p),u.set(p,k))}}const f=new wn(c);return new uN(u,f,o.fieldTransforms)}function $z(t,e,n,r=!1){return Bu(n,t.Qu(r?4:3,e))}function Bu(t,e){if(mN(t=Tt(t)))return Qx("Unsupported field value:",e,t),fN(t,e);if(t instanceof Hx)return function(r,i){if(!dN(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Bu(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Tt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return LB(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ht.fromDate(r);return{timestampValue:Ef(i.serializer,s)}}if(r instanceof ht){const s=new ht(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ef(i.serializer,s)}}if(r instanceof qx)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Wa)return{bytesValue:NA(i.serializer,r._byteString)};if(r instanceof Zt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Rx(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Kx)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Cx(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${vm(r)}`)}(t,e)}function fN(t,e){const n={};return oA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bo(t,(r,i)=>{const s=Bu(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function mN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ht||t instanceof qx||t instanceof Wa||t instanceof Zt||t instanceof Hx||t instanceof Kx)}function Qx(t,e,n){if(!mN(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=vm(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function py(t,e,n){if((e=Tt(e))instanceof wm)return e._internalPath;if(typeof e=="string")return Yx(t,e);throw If("Field path arguments must be of type string or ",t,!1,void 0,n)}const Wz=new RegExp("[~\\*/\\[\\]]");function Yx(t,e,n){if(e.search(Wz)>=0)throw If(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new wm(...e.split("."))._internalPath}catch{throw If(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function If(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Q(U.INVALID_ARGUMENT,a+t+l)}function pN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Hz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Xx("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Hz extends gN{data(){return super.data()}}function Xx(t,e){return typeof e=="string"?Yx(t,e):e instanceof wm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qz(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Jx{}class yN extends Jx{}function Zx(t,e,...n){let r=[];e instanceof Jx&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof tw).length,a=s.filter(l=>l instanceof ew).length;if(o>1||o>0&&a>0)throw new Q(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class ew extends yN{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ew(e,n,r)}_apply(e){const n=this._parse(e);return vN(e._query,n),new ko(e.firestore,e.converter,sy(e._query,n))}_parse(e){const n=bm(e.firestore);return function(s,o,a,l,c,u,f){let m;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new Q(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){wE(f,u);const p=[];for(const y of f)p.push(xE(l,s,y));m={arrayValue:{values:p}}}else m=xE(l,s,f)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||wE(f,u),m=$z(a,o,f,u==="in"||u==="not-in");return ot.create(c,u,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class tw extends Jx{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new tw(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ir.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)vN(o,l),o=sy(o,l)}(e._query,n),new ko(e.firestore,e.converter,sy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class nw extends yN{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new nw(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new Q(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Q(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ru(s,o)}(e._query,this._field,this._direction);return new ko(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new il(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function rw(t,e="asc"){const n=e,r=Xx("orderBy",t);return nw._create(r,n)}function xE(t,e,n){if(typeof(n=Tt(n))=="string"){if(n==="")throw new Q(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pA(e)&&n.indexOf("/")!==-1)throw new Q(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Le.fromString(n));if(!re.isDocumentKey(r))throw new Q(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return B1(t,new re(r))}if(n instanceof Zt)return B1(t,n._key);throw new Q(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vm(n)}.`)}function wE(t,e){if(!Array.isArray(t)||t.length===0)throw new Q(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function vN(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Q(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Kz{convertValue(e,n="none"){switch(go(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(po(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw le()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return bo(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ze(o.doubleValue));return new Kx(s)}convertGeoPoint(e){return new qx(Ze(e.latitude),Ze(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=kx(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(eu(e));default:return null}}convertTimestamp(e){const n=ls(e);return new ht(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Le.fromString(e);Pe(LA(r));const i=new tu(r.get(1),r.get(3)),s=new re(r.popFirst(5));return i.isEqual(n)||oi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wN extends gN{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new _h(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Xx("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class _h extends wN{data(e={}){return super.data(e)}}class Gz{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Gl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new _h(this._firestore,this._userDataWriter,r.key,r,new Gl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new _h(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Gl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new _h(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Gl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:Qz(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Qz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return le()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iw(t){t=sr(t,Zt);const e=sr(t.firestore,Eo);return Rz(Wx(e),t._key).then(n=>Yz(e,t,n))}class bN extends Kz{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Zt(this.firestore,null,n)}}function km(t){t=sr(t,ko);const e=sr(t.firestore,Eo),n=Wx(e),r=new bN(e);return qz(t._query),Mz(n,t._query).then(i=>new Gz(e,r,t,i))}function To(t,e,n){t=sr(t,Zt);const r=sr(t.firestore,Eo),i=xN(t.converter,e,n);return Em(r,[hN(bm(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Fn.none())])}function _N(t,e,n,...r){t=sr(t,Zt);const i=sr(t.firestore,Eo),s=bm(i);let o;return o=typeof(e=Tt(e))=="string"||e instanceof wm?zz(s,"updateDoc",t._key,e,n,r):Bz(s,"updateDoc",t._key,e),Em(i,[o.toMutation(t._key,Fn.exists(!0))])}function kN(t){return Em(sr(t.firestore,Eo),[new Px(t._key,Fn.none())])}function sw(t,e){const n=sr(t.firestore,Eo),r=nn(t),i=xN(t.converter,e);return Em(n,[hN(bm(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Fn.exists(!1))]).then(()=>r)}function Em(t,e){return function(r,i){const s=new Yr;return r.asyncQueue.enqueueAndForget(async()=>bz(await Nz(r),i,s)),s.promise}(Wx(t),e)}function Yz(t,e,n){const r=n.docs.get(e._key),i=new bN(t);return new wN(t,i,e._key,r,new Gl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){rl=i})(tl),Oa(new uo("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Eo(new eB(r.getProvider("auth-internal")),new iB(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Q(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tu(c.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Zi(O1,"4.7.3",e),Zi(O1,"4.7.3","esm2017")})();const EN={apiKey:"AIzaSyBMgAmQLzaXaNvKy09dDdsdY681iDcetD4",authDomain:"pumulo-12eb1.firebaseapp.com",projectId:"pumulo-12eb1",appId:"1:991195081007:web:0452ea6468417afdd2d9da"};console.log("Firebase config:",EN);const TN=mP(EN),kh=GU(TN),nt=Oz(TN);function Xz(t){return{"auth/email-already-in-use":"An account with this email already exists.","auth/invalid-email":"Please enter a valid email address.","auth/weak-password":"Password is too weak. Please choose a stronger password (at least 6 characters).","auth/operation-not-allowed":"Email/password accounts are not enabled.","auth/user-not-found":"No account found with this email address.","auth/wrong-password":"Incorrect password. Please try again.","auth/user-disabled":"This account has been disabled. Please contact support.","auth/too-many-requests":"Too many failed attempts. Please try again later.","auth/network-request-failed":"Network error. Please check your internet connection.","auth/invalid-credential":"Invalid email or password. Please try again.","auth/requires-recent-login":"Please log out and log in again to complete this action.","auth/email-already-exists":"This email is already registered.","auth/invalid-phone-number":"Invalid phone number format.","auth/phone-number-already-exists":"This phone number is already registered.","auth/credential-already-in-use":"This credential is already associated with another account.","auth/missing-email":"Email address is required to reset password.","auth/invalid-continue-uri":"The continue URL is invalid. Please try again.","auth/unauthorized-continue-uri":"The continue URL is not authorized. Please contact support."}[t]||"An error occurred. Please try again."}function Jz({onSuccess:t,onSwitchToSignUp:e,isLoading:n=!1}){const[r,i]=O.useState(""),[s,o]=O.useState(""),[a,l]=O.useState(!1),[c,u]=O.useState(!1),[f,m]=O.useState({}),[p,y]=O.useState(!1),[x,k]=O.useState(""),[v,w]=O.useState(!1),[_,P]=O.useState(""),[A,N]=O.useState(!1),T=()=>{const X={};return r?/\S+@\S+\.\S+/.test(r)||(X.email="Email is invalid"):X.email="Email is required",s?s.length<6&&(X.password="Password must be at least 6 characters"):X.password="Password is required",m(X),Object.keys(X).length===0},E=X=>{switch(X){case"auth/user-not-found":return"No account found with this email address";case"auth/wrong-password":return"Incorrect password";case"auth/invalid-email":return"Invalid email address";case"auth/user-disabled":return"This account has been disabled";case"auth/too-many-requests":return"Too many failed attempts. Please try again later";case"auth/network-request-failed":return"Network error. Please check your connection";default:return"Invalid credentials. Please try again"}},S=async X=>{if(X.preventDefault(),m({}),!!T()){u(!0);try{const F=(await M9(kh,r,s)).user,$={uid:F.uid,email:F.email,displayName:F.displayName||r.split("@")[0],emailVerified:F.emailVerified};t&&t($)}catch(G){console.error("Login error:",G),m({general:E(G.code)})}finally{u(!1)}}},C=X=>G=>{X==="email"?i(G.target.value):o(G.target.value),(f[X]||f.general)&&m(F=>({...F,[X]:void 0,general:void 0}))},M=()=>{y(!0),k(r||""),P(""),N(!1)},D=X=>!X||X.trim().length===0?{valid:!1,error:"Email is required"}:/\S+@\S+\.\S+/.test(X)?{valid:!0}:{valid:!1,error:"Please enter a valid email address"},R=async X=>{X.preventDefault();const G=D(x);if(!G.valid){P(G.error||"Invalid email");return}w(!0),P(""),N(!1);try{const F=x.trim();if(!F||F.length===0)throw new Error("Email cannot be empty");if(!kh)throw new Error("Authentication service not available. Please refresh the page.");console.log("Sending password reset email to:",F),await N9(kh,F),console.log("Password reset email sent successfully"),N(!0),setTimeout(()=>{k("")},5e3)}catch(F){if(console.error("Password reset error:",F),console.error("Error details:",{code:F.code,message:F.message,name:F.name}),F.code){const $=Xz(F.code);P($)}else F.message?P(F.message):P("Failed to send reset email. Please try again or contact support.");N(!1)}finally{w(!1)}},ie=()=>{y(!1),k(""),P(""),N(!1)},se=c||n;return h.jsxs(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-lg mx-auto",children:[h.jsxs("div",{className:"bg-white/90 dark:bg-gray-900/90 backdrop-blur-xl rounded-3xl shadow-2xl p-10 border border-gray-200/50 dark:border-gray-700/50",children:[h.jsxs("div",{className:"text-center mb-10",children:[h.jsx("h1",{className:"text-4xl font-black text-gray-900 dark:text-white mb-3",children:"Welcome Back"}),h.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 font-medium",children:"Sign in to continue your fitness journey"})]}),h.jsxs("form",{onSubmit:S,className:"space-y-8",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Email Address"}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:h.jsx(H0,{className:"h-5 w-5 text-gray-400"})}),h.jsx("input",{id:"email",type:"email",value:r,onChange:C("email"),className:`block w-full pl-12 pr-4 py-4 border-2 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 font-medium ${f.email?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-600":"border-gray-300 dark:border-gray-600 bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl text-gray-900 dark:text-white hover:border-gray-400 dark:hover:border-gray-500"}`,placeholder:"Enter your email"})]}),f.email&&h.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400 font-medium",children:f.email})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Password"}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:h.jsx(cf,{className:"h-5 w-5 text-gray-400"})}),h.jsx("input",{id:"password",type:a?"text":"password",value:s,onChange:C("password"),className:`block w-full pl-12 pr-14 py-4 border-2 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 font-medium ${f.password?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-600":"border-gray-300 dark:border-gray-600 bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl text-gray-900 dark:text-white hover:border-gray-400 dark:hover:border-gray-500"}`,placeholder:"Enter your password"}),h.jsx("button",{type:"button",onClick:()=>l(!a),className:"absolute inset-y-0 right-0 pr-4 flex items-center hover:bg-gray-100 dark:hover:bg-gray-700 rounded-r-2xl transition-colors duration-200",children:a?h.jsx(of,{className:"h-5 w-5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"}):h.jsx(af,{className:"h-5 w-5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"})})]}),f.password&&h.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400 font-medium",children:f.password})]}),f.general&&h.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border-2 border-red-200 dark:border-red-800 rounded-2xl p-4",children:h.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 font-medium",children:f.general})}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),h.jsx("label",{htmlFor:"remember-me",className:"ml-3 block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Remember me"})]}),h.jsx("button",{type:"button",onClick:M,className:"text-sm font-semibold text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 transition-colors duration-200",children:"Forgot password?"})]}),h.jsx(Z.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:se,className:"w-full flex justify-center py-4 px-6 border border-transparent rounded-2xl shadow-xl text-lg font-bold text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300",children:se?h.jsxs("div",{className:"flex items-center",children:[h.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-white mr-3"}),"Signing in..."]}):"Sign In"})]}),h.jsx("div",{className:"mt-8 text-center",children:h.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 font-medium",children:["Don't have an account?"," ",h.jsx("button",{onClick:e,className:"font-bold text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 transition-colors duration-200",children:"Sign up here"})]})})]}),h.jsx(Xv,{children:p&&h.jsxs(h.Fragment,{children:[h.jsx(Z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:ie,className:"fixed inset-0 bg-black/60 dark:bg-black/80 backdrop-blur-sm z-50"}),h.jsx(Z.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:X=>X.stopPropagation(),children:h.jsxs("div",{className:"bg-white/95 dark:bg-gray-900/95 backdrop-blur-xl rounded-3xl shadow-2xl border border-gray-200/50 dark:border-gray-700/50 w-full max-w-md p-8 relative",children:[h.jsx("button",{onClick:ie,className:"absolute top-4 right-4 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200","aria-label":"Close modal",children:h.jsx(sP,{className:"h-5 w-5 text-gray-500 dark:text-gray-400"})}),A?h.jsxs("div",{className:"text-center py-4",children:[h.jsx(Z.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:h.jsx(h6,{className:"w-12 h-12 text-green-600 dark:text-green-400"})}),h.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-3",children:"Check Your Email"}),h.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["We've sent a password reset link to ",h.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:x})]}),h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mb-6",children:"Please check your inbox and click on the link to reset your password. If you don't see it, check your spam folder."}),h.jsx("button",{onClick:ie,className:"w-full py-3 px-6 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-bold rounded-2xl transition-all duration-300 shadow-lg hover:shadow-xl",children:"Got it"})]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("div",{className:"w-16 h-16 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx(cf,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),h.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Reset Password"}),h.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Enter your email address and we'll send you a link to reset your password."})]}),h.jsxs("form",{onSubmit:R,className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"reset-email",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Email Address"}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:h.jsx(H0,{className:"h-5 w-5 text-gray-400"})}),h.jsx("input",{id:"reset-email",type:"email",value:x,onChange:X=>{k(X.target.value),P("")},className:`block w-full pl-12 pr-4 py-4 border-2 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 font-medium ${_?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-600":"border-gray-300 dark:border-gray-600 bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl text-gray-900 dark:text-white hover:border-gray-400 dark:hover:border-gray-500"}`,placeholder:"Enter your email",disabled:v})]})]}),_&&h.jsxs(Z.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center gap-2 p-4 bg-red-50 dark:bg-red-900/20 border-2 border-red-200 dark:border-red-800 rounded-2xl",children:[h.jsx(tP,{className:"h-5 w-5 text-red-600 dark:text-red-400 flex-shrink-0"}),h.jsx("p",{className:"text-sm text-red-800 dark:text-red-200 font-medium",children:_})]}),h.jsx(Z.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:v,className:"w-full flex justify-center py-4 px-6 border border-transparent rounded-2xl shadow-xl text-lg font-bold text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300",children:v?h.jsxs("div",{className:"flex items-center",children:[h.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-white mr-3"}),"Sending..."]}):"Send Reset Link"}),h.jsx("button",{type:"button",onClick:ie,className:"w-full py-3 px-6 border-2 border-gray-300 dark:border-gray-600 rounded-2xl text-gray-700 dark:text-gray-300 font-semibold hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors duration-200",disabled:v,children:"Cancel"})]})]})]})})]})})]})}function Zz({onSuccess:t,onSwitchToLogin:e,isLoading:n=!1}){const[r,i]=O.useState({name:"",email:"",password:"",confirmPassword:""}),[s,o]=O.useState(!1),[a,l]=O.useState(!1),[c,u]=O.useState(!1),[f,m]=O.useState({}),p=()=>{const w={};return r.name.trim()||(w.name="Name is required"),r.email?/\S+@\S+\.\S+/.test(r.email)||(w.email="Email is invalid"):w.email="Email is required",r.password?r.password.length<6&&(w.password="Password must be at least 6 characters"):w.password="Password is required",r.confirmPassword?r.password!==r.confirmPassword&&(w.confirmPassword="Passwords do not match"):w.confirmPassword="Please confirm your password",m(w),Object.keys(w).length===0},y=w=>{switch(w){case"auth/email-already-in-use":return"An account with this email already exists";case"auth/invalid-email":return"Invalid email address";case"auth/weak-password":return"Password is too weak. Please choose a stronger password";case"auth/operation-not-allowed":return"Email/password accounts are not enabled";case"auth/network-request-failed":return"Network error. Please check your connection";default:return"Failed to create account. Please try again"}},x=async w=>{if(w.preventDefault(),m({}),!!p()){u(!0);try{const P=(await R9(kh,r.email,r.password)).user;await j9(P,{displayName:r.name});const A={uid:P.uid,email:P.email,displayName:r.name,emailVerified:P.emailVerified};t&&t(A)}catch(_){console.error("Signup error:",_),m({general:y(_.code)})}finally{u(!1)}}},k=w=>_=>{i(P=>({...P,[w]:_.target.value})),(f[w]||f.general)&&m(P=>({...P,[w]:void 0,general:void 0}))},v=c||n;return h.jsx(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-lg mx-auto",children:h.jsxs("div",{className:"bg-white/90 dark:bg-gray-900/90 backdrop-blur-xl rounded-3xl shadow-2xl p-10 border border-gray-200/50 dark:border-gray-700/50",children:[h.jsxs("div",{className:"text-center mb-10",children:[h.jsx("h1",{className:"text-4xl font-black text-gray-900 dark:text-white mb-3",children:"Create Account"}),h.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 font-medium",children:"Start your fitness journey today"})]}),h.jsxs("form",{onSubmit:x,className:"space-y-8",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"name",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Full Name"}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:h.jsx(im,{className:"h-5 w-5 text-gray-400"})}),h.jsx("input",{id:"name",type:"text",value:r.name,onChange:k("name"),className:`block w-full pl-12 pr-4 py-4 border-2 rounded-2xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all duration-300 font-medium ${f.name?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-600":"border-gray-300 dark:border-gray-600 bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl text-gray-900 dark:text-white hover:border-gray-400 dark:hover:border-gray-500"}`,placeholder:"Enter your full name"})]}),f.name&&h.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400 font-medium",children:f.name})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Email Address"}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:h.jsx(H0,{className:"h-5 w-5 text-gray-400"})}),h.jsx("input",{id:"email",type:"email",value:r.email,onChange:k("email"),className:`block w-full pl-12 pr-4 py-4 border-2 rounded-2xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all duration-300 font-medium ${f.email?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-600":"border-gray-300 dark:border-gray-600 bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl text-gray-900 dark:text-white hover:border-gray-400 dark:hover:border-gray-500"}`,placeholder:"Enter your email"})]}),f.email&&h.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400 font-medium",children:f.email})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Password"}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:h.jsx(cf,{className:"h-5 w-5 text-gray-400"})}),h.jsx("input",{id:"password",type:s?"text":"password",value:r.password,onChange:k("password"),className:`block w-full pl-12 pr-14 py-4 border-2 rounded-2xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all duration-300 font-medium ${f.password?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-600":"border-gray-300 dark:border-gray-600 bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl text-gray-900 dark:text-white hover:border-gray-400 dark:hover:border-gray-500"}`,placeholder:"Create a password"}),h.jsx("button",{type:"button",onClick:()=>o(!s),className:"absolute inset-y-0 right-0 pr-4 flex items-center hover:bg-gray-100 dark:hover:bg-gray-700 rounded-r-2xl transition-colors duration-200",children:s?h.jsx(of,{className:"h-5 w-5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"}):h.jsx(af,{className:"h-5 w-5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"})})]}),f.password&&h.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400 font-medium",children:f.password})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Confirm Password"}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:h.jsx(cf,{className:"h-5 w-5 text-gray-400"})}),h.jsx("input",{id:"confirmPassword",type:a?"text":"password",value:r.confirmPassword,onChange:k("confirmPassword"),className:`block w-full pl-12 pr-14 py-4 border-2 rounded-2xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all duration-300 font-medium ${f.confirmPassword?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-600":"border-gray-300 dark:border-gray-600 bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl text-gray-900 dark:text-white hover:border-gray-400 dark:hover:border-gray-500"}`,placeholder:"Confirm your password"}),h.jsx("button",{type:"button",onClick:()=>l(!a),className:"absolute inset-y-0 right-0 pr-4 flex items-center hover:bg-gray-100 dark:hover:bg-gray-700 rounded-r-2xl transition-colors duration-200",children:a?h.jsx(of,{className:"h-5 w-5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"}):h.jsx(af,{className:"h-5 w-5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"})})]}),f.confirmPassword&&h.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400 font-medium",children:f.confirmPassword})]}),f.general&&h.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border-2 border-red-200 dark:border-red-800 rounded-2xl p-4",children:h.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 font-medium",children:f.general})}),h.jsxs("div",{className:"flex items-start",children:[h.jsx("div",{className:"flex items-center h-5",children:h.jsx("input",{id:"terms",name:"terms",type:"checkbox",required:!0,className:"h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded"})}),h.jsx("div",{className:"ml-3 text-sm",children:h.jsxs("label",{htmlFor:"terms",className:"text-gray-700 dark:text-gray-300 font-medium",children:["I agree to the"," ",h.jsx("button",{type:"button",className:"text-emerald-600 hover:text-emerald-500 dark:text-emerald-400 font-semibold",children:"Terms and Conditions"})," ","and"," ",h.jsx("button",{type:"button",className:"text-emerald-600 hover:text-emerald-500 dark:text-emerald-400 font-semibold",children:"Privacy Policy"})]})})]}),h.jsx(Z.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:v,className:"w-full flex justify-center py-4 px-6 border border-transparent rounded-2xl shadow-xl text-lg font-bold text-white bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300",children:v?h.jsxs("div",{className:"flex items-center",children:[h.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-white mr-3"}),"Creating account..."]}):"Create Account"})]}),h.jsx("div",{className:"mt-8 text-center",children:h.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 font-medium",children:["Already have an account?"," ",h.jsx("button",{onClick:e,className:"font-bold text-emerald-600 hover:text-emerald-500 dark:text-emerald-400 dark:hover:text-emerald-300 transition-colors duration-200",children:"Sign in here"})]})})]})})}function e7({onAuthSuccess:t}){const[e,n]=O.useState(!0),[r,i]=O.useState(!1),{login:s}=pn(),o=a=>{var c;const l={uid:a.uid,name:a.displayName||((c=a.email)==null?void 0:c.split("@")[0])||"User",email:a.email,age:0,weightKg:0,heightCm:0,theme:"system",fitnessGoal:"Not yet set"};s(l),t(l)};return h.jsxs("div",{className:"min-h-screen gradient-elegant-light dark:gradient-elegant-dark flex items-center justify-center p-6",children:[h.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[h.jsx("div",{className:"absolute -top-40 -right-40 w-96 h-96 bg-blue-200/10 dark:bg-blue-900/10 rounded-full mix-blend-multiply dark:mix-blend-screen filter blur-3xl opacity-60 animate-pulse"}),h.jsx("div",{className:"absolute -bottom-40 -left-40 w-96 h-96 bg-indigo-200/10 dark:bg-indigo-900/10 rounded-full mix-blend-multiply dark:mix-blend-screen filter blur-3xl opacity-60 animate-pulse",style:{animationDelay:"2s"}}),h.jsx("div",{className:"absolute top-40 left-1/2 w-96 h-96 bg-emerald-200/10 dark:bg-emerald-900/10 rounded-full mix-blend-multiply dark:mix-blend-screen filter blur-3xl opacity-60 animate-pulse",style:{animationDelay:"4s"}})]}),h.jsxs("div",{className:"relative z-10 w-full max-w-lg",children:[h.jsxs(Z.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-12",children:[h.jsx("div",{className:"flex items-center justify-center gap-4 mb-6",children:h.jsx("h1",{className:"text-5xl font-black bg-gradient-to-r from-slate-900 via-blue-900 to-indigo-900 dark:from-white dark:via-blue-100 dark:to-indigo-100 bg-clip-text text-transparent",children:"FITNESS TRACKER"})}),h.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 font-medium",children:"Your personal fitness companion"})]}),h.jsx(Z.div,{initial:{opacity:0,x:e?-20:20},animate:{opacity:1,x:0},transition:{duration:.3},children:e?h.jsx(Jz,{onSuccess:o,onSwitchToSignUp:()=>n(!1),isLoading:r}):h.jsx(Zz,{onSuccess:o,onSwitchToLogin:()=>n(!0),isLoading:r})},e?"login":"signup"),h.jsxs(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"mt-12 text-center",children:[h.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6 font-medium",children:"Track your progress, log workouts, and achieve your fitness goals"}),h.jsxs("div",{className:"flex justify-center space-x-8 text-sm text-gray-500 dark:text-gray-400",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-lg",children:"📊"}),h.jsx("span",{children:"Analytics"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-lg",children:"🏋️"}),h.jsx("span",{children:"Workouts"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-lg",children:"📈"}),h.jsx("span",{children:"Progress"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-lg",children:"🎯"}),h.jsx("span",{children:"Goals"})]})]})]})]})]})}function t7({children:t}){const{isAuthenticated:e,isLoading:n,login:r}=pn();return n?h.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),h.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading..."})]})}):e?h.jsx(h.Fragment,{children:t}):h.jsx(e7,{onAuthSuccess:r})}const n7="modulepreload",r7=function(t){return"/"+t},bE={},Xn=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=r7(l),l in bE)return;bE[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":n7,c||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),c)return new Promise((m,p)=>{f.addEventListener("load",m),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},SN=O.createContext(void 0);function i7({children:t}){const[e,n]=O.useState(()=>{if(typeof window>"u")return"light";const i=localStorage.getItem("theme"),s=document.documentElement,o=window.matchMedia("(prefers-color-scheme: dark)").matches,a=i==="dark"||i==="system"&&o;return s.classList.toggle("dark",a),i||"light"});O.useEffect(()=>{localStorage.setItem("theme",e);const i=document.documentElement,s=window.matchMedia("(prefers-color-scheme: dark)").matches,o=e==="dark"||e==="system"&&s;i.classList.toggle("dark",o)},[e]);const r=O.useMemo(()=>({theme:e,setTheme:n}),[e]);return h.jsx(SN.Provider,{value:r,children:t})}const s7=()=>{const t=O.useContext(SN);if(!t)throw new Error("useTheme must be used within ThemeProvider");return t};function o7(){const{theme:t,setTheme:e}=s7(),n=t==="dark"?"light":"dark",r=`Switch to ${n} theme`;return h.jsxs("button",{"aria-label":r,title:r,className:"w-full flex items-center justify-between px-3 py-2 rounded-md transition hover:bg-gray-100 dark:hover:bg-gray-800",onClick:()=>e(n),children:[h.jsxs("span",{className:"flex items-center gap-2",children:[t==="dark"?h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),"Switch theme"]}),h.jsx("span",{className:"text-xs text-muted-foreground capitalize",children:t})]})}const ow="users";async function ou(t){const e=nn(nt,ow,t),n=await iw(e);return n.exists()?n.data():null}async function IN(t){try{if(!t||!t.uid||typeof t.uid!="string"||t.uid.trim().length===0)throw new Error("Invalid user data: user ID is required");if(!t.email||typeof t.email!="string"||!t.email.includes("@"))throw new Error("Invalid user data: valid email is required");if(!t.name||typeof t.name!="string"||t.name.trim().length<2)throw new Error("Invalid user data: name must be at least 2 characters");const e=nn(nt,ow,t.uid);await To(e,t,{merge:!0})}catch(e){throw console.error("Error saving user to Firestore:",e),e.code==="permission-denied"?new Error("Permission denied. Please check your authentication."):e}}async function Tm(t,e){try{if(!t||typeof t!="string"||t.trim().length===0)throw new Error("Invalid user ID provided");if(!e||typeof e!="object"||Object.keys(e).length===0)throw new Error("No update data provided");if(e.email!==void 0&&(!e.email||typeof e.email!="string"||!e.email.includes("@")))throw new Error("Invalid email format");if(e.name!==void 0&&(!e.name||typeof e.name!="string"||e.name.trim().length<2))throw new Error("Name must be at least 2 characters long");if(e.age!==void 0&&(typeof e.age!="number"||e.age<0||e.age>150))throw new Error("Age must be a valid number between 0 and 150");if(e.weightKg!==void 0&&(typeof e.weightKg!="number"||e.weightKg<0||e.weightKg>1e3))throw new Error("Weight must be a valid number between 0 and 1000 kg");if(e.heightCm!==void 0&&(typeof e.heightCm!="number"||e.heightCm<0||e.heightCm>300))throw new Error("Height must be a valid number between 0 and 300 cm");const n=nn(nt,ow,t),r={...e,uid:t};await To(n,r,{merge:!0})}catch(n){throw console.error("Error updating user profile:",n),n.code==="permission-denied"?new Error("Permission denied. Please check your authentication."):n.code==="unavailable"?new Error("Service temporarily unavailable. Please try again later."):n}}async function CN(t,e,n){const r={uid:t,name:n||e.split("@")[0]||"User",email:e,age:0,weightKg:0,heightCm:0,fitnessGoal:"",theme:"system",units:"metric",language:"en",privacy:"private",notifications:{workoutReminders:!0,goalAchievements:!0,weeklyProgress:!1},dataSharing:!0,activityTracking:!0};return await IN(r),r}const a7=Object.freeze(Object.defineProperty({__proto__:null,createInitialUserProfile:CN,getUserFromFirestore:ou,saveUserToFirestore:IN,updateUserProfile:Tm},Symbol.toStringTag,{value:"Module"})),PN=O.createContext(void 0);function l7({children:t}){const{user:e}=pn(),n=$n(),{data:r}=Qt({queryKey:["user","profile",e==null?void 0:e.uid],queryFn:()=>ou(e.uid),enabled:!!(e!=null&&e.uid)}),i=r||(e?{...e,units:"metric",language:"en",privacy:"private",notifications:{workoutReminders:!0,goalAchievements:!0,weeklyProgress:!1},dataSharing:!0,activityTracking:!0}:null),s=_n({mutationFn:N=>Tm(e.uid,N),onSuccess:()=>{n.invalidateQueries({queryKey:["user","profile",e==null?void 0:e.uid]})}}),[o,a]=O.useState(()=>typeof window>"u"?"light":localStorage.getItem("theme")||(i==null?void 0:i.theme)||"system"),l=N=>{a(N),typeof window<"u"&&localStorage.setItem("theme",N);const T=document.documentElement,E=window.matchMedia("(prefers-color-scheme: dark)").matches,S=N==="dark"||N==="system"&&E;T.classList.toggle("dark",S),e!=null&&e.uid&&(s.mutate({theme:N}),Xn(async()=>{const{logUserActivity:C}=await Promise.resolve().then(()=>dr);return{logUserActivity:C}},void 0).then(({logUserActivity:C})=>{C(e.uid,{type:"settings_changed",metadata:{setting:"theme",value:N}}).catch(M=>console.error("Error logging theme activity:",M))}))},c=(i==null?void 0:i.units)||"metric",u=N=>{e!=null&&e.uid&&(s.mutate({units:N}),Xn(async()=>{const{logUserActivity:T}=await Promise.resolve().then(()=>dr);return{logUserActivity:T}},void 0).then(({logUserActivity:T})=>{T(e.uid,{type:"settings_changed",metadata:{setting:"units",value:N}}).catch(E=>console.error("Error logging units activity:",E))}))},f=(i==null?void 0:i.language)||"en",m=N=>{e!=null&&e.uid&&(s.mutate({language:N}),Xn(async()=>{const{logUserActivity:T}=await Promise.resolve().then(()=>dr);return{logUserActivity:T}},void 0).then(({logUserActivity:T})=>{T(e.uid,{type:"settings_changed",metadata:{setting:"language",value:N}}).catch(E=>console.error("Error logging language activity:",E))}))},p=(i==null?void 0:i.privacy)||"private",y=N=>{e!=null&&e.uid&&(s.mutate({privacy:N}),Xn(async()=>{const{logUserActivity:T}=await Promise.resolve().then(()=>dr);return{logUserActivity:T}},void 0).then(({logUserActivity:T})=>{T(e.uid,{type:"settings_changed",metadata:{setting:"privacy",value:N}}).catch(E=>console.error("Error logging privacy activity:",E))}))},x=(i==null?void 0:i.notifications)||{workoutReminders:!0,goalAchievements:!0,weeklyProgress:!1},k=N=>{e!=null&&e.uid&&(s.mutate({notifications:{...x,...N}}),Xn(async()=>{const{logUserActivity:T}=await Promise.resolve().then(()=>dr);return{logUserActivity:T}},void 0).then(({logUserActivity:T})=>{T(e.uid,{type:"settings_changed",metadata:{setting:"notifications",value:N}}).catch(E=>console.error("Error logging notifications activity:",E))}))},v=(i==null?void 0:i.dataSharing)??!0,w=N=>{e!=null&&e.uid&&(s.mutate({dataSharing:N}),Xn(async()=>{const{logUserActivity:T}=await Promise.resolve().then(()=>dr);return{logUserActivity:T}},void 0).then(({logUserActivity:T})=>{T(e.uid,{type:"settings_changed",metadata:{setting:"dataSharing",value:N}}).catch(E=>console.error("Error logging dataSharing activity:",E))}))},_=(i==null?void 0:i.activityTracking)??!0,P=N=>{e!=null&&e.uid&&(s.mutate({activityTracking:N}),Xn(async()=>{const{logUserActivity:T}=await Promise.resolve().then(()=>dr);return{logUserActivity:T}},void 0).then(({logUserActivity:T})=>{T(e.uid,{type:"settings_changed",metadata:{setting:"activityTracking",value:N}}).catch(E=>console.error("Error logging activityTracking activity:",E))}))};O.useEffect(()=>{const N=document.documentElement,T=window.matchMedia("(prefers-color-scheme: dark)").matches,E=o==="dark"||o==="system"&&T;N.classList.toggle("dark",E)},[o]);const A={theme:o,setTheme:l,units:c,setUnits:u,language:f,setLanguage:m,privacy:p,setPrivacy:y,notifications:x,setNotifications:k,dataSharing:v,setDataSharing:w,activityTracking:_,setActivityTracking:P,isUpdating:s.isPending};return h.jsx(PN.Provider,{value:A,children:t})}function aw(){const t=O.useContext(PN);if(!t)throw new Error("useSettings must be used within a SettingsProvider");return t}const AN=(t,e)=>e==="imperial"?Math.round(t*2.20462*10)/10:t,c7=(t,e)=>{if(e==="imperial"){const n=t/2.54,r=Math.floor(n/12),i=Math.round(n%12);return{value:r,unit:`${r}'${i}"`}}return{value:t,unit:"cm"}},lw=t=>t==="imperial"?"lbs":"kg",u7=(t,e)=>{const n=AN(t,e),r=lw(e);return`${n} ${r}`},d7=(t,e)=>{if(e==="imperial"){const{unit:n}=c7(t,e);return n}return`${t} cm`},h7=(t,e)=>t.map(n=>({...n,weight:AN(n.weight,e)})),gy={async getHistory(t){try{if(!t||typeof t!="string"||t.trim().length===0)throw new Error("Invalid user ID provided");const e=yo(nt,"users",t,"weight"),n=Zx(e,rw("date","desc"));return(await km(n)).docs.map(i=>{const s=i.data();return{id:i.id,date:s.date||new Date().toISOString().split("T")[0],weight:typeof s.weight=="number"?s.weight:0}})}catch(e){throw console.error("Error getting weight history:",e),e.code==="permission-denied"?new Error("Permission denied. Please check your authentication."):new Error("Failed to fetch weight history. Please try again.")}},async addEntry(t,e){try{if(!t||typeof t!="string"||t.trim().length===0)throw new Error("Invalid user ID provided");if(typeof e!="number"||isNaN(e))throw new Error("Weight must be a valid number");if(e<=0||e>1e3)throw new Error("Weight must be between 0.1 and 1000 kg");const n=yo(nt,"users",t,"weight"),r=new Date().toISOString().split("T")[0];await sw(n,{date:r,weight:Math.round(e*10)/10});const i=nn(nt,"users",t);await _N(i,{weightKg:Math.round(e*10)/10});try{const{logUserActivity:s}=await Xn(async()=>{const{logUserActivity:o}=await Promise.resolve().then(()=>dr);return{logUserActivity:o}},void 0);await s(t,{type:"weight_logged",metadata:{weight:Math.round(e*10)/10,date:r}})}catch(s){console.error("Error logging weight activity:",s)}return this.getHistory(t)}catch(n){throw console.error("Error adding weight entry:",n),n.code==="permission-denied"?new Error("Permission denied. Please check your authentication."):n.message?n:new Error("Failed to save weight entry. Please try again.")}}},zu={async getLogs(t){try{if(!t||typeof t!="string"||t.trim().length===0)throw new Error("Invalid user ID provided");const e=yo(nt,"users",t,"workouts"),n=Zx(e,rw("date","desc"));return(await km(n)).docs.map(i=>{const s=i.data();return{id:i.id,date:s.date||new Date().toISOString().split("T")[0],exerciseId:s.exerciseId||"",durationMinutes:typeof s.durationMinutes=="number"?s.durationMinutes:0,intensity:s.intensity||"medium",caloriesBurned:typeof s.caloriesBurned=="number"?s.caloriesBurned:0,notes:s.notes||void 0}})}catch(e){throw console.error("Error getting workout logs:",e),e.code==="permission-denied"?new Error("Permission denied. Please check your authentication."):new Error("Failed to fetch workout logs. Please try again.")}},async logWorkout(t,e){try{if(!t||typeof t!="string"||t.trim().length===0)throw new Error("Invalid user ID provided");if(!e||typeof e!="object")throw new Error("Invalid workout data provided");if(!e.exerciseId||typeof e.exerciseId!="string"||e.exerciseId.trim().length===0)throw new Error("Exercise ID is required");if(typeof e.durationMinutes!="number"||isNaN(e.durationMinutes)||e.durationMinutes<0)throw new Error("Duration must be a valid positive number");if(typeof e.durationMinutes=="number"&&e.durationMinutes>1440)throw new Error("Duration cannot exceed 24 hours (1440 minutes)");if(!["low","medium","high"].includes(e.intensity))throw new Error("Intensity must be low, medium, or high");if(typeof e.caloriesBurned!="number"||isNaN(e.caloriesBurned)||e.caloriesBurned<0)throw new Error("Calories burned must be a valid positive number");if(!e.date||typeof e.date!="string"||e.date.trim().length===0)throw new Error("Workout date is required");const n=yo(nt,"users",t,"workouts");return await sw(n,{...e,durationMinutes:Math.round(e.durationMinutes*10)/10,caloriesBurned:Math.round(e.caloriesBurned)}),this.getLogs(t)}catch(n){throw console.error("Error logging workout:",n),n.code==="permission-denied"?new Error("Permission denied. Please check your authentication."):n.message?n:new Error("Failed to save workout. Please try again.")}}},ts=[{category:"Cardio",exercises:[{id:"ex1",name:"Overhead Reach",imageUrl:"https://media.self.com/photos/61157d860fba8918ef07da15/master/w_1600%2Cc_limit/SE_SEN_07_032_Cardio_GIF-01%2520Squat%2520to%2520Overhead%2520Reach-min.gif"},{id:"ex2",name:"Jumping Jacks",imageUrl:"https://media.self.com/photos/61157e25553830ba14166ef2/master/w_1600%2Cc_limit/SE_SEN_07_032_Cardio_GIF-02%2520Modified%2520Jumping%2520Jacks-min.gif"},{id:"ex3",name:"Ice Skaters",imageUrl:"https://media.self.com/photos/611581f6c66629131d52d34f/master/w_1600%2Cc_limit/SE_SEN_07_032_Cardio_GIF-13%2520Ice%2520Skaters-min.gif"},{id:"ex4",name:"Toe Taps With Reach",imageUrl:"https://media.self.com/photos/61157ed6e1b6f66010ac3706/master/w_1600%2Cc_limit/SE_SEN_07_032_Cardio_GIF-04%2520Toe%2520Taps%2520With%2520Reach-min.gif"}]},{category:"Arms",exercises:[{id:"ex5",name:"Tricep Box Dips",imageUrl:"https://media.self.com/photos/5c4a2f33203e3933090ec27b/master/w_1600%2Cc_limit/tricep-box-dips-Amanda_093.gif"},{id:"ex6",name:"Elevated Push Ups",imageUrl:"https://media.self.com/photos/5c4a2e2601584d32459c06ce/master/w_1600%2Cc_limit/elevated-push-up-Amanda_091.gif"},{id:"ex7",name:"Diamond Push Ups",imageUrl:"https://media.self.com/photos/5c41fa45a9cd1e7eb7fd0f2b/master/w_1600%2Cc_limit/diamond-push-up-Amanda_079.gif"},{id:"ex8",name:"Plank With T Rotation",imageUrl:"https://media.self.com/photos/5c4b2809a9cd1e7eb7fd0f4d/master/w_1600%2Cc_limit/plank-with-t-rotation-Amanda_041.gif"}]},{category:"Legs",exercises:[{id:"ex9",name:"Split Squats",imageUrl:"https://barbend.com/wp-content/uploads/2023/04/split-squat-barbend-movement-gif-masters.gif"},{id:"ex10",name:"Smith Machine Calf Raises",imageUrl:"https://barbend.com/wp-content/uploads/2024/04/smith-machine-calf-raise-barbend-movement-gif-masters-1.gif"},{id:"ex11",name:"Nordic Hamstring Curls",imageUrl:"https://barbend.com/wp-content/uploads/2023/03/nordic-hamstring-curl-barbend-movement-gif-masters.gif"},{id:"ex12",name:"Goblet Squats",imageUrl:"https://barbend.com/wp-content/uploads/2023/12/goblet-squat-barbend-movement-gif-masters.gif"}]},{category:"Abs",exercises:[{id:"ex13",name:"Crunches",imageUrl:"https://i.imgur.com/UJAnRhJ.gif"},{id:"ex14",name:"Russian Twist",imageUrl:"https://i.imgur.com/PG6vgpl.gif"},{id:"ex15",name:"Side Jack-Knife",imageUrl:"https://i.imgur.com/HjyLvkX.gif"},{id:"ex16",name:"Jack-knife ",imageUrl:"https://i.imgur.com/CBH7Ejv.gif"}]},{category:"Stretches",exercises:[{id:"ex17",name:"Yoga Flow",imageUrl:"https://assets.vogue.com/photos/5891df45fb0604bf1f5c6056/master/w_1600,c_limit/karlie-stretch-1.gif"},{id:"ex18",name:"Hamstring Stretch",imageUrl:"https://assets.vogue.com/photos/5891df4a9c1609bf7a72e2eb/master/w_1600,c_limit/karlie-stretch-4.gif"},{id:"ex19",name:"Shoulder Stretch",imageUrl:"https://assets.vogue.com/photos/5891df4b12a7b1df212c840d/master/w_1600,c_limit/karlie-stretch-5.gif"},{id:"ex20",name:"Neck Stretch",imageUrl:"https://assets.vogue.com/photos/5891df48fb0604bf1f5c6058/master/w_1600,c_limit/karlie-stretch-3.gif"}]}],ks=({children:t,active:e,onClick:n,icon:r})=>h.jsx(Z.li,{whileHover:{x:4},transition:{duration:.2},children:h.jsxs("button",{className:`w-full text-left px-4 py-3.5 rounded-2xl transition-all duration-300 font-medium flex items-center space-x-3 group ${e?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg shadow-blue-500/25":"hover:bg-gray-50 dark:hover:bg-gray-800/50 text-gray-700 dark:text-gray-300 hover:shadow-md hover:text-blue-600 dark:hover:text-blue-400"}`,onClick:i=>{i.preventDefault(),sessionStorage.setItem("sidebar_nav","true"),n&&n()},children:[h.jsx("div",{className:`transition-colors duration-200 ${e?"text-white":"text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400"}`,children:r}),h.jsx("span",{children:t})]})});function f7({profile:t,onNav:e}){var m;const{logout:n,user:r}=pn(),i=aw(),{data:s=[]}=Qt({queryKey:["workouts","logs",r==null?void 0:r.uid],queryFn:()=>zu.getLogs(r.uid),enabled:!!(r!=null&&r.uid),select:p=>p.slice(0,1)}),o=s[0]||null,a=p=>{for(const y of ts){const x=y.exercises.find(k=>k.id===p);if(x)return x.name}return"Unknown Exercise"},l=()=>{if(t!=null&&t.weightKg&&(t==null?void 0:t.weightKg)>0&&(t!=null&&t.heightCm)&&(t==null?void 0:t.heightCm)>0){const p=t.heightCm/100;return(t.weightKg/(p*p)).toFixed(1)}return null},c=p=>p<18.5?{category:"Underweight",color:"text-blue-600 dark:text-blue-400"}:p<25?{category:"Normal",color:"text-green-600 dark:text-green-400"}:p<30?{category:"Overweight",color:"text-yellow-600 dark:text-yellow-400"}:{category:"Obese",color:"text-red-600 dark:text-red-400"},u=l(),f=u?c(Number(u)):null;return h.jsx("aside",{className:"w-80 shrink-0 pr-6",children:h.jsxs("div",{className:"sticky top-8 space-y-6",children:[h.jsxs(Z.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},onClick:()=>e==null?void 0:e("profile"),className:"w-full bg-white/90 dark:bg-gray-900/90 backdrop-blur-xl rounded-3xl p-6 shadow-xl hover:shadow-2xl transition-all duration-300 relative group border border-gray-200/50 dark:border-gray-700/50",children:[h.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[h.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-500 via-indigo-500 to-purple-600 flex items-center justify-center text-2xl font-bold text-white shadow-lg",children:((m=t==null?void 0:t.name)==null?void 0:m.charAt(0))??"U"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:(t==null?void 0:t.name)??"User"}),h.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 font-medium",children:t!=null&&t.age&&t.age>0?`${t.age} years old`:"Age not set"})]})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 rounded-2xl p-4 text-center border border-blue-200/50 dark:border-blue-700/50",children:[h.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400 font-semibold uppercase tracking-wide",children:"Height"}),h.jsx("div",{className:"font-bold text-blue-700 dark:text-blue-300 mt-1",children:t!=null&&t.heightCm&&t.heightCm>0?d7(t.heightCm,i.units):"Not set"})]}),h.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-800/30 rounded-2xl p-4 text-center border border-green-200/50 dark:border-green-700/50",children:[h.jsx("div",{className:"text-xs text-green-600 dark:text-green-400 font-semibold uppercase tracking-wide",children:"Weight"}),h.jsx("div",{className:"font-bold text-green-700 dark:text-green-300 mt-1",children:t!=null&&t.weightKg&&t.weightKg>0?u7(t.weightKg,i.units):"Not set"})]})]}),u&&f&&h.jsxs("div",{className:"mt-4 bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/30 dark:to-purple-800/30 rounded-2xl p-4 border border-purple-200/50 dark:border-purple-700/50",children:[h.jsx("div",{className:"text-xs text-purple-600 dark:text-purple-400 font-semibold uppercase tracking-wide text-center",children:"BMI"}),h.jsxs("div",{className:"flex items-center justify-between mt-2",children:[h.jsx("div",{className:"font-bold text-purple-700 dark:text-purple-300 text-lg",children:u}),h.jsx("div",{className:`text-xs font-semibold ${f.color}`,children:f.category})]})]}),(t==null?void 0:t.fitnessGoal)&&h.jsxs("div",{className:"mt-4 bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/30 dark:to-orange-800/30 rounded-2xl p-4 border border-orange-200/50 dark:border-orange-700/50",children:[h.jsx("div",{className:"text-xs text-orange-600 dark:text-orange-400 font-semibold uppercase tracking-wide",children:"Fitness Goal"}),h.jsx("div",{className:"text-sm text-orange-700 dark:text-orange-300 mt-2 line-clamp-2",children:t.fitnessGoal})]}),h.jsx("div",{className:"absolute inset-0 rounded-3xl border-2 border-blue-500/0 group-hover:border-blue-500/20 transition-all duration-300 pointer-events-none"})]}),h.jsx(Z.nav,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"bg-white/90 dark:bg-gray-900/90 backdrop-blur-xl rounded-3xl p-6 shadow-xl border border-gray-200/50 dark:border-gray-700/50",children:h.jsxs("ul",{className:"space-y-2",children:[h.jsx(ks,{onClick:()=>e==null?void 0:e("dashboard"),icon:h.jsx(b6,{className:"w-5 h-5"}),children:"Home"}),h.jsx(ks,{onClick:()=>e==null?void 0:e("workouts"),icon:h.jsx(Yi,{className:"w-5 h-5"}),children:"Workout Logs"}),h.jsx(ks,{onClick:()=>e==null?void 0:e("goals"),icon:h.jsx(ax,{className:"w-5 h-5"}),children:"My Goals"}),h.jsx(ks,{onClick:()=>e==null?void 0:e("profile"),icon:h.jsx(im,{className:"w-5 h-5"}),children:"Profile Settings"}),h.jsx(ks,{onClick:()=>e==null?void 0:e("schedule"),icon:h.jsx(sf,{className:"w-5 h-5"}),children:"Schedule"}),h.jsx(ks,{onClick:()=>e==null?void 0:e("achievements"),icon:h.jsx(uf,{className:"w-5 h-5"}),children:"Achievements"}),h.jsx(ks,{onClick:()=>e==null?void 0:e("settings"),icon:h.jsx(rP,{className:"w-5 h-5"}),children:"Settings"}),h.jsx("li",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:h.jsx(o7,{})}),h.jsx("li",{className:"pt-2",children:h.jsxs(Z.button,{whileHover:{x:4},whileTap:{scale:.98},onClick:n,className:"w-full text-left px-4 py-3.5 rounded-2xl transition-all duration-300 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 flex items-center space-x-3 font-medium hover:shadow-md group",children:[h.jsx(E6,{className:"w-5 h-5 transition-colors duration-200 group-hover:text-red-700 dark:group-hover:text-red-300"}),h.jsx("span",{children:"Sign Out"})]})})]})}),h.jsxs(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"bg-gradient-to-br from-emerald-50 via-teal-50 to-cyan-50 dark:from-emerald-900/20 dark:via-teal-900/20 dark:to-cyan-900/20 rounded-3xl p-6 shadow-xl border border-emerald-200/50 dark:border-emerald-700/50",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[h.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-xl flex items-center justify-center",children:h.jsx(Yi,{className:"w-5 h-5 text-white"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Latest Workout"}),h.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Your most recent session"})]})]}),o?h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"bg-white/60 dark:bg-gray-800/60 backdrop-blur-sm rounded-xl p-4 border border-emerald-200/30 dark:border-emerald-700/30",children:[h.jsx("div",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:a(o.exerciseId)}),h.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[h.jsxs("div",{className:"flex items-center gap-1.5 text-gray-600 dark:text-gray-400",children:[h.jsx(Yc,{className:"w-4 h-4"}),h.jsxs("span",{children:[o.durationMinutes.toFixed(1)," min"]})]}),h.jsxs("div",{className:"flex items-center gap-1.5 text-gray-600 dark:text-gray-400",children:[h.jsx(lf,{className:"w-4 h-4"}),h.jsxs("span",{children:[o.caloriesBurned," kcal"]})]})]}),h.jsx("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-500",children:new Date(o.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]}),h.jsx("button",{onClick:p=>{p.preventDefault(),sessionStorage.setItem("sidebar_nav","true"),e==null||e("workouts")},className:"w-full px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white font-medium rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl text-sm",children:"View All Workouts"})]}):h.jsxs("div",{className:"text-center py-4",children:[h.jsx(Yi,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),h.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"No workouts yet"}),h.jsx("button",{onClick:p=>{p.preventDefault(),e==null||e("dashboard")},className:"px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white font-medium rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl text-sm",children:"Start Your First Workout"})]})]})]})})}const Sm="goals";async function cw(t){try{if(!t||typeof t!="string"||t.trim().length===0)throw new Error("Invalid user ID provided");const e=yo(nt,"users",t,Sm),n=Zx(e,rw("createdAt","desc"));return(await km(n)).docs.map(i=>{const s=i.data();return{id:i.id,title:s.title||"",target:typeof s.target=="number"?s.target:0,current:typeof s.current=="number"?s.current:0,unit:s.unit||"",category:s.category||"weight",deadline:s.deadline||new Date().toISOString().split("T")[0],createdAt:s.createdAt||new Date().toISOString()}})}catch(e){throw console.error("Error getting user goals:",e),e.code==="permission-denied"?new Error("Permission denied. Please check your authentication."):new Error("Failed to fetch goals. Please try again.")}}async function m7(t,e){try{if(!t||typeof t!="string"||t.trim().length===0)throw new Error("Invalid user ID provided");if(!e||typeof e!="object")throw new Error("Invalid goal data provided");if(!e.title||typeof e.title!="string"||e.title.trim().length===0)throw new Error("Goal title is required");if(e.title.trim().length>200)throw new Error("Goal title must be less than 200 characters");if(typeof e.target!="number"||isNaN(e.target)||e.target<=0)throw new Error("Goal target must be a positive number");if(typeof e.current!="number"||isNaN(e.current)||e.current<0)throw new Error("Goal current value must be a non-negative number");if(!e.unit||typeof e.unit!="string"||e.unit.trim().length===0)throw new Error("Goal unit is required");if(!e.deadline||typeof e.deadline!="string"||e.deadline.trim().length===0)throw new Error("Goal deadline is required");const n=yo(nt,"users",t,Sm),r={...e,title:e.title.trim(),unit:e.unit.trim(),createdAt:new Date().toISOString()};return{id:(await sw(n,r)).id,...r}}catch(n){throw console.error("Error creating goal:",n),n.code==="permission-denied"?new Error("Permission denied. Please check your authentication."):n.message?n:new Error("Failed to create goal. Please try again.")}}async function p7(t,e,n){try{if(!t||typeof t!="string"||t.trim().length===0)throw new Error("Invalid user ID provided");if(!e||typeof e!="string"||e.trim().length===0)throw new Error("Invalid goal ID provided");if(!n||typeof n!="object"||Object.keys(n).length===0)throw new Error("No update data provided");if(n.title!==void 0){if(!n.title||typeof n.title!="string"||n.title.trim().length===0)throw new Error("Goal title cannot be empty");if(n.title.trim().length>200)throw new Error("Goal title must be less than 200 characters")}if(n.target!==void 0&&(typeof n.target!="number"||isNaN(n.target)||n.target<=0))throw new Error("Goal target must be a positive number");if(n.current!==void 0&&(typeof n.current!="number"||isNaN(n.current)||n.current<0))throw new Error("Goal current value must be a non-negative number");const r=nn(nt,"users",t,Sm,e);await _N(r,n)}catch(r){throw console.error("Error updating goal:",r),r.code==="permission-denied"?new Error("Permission denied. Please check your authentication."):r.code==="not-found"?new Error("Goal not found."):r.message?r:new Error("Failed to update goal. Please try again.")}}async function g7(t,e){try{if(!t||typeof t!="string"||t.trim().length===0)throw new Error("Invalid user ID provided");if(!e||typeof e!="string"||e.trim().length===0)throw new Error("Invalid goal ID provided");const n=nn(nt,"users",t,Sm,e);await kN(n)}catch(n){throw console.error("Error deleting goal:",n),n.code==="permission-denied"?new Error("Permission denied. Please check your authentication."):n.code==="not-found"?new Error("Goal not found."):new Error("Failed to delete goal. Please try again.")}}const Im="schedules";async function Cm(t){try{if(!t||typeof t!="string"||t.trim().length===0)throw new Error("Invalid user ID provided");const e=nn(nt,"users",t,Im,"weekly"),n=await iw(e);if(!n.exists())return null;const r=n.data();if(!r||typeof r!="object")throw new Error("Invalid schedule data format");return{id:n.id,monday:Array.isArray(r.monday)?r.monday:[],tuesday:Array.isArray(r.tuesday)?r.tuesday:[],wednesday:Array.isArray(r.wednesday)?r.wednesday:[],thursday:Array.isArray(r.thursday)?r.thursday:[],friday:Array.isArray(r.friday)?r.friday:[],saturday:Array.isArray(r.saturday)?r.saturday:[],sunday:Array.isArray(r.sunday)?r.sunday:[],createdAt:r.createdAt||new Date().toISOString()}}catch(e){throw console.error("Error getting user schedule:",e),e.code==="permission-denied"?new Error("Permission denied. Please check your authentication."):new Error("Failed to fetch schedule. Please try again.")}}async function y7(t,e){try{if(!t||typeof t!="string"||t.trim().length===0)throw new Error("Invalid user ID provided");if(!e||typeof e!="object")throw new Error("Invalid schedule data provided");const n=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];for(const s of n){const o=e[s];if(o&&!Array.isArray(o))throw new Error(`Invalid ${s} schedule: must be an array`);if(Array.isArray(o))for(const a of o){if(!a||typeof a!="object")throw new Error(`Invalid schedule item in ${s}`);if(!a.time||typeof a.time!="string"||a.time.trim().length===0)throw new Error(`Schedule item in ${s} must have a time`);if(!a.activity||typeof a.activity!="string"||a.activity.trim().length===0)throw new Error(`Schedule item in ${s} must have an activity`);if(a.activity.trim().length>200)throw new Error(`Activity name in ${s} must be less than 200 characters`)}}const r=nn(nt,"users",t,Im,"weekly"),i={...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return await To(r,i),{id:"weekly",...i}}catch(n){throw console.error("Error creating user schedule:",n),n.code==="permission-denied"?new Error("Permission denied. Please check your authentication."):n.message?n:new Error("Failed to create schedule. Please try again.")}}async function NN(t,e){try{if(!t||typeof t!="string"||t.trim().length===0)throw new Error("Invalid user ID provided");if(!e||typeof e!="object"||Object.keys(e).length===0)throw new Error("No schedule data provided for update");const n=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];for(const i of n)if(i in e){const s=e[i];if(s&&!Array.isArray(s))throw new Error(`Invalid ${i} schedule: must be an array`);if(Array.isArray(s))for(const o of s){if(!o||typeof o!="object")throw new Error(`Invalid schedule item in ${i}`);if(!o.time||typeof o.time!="string"||o.time.trim().length===0)throw new Error(`Schedule item in ${i} must have a time`);if(!o.activity||typeof o.activity!="string"||o.activity.trim().length===0)throw new Error(`Schedule item in ${i} must have an activity`);if(o.activity.trim().length>200)throw new Error(`Activity name in ${i} must be less than 200 characters`)}}const r=nn(nt,"users",t,Im,"weekly");await To(r,{...e,updatedAt:new Date().toISOString()},{merge:!0});try{const{logUserActivity:i}=await Xn(async()=>{const{logUserActivity:s}=await Promise.resolve().then(()=>dr);return{logUserActivity:s}},void 0);await i(t,{type:"schedule_updated",metadata:{daysUpdated:Object.keys(e).length,scheduleData:Object.keys(e)}})}catch(i){console.error("Error logging schedule activity:",i)}}catch(n){throw console.error("Error updating user schedule:",n),n.code==="permission-denied"?new Error("Permission denied. Please check your authentication."):n.code==="not-found"?new Error("Schedule not found."):n.message?n:new Error("Failed to update schedule. Please try again.")}}async function v7(t){const e=nn(nt,"users",t,Im,"weekly");await kN(e)}async function RN(t){try{const e=nn(nt,"users",t,"preferences","main"),n=await iw(e);return n.exists()?n.data():null}catch(e){return console.error("Error getting user preferences:",e),null}}async function MN(t,e){try{if(!t||typeof t!="string"||t.trim().length===0)throw new Error("Invalid user ID provided");const n={};Object.entries(e).forEach(([i,s])=>{s!==void 0&&(n[i]=s)}),n.lastVisitedAt=new Date().toISOString();const r=nn(nt,"users",t,"preferences","main");await To(r,n,{merge:!0})}catch(n){throw console.error("Error saving user preferences:",n),n}}async function xc(t,e){try{const n=nn(nt,"users",t,"activity",`${Date.now()}_${e.type}`);await To(n,{...e,timestamp:new Date().toISOString()})}catch(n){console.error("Error logging user activity:",n)}}const dr=Object.freeze(Object.defineProperty({__proto__:null,getUserPreferences:RN,logUserActivity:xc,saveUserPreferences:MN},Symbol.toStringTag,{value:"Module"}));function x7({onBack:t}){const{user:e}=pn(),n=$n(),[r,i]=O.useState(!1),[s,o]=O.useState(null),[a,l]=O.useState({title:"",target:0,current:0,unit:"",category:"weight",deadline:""}),{data:c=[],isLoading:u}=Qt({queryKey:["goals",e==null?void 0:e.uid],queryFn:()=>cw(e.uid),enabled:!!(e!=null&&e.uid)}),f=_n({mutationFn:_=>m7(e.uid,_),onSuccess:_=>{n.invalidateQueries({queryKey:["goals",e==null?void 0:e.uid]}),e!=null&&e.uid&&xc(e.uid,{type:"goal_created",metadata:{goalId:_.id,title:_.title,target:_.target}}),k()}}),m=_n({mutationFn:({goalId:_,updates:P})=>p7(e.uid,_,P),onSuccess:(_,P)=>{n.invalidateQueries({queryKey:["goals",e==null?void 0:e.uid]}),e!=null&&e.uid&&xc(e.uid,{type:"goal_created",metadata:{goalId:P.goalId,...P.updates}}),k()}}),p=_n({mutationFn:_=>g7(e.uid,_),onSuccess:(_,P)=>{n.invalidateQueries({queryKey:["goals",e==null?void 0:e.uid]}),e!=null&&e.uid&&xc(e.uid,{type:"goal_created",metadata:{goalId:P,action:"deleted"}})}}),y=()=>{l({title:"",target:0,current:0,unit:"",category:"weight",deadline:""}),o(null),i(!0)},x=_=>{l({title:_.title,target:_.target,current:_.current,unit:_.unit,category:"weight",deadline:_.deadline}),o(_),i(!0)},k=()=>{i(!1),o(null),l({title:"",target:0,current:0,unit:"",category:"weight",deadline:""})},v=_=>{_.preventDefault(),s?m.mutate({goalId:s.id,updates:a}):f.mutate(a)},w=_=>{confirm("Are you sure you want to delete this goal?")&&p.mutate(_)};return u?h.jsx("div",{className:"flex items-center justify-center py-12",children:h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between mb-8",children:[h.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"My weight goals"}),h.jsx("button",{className:"px-6 py-3 rounded-xl bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-medium transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",onClick:y,children:"+ Add Goal"})]}),c.length===0?h.jsx("div",{className:"text-center py-12",children:h.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg",children:'No goals yet. Click "Add Goal" to create your first goal!'})}):h.jsx("div",{className:"space-y-6",children:c.map(_=>{const P=Math.min(100,Math.round(_.current/_.target*100)),A=Math.ceil((new Date(_.deadline).getTime()-new Date().getTime())/(1e3*60*60*24));return h.jsxs("div",{className:"p-6 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 dark:border-gray-700/50 space-y-4 hover:shadow-2xl transition-all duration-300",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("div",{children:h.jsx("h2",{className:"font-bold text-xl text-gray-900 dark:text-white",children:_.title})}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{className:"p-2 rounded-xl bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-600 dark:text-gray-400 hover:text-blue-500 dark:hover:text-blue-300 transition-all duration-200",title:"Edit Goal",onClick:()=>x(_),children:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M15.232 5.232l3.536 3.536M9 13l6.586-6.586a2 2 0 112.828 2.828L11.828 15.828a2 2 0 01-2.828 0L9 13z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),h.jsx("button",{className:"p-2 rounded-xl bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-600 dark:text-gray-400 hover:text-red-500 dark:hover:text-red-300 transition-all duration-200",title:"Delete Goal",onClick:()=>w(_.id),children:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[_.current,_.unit]}),h.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["of ",_.target,_.unit]}),h.jsxs("div",{className:"ml-auto text-lg font-semibold text-blue-600 dark:text-blue-400",children:[P,"%"]})]}),h.jsx("div",{className:"relative w-full h-4 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:h.jsx("div",{className:"absolute left-0 top-0 bottom-0 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full transition-all duration-500",style:{width:`${P}%`}})}),h.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 font-medium",children:A>0?`${A} days remaining`:"Deadline passed"})]},_.id)})}),r&&h.jsxs("div",{className:"fixed inset-0 z-50 flex items-start justify-center pt-8 px-4 pb-4",children:[h.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:k}),h.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-2xl w-full max-w-md max-h-[calc(100vh-4rem)] overflow-y-auto border border-white/20 dark:border-gray-700/50 mt-4",children:[h.jsx("h2",{className:"text-2xl font-bold mb-6 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:s?"Edit Goal":"Add Goal"}),h.jsxs("form",{onSubmit:v,className:"space-y-4",children:[h.jsx("input",{className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Goal Title",value:a.title,onChange:_=>l({...a,title:_.target.value}),required:!0}),h.jsx("input",{className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Target",type:"number",value:a.target||"",onChange:_=>l({...a,target:Number(_.target.value)}),required:!0}),h.jsx("input",{className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Current",type:"number",value:a.current||"",onChange:_=>l({...a,current:Number(_.target.value)}),required:!0}),h.jsx("input",{className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Unit",value:a.unit,onChange:_=>l({...a,unit:_.target.value}),required:!0}),h.jsx("input",{className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Deadline",type:"date",value:a.deadline,onChange:_=>l({...a,deadline:_.target.value}),required:!0}),h.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[h.jsx("button",{type:"button",className:"px-6 py-3 rounded-xl bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 font-medium hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",onClick:k,children:"Cancel"}),h.jsx("button",{type:"submit",className:"px-6 py-3 rounded-xl bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-medium transition-all duration-200 shadow-lg hover:shadow-xl",disabled:f.isPending||m.isPending,children:f.isPending||m.isPending?"Saving...":"Save"})]})]})]})]})]})}function w7({profile:t,onUpdateProfile:e,isUpdating:n}){var y;const[r,i]=O.useState({age:t.age||0,weightKg:t.weightKg||0,heightCm:t.heightCm||0,fitnessGoal:t.fitnessGoal||""});O.useEffect(()=>{i({age:t.age||0,weightKg:t.weightKg||0,heightCm:t.heightCm||0,fitnessGoal:t.fitnessGoal||""})},[t]);const[s,o]=O.useState({}),a=()=>{const x={};(r.age<1||r.age>150)&&(x.age="Please enter a valid age between 1 and 150"),(r.weightKg<1||r.weightKg>500)&&(x.weightKg="Please enter a valid weight between 1 and 500 kg"),(r.heightCm<1||r.heightCm>300)&&(x.heightCm="Please enter a valid height between 1 and 300 cm"),r.fitnessGoal&&r.fitnessGoal.length>200&&(x.fitnessGoal="Fitness goal must be less than 200 characters"),console.log("UserProfileCard - Validation errors:",x),o(x);const k=Object.keys(x).length===0;return console.log("UserProfileCard - Form is valid:",k),k},l=x=>{x.preventDefault(),console.log("UserProfileCard - Form submitted with data:",r),a()?(console.log("UserProfileCard - Form validation passed, calling onUpdateProfile"),e(r)):console.log("UserProfileCard - Form validation failed")},c=x=>k=>{const v=x==="fitnessGoal"?k.target.value:Number(k.target.value);i(w=>({...w,[x]:v})),s[x]&&o(w=>({...w,[x]:void 0}))},u=()=>{if(r.weightKg>0&&r.heightCm>0){const x=r.heightCm/100;return(r.weightKg/(x*x)).toFixed(1)}return null},f=x=>x<18.5?{category:"Underweight",color:"text-blue-600 dark:text-blue-400"}:x<25?{category:"Normal",color:"text-green-600 dark:text-green-400"}:x<30?{category:"Overweight",color:"text-yellow-600 dark:text-yellow-400"}:{category:"Obese",color:"text-red-600 dark:text-red-400"},m=u(),p=m?f(Number(m)):null;return h.jsxs(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[h.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 dark:border-gray-700/50 p-6",children:[h.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[h.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center text-2xl font-bold text-white shadow-lg",children:((y=t.name)==null?void 0:y.charAt(0))??"U"}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.name}),h.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Fitness Profile"})]})]}),m&&p&&h.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-xl p-4 border border-blue-200/50 dark:border-blue-700/50",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Body Mass Index"}),h.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:m})]}),h.jsxs("div",{className:"text-right",children:[h.jsx("p",{className:`text-sm font-medium ${p.color}`,children:p.category}),h.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"BMI Category"})]})]})})]}),h.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 dark:border-gray-700/50 p-6",children:[h.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"Update Profile"}),h.jsxs("form",{onSubmit:l,className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{children:[h.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[h.jsx(im,{className:"w-4 h-4 inline mr-2"}),"Age"]}),h.jsx("input",{type:"number",min:"13",max:"120",className:`w-full px-4 py-3 rounded-xl border transition-colors focus:ring-2 focus:ring-blue-500 focus:border-transparent ${s.age?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-600":"border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}`,value:r.age,onChange:c("age"),placeholder:"Enter your age"}),s.age&&h.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:s.age})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[h.jsx(X6,{className:"w-4 h-4 inline mr-2"}),"Weight (kg)"]}),h.jsx("input",{type:"number",min:"30",max:"300",step:"0.1",className:`w-full px-4 py-3 rounded-xl border transition-colors focus:ring-2 focus:ring-blue-500 focus:border-transparent ${s.weightKg?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-600":"border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}`,value:r.weightKg,onChange:c("weightKg"),placeholder:"Enter your weight"}),s.weightKg&&h.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:s.weightKg})]})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[h.jsx(M6,{className:"w-4 h-4 inline mr-2"}),"Height (cm)"]}),h.jsx("input",{type:"number",min:"100",max:"250",className:`w-full px-4 py-3 rounded-xl border transition-colors focus:ring-2 focus:ring-blue-500 focus:border-transparent ${s.heightCm?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-600":"border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}`,value:r.heightCm,onChange:c("heightCm"),placeholder:"Enter your height"}),s.heightCm&&h.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:s.heightCm})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[h.jsx(ax,{className:"w-4 h-4 inline mr-2"}),"Fitness Goal"]}),h.jsx("textarea",{rows:3,maxLength:200,className:`w-full px-4 py-3 rounded-xl border transition-colors focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none ${s.fitnessGoal?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-600":"border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}`,value:r.fitnessGoal,onChange:c("fitnessGoal"),placeholder:"Describe your fitness goals..."}),h.jsxs("div",{className:"flex justify-between items-center mt-1",children:[s.fitnessGoal?h.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:s.fitnessGoal}):h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"What do you want to achieve?"}),h.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[r.fitnessGoal.length,"/200"]})]})]}),h.jsxs(Z.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:n,className:"w-full flex items-center justify-center px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-medium rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:[h.jsx(nP,{className:"w-5 h-5 mr-2"}),n?"Saving...":"Save Changes"]})]})]})]})}function b7({onClose:t}){const e=$n(),{user:n,login:r}=pn(),{data:i,isLoading:s,error:o}=Qt({queryKey:["user","profile",n==null?void 0:n.uid],queryFn:async()=>{if(!(n!=null&&n.uid))return null;const c=await ou(n.uid);return c||await CN(n.uid,n.email,n.name)},enabled:!!(n!=null&&n.uid),retry:1,staleTime:5*60*1e3,refetchOnWindowFocus:!1,refetchOnMount:!0,refetchOnReconnect:!0}),a=_n({mutationFn:async c=>{if(console.log("ProfilePage - updateProfileMutation called with:",c),!(n!=null&&n.uid)){console.log("ProfilePage - No user UID, returning");return}console.log("ProfilePage - Calling updateUserProfile..."),await Tm(n.uid,c),console.log("ProfilePage - updateUserProfile completed")},onSuccess:async()=>{if(console.log("ProfilePage - Mutation success, updating auth context..."),n!=null&&n.uid){const c=await ou(n.uid);console.log("ProfilePage - Got updated profile:",c),c&&(console.log("ProfilePage - Updating auth context with:",c),r({...c,fitnessGoal:c.fitnessGoal??""})),e.invalidateQueries({queryKey:["user","profile",n.uid]})}alert("Profile updated successfully!")},onError:c=>{console.error("ProfilePage - Mutation error:",c)}}),l=i||(n?{uid:n.uid,name:n.name,email:n.email,age:0,weightKg:0,heightCm:0,fitnessGoal:"",theme:n.theme||"system",units:"metric",language:"en",privacy:"private",notifications:{workoutReminders:!0,goalAchievements:!0,weeklyProgress:!1},dataSharing:!0,activityTracking:!0}:null);return h.jsxs("div",{className:"min-h-[70vh] p-6",children:[h.jsx("div",{className:"flex items-center justify-between mb-8",children:h.jsx("div",{className:"flex items-center space-x-4",children:h.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Your Profile"})})}),o&&h.jsx("div",{className:"mb-6 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-2xl p-6",children:h.jsx("p",{className:"text-red-600 dark:text-red-400",children:"Error loading profile. Please try again."})}),s&&!l?h.jsx("div",{className:"flex items-center justify-center py-12",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),h.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Setting up your profile..."})]})}):l?h.jsxs(h.Fragment,{children:[(!l.age||l.age===0||!l.weightKg||l.weightKg===0||!l.heightCm||l.heightCm===0)&&h.jsx("div",{className:"mb-6 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 border border-blue-200 dark:border-blue-700 rounded-2xl p-6",children:h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center",children:h.jsx("span",{className:"text-white text-sm font-bold",children:"!"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100",children:"Complete Your Profile"}),h.jsx("p",{className:"text-blue-700 dark:text-blue-300 text-sm mt-1",children:"Please fill in your age, weight, height, and fitness goals to get personalized insights and track your progress."})]})]})}),h.jsx("div",{className:"bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20 dark:border-gray-700/50",children:h.jsx(w7,{profile:l,onUpdateProfile:c=>a.mutate(c),isUpdating:a.isPending})})]}):h.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-2xl p-6 text-center",children:h.jsx("p",{className:"text-red-600 dark:text-red-400",children:"No profile data available."})})]})}function _7({day:t,initialItems:e,onClose:n,onSave:r}){const[i,s]=O.useState(e),o=()=>{s([...i,{time:"",activity:""}])},a=(u,f,m)=>{const p=[...i],y=p[u];y&&(y[f]=m,s(p))},l=u=>{s(i.filter((f,m)=>m!==u))},c=u=>{u.preventDefault();const f=[];if(i.forEach((p,y)=>{(!p.time||p.time.trim().length===0)&&f.push(`Item ${y+1}: Time is required`),(!p.activity||p.activity.trim().length===0)&&f.push(`Item ${y+1}: Activity is required`),p.activity&&p.activity.trim().length>200&&f.push(`Item ${y+1}: Activity name must be less than 200 characters`)}),f.length>0){alert(`Please fix the following errors:
${f.join(`
`)}`);return}const m=i.filter(p=>p.time.trim().length>0&&p.activity.trim().length>0);r(m),n()};return h.jsx("div",{className:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center",children:h.jsxs("div",{className:"bg-card rounded-xl p-6 shadow-lg w-full max-w-md",children:[h.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Edit Schedule for ",t]}),h.jsxs("form",{onSubmit:c,children:[h.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto pr-2",children:i.map((u,f)=>h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("input",{type:"text",placeholder:"Time",value:u.time,onChange:m=>a(f,"time",m.target.value),className:"w-1/3 p-2 rounded bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700"}),h.jsx("input",{type:"text",placeholder:"Activity",value:u.activity,onChange:m=>a(f,"activity",m.target.value),className:"w-2/3 p-2 rounded bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700"}),h.jsx("button",{type:"button",onClick:()=>l(f),className:"text-red-500",children:"✕"})]},f))}),h.jsx("button",{type:"button",onClick:o,className:"w-full text-sm py-2 px-2 mt-4 rounded bg-blue-500/20 hover:bg-blue-500/30 transition-colors",children:"+ Add Item"}),h.jsxs("div",{className:"mt-6 flex justify-end space-x-4",children:[h.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700",children:"Cancel"}),h.jsx("button",{type:"submit",className:"px-4 py-2 rounded-md bg-blue-600 text-white",children:"Save Changes"})]})]})]})})}const k7=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];function E7(){const{user:t}=pn(),e=$n(),[n,r]=O.useState(null),{data:i,isLoading:s}=Qt({queryKey:["schedule",t==null?void 0:t.uid],queryFn:()=>Cm(t.uid),enabled:!!(t!=null&&t.uid)}),o=_n({mutationFn:u=>NN(t.uid,u),onSuccess:()=>{e.invalidateQueries({queryKey:["schedule",t==null?void 0:t.uid]})}}),a=(u,f)=>{const m=u.toLowerCase();o.mutate({[m]:f}),r(null)},c=i||{id:"weekly",monday:[],tuesday:[],wednesday:[],thursday:[],friday:[],saturday:[],sunday:[]};return s?h.jsx("div",{className:"flex items-center justify-center py-12",children:h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):h.jsxs("div",{className:"space-y-6",children:[h.jsx("div",{className:"flex items-center justify-between mb-8",children:h.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"My Workout Schedule"})}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:k7.map((u,f)=>{const m=u.toLowerCase(),p=Array.isArray(c[m])?c[m]:[];return h.jsxs(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:f*.1},className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20 dark:border-gray-700/50 cursor-pointer hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300",onClick:()=>r(u),children:[h.jsxs("div",{className:"text-center mb-6",children:[h.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:u}),h.jsx("div",{className:"w-12 h-1 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full mx-auto"})]}),h.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:p.length===0?h.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400 text-sm",children:"No activities scheduled"}):p.map((y,x)=>h.jsx(Z.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:x*.1},className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-700/50 dark:to-gray-600/50 p-3 rounded-xl border border-gray-200/50 dark:border-gray-600/50 hover:from-blue-50 hover:to-purple-50 dark:hover:from-blue-900/20 dark:hover:to-purple-900/20 transition-all duration-200",children:h.jsxs("div",{className:"flex flex-col gap-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"bg-blue-500/10 p-1.5 rounded-lg shrink-0",children:h.jsx(Yc,{className:"w-3.5 h-3.5 text-blue-600 dark:text-blue-400"})}),h.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-300 whitespace-nowrap",children:y.time})]}),h.jsxs("div",{className:"flex items-start gap-2",children:[h.jsx(Yi,{className:"w-3.5 h-3.5 text-purple-600 dark:text-purple-400 mt-0.5 shrink-0"}),h.jsx("span",{className:"font-semibold text-sm text-gray-800 dark:text-white break-words break-all line-clamp-2 leading-tight",children:y.activity})]})]})},x))}),h.jsx("div",{className:"mt-4 text-center",children:h.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-3 py-1 rounded-full",children:"Click to edit"})})]},u)})}),n&&h.jsx(_7,{day:n,initialItems:Array.isArray(c[n.toLowerCase()])?c[n.toLowerCase()]:[],onClose:()=>r(null),onSave:u=>a(n,u)})]})}const T7=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];function S7({onClose:t,onSave:e}){const[n,r]=O.useState({monday:[],tuesday:[],wednesday:[],thursday:[],friday:[],saturday:[],sunday:[]}),i=l=>{const c=l.toLowerCase();r(u=>({...u,[c]:[...u[c]||[],{time:"",activity:""}]}))},s=(l,c,u,f)=>{const m=l.toLowerCase(),p=n[m]||[];r(y=>({...y,[m]:p.map((x,k)=>k===c?{...x,[u]:f}:x)}))},o=(l,c)=>{const u=l.toLowerCase();r(f=>({...f,[u]:(f[u]||[]).filter((m,p)=>p!==c)}))},a=l=>{l.preventDefault();const c=[];if(Object.entries(n).forEach(([f,m])=>{m.forEach((p,y)=>{(!p.time||p.time.trim().length===0)&&c.push(`${f.charAt(0).toUpperCase()+f.slice(1)}, Item ${y+1}: Time is required`),(!p.activity||p.activity.trim().length===0)&&c.push(`${f.charAt(0).toUpperCase()+f.slice(1)}, Item ${y+1}: Activity is required`),p.activity&&p.activity.trim().length>200&&c.push(`${f.charAt(0).toUpperCase()+f.slice(1)}, Item ${y+1}: Activity name must be less than 200 characters`)})}),c.length>0){alert(`Please fix the following errors:
${c.slice(0,5).join(`
`)}${c.length>5?`
... and ${c.length-5} more errors`:""}`);return}const u={};Object.entries(n).forEach(([f,m])=>{u[f]=m.filter(p=>p.time.trim().length>0&&p.activity.trim().length>0)}),e(u),t()};return h.jsx("div",{className:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center",children:h.jsxs("div",{className:"bg-card rounded-xl p-6 shadow-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[h.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Create Weekly Schedule"}),h.jsxs("form",{onSubmit:a,children:[h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:T7.map(l=>h.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 p-4 rounded-lg",children:[h.jsx("h3",{className:"font-bold text-lg mb-2",children:l}),(n[l.toLowerCase()]||[]).map((c,u)=>h.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[h.jsx("input",{type:"text",placeholder:"Time",value:c.time,onChange:f=>s(l,u,"time",f.target.value),className:"w-1/3 p-2 rounded bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700"}),h.jsx("input",{type:"text",placeholder:"Activity",value:c.activity,onChange:f=>s(l,u,"activity",f.target.value),className:"w-2/3 p-2 rounded bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700"}),h.jsx("button",{type:"button",onClick:()=>o(l,u),className:"text-red-500",children:"✕"})]},u)),h.jsx("button",{type:"button",onClick:()=>i(l),className:"w-full text-sm py-1 px-2 rounded bg-blue-500/20 hover:bg-blue-500/30 transition-colors",children:"+ Add Item"})]},l))}),h.jsxs("div",{className:"mt-6 flex justify-end space-x-4",children:[h.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700",children:"Cancel"}),h.jsx("button",{type:"submit",className:"px-4 py-2 rounded-md bg-blue-600 text-white",children:"Save Schedule"})]})]})]})})}const I7=[{id:"first_workout",title:"First Workout",description:"Completed your first workout session.",icon:"Trophy",criteria:{type:"count",value:1}},{id:"30_minute_warrior",title:"30 Minute Warrior",description:"Completed a workout session of 30 minutes or more.",icon:"Star",criteria:{type:"duration",value:30}},{id:"60_minute_master",title:"60 Minute Master",description:"Completed a workout session of 60 minutes or more.",icon:"Zap",criteria:{type:"duration",value:60}},{id:"workout_five",title:"Five Workouts",description:"Completed 5 workout sessions.",icon:"Award",criteria:{type:"count",value:5}},{id:"workout_ten",title:"Ten Workouts",description:"Completed 10 workout sessions.",icon:"Star",criteria:{type:"count",value:10}},{id:"workout_twenty",title:"Twenty Workouts",description:"Completed 20 workout sessions.",icon:"Trophy",criteria:{type:"count",value:20}},{id:"total_300_minutes",title:"300 Minutes Total",description:"Accumulated 300 total minutes of workouts.",icon:"Flame",criteria:{type:"total_duration",value:300}},{id:"total_600_minutes",title:"600 Minutes Total",description:"Accumulated 600 total minutes of workouts.",icon:"Target",criteria:{type:"total_duration",value:600}}];function C7(t,e){const{criteria:n}=t;switch(n.type){case"count":{const r=e.length,i=r>=n.value,s=Math.min(100,Math.round(r/n.value*100)),o=[...e].sort((u,f)=>new Date(u.date).getTime()-new Date(f.date).getTime()),a=n.value-1,l=o[a],c=i&&l!==void 0?l.date:null;return{achieved:i,progress:s,achievedDate:c}}case"duration":{const i=[...e].sort((l,c)=>new Date(c.date).getTime()-new Date(l.date).getTime()).find(l=>l.durationMinutes>=n.value),s=!!i,o=e.length>0?Math.max(...e.map(l=>l.durationMinutes)):0,a=Math.min(100,Math.round(o/n.value*100));return{achieved:s,progress:a,achievedDate:(i==null?void 0:i.date)||null}}case"total_duration":{const r=[...e].sort((c,u)=>new Date(c.date).getTime()-new Date(u.date).getTime());let i=0,s=null;for(const c of r)i+=c.durationMinutes,i>=n.value&&!s&&(s=c.date);const o=e.reduce((c,u)=>c+u.durationMinutes,0),a=o>=n.value,l=Math.min(100,Math.round(o/n.value*100));return{achieved:a,progress:l,achievedDate:s}}case"streak":return{achieved:!1,progress:0,achievedDate:null};default:return{achieved:!1,progress:0,achievedDate:null}}}async function P7(t,e){const n=yo(nt,"users",t,"achievements"),r=await km(n),i=new Map(r.docs.map(o=>[o.id,{id:o.id,...o.data()}])),s=I7.map(o=>{const a=i.get(o.id),l=C7(o,e),c=(a==null?void 0:a.achieved)||l.achieved,u=(a==null?void 0:a.achievedDate)||l.achievedDate||null,f=l.progress;return{id:o.id,title:o.title,description:o.description,icon:o.icon,criteria:o.criteria,achieved:c,achievedDate:c?u??null:null,progress:f}});for(const o of s){const a=nn(nt,"users",t,"achievements",o.id);await To(a,{title:o.title,description:o.description,icon:o.icon,criteria:o.criteria,achieved:o.achieved,achievedDate:o.achievedDate,progress:o.progress},{merge:!0})}return s}const A7={Trophy:uf,Star:U6,Zap:eF,Award:o6,Flame:lf,Target:ax};function N7(){const{user:t}=pn(),{data:e=[]}=Qt({queryKey:["workouts","logs",t==null?void 0:t.uid],queryFn:()=>zu.getLogs(t.uid),enabled:!!(t!=null&&t.uid)}),{data:n=[],isLoading:r}=Qt({queryKey:["achievements",t==null?void 0:t.uid,e.length],queryFn:()=>P7(t.uid,e),enabled:!!(t!=null&&t.uid)});if(r)return h.jsxs("div",{className:"space-y-6",children:[h.jsx("div",{className:"flex items-center justify-between mb-8",children:h.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-yellow-600 to-orange-600 bg-clip-text text-transparent",children:"My Achievements"})}),h.jsx("div",{className:"flex items-center justify-center py-12",children:h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-600"})})]});const i=s=>A7[s]||uf;return h.jsxs("div",{className:"space-y-6",children:[h.jsx("div",{className:"flex items-center justify-between mb-8",children:h.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-yellow-600 to-orange-600 bg-clip-text text-transparent",children:"My Achievements"})}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6",children:n.map((s,o)=>{const a=i(s.icon);return h.jsxs(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:o*.1},className:`bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20 dark:border-gray-700/50 hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300 ${s.achieved?"":"opacity-75"}`,children:[h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx("div",{className:`p-4 rounded-2xl shadow-lg ${s.achieved?"bg-gradient-to-r from-green-500 to-emerald-600 text-white":"bg-gradient-to-r from-gray-400 to-gray-500 text-white"}`,children:h.jsx(a,{size:28})}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h2",{className:"font-bold text-xl text-gray-900 dark:text-white mb-2",children:s.title}),h.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:s.description}),s.achieved&&s.achievedDate?h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),h.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 font-medium",children:["Unlocked on ",new Date(s.achievedDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]})]}):h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Progress"}),h.jsxs("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:[s.progress,"%"]})]}),h.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:h.jsx(Z.div,{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full",initial:{width:0},animate:{width:`${s.progress}%`},transition:{duration:1,delay:o*.1}})})]})]})]}),s.achieved&&s.achievedDate&&h.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200/50 dark:border-gray-700/50",children:h.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[h.jsx(uf,{className:"w-4 h-4 text-yellow-500"}),h.jsx("span",{className:"text-sm font-medium text-yellow-600 dark:text-yellow-400",children:"Achievement Unlocked!"})]})})]},s.id)})}),h.jsx("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20 dark:border-gray-700/50",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-center",children:[h.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 p-4 rounded-xl border border-green-200/50 dark:border-green-700/50",children:[h.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mb-1",children:n.filter(s=>s.achieved).length}),h.jsx("div",{className:"text-sm text-green-700 dark:text-green-300 font-medium",children:"Achievements Unlocked"})]}),h.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 p-4 rounded-xl border border-blue-200/50 dark:border-blue-700/50",children:[h.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mb-1",children:n.filter(s=>!s.achieved).length}),h.jsx("div",{className:"text-sm text-blue-700 dark:text-blue-300 font-medium",children:"In Progress"})]}),h.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 p-4 rounded-xl border border-yellow-200/50 dark:border-yellow-700/50",children:[h.jsxs("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400 mb-1",children:[n.length>0?Math.round(n.filter(s=>s.achieved).length/n.length*100):0,"%"]}),h.jsx("div",{className:"text-sm text-yellow-700 dark:text-yellow-300 font-medium",children:"Completion Rate"})]})]})})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function $u(t){return t+.5|0}const Fi=(t,e,n)=>Math.max(Math.min(t,n),e);function Ql(t){return Fi($u(t*2.55),0,255)}function ns(t){return Fi($u(t*255),0,255)}function Or(t){return Fi($u(t/2.55)/100,0,1)}function _E(t){return Fi($u(t*100),0,100)}const Cn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},yy=[..."0123456789ABCDEF"],R7=t=>yy[t&15],M7=t=>yy[(t&240)>>4]+yy[t&15],Ld=t=>(t&240)>>4===(t&15),D7=t=>Ld(t.r)&&Ld(t.g)&&Ld(t.b)&&Ld(t.a);function j7(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Cn[t[1]]*17,g:255&Cn[t[2]]*17,b:255&Cn[t[3]]*17,a:e===5?Cn[t[4]]*17:255}:(e===7||e===9)&&(n={r:Cn[t[1]]<<4|Cn[t[2]],g:Cn[t[3]]<<4|Cn[t[4]],b:Cn[t[5]]<<4|Cn[t[6]],a:e===9?Cn[t[7]]<<4|Cn[t[8]]:255})),n}const O7=(t,e)=>t<255?e(t):"";function L7(t){var e=D7(t)?R7:M7;return t?"#"+e(t.r)+e(t.g)+e(t.b)+O7(t.a,e):void 0}const V7=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function DN(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function F7(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function U7(t,e,n){const r=DN(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function B7(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function uw(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=B7(n,r,i,u,s),l=l*60+.5),[l|0,c||0,a]}function dw(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(ns)}function hw(t,e,n){return dw(DN,t,e,n)}function z7(t,e,n){return dw(U7,t,e,n)}function $7(t,e,n){return dw(F7,t,e,n)}function jN(t){return(t%360+360)%360}function W7(t){const e=V7.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Ql(+e[5]):ns(+e[5]));const i=jN(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=z7(i,s,o):e[1]==="hsv"?r=$7(i,s,o):r=hw(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function H7(t,e){var n=uw(t);n[0]=jN(n[0]+e),n=hw(n),t.r=n[0],t.g=n[1],t.b=n[2]}function q7(t){if(!t)return;const e=uw(t),n=e[0],r=_E(e[1]),i=_E(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${Or(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const kE={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},EE={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function K7(){const t={},e=Object.keys(EE),n=Object.keys(kE);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,kE[s]);s=parseInt(EE[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let Vd;function G7(t){Vd||(Vd=K7(),Vd.transparent=[0,0,0,0]);const e=Vd[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Q7=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Y7(t){const e=Q7.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Ql(o):Fi(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?Ql(r):Fi(r,0,255)),i=255&(e[4]?Ql(i):Fi(i,0,255)),s=255&(e[6]?Ql(s):Fi(s,0,255)),{r,g:i,b:s,a:n}}}function X7(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Or(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const sg=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Ro=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function J7(t,e,n){const r=Ro(Or(t.r)),i=Ro(Or(t.g)),s=Ro(Or(t.b));return{r:ns(sg(r+n*(Ro(Or(e.r))-r))),g:ns(sg(i+n*(Ro(Or(e.g))-i))),b:ns(sg(s+n*(Ro(Or(e.b))-s))),a:t.a+n*(e.a-t.a)}}function Fd(t,e,n){if(t){let r=uw(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=hw(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function ON(t,e){return t&&Object.assign(e||{},t)}function TE(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=ns(t[3]))):(e=ON(t,{r:0,g:0,b:0,a:1}),e.a=ns(e.a)),e}function Z7(t){return t.charAt(0)==="r"?Y7(t):W7(t)}class au{constructor(e){if(e instanceof au)return e;const n=typeof e;let r;n==="object"?r=TE(e):n==="string"&&(r=j7(e)||G7(e)||Z7(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=ON(this._rgb);return e&&(e.a=Or(e.a)),e}set rgb(e){this._rgb=TE(e)}rgbString(){return this._valid?X7(this._rgb):void 0}hexString(){return this._valid?L7(this._rgb):void 0}hslString(){return this._valid?q7(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=J7(this._rgb,e._rgb,n)),this}clone(){return new au(this.rgb)}alpha(e){return this._rgb.a=ns(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=$u(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Fd(this._rgb,2,e),this}darken(e){return Fd(this._rgb,2,-e),this}saturate(e){return Fd(this._rgb,1,e),this}desaturate(e){return Fd(this._rgb,1,-e),this}rotate(e){return H7(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Pr(){}const e$=(()=>{let t=0;return()=>t++})();function Me(t){return t==null}function ct(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function xe(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function zt(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function ar(t,e){return zt(t)?t:e}function fe(t,e){return typeof t>"u"?e:t}const t$=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,LN=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Oe(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Se(t,e,n,r){let i,s,o;if(ct(t))for(s=t.length,i=0;i<s;i++)e.call(n,t[i],i);else if(xe(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function Cf(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function Pf(t){if(ct(t))return t.map(Pf);if(xe(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=Pf(t[n[i]]);return e}return t}function VN(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function n$(t,e,n,r){if(!VN(t))return;const i=e[t],s=n[t];xe(i)&&xe(s)?lu(i,s,r):e[t]=Pf(s)}function lu(t,e,n){const r=ct(e)?e:[e],i=r.length;if(!xe(t))return t;n=n||{};const s=n.merger||n$;let o;for(let a=0;a<i;++a){if(o=r[a],!xe(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],t,o,n)}return t}function wc(t,e){return lu(t,e,{merger:r$})}function r$(t,e,n){if(!VN(t))return;const r=e[t],i=n[t];xe(r)&&xe(i)?wc(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Pf(i))}const SE={"":t=>t,x:t=>t.x,y:t=>t.y};function i$(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function s$(t){const e=i$(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function cu(t,e){return(SE[e]||(SE[e]=s$(e)))(t)}function fw(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Af=t=>typeof t<"u",us=t=>typeof t=="function",IE=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function o$(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Ie=Math.PI,We=2*Ie,a$=We+Ie,Nf=Number.POSITIVE_INFINITY,l$=Ie/180,dt=Ie/2,Es=Ie/4,CE=Ie*2/3,FN=Math.log10,Ha=Math.sign;function bc(t,e,n){return Math.abs(t-e)<n}function PE(t){const e=Math.round(t);t=bc(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(FN(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function c$(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function u$(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function uu(t){return!u$(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function d$(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function h$(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function qr(t){return t*(Ie/180)}function f$(t){return t*(180/Ie)}function AE(t){if(!zt(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function UN(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*Ie&&(s+=We),{angle:s,distance:i}}function vy(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function m$(t,e){return(t-e+a$)%We-Ie}function vn(t){return(t%We+We)%We}function du(t,e,n,r){const i=vn(t),s=vn(e),o=vn(n),a=vn(s-i),l=vn(o-i),c=vn(i-s),u=vn(i-o);return i===s||i===o||r&&s===o||a>l&&c<u}function Xt(t,e,n){return Math.max(e,Math.min(n,t))}function p$(t){return Xt(t,-32768,32767)}function Us(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function mw(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const Bs=(t,e,n,r)=>mw(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),g$=(t,e,n)=>mw(t,n,r=>t[r][e]>=n);function y$(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const BN=["push","pop","shift","splice","unshift"];function v$(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),BN.forEach(n=>{const r="_onData"+fw(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function NE(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(BN.forEach(s=>{delete t[s]}),delete t._chartjs)}function x$(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const zN=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function $N(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,zN.call(window,()=>{r=!1,t.apply(e,n)}))}}function w$(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const pw=t=>t==="start"?"left":t==="end"?"right":"center",Dt=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,b$=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function _$(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:f,max:m,minDefined:p,maxDefined:y}=o.getUserBounds();if(p){if(i=Math.min(Bs(l,u,f).lo,n?r:Bs(e,u,o.getPixelForValue(f)).lo),c){const x=l.slice(0,i+1).reverse().findIndex(k=>!Me(k[a.axis]));i-=Math.max(0,x)}i=Xt(i,0,r-1)}if(y){let x=Math.max(Bs(l,o.axis,m,!0).hi+1,n?0:Bs(e,u,o.getPixelForValue(m),!0).hi+1);if(c){const k=l.slice(x-1).findIndex(v=>!Me(v[a.axis]));x+=Math.max(0,k)}s=Xt(x,i,r)-i}else s=r-i}return{start:i,count:s}}function k$(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const Ud=t=>t===0||t===1,RE=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*We/n)),ME=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*We/n)+1,_c={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*dt)+1,easeOutSine:t=>Math.sin(t*dt),easeInOutSine:t=>-.5*(Math.cos(Ie*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Ud(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Ud(t)?t:RE(t,.075,.3),easeOutElastic:t=>Ud(t)?t:ME(t,.075,.3),easeInOutElastic(t){return Ud(t)?t:t<.5?.5*RE(t*2,.1125,.45):.5+.5*ME(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-_c.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?_c.easeInBounce(t*2)*.5:_c.easeOutBounce(t*2-1)*.5+.5};function gw(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function DE(t){return gw(t)?t:new au(t)}function og(t){return gw(t)?t:new au(t).saturate(.5).darken(.1).hexString()}const E$=["x","y","borderWidth","radius","tension"],T$=["color","borderColor","backgroundColor"];function S$(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:T$},numbers:{type:"number",properties:E$}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function I$(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const jE=new Map;function C$(t,e){e=e||{};const n=t+JSON.stringify(e);let r=jE.get(n);return r||(r=new Intl.NumberFormat(t,e),jE.set(n,r)),r}function yw(t,e,n){return C$(e,n).format(t)}const P$={values(t){return ct(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=A$(t,n)}const o=FN(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),yw(t,r,l)}};function A$(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var WN={formatters:P$};function N$(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:WN.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const vo=Object.create(null),xy=Object.create(null);function kc(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function ag(t,e,n){return typeof e=="string"?lu(kc(t,e),n):lu(kc(t,""),e)}class R${constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>og(i.backgroundColor),this.hoverBorderColor=(r,i)=>og(i.borderColor),this.hoverColor=(r,i)=>og(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return ag(this,e,n)}get(e){return kc(this,e)}describe(e,n){return ag(xy,e,n)}override(e,n){return ag(vo,e,n)}route(e,n,r,i){const s=kc(this,e),o=kc(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return xe(l)?Object.assign({},c,l):fe(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var tt=new R$({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[S$,I$,N$]);function M$(t){return!t||Me(t.size)||Me(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function OE(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function Ts(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function LE(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function wy(t,e,n,r){HN(t,e,n,r,null)}function HN(t,e,n,r,i){let s,o,a,l,c,u,f,m;const p=e.pointStyle,y=e.rotation,x=e.radius;let k=(y||0)*l$;if(p&&typeof p=="object"&&(s=p.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(k),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),t.restore();return}if(!(isNaN(x)||x<=0)){switch(t.beginPath(),p){default:i?t.ellipse(n,r,i/2,x,0,0,We):t.arc(n,r,x,0,We),t.closePath();break;case"triangle":u=i?i/2:x,t.moveTo(n+Math.sin(k)*u,r-Math.cos(k)*x),k+=CE,t.lineTo(n+Math.sin(k)*u,r-Math.cos(k)*x),k+=CE,t.lineTo(n+Math.sin(k)*u,r-Math.cos(k)*x),t.closePath();break;case"rectRounded":c=x*.516,l=x-c,o=Math.cos(k+Es)*l,f=Math.cos(k+Es)*(i?i/2-c:l),a=Math.sin(k+Es)*l,m=Math.sin(k+Es)*(i?i/2-c:l),t.arc(n-f,r-a,c,k-Ie,k-dt),t.arc(n+m,r-o,c,k-dt,k),t.arc(n+f,r+a,c,k,k+dt),t.arc(n-m,r+o,c,k+dt,k+Ie),t.closePath();break;case"rect":if(!y){l=Math.SQRT1_2*x,u=i?i/2:l,t.rect(n-u,r-l,2*u,2*l);break}k+=Es;case"rectRot":f=Math.cos(k)*(i?i/2:x),o=Math.cos(k)*x,a=Math.sin(k)*x,m=Math.sin(k)*(i?i/2:x),t.moveTo(n-f,r-a),t.lineTo(n+m,r-o),t.lineTo(n+f,r+a),t.lineTo(n-m,r+o),t.closePath();break;case"crossRot":k+=Es;case"cross":f=Math.cos(k)*(i?i/2:x),o=Math.cos(k)*x,a=Math.sin(k)*x,m=Math.sin(k)*(i?i/2:x),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o);break;case"star":f=Math.cos(k)*(i?i/2:x),o=Math.cos(k)*x,a=Math.sin(k)*x,m=Math.sin(k)*(i?i/2:x),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o),k+=Es,f=Math.cos(k)*(i?i/2:x),o=Math.cos(k)*x,a=Math.sin(k)*x,m=Math.sin(k)*(i?i/2:x),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o);break;case"line":o=i?i/2:Math.cos(k)*x,a=Math.sin(k)*x,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(k)*(i?i/2:x),r+Math.sin(k)*x);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function hu(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Pm(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Am(t){t.restore()}function D$(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function j$(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function O$(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Me(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function L$(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function V$(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function fu(t,e,n,r,i,s={}){const o=ct(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,O$(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&V$(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),Me(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),L$(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function by(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Ie,Ie,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,Ie,dt,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,dt,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-dt,!0),t.lineTo(n+o.topLeft,r)}const F$=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,U$=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function B$(t,e){const n=(""+t).match(F$);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const z$=t=>+t||0;function vw(t,e){const n={},r=xe(e),i=r?Object.keys(e):e,s=xe(t)?r?o=>fe(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=z$(s(o));return n}function $$(t){return vw(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Ec(t){return vw(t,["topLeft","topRight","bottomLeft","bottomRight"])}function zn(t){const e=$$(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ft(t,e){t=t||{},e=e||tt.font;let n=fe(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=fe(t.style,e.style);r&&!(""+r).match(U$)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:fe(t.family,e.family),lineHeight:B$(fe(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:fe(t.weight,e.weight),string:""};return i.string=M$(i),i}function Bd(t,e,n,r){let i,s,o;for(i=0,s=t.length;i<s;++i)if(o=t[i],o!==void 0&&o!==void 0)return o}function W$(t,e,n){const{min:r,max:i}=t,s=LN(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function So(t,e){return Object.assign(Object.create(t),e)}function xw(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=QN("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>xw([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return KN(a,l,()=>J$(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return FE(a).includes(l)},ownKeys(a){return FE(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function qa(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:qN(t,r),setContext:s=>qa(t,s,n,r),override:s=>qa(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return KN(s,o,()=>q$(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function qN(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:us(n)?n:()=>n,isIndexable:us(r)?r:()=>r}}const H$=(t,e)=>t?t+fw(e):e,ww=(t,e)=>xe(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function KN(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function q$(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return us(a)&&o.isScriptable(e)&&(a=K$(e,a,t,n)),ct(a)&&a.length&&(a=G$(e,a,t,o.isIndexable)),ww(e,a)&&(a=qa(a,i,s&&s[e],o)),a}function K$(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),ww(t,l)&&(l=bw(i._scopes,i,t,l)),l}function G$(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(xe(e[0])){const l=e,c=i._scopes.filter(u=>u!==l);e=[];for(const u of l){const f=bw(c,i,t,u);e.push(qa(f,s,o&&o[t],a))}}return e}function GN(t,e,n){return us(t)?t(e,n):t}const Q$=(t,e)=>t===!0?e:typeof t=="string"?cu(e,t):void 0;function Y$(t,e,n,r,i){for(const s of e){const o=Q$(n,s);if(o){t.add(o);const a=GN(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function bw(t,e,n,r){const i=e._rootScopes,s=GN(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=VE(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=VE(a,o,s,l,r),l===null)?!1:xw(Array.from(a),[""],i,s,()=>X$(e,n,r))}function VE(t,e,n,r,i){for(;n;)n=Y$(t,e,n,r,i);return n}function X$(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return ct(i)&&xe(n)?n:i||{}}function J$(t,e,n,r){let i;for(const s of e)if(i=QN(H$(s,t),n),typeof i<"u")return ww(t,i)?bw(n,r,t,i):i}function QN(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function FE(t){let e=t._keys;return e||(e=t._keys=Z$(t._scopes)),e}function Z$(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}const eW=Number.EPSILON||1e-14,Ka=(t,e)=>e<t.length&&!t[e].skip&&t[e],YN=t=>t==="x"?"y":"x";function tW(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=vy(s,i),l=vy(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const f=r*c,m=r*u;return{previous:{x:s.x-f*(o.x-i.x),y:s.y-f*(o.y-i.y)},next:{x:s.x+m*(o.x-i.x),y:s.y+m*(o.y-i.y)}}}function nW(t,e,n){const r=t.length;let i,s,o,a,l,c=Ka(t,0);for(let u=0;u<r-1;++u)if(l=c,c=Ka(t,u+1),!(!l||!c)){if(bc(e[u],0,eW)){n[u]=n[u+1]=0;continue}i=n[u]/e[u],s=n[u+1]/e[u],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=i*o*e[u],n[u+1]=s*o*e[u])}}function rW(t,e,n="x"){const r=YN(n),i=t.length;let s,o,a,l=Ka(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=Ka(t,c+1),!a)continue;const u=a[n],f=a[r];o&&(s=(u-o[n])/3,a[`cp1${n}`]=u-s,a[`cp1${r}`]=f-s*e[c]),l&&(s=(l[n]-u)/3,a[`cp2${n}`]=u+s,a[`cp2${r}`]=f+s*e[c])}}function iW(t,e="x"){const n=YN(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=Ka(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=Ka(t,o+1),!!l){if(c){const u=c[e]-l[e];i[o]=u!==0?(c[n]-l[n])/u:0}s[o]=a?c?Ha(i[o-1])!==Ha(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}nW(t,i,s),rW(t,s,e)}function zd(t,e,n){return Math.max(Math.min(t,n),e)}function sW(t,e){let n,r,i,s,o,a=hu(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&hu(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=zd(i.cp1x,e.left,e.right),i.cp1y=zd(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=zd(i.cp2x,e.left,e.right),i.cp2y=zd(i.cp2y,e.top,e.bottom)))}function oW(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")iW(t,i);else{let c=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=tW(c,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&sW(t,n)}function _w(){return typeof window<"u"&&typeof document<"u"}function kw(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Rf(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const Nm=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function aW(t,e){return Nm(t).getPropertyValue(e)}const lW=["top","right","bottom","left"];function no(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=lW[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const cW=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function uW(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(cW(i,s,t.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Ns(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=Nm(n),s=i.boxSizing==="border-box",o=no(i,"padding"),a=no(i,"border","width"),{x:l,y:c,box:u}=uW(t,n),f=o.left+(u&&a.left),m=o.top+(u&&a.top);let{width:p,height:y}=e;return s&&(p-=o.width+a.width,y-=o.height+a.height),{x:Math.round((l-f)/p*n.width/r),y:Math.round((c-m)/y*n.height/r)}}function dW(t,e,n){let r,i;if(e===void 0||n===void 0){const s=t&&kw(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Nm(s),l=no(a,"border","width"),c=no(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=Rf(a.maxWidth,s,"clientWidth"),i=Rf(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||Nf,maxHeight:i||Nf}}const Ui=t=>Math.round(t*10)/10;function hW(t,e,n,r){const i=Nm(t),s=no(i,"margin"),o=Rf(i.maxWidth,t,"clientWidth")||Nf,a=Rf(i.maxHeight,t,"clientHeight")||Nf,l=dW(t,e,n);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const m=no(i,"border","width"),p=no(i,"padding");c-=p.width+m.width,u-=p.height+m.height}return c=Math.max(0,c-s.width),u=Math.max(0,r?c/r:u-s.height),c=Ui(Math.min(c,o,l.maxWidth)),u=Ui(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Ui(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&u>l.height&&(u=l.height,c=Ui(Math.floor(u*r))),{width:c,height:u}}function UE(t,e,n){const r=e||1,i=Ui(t.height*r),s=Ui(t.width*r);t.height=Ui(t.height),t.width=Ui(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const fW=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};_w()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function BE(t,e){const n=aW(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Rs(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function mW(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function pW(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=Rs(t,i,n),a=Rs(i,s,n),l=Rs(s,e,n),c=Rs(o,a,n),u=Rs(a,l,n);return Rs(c,u,n)}const gW=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},yW=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function fa(t,e,n){return t?gW(e,n):yW()}function XN(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function JN(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function ZN(t){return t==="angle"?{between:du,compare:m$,normalize:vn}:{between:Us,compare:(e,n)=>e-n,normalize:e=>e}}function zE({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function vW(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=ZN(r),l=e.length;let{start:c,end:u,loop:f}=t,m,p;if(f){for(c+=l,u+=l,m=0,p=l;m<p&&o(a(e[c%l][r]),i,s);++m)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:f,style:t.style}}function eR(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=ZN(r),{start:u,end:f,loop:m,style:p}=vW(t,e,n),y=[];let x=!1,k=null,v,w,_;const P=()=>l(i,_,v)&&a(i,_)!==0,A=()=>a(s,v)===0||l(s,_,v),N=()=>x||P(),T=()=>!x||A();for(let E=u,S=u;E<=f;++E)w=e[E%o],!w.skip&&(v=c(w[r]),v!==_&&(x=l(v,i,s),k===null&&N()&&(k=a(v,i)===0?E:S),k!==null&&T()&&(y.push(zE({start:k,end:E,loop:m,count:o,style:p})),k=null),S=E,_=v));return k!==null&&y.push(zE({start:k,end:f,loop:m,count:o,style:p})),y}function tR(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=eR(r[i],t.points,e);s.length&&n.push(...s)}return n}function xW(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function wW(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function bW(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=xW(n,i,s,r);if(r===!0)return $E(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return $E(t,wW(n,o,l,c),n,e)}function $E(t,e,n,r){return!r||!r.setContext||!n?e:_W(t,e,n,r)}function _W(t,e,n,r){const i=t._chart.getContext(),s=WE(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=s,f=e[0].start,m=f;function p(y,x,k,v){const w=a?-1:1;if(y!==x){for(y+=l;n[y%l].skip;)y-=w;for(;n[x%l].skip;)x+=w;y%l!==x%l&&(c.push({start:y%l,end:x%l,loop:k,style:v}),u=v,f=x%l)}}for(const y of e){f=a?f:y.start;let x=n[f%l],k;for(m=f+1;m<=y.end;m++){const v=n[m%l];k=WE(r.setContext(So(i,{type:"segment",p0:x,p1:v,p0DataIndex:(m-1)%l,p1DataIndex:m%l,datasetIndex:o}))),kW(k,u)&&p(f,m-1,y.loop,u),x=v,u=k}f<m-1&&p(f,m-1,y.loop,u)}return c}function WE(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function kW(t,e){if(!e)return!1;const n=[],r=function(i,s){return gw(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function $d(t,e,n){return t.options.clip?t[n]:e[n]}function EW(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:$d(n,e,"left"),right:$d(n,e,"right"),top:$d(r,e,"top"),bottom:$d(r,e,"bottom")}:e}function nR(t,e){const n=e._clip;if(n.disabled)return!1;const r=EW(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class TW{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=zN.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Rr=new TW;const HE="transparent",SW={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=DE(t||HE),i=r.valid&&DE(e||HE);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class IW{constructor(e,n,r,i){const s=n[r];i=Bd([e.to,i,s,e.from]);const o=Bd([e.from,s,i]);this._active=!0,this._fn=e.fn||SW[e.type||typeof o],this._easing=_c[e.easing]||_c.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Bd([e.to,n,i,e.from]),this._from=Bd([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class rR{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!xe(e))return;const n=Object.keys(tt.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!xe(s))return;const o={};for(const a of n)o[a]=s[a];(ct(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=PW(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&CW(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const u=n[c];let f=s[c];const m=r.get(c);if(f)if(m&&f.active()){f.update(m,u,a);continue}else f.cancel();if(!m||!m.duration){e[c]=u;continue}s[c]=f=new IW(m,e,c,u),i.push(f)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return Rr.add(this._chart,r),!0}}function CW(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function PW(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function qE(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function AW(t,e,n){if(n===!1)return!1;const r=qE(t,n),i=qE(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function NW(t){let e,n,r,i;return xe(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function iR(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function KE(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(u=!0,r.all)continue;break}c=t.values[l],zt(c)&&(s||e===0||Ha(e)===Ha(c))&&(e+=c)}return!u&&!r.all?0:e}function RW(t,e){const{iScale:n,vScale:r}=e,i=n.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[i]:u,[s]:t[u]};return a}function lg(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function MW(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function DW(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function jW(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function GE(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function QE(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,u=MW(s,o,r),f=e.length;let m;for(let p=0;p<f;++p){const y=e[p],{[l]:x,[c]:k}=y,v=y._stacks||(y._stacks={});m=v[c]=jW(i,u,x),m[a]=k,m._top=GE(m,o,!0,r.type),m._bottom=GE(m,o,!1,r.type);const w=m._visualValues||(m._visualValues={});w[a]=k}}function cg(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function OW(t,e){return So(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function LW(t,e,n){return So(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Nl(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const ug=t=>t==="reset"||t==="none",YE=(t,e)=>e?t:Object.assign({},t),VW=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:iR(n,!0),values:null};class ma{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=lg(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Nl(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(f,m,p,y)=>f==="x"?m:f==="r"?y:p,s=n.xAxisID=fe(r.xAxisID,cg(e,"x")),o=n.yAxisID=fe(r.yAxisID,cg(e,"y")),a=n.rAxisID=fe(r.rAxisID,cg(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),u=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&NE(this._data,this),e._stacked&&Nl(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(xe(n)){const i=this._cachedMeta;this._data=RW(n,i)}else if(r!==n){if(r){NE(r,this);const i=this._cachedMeta;Nl(i),i._parsed=[]}n&&Object.isExtensible(n)&&v$(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=lg(n.vScale,n),n.stack!==r.stack&&(i=!0,Nl(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&(QE(this,n._parsed),n._stacked=lg(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],u,f,m;if(this._parsing===!1)r._parsed=i,r._sorted=!0,m=i;else{ct(i[e])?m=this.parseArrayData(r,i,e,n):xe(i[e])?m=this.parseObjectData(r,i,e,n):m=this.parsePrimitiveData(r,i,e,n);const p=()=>f[a]===null||c&&f[a]<c[a];for(u=0;u<n;++u)r._parsed[u+e]=f=m[u],l&&(p()&&(l=!1),c=f);r._sorted=l}o&&QE(this,m)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),u=s===o,f=new Array(i);let m,p,y;for(m=0,p=i;m<p;++m)y=m+r,f[m]={[a]:u||s.parse(c[y],y),[l]:o.parse(n[y],y)};return f}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,u,f;for(l=0,c=i;l<c;++l)u=l+r,f=n[u],a[l]={x:s.parse(f[0],u),y:o.parse(f[1],u)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,f,m,p;for(u=0,f=i;u<f;++u)m=u+r,p=n[m],c[u]={x:s.parse(cu(p,a),m),y:o.parse(cu(p,l),m)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:iR(i,!0),values:n._stacks[e.axis]._visualValues};return KE(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=KE(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=VW(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:f}=DW(a);let m,p;function y(){p=i[m];const x=p[a.axis];return!zt(p[e.axis])||u>x||f<x}for(m=0;m<o&&!(!y()&&(this.updateRangeFromParsed(c,e,p,l),s));++m);if(s){for(m=o-1;m>=0;--m)if(!y()){this.updateRangeFromParsed(c,e,p,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],zt(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=NW(fe(this.options.clip,AW(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,s,a,l),u=a;u<a+l;++u){const f=i[u];f.hidden||(f.active&&c?o.push(f):f.draw(e,s))}for(u=0;u<o.length;++u)o[u].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=LW(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=OW(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&Af(r);if(a)return YE(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),f=i?[`${e}Hover`,"hover",e,""]:[e,""],m=c.getOptionScopes(this.getDataset(),u),p=Object.keys(tt.elements[e]),y=()=>this.getContext(r,i,n),x=c.resolveNamedOptions(m,p,y,f);return x.$shared&&(x.$shared=l,s[o]=Object.freeze(YE(x,l))),x}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,f=u.datasetAnimationScopeKeys(this._type,n),m=u.getOptionScopes(this.getDataset(),f);l=u.createResolver(m,this.getContext(e,r,n))}const c=new rR(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||ug(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){ug(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!ug(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&Nl(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ee(ma,"defaults",{}),ee(ma,"datasetElementType",null),ee(ma,"dataElementType",null);function FW(t,e,n){let r=1,i=1,s=0,o=0;if(e<We){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),f=Math.cos(l),m=Math.sin(l),p=(_,P,A)=>du(_,a,l,!0)?1:Math.max(P,P*n,A,A*n),y=(_,P,A)=>du(_,a,l,!0)?-1:Math.min(P,P*n,A,A*n),x=p(0,c,f),k=p(dt,u,m),v=y(Ie,c,f),w=y(Ie+dt,u,m);r=(x-v)/2,i=(k-w)/2,s=-(x+v)/2,o=-(k+w)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}class Yl extends ma{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=l=>+r[l];if(xe(r[e])){const{key:l="value"}=this._parsing;s=c=>+cu(r[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)i._parsed[o]=s(o)}}_getRotation(){return qr(this.options.rotation-90)}_getCircumference(){return qr(this.options.circumference)}_getRotationExtents(){let e=We,n=-We;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),o=i._getCircumference();e=Math.min(e,s),n=Math.max(n,s+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,i=this._cachedMeta,s=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(t$(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:f}=this._getRotationExtents(),{ratioX:m,ratioY:p,offsetX:y,offsetY:x}=FW(f,u,l),k=(r.width-o)/m,v=(r.height-o)/p,w=Math.max(Math.min(k,v)/2,0),_=LN(this.options.radius,w),P=Math.max(_*l,0),A=(_-P)/this._getVisibleDatasetWeightTotal();this.offsetX=y*_,this.offsetY=x*_,i.total=this.calculateTotal(),this.outerRadius=_-A*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-A*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/We)}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,f=(a.top+a.bottom)/2,m=s&&c.animateScale,p=m?0:this.innerRadius,y=m?0:this.outerRadius,{sharedOptions:x,includeOptions:k}=this._getSharedOptions(n,i);let v=this._getRotation(),w;for(w=0;w<n;++w)v+=this._circumference(w,s);for(w=n;w<n+r;++w){const _=this._circumference(w,s),P=e[w],A={x:u+this.offsetX,y:f+this.offsetY,startAngle:v,endAngle:v+_,circumference:_,outerRadius:y,innerRadius:p};k&&(A.options=x||this.resolveDataElementOptions(w,P.active?"active":i)),v+=_,this.updateElement(P,w,A,i)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,i;for(i=0;i<n.length;i++){const s=e._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?We*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=yw(n._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const r=this.chart;let i,s,o,a,l;if(!e){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),e=o.data,a=o.controller;break}}if(!e)return 0;for(i=0,s=e.length;i<s;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(fe(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ee(Yl,"id","doughnut"),ee(Yl,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),ee(Yl,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),ee(Yl,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((l,c)=>{const f=e.getDatasetMeta(0).controller.getStyle(c);return{text:l,fillStyle:f.backgroundColor,fontColor:s,hidden:!e.getDataVisibility(c),lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:f.borderWidth,strokeStyle:f.borderColor,textAlign:i,pointStyle:r,borderRadius:o&&(a||f.borderRadius),index:c}}):[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class Eh extends ma{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=_$(n,i,o);this._drawStart=a,this._drawCount=l,k$(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:f}=this._getSharedOptions(n,i),m=o.axis,p=a.axis,{spanGaps:y,segment:x}=this.options,k=uu(y)?y:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||s||i==="none",w=n+r,_=e.length;let P=n>0&&this.getParsed(n-1);for(let A=0;A<_;++A){const N=e[A],T=v?N:{};if(A<n||A>=w){T.skip=!0;continue}const E=this.getParsed(A),S=Me(E[p]),C=T[m]=o.getPixelForValue(E[m],A),M=T[p]=s||S?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,E,l):E[p],A);T.skip=isNaN(C)||isNaN(M)||S,T.stop=A>0&&Math.abs(E[m]-P[m])>k,x&&(T.parsed=E,T.raw=c.data[A]),f&&(T.options=u||this.resolveDataElementOptions(A,N.active?"active":i)),v||this.updateElement(N,A,T,i),P=E}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}ee(Eh,"id","line"),ee(Eh,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ee(Eh,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Ss(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Ew{constructor(e){ee(this,"options");this.options=e||{}}static override(e){Object.assign(Ew.prototype,e)}init(){}formats(){return Ss()}parse(){return Ss()}format(){return Ss()}add(){return Ss()}diff(){return Ss()}startOf(){return Ss()}endOf(){return Ss()}}var UW={_date:Ew};function BW(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const c=a._reversePixels?g$:Bs;if(r){if(i._sharedOptions){const u=s[0],f=typeof u.getRange=="function"&&u.getRange(e);if(f){const m=c(s,e,n-f),p=c(s,e,n+f);return{lo:m.lo,hi:p.hi}}}}else{const u=c(s,e,n);if(l){const{vScale:f}=i._cachedMeta,{_parsed:m}=t,p=m.slice(0,u.lo+1).reverse().findIndex(x=>!Me(x[f.axis]));u.lo-=Math.max(0,p);const y=m.slice(u.hi).findIndex(x=>!Me(x[f.axis]));u.hi+=Math.max(0,y)}return u}}return{lo:0,hi:s.length-1}}function Rm(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:f,hi:m}=BW(s[a],e,o,i);for(let p=f;p<=m;++p){const y=u[p];y.skip||r(y,c,p)}}}function zW(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function dg(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||Rm(t,n,e,function(a,l,c){!i&&!hu(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function $W(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:f}=UN(o,{x:e.x,y:e.y});du(f,c,u)&&i.push({element:o,datasetIndex:a,index:l})}return Rm(t,n,e,s),i}function WW(t,e,n,r,i,s){let o=[];const a=zW(n);let l=Number.POSITIVE_INFINITY;function c(u,f,m){const p=u.inRange(e.x,e.y,i);if(r&&!p)return;const y=u.getCenterPoint(i);if(!(!!s||t.isPointInArea(y))&&!p)return;const k=a(e,y);k<l?(o=[{element:u,datasetIndex:f,index:m}],l=k):k===l&&o.push({element:u,datasetIndex:f,index:m})}return Rm(t,n,e,c),o}function hg(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?$W(t,e,n,i):WW(t,e,n,r,i,s)}function XE(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Rm(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],i)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var HW={modes:{index(t,e,n,r){const i=Ns(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?dg(t,i,s,r,o):hg(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,f=c.data[u];f&&!f.skip&&l.push({element:f,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,r){const i=Ns(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?dg(t,i,s,r,o):hg(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,r){const i=Ns(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return dg(t,i,s,r,o)},nearest(t,e,n,r){const i=Ns(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return hg(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=Ns(e,t);return XE(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=Ns(e,t);return XE(t,i,"y",n.intersect,r)}}};const sR=["left","top","right","bottom"];function Rl(t,e){return t.filter(n=>n.pos===e)}function JE(t,e){return t.filter(n=>sR.indexOf(n.pos)===-1&&n.box.axis===e)}function Ml(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function qW(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function KW(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!sR.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function GW(t,e){const n=KW(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=u?u*i:l&&e.availableHeight)}return n}function QW(t){const e=qW(t),n=Ml(e.filter(c=>c.box.fullSize),!0),r=Ml(Rl(e,"left"),!0),i=Ml(Rl(e,"right")),s=Ml(Rl(e,"top"),!0),o=Ml(Rl(e,"bottom")),a=JE(e,"x"),l=JE(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:Rl(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function ZE(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function oR(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function YW(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!xe(i)){n.size&&(t[i]-=n.size);const f=r[n.stack]||{size:0,count:1};f.size=Math.max(f.size,n.horizontal?s.height:s.width),n.size=f.size/f.count,t[i]+=n.size}s.getPadding&&oR(o,s.getPadding());const a=Math.max(0,e.outerWidth-ZE(o,t,"left","right")),l=Math.max(0,e.outerHeight-ZE(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function XW(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function JW(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function Xl(t,e,n,r){const i=[];let s,o,a,l,c,u;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,JW(a.horizontal,e));const{same:f,other:m}=YW(e,n,a,r);c|=f&&i.length,u=u||m,l.fullSize||i.push(a)}return c&&Xl(i,e,n,r)||u}function Wd(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function eT(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const f=e.w*u,m=c.size||l.height;Af(c.start)&&(o=c.start),l.fullSize?Wd(l,i.left,o,n.outerWidth-i.right-i.left,m):Wd(l,e.left+c.placed,o,f,m),c.start=o,c.placed+=f,o=l.bottom}else{const f=e.h*u,m=c.size||l.width;Af(c.start)&&(s=c.start),l.fullSize?Wd(l,s,i.top,m,n.outerHeight-i.bottom-i.top):Wd(l,s,e.top+c.placed,m,f),c.start=s,c.placed+=f,s=l.right}}e.x=s,e.y=o}var On={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=zn(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=QW(t.boxes),l=a.vertical,c=a.horizontal;Se(t.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const u=l.reduce((x,k)=>k.box.options&&k.box.options.display===!1?x:x+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),m=Object.assign({},i);oR(m,zn(r));const p=Object.assign({maxPadding:m,w:s,h:o,x:i.left,y:i.top},i),y=GW(l.concat(c),f);Xl(a.fullSize,p,f,y),Xl(l,p,f,y),Xl(c,p,f,y)&&Xl(l,p,f,y),XW(p),eT(a.leftAndTop,p,f,y),p.x+=p.w,p.y+=p.h,eT(a.rightAndBottom,p,f,y),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Se(a.chartArea,x=>{const k=x.box;Object.assign(k,t.chartArea),k.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class aR{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class ZW extends aR{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Th="$chartjs",eH={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},tT=t=>t===null||t==="";function tH(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[Th]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",tT(i)){const s=BE(t,"width");s!==void 0&&(t.width=s)}if(tT(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=BE(t,"height");s!==void 0&&(t.height=s)}return t}const lR=fW?{passive:!0}:!1;function nH(t,e,n){t&&t.addEventListener(e,n,lR)}function rH(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,lR)}function iH(t,e){const n=eH[t.type]||t.type,{x:r,y:i}=Ns(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function Mf(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function sH(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Mf(a.addedNodes,r),o=o&&!Mf(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function oH(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Mf(a.removedNodes,r),o=o&&!Mf(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const mu=new Map;let nT=0;function cR(){const t=window.devicePixelRatio;t!==nT&&(nT=t,mu.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function aH(t,e){mu.size||window.addEventListener("resize",cR),mu.set(t,e)}function lH(t){mu.delete(t),mu.size||window.removeEventListener("resize",cR)}function cH(t,e,n){const r=t.canvas,i=r&&kw(r);if(!i)return;const s=$N((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(i),aH(t,s),o}function fg(t,e,n){n&&n.disconnect(),e==="resize"&&lH(t)}function uH(t,e,n){const r=t.canvas,i=$N(s=>{t.ctx!==null&&n(iH(s,t))},t);return nH(r,e,i),i}class dH extends aR{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(tH(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[Th])return!1;const r=n[Th].initial;["height","width"].forEach(s=>{const o=r[s];Me(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[Th],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:sH,detach:oH,resize:cH}[n]||uH;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:fg,detach:fg,resize:fg}[n]||rH)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return hW(e,n,r,i)}isAttached(e){const n=e&&kw(e);return!!(n&&n.isConnected)}}function hH(t){return!_w()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?ZW:dH}var Yd;let ys=(Yd=class{constructor(){ee(this,"x");ee(this,"y");ee(this,"active",!1);ee(this,"options");ee(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return uu(this.x)&&uu(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}},ee(Yd,"defaults",{}),ee(Yd,"defaultRoutes"),Yd);function fH(t,e){const n=t.options.ticks,r=mH(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?gH(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return yH(e,c,s,o/i),c;const u=pH(s,e,i);if(o>0){let f,m;const p=o>1?Math.round((l-a)/(o-1)):null;for(Hd(e,c,u,Me(p)?0:a-p,a),f=0,m=o-1;f<m;f++)Hd(e,c,u,s[f],s[f+1]);return Hd(e,c,u,l,Me(p)?e.length:l+p),c}return Hd(e,c,u),c}function mH(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function pH(t,e,n){const r=vH(t),i=e.length/n;if(!r)return Math.max(i,1);const s=c$(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function gH(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function yH(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function Hd(t,e,n,r,i){const s=fe(r,0),o=Math.min(fe(i,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),u=s;u<0;)a++,u=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(s+a*n))}function vH(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const xH=t=>t==="left"?"right":t==="right"?"left":t,rT=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,iT=(t,e)=>Math.min(e||t,t);function sT(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function wH(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function bH(t,e){Se(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function Dl(t){return t.drawTicks?t.tickLength:0}function oT(t,e){if(!t.display)return 0;const n=Ft(t.font,e),r=zn(t.padding);return(ct(t.text)?t.text.length:1)*n.lineHeight+r.height}function _H(t,e){return So(t,{scale:e,type:"scale"})}function kH(t,e,n){return So(t,{tick:n,index:e,type:"tick"})}function EH(t,e,n){let r=pw(t);return(n&&e!=="right"||!n&&e==="right")&&(r=xH(r)),r}function TH(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let f=0,m,p,y;const x=o-i,k=a-s;if(t.isHorizontal()){if(p=Dt(r,s,a),xe(n)){const v=Object.keys(n)[0],w=n[v];y=u[v].getPixelForValue(w)+x-e}else n==="center"?y=(c.bottom+c.top)/2+x-e:y=rT(t,n,e);m=a-s}else{if(xe(n)){const v=Object.keys(n)[0],w=n[v];p=u[v].getPixelForValue(w)-k+e}else n==="center"?p=(c.left+c.right)/2-k+e:p=rT(t,n,e);y=Dt(r,o,i),f=n==="left"?-dt:dt}return{titleX:p,titleY:y,maxWidth:m,rotation:f}}class al extends ys{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=ar(e,Number.POSITIVE_INFINITY),n=ar(n,Number.NEGATIVE_INFINITY),r=ar(r,Number.POSITIVE_INFINITY),i=ar(i,Number.NEGATIVE_INFINITY),{min:ar(e,r),max:ar(n,i),minDefined:zt(e),maxDefined:zt(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:ar(n,ar(r,n)),max:ar(r,ar(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Oe(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=W$(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?sT(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=fH(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Oe(this.options.afterUpdate,[this])}beforeSetDimensions(){Oe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Oe(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Oe(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Oe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=Oe(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){Oe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Oe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=iT(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),f=u.widest.width,m=u.highest.height,p=Xt(this.chart.width-f,0,this.maxWidth);a=e.offset?this.maxWidth/r:p/(r-1),f+6>a&&(a=p/(r-(e.offset?.5:1)),l=this.maxHeight-Dl(e.grid)-n.padding-oT(e.title,this.chart.options.font),c=Math.sqrt(f*f+m*m),o=f$(Math.min(Math.asin(Xt((u.highest.height+6)/a,-1,1)),Math.asin(Xt(l/c,-1,1))-Math.asin(Xt(m/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Oe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Oe(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=oT(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=Dl(s)+l):(e.height=this.maxHeight,e.width=Dl(s)+l),r.display&&this.ticks.length){const{first:c,last:u,widest:f,highest:m}=this._getLabelSizes(),p=r.padding*2,y=qr(this.labelRotation),x=Math.cos(y),k=Math.sin(y);if(a){const v=r.mirror?0:k*f.width+x*m.height;e.height=Math.min(this.maxHeight,e.height+v+p)}else{const v=r.mirror?0:x*f.width+k*m.height;e.width=Math.min(this.maxWidth,e.width+v+p)}this._calculatePadding(c,u,k,x)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,p=0;l?c?(m=i*e.width,p=r*n.height):(m=r*e.height,p=i*n.width):s==="start"?p=n.width:s==="end"?m=e.width:s!=="inner"&&(m=e.width/2,p=n.width/2),this.paddingLeft=Math.max((m-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-f+o)*this.width/(this.width-f),0)}else{let u=n.height/2,f=e.height/2;s==="start"?(u=0,f=e.height):s==="end"&&(u=n.height,f=0),this.paddingTop=u+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Oe(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)Me(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=sT(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/iT(n,r));let c=0,u=0,f,m,p,y,x,k,v,w,_,P,A;for(f=0;f<n;f+=l){if(y=e[f].label,x=this._resolveTickFontOptions(f),i.font=k=x.string,v=s[k]=s[k]||{data:{},gc:[]},w=x.lineHeight,_=P=0,!Me(y)&&!ct(y))_=OE(i,v.data,v.gc,_,y),P=w;else if(ct(y))for(m=0,p=y.length;m<p;++m)A=y[m],!Me(A)&&!ct(A)&&(_=OE(i,v.data,v.gc,_,A),P+=w);o.push(_),a.push(P),c=Math.max(_,c),u=Math.max(P,u)}bH(s,n);const N=o.indexOf(c),T=a.indexOf(u),E=S=>({width:o[S]||0,height:a[S]||0});return{first:E(0),last:E(n-1),widest:E(N),highest:E(T),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return p$(this._alignToPixels?Ts(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=kH(this.getContext(),e,r))}return this.$context||(this.$context=_H(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=qr(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),f=this.ticks.length+(l?1:0),m=Dl(s),p=[],y=a.setContext(this.getContext()),x=y.display?y.width:0,k=x/2,v=function(X){return Ts(r,X,x)};let w,_,P,A,N,T,E,S,C,M,D,R;if(o==="top")w=v(this.bottom),T=this.bottom-m,S=w-k,M=v(e.top)+k,R=e.bottom;else if(o==="bottom")w=v(this.top),M=e.top,R=v(e.bottom)-k,T=w+k,S=this.top+m;else if(o==="left")w=v(this.right),N=this.right-m,E=w-k,C=v(e.left)+k,D=e.right;else if(o==="right")w=v(this.left),C=e.left,D=v(e.right)-k,N=w+k,E=this.left+m;else if(n==="x"){if(o==="center")w=v((e.top+e.bottom)/2+.5);else if(xe(o)){const X=Object.keys(o)[0],G=o[X];w=v(this.chart.scales[X].getPixelForValue(G))}M=e.top,R=e.bottom,T=w+k,S=T+m}else if(n==="y"){if(o==="center")w=v((e.left+e.right)/2);else if(xe(o)){const X=Object.keys(o)[0],G=o[X];w=v(this.chart.scales[X].getPixelForValue(G))}N=w-k,E=N-m,C=e.left,D=e.right}const ie=fe(i.ticks.maxTicksLimit,f),se=Math.max(1,Math.ceil(f/ie));for(_=0;_<f;_+=se){const X=this.getContext(_),G=s.setContext(X),F=a.setContext(X),$=G.lineWidth,K=G.color,de=F.dash||[],H=F.dashOffset,ne=G.tickWidth,ge=G.tickColor,Ae=G.tickBorderDash||[],Be=G.tickBorderDashOffset;P=wH(this,_,l),P!==void 0&&(A=Ts(r,P,$),c?N=E=C=D=A:T=S=M=R=A,p.push({tx1:N,ty1:T,tx2:E,ty2:S,x1:C,y1:M,x2:D,y2:R,width:$,color:K,borderDash:de,borderDashOffset:H,tickWidth:ne,tickColor:ge,tickBorderDash:Ae,tickBorderDashOffset:Be}))}return this._ticksLength=f,this._borderValue=w,p}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:f}=s,m=Dl(r.grid),p=m+u,y=f?-u:p,x=-qr(this.labelRotation),k=[];let v,w,_,P,A,N,T,E,S,C,M,D,R="middle";if(i==="top")N=this.bottom-y,T=this._getXAxisLabelAlignment();else if(i==="bottom")N=this.top+y,T=this._getXAxisLabelAlignment();else if(i==="left"){const se=this._getYAxisLabelAlignment(m);T=se.textAlign,A=se.x}else if(i==="right"){const se=this._getYAxisLabelAlignment(m);T=se.textAlign,A=se.x}else if(n==="x"){if(i==="center")N=(e.top+e.bottom)/2+p;else if(xe(i)){const se=Object.keys(i)[0],X=i[se];N=this.chart.scales[se].getPixelForValue(X)+p}T=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")A=(e.left+e.right)/2-p;else if(xe(i)){const se=Object.keys(i)[0],X=i[se];A=this.chart.scales[se].getPixelForValue(X)}T=this._getYAxisLabelAlignment(m).textAlign}n==="y"&&(l==="start"?R="top":l==="end"&&(R="bottom"));const ie=this._getLabelSizes();for(v=0,w=a.length;v<w;++v){_=a[v],P=_.label;const se=s.setContext(this.getContext(v));E=this.getPixelForTick(v)+s.labelOffset,S=this._resolveTickFontOptions(v),C=S.lineHeight,M=ct(P)?P.length:1;const X=M/2,G=se.color,F=se.textStrokeColor,$=se.textStrokeWidth;let K=T;o?(A=E,T==="inner"&&(v===w-1?K=this.options.reverse?"left":"right":v===0?K=this.options.reverse?"right":"left":K="center"),i==="top"?c==="near"||x!==0?D=-M*C+C/2:c==="center"?D=-ie.highest.height/2-X*C+C:D=-ie.highest.height+C/2:c==="near"||x!==0?D=C/2:c==="center"?D=ie.highest.height/2-X*C:D=ie.highest.height-M*C,f&&(D*=-1),x!==0&&!se.showLabelBackdrop&&(A+=C/2*Math.sin(x))):(N=E,D=(1-M)*C/2);let de;if(se.showLabelBackdrop){const H=zn(se.backdropPadding),ne=ie.heights[v],ge=ie.widths[v];let Ae=D-H.top,Be=0-H.left;switch(R){case"middle":Ae-=ne/2;break;case"bottom":Ae-=ne;break}switch(T){case"center":Be-=ge/2;break;case"right":Be-=ge;break;case"inner":v===w-1?Be-=ge:v>0&&(Be-=ge/2);break}de={left:Be,top:Ae,width:ge+H.width,height:ne+H.height,color:se.backdropColor}}k.push({label:P,font:S,textOffset:D,options:{rotation:x,color:G,strokeColor:F,strokeWidth:$,textAlign:K,textBaseline:R,translation:[A,N],backdrop:de}})}return k}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-qr(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,u;return n==="left"?i?(u=this.right+s,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?i?(u=this.left+s,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,f,m;this.isHorizontal()?(c=Ts(e,this.left,o)-o/2,u=Ts(e,this.right,a)+a/2,f=m=l):(f=Ts(e,this.top,o)-o/2,m=Ts(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,f),n.lineTo(u,m),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&Pm(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,u=o.textOffset;fu(r,c,0,u,l,a)}i&&Am(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=Ft(r.font),o=zn(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||xe(n)?(l+=o.bottom,ct(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:f,rotation:m}=TH(this,l,n,a);fu(e,r.text,0,0,s,{color:r.color,maxWidth:f,rotation:m,textAlign:EH(a,n,i),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=fe(e.grid&&e.grid.z,-1),i=fe(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==al.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Ft(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class qd{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;CH(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,SH(e,o,r),this.override&&tt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in tt[i]&&(delete tt[i][r],this.override&&delete vo[r])}}function SH(t,e,n){const r=lu(Object.create(null),[n?tt.get(n):{},tt.get(e),t.defaults]);tt.set(e,r),t.defaultRoutes&&IH(e,t.defaultRoutes),t.descriptors&&tt.describe(e,t.descriptors)}function IH(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");tt.route(s,i,l,a)})}function CH(t){return"id"in t&&"defaults"in t}class PH{constructor(){this.controllers=new qd(ma,"datasets",!0),this.elements=new qd(ys,"elements"),this.plugins=new qd(Object,"plugins"),this.scales=new qd(al,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):Se(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=fw(e);Oe(r["before"+i],[],r),n[e](r),Oe(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var ur=new PH;class AH{constructor(){this._init=void 0}notify(e,n,r,i){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(Oe(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){Me(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=fe(r.options&&r.options.plugins,{}),s=NH(r);return i===!1&&!n?[]:MH(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function NH(t){const e={},n=[],r=Object.keys(ur.plugins.items);for(let s=0;s<r.length;s++)n.push(ur.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function RH(t,e){return!e&&t===!1?null:t===!0?{}:t}function MH(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=RH(r[l],i);c!==null&&s.push({plugin:a,options:DH(t.config,{plugin:a,local:n[l]},c,o)})}return s}function DH(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function _y(t,e){const n=tt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function jH(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function OH(t,e){return t===e?"_index_":"_value_"}function aT(t){if(t==="x"||t==="y"||t==="r")return t}function LH(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function ky(t,...e){if(aT(t))return t;for(const n of e){const r=n.axis||LH(n.position)||t.length>1&&aT(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function lT(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function VH(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return lT(t,"x",n[0])||lT(t,"y",n[0])}return{}}function FH(t,e){const n=vo[t.type]||{scales:{}},r=e.scales||{},i=_y(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!xe(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=ky(o,a,VH(o,t),tt.scales[a.type]),c=OH(l,i),u=n.scales||{};s[o]=wc(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||_y(a,e),u=(vo[a]||{}).scales||{};Object.keys(u).forEach(f=>{const m=jH(f,l),p=o[m+"AxisID"]||m;s[p]=s[p]||Object.create(null),wc(s[p],[{axis:m},r[p],u[f]])})}),Object.keys(s).forEach(o=>{const a=s[o];wc(a,[tt.scales[a.type],tt.scale])}),s}function uR(t){const e=t.options||(t.options={});e.plugins=fe(e.plugins,{}),e.scales=FH(t,e)}function dR(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function UH(t){return t=t||{},t.data=dR(t.data),uR(t),t}const cT=new Map,hR=new Set;function Kd(t,e){let n=cT.get(t);return n||(n=e(),cT.set(t,n),hR.add(n)),n}const jl=(t,e,n)=>{const r=cu(e,n);r!==void 0&&t.add(r)};class BH{constructor(e){this._config=UH(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=dR(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),uR(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Kd(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Kd(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Kd(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return Kd(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(f=>jl(l,e,f))),u.forEach(f=>jl(l,i,f)),u.forEach(f=>jl(l,vo[s]||{},f)),u.forEach(f=>jl(l,tt,f)),u.forEach(f=>jl(l,xy,f))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),hR.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,vo[n]||{},tt.datasets[n]||{},{type:n},tt,xy]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=uT(this._resolverCache,e,i);let l=o;if($H(o,n)){s.$shared=!1,r=us(r)?r():r;const c=this.createResolver(e,r,a);l=qa(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,r=[""],i){const{resolver:s}=uT(this._resolverCache,e,r);return xe(n)?qa(s,n,void 0,i):s}}function uT(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:xw(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const zH=t=>xe(t)&&Object.getOwnPropertyNames(t).some(e=>us(t[e]));function $H(t,e){const{isScriptable:n,isIndexable:r}=qN(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(us(a)||zH(a))||o&&ct(a))return!0}return!1}var WH="4.5.1";const HH=["top","bottom","left","right","chartArea"];function dT(t,e){return t==="top"||t==="bottom"||HH.indexOf(t)===-1&&e==="x"}function hT(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function fT(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Oe(n&&n.onComplete,[t],e)}function qH(t){const e=t.chart,n=e.options.animation;Oe(n&&n.onProgress,[t],e)}function fR(t){return _w()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Sh={},mT=t=>{const e=fR(t);return Object.values(Sh).filter(n=>n.canvas===e).pop()};function KH(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function GH(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var gi;let Wu=(gi=class{static register(...e){ur.add(...e),pT()}static unregister(...e){ur.remove(...e),pT()}constructor(e,n){const r=this.config=new BH(n),i=fR(e),s=mT(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||hH(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=e$(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new AH,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=w$(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],Sh[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Rr.listen(this,"complete",fT),Rr.listen(this,"progress",qH),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return Me(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return ur}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():UE(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return LE(this.canvas,this.ctx),this}stop(){return Rr.stop(this),this}resize(e,n){Rr.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,UE(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Oe(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Se(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=ky(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Se(s,o=>{const a=o.options,l=a.id,c=ky(l,a),u=fe(a.type,o.dtype);(a.position===void 0||dT(a.position,c)!==dT(o.dposition))&&(a.position=o.dposition),i[l]=!0;let f=null;if(l in r&&r[l].type===u)f=r[l];else{const m=ur.getScale(u);f=new m({id:l,type:u,ctx:this.ctx,chart:this}),r[f.id]=f}f.init(a,e)}),Se(i,(o,a)=>{o||delete r[a]}),Se(r,o=>{On.configure(this,o,o.options),On.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(hT("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||_y(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=ur.getController(a),{datasetElementType:c,dataElementType:u}=tt.datasets[a];Object.assign(l,{dataElementType:ur.getElement(u),datasetElementType:c&&ur.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Se(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:f}=this.getDatasetMeta(c),m=!i&&s.indexOf(f)===-1;f.buildOrUpdateElements(m),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||Se(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(hT("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Se(this.scales,e=>{On.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!IE(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;KH(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!IE(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;On.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Se(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,us(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Rr.has(this)?this.attached&&!Rr.running(this)&&Rr.start(this):(this.draw(),fT({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},i=nR(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&Pm(n,i),e.controller.draw(),i&&Am(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return hu(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=HW.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=So(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);Af(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Rr.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),LE(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Sh[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};Se(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Se(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Se(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!Cf(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(f=>u.datasetIndex===f.datasetIndex&&u.index===f.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=o$(e),c=GH(e,this._lastEvent,r,l);r&&(this._lastEvent=null,Oe(s.onHover,[e,a,this],this),l&&Oe(s.onClick,[e,a,this],this));const u=!Cf(a,i);return(u||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,u}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}},ee(gi,"defaults",tt),ee(gi,"instances",Sh),ee(gi,"overrides",vo),ee(gi,"registry",ur),ee(gi,"version",WH),ee(gi,"getChart",mT),gi);function pT(){return Se(Wu.instances,t=>t._plugins.invalidate())}function QH(t,e,n){const{startAngle:r,x:i,y:s,outerRadius:o,innerRadius:a,options:l}=e,{borderWidth:c,borderJoinStyle:u}=l,f=Math.min(c/o,vn(r-n));if(t.beginPath(),t.arc(i,s,o-c/2,r+f/2,n-f/2),a>0){const m=Math.min(c/a,vn(r-n));t.arc(i,s,a+c/2,n-m/2,r+m/2,!0)}else{const m=Math.min(c/2,o*vn(r-n));if(u==="round")t.arc(i,s,m,n-Ie/2,r+Ie/2,!0);else if(u==="bevel"){const p=2*m*m,y=-p*Math.cos(n+Ie/2)+i,x=-p*Math.sin(n+Ie/2)+s,k=p*Math.cos(r+Ie/2)+i,v=p*Math.sin(r+Ie/2)+s;t.lineTo(y,x),t.lineTo(k,v)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function YH(t,e,n){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=i/a;t.beginPath(),t.arc(s,o,a,r-c,n+c),l>i?(c=i/l,t.arc(s,o,l,n+c,r-c,!0)):t.arc(s,o,i,n+dt,r-dt),t.closePath(),t.clip()}function XH(t){return vw(t,["outerStart","outerEnd","innerStart","innerEnd"])}function JH(t,e,n,r){const i=XH(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,r*e/2),a=l=>{const c=(n-Math.min(s,l))*r/2;return Xt(l,0,Math.min(s,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:Xt(i.innerStart,0,o),innerEnd:Xt(i.innerEnd,0,o)}}function Mo(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function Df(t,e,n,r,i,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,f=Math.max(e.outerRadius+r+n-c,0),m=u>0?u+r+n+c:0;let p=0;const y=i-l;if(r){const se=u>0?u-r:0,X=f>0?f-r:0,G=(se+X)/2,F=G!==0?y*G/(G+r):y;p=(y-F)/2}const x=Math.max(.001,y*f-n/Ie)/f,k=(y-x)/2,v=l+k+p,w=i-k-p,{outerStart:_,outerEnd:P,innerStart:A,innerEnd:N}=JH(e,m,f,w-v),T=f-_,E=f-P,S=v+_/T,C=w-P/E,M=m+A,D=m+N,R=v+A/M,ie=w-N/D;if(t.beginPath(),s){const se=(S+C)/2;if(t.arc(o,a,f,S,se),t.arc(o,a,f,se,C),P>0){const $=Mo(E,C,o,a);t.arc($.x,$.y,P,C,w+dt)}const X=Mo(D,w,o,a);if(t.lineTo(X.x,X.y),N>0){const $=Mo(D,ie,o,a);t.arc($.x,$.y,N,w+dt,ie+Math.PI)}const G=(w-N/m+(v+A/m))/2;if(t.arc(o,a,m,w-N/m,G,!0),t.arc(o,a,m,G,v+A/m,!0),A>0){const $=Mo(M,R,o,a);t.arc($.x,$.y,A,R+Math.PI,v-dt)}const F=Mo(T,v,o,a);if(t.lineTo(F.x,F.y),_>0){const $=Mo(T,S,o,a);t.arc($.x,$.y,_,v-dt,S)}}else{t.moveTo(o,a);const se=Math.cos(S)*f+o,X=Math.sin(S)*f+a;t.lineTo(se,X);const G=Math.cos(C)*f+o,F=Math.sin(C)*f+a;t.lineTo(G,F)}t.closePath()}function ZH(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){Df(t,e,n,r,l,i);for(let c=0;c<s;++c)t.fill();isNaN(a)||(l=o+(a%We||We))}return Df(t,e,n,r,l,i),t.fill(),l}function eq(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:f,borderDashOffset:m,borderRadius:p}=l,y=l.borderAlign==="inner";if(!c)return;t.setLineDash(f||[]),t.lineDashOffset=m,y?(t.lineWidth=c*2,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let x=e.endAngle;if(s){Df(t,e,n,r,x,i);for(let k=0;k<s;++k)t.stroke();isNaN(a)||(x=o+(a%We||We))}y&&YH(t,e,x),l.selfJoin&&x-o>=Ie&&p===0&&u!=="miter"&&QH(t,e,x),s||(Df(t,e,n,r,x,i),t.stroke())}class Jl extends ys{constructor(n){super();ee(this,"circumference");ee(this,"endAngle");ee(this,"fullCircles");ee(this,"innerRadius");ee(this,"outerRadius");ee(this,"pixelMargin");ee(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.getProps(["x","y"],i),{angle:o,distance:a}=UN(s,{x:n,y:r}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:f,circumference:m}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),p=(this.options.spacing+this.options.borderWidth)/2,y=fe(m,c-l),x=du(o,l,c)&&l!==c,k=y>=We||x,v=Us(a,u+p,f+p);return k&&v}getCenterPoint(n){const{x:r,y:i,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:u}=this.options,f=(s+o)/2,m=(a+l+u+c)/2;return{x:r+Math.cos(f)*m,y:i+Math.sin(f)*m}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:i}=this,s=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>We?Math.floor(i/We):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(Ie,i||0)),u=s*c;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,ZH(n,this,u,o,a),eq(n,this,u,o,a),n.restore()}}ee(Jl,"id","arc"),ee(Jl,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),ee(Jl,"defaultRoutes",{backgroundColor:"backgroundColor"}),ee(Jl,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function mR(t,e,n=e){t.lineCap=fe(n.borderCapStyle,e.borderCapStyle),t.setLineDash(fe(n.borderDash,e.borderDash)),t.lineDashOffset=fe(n.borderDashOffset,e.borderDashOffset),t.lineJoin=fe(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=fe(n.borderWidth,e.borderWidth),t.strokeStyle=fe(n.borderColor,e.borderColor)}function tq(t,e,n){t.lineTo(n.x,n.y)}function nq(t){return t.stepped?D$:t.tension||t.cubicInterpolationMode==="monotone"?j$:tq}function pR(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),u=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!u?r+c-l:c-l}}function rq(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=pR(i,n,r),u=nq(s);let{move:f=!0,reverse:m}=r||{},p,y,x;for(p=0;p<=c;++p)y=i[(a+(m?c-p:p))%o],!y.skip&&(f?(t.moveTo(y.x,y.y),f=!1):u(t,x,y,m,s.stepped),x=y);return l&&(y=i[(a+(m?c:0))%o],u(t,x,y,m,s.stepped)),!!l}function iq(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=pR(i,n,r),{move:l=!0,reverse:c}=r||{};let u=0,f=0,m,p,y,x,k,v;const w=P=>(o+(c?a-P:P))%s,_=()=>{x!==k&&(t.lineTo(u,k),t.lineTo(u,x),t.lineTo(u,v))};for(l&&(p=i[w(0)],t.moveTo(p.x,p.y)),m=0;m<=a;++m){if(p=i[w(m)],p.skip)continue;const P=p.x,A=p.y,N=P|0;N===y?(A<x?x=A:A>k&&(k=A),u=(f*u+P)/++f):(_(),t.lineTo(P,A),y=N,f=0,x=k=A),v=A}_()}function Ey(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?iq:rq}function sq(t){return t.stepped?mW:t.tension||t.cubicInterpolationMode==="monotone"?pW:Rs}function oq(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),mR(t,e.options),t.stroke(i)}function aq(t,e,n,r){const{segments:i,options:s}=e,o=Ey(e);for(const a of i)mR(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const lq=typeof Path2D=="function";function cq(t,e,n,r){lq&&!e.options.segment?oq(t,e,n,r):aq(t,e,n,r)}class Kr extends ys{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;oW(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=bW(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=tR(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=sq(r);let c,u;for(c=0,u=o.length;c<u;++c){const{start:f,end:m}=o[c],p=s[f],y=s[m];if(p===y){a.push(p);continue}const x=Math.abs((i-p[n])/(y[n]-p[n])),k=l(p,y,x,r.stepped);k[n]=e[n],a.push(k)}return a.length===1?a[0]:a}pathSegment(e,n,r){return Ey(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=Ey(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),cq(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ee(Kr,"id","line"),ee(Kr,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ee(Kr,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ee(Kr,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function gT(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class Tc extends ys{constructor(n){super();ee(this,"parsed");ee(this,"skip");ee(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return gT(this,n,"x",r)}inYRange(n,r){return gT(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!hu(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,wy(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}ee(Tc,"id","point"),ee(Tc,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ee(Tc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function uq(t,e,n){const r=t.segments,i=t.points,s=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=Mm(l,c,i);const u=Ty(n,i[l],i[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:i[l],end:i[c]});continue}const f=tR(e,u);for(const m of f){const p=Ty(n,s[m.start],s[m.end],m.loop),y=eR(a,i,p);for(const x of y)o.push({source:x,target:m,start:{[n]:yT(u,p,"start",Math.max)},end:{[n]:yT(u,p,"end",Math.min)}})}}return o}function Ty(t,e,n,r){if(r)return;let i=e[t],s=n[t];return t==="angle"&&(i=vn(i),s=vn(s)),{property:t,start:i,end:s}}function dq(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=Mm(o,a,i);const l=i[o],c=i[a];r!==null?(s.push({x:l.x,y:r}),s.push({x:c.x,y:r})):n!==null&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}function Mm(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function yT(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function gR(t,e){let n=[],r=!1;return ct(t)?(r=!0,n=t):n=dq(t,e),n.length?new Kr({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function vT(t){return t&&t.fill!==!1}function hq(t,e,n){let i=t[e].fill;const s=[e];let o;if(!n)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!zt(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function fq(t,e,n){const r=yq(t);if(xe(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return zt(i)&&Math.floor(i)===i?mq(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function mq(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function pq(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:xe(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function gq(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:xe(t)?r=t.value:r=e.getBaseValue(),r}function yq(t){const e=t.options,n=e.fill;let r=fe(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function vq(t){const{scale:e,index:n,line:r}=t,i=[],s=r.segments,o=r.points,a=xq(e,n);a.push(gR({x:null,y:e.bottom},r));for(let l=0;l<s.length;l++){const c=s[l];for(let u=c.start;u<=c.end;u++)wq(i,o[u],a)}return new Kr({points:i,options:{}})}function xq(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function wq(t,e,n){const r=[];for(let i=0;i<n.length;i++){const s=n[i],{first:o,last:a,point:l}=bq(s,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function bq(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const i=r[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const u=s[c],f=o[u.start][n],m=o[u.end][n];if(Us(i,f,m)){a=i===f,l=i===m;break}}return{first:a,last:l,point:r}}class yR{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:i,y:s,radius:o}=this;return n=n||{start:0,end:We},e.arc(i,s,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:i}=this,s=e.angle;return{x:n+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function _q(t){const{chart:e,fill:n,line:r}=t;if(zt(n))return kq(e,n);if(n==="stack")return vq(t);if(n==="shape")return!0;const i=Eq(t);return i instanceof yR?i:gR(i,r)}function kq(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function Eq(t){return(t.scale||{}).getPointPositionForValue?Sq(t):Tq(t)}function Tq(t){const{scale:e={},fill:n}=t,r=pq(n,e);if(zt(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function Sq(t){const{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=gq(n,e,s),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,s);return new yR({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(e.getPointPositionForValue(l,o));return a}function mg(t,e,n){const r=_q(e),{chart:i,index:s,line:o,scale:a,axis:l}=e,c=o.options,u=c.fill,f=c.backgroundColor,{above:m=f,below:p=f}=u||{},y=i.getDatasetMeta(s),x=nR(i,y);r&&o.points.length&&(Pm(t,n),Iq(t,{line:o,target:r,above:m,below:p,area:n,scale:a,axis:l,clip:x}),Am(t))}function Iq(t,e){const{line:n,target:r,above:i,below:s,area:o,scale:a,clip:l}=e,c=n._loop?"angle":e.axis;t.save();let u=s;s!==i&&(c==="x"?(xT(t,r,o.top),pg(t,{line:n,target:r,color:i,scale:a,property:c,clip:l}),t.restore(),t.save(),xT(t,r,o.bottom)):c==="y"&&(wT(t,r,o.left),pg(t,{line:n,target:r,color:s,scale:a,property:c,clip:l}),t.restore(),t.save(),wT(t,r,o.right),u=i)),pg(t,{line:n,target:r,color:u,scale:a,property:c,clip:l}),t.restore()}function xT(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=i[l],f=i[Mm(l,c,i)];s?(t.moveTo(u.x,u.y),s=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(f.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function wT(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=i[l],f=i[Mm(l,c,i)];s?(t.moveTo(u.x,u.y),s=!1):(t.lineTo(n,u.y),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(n,f.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function pg(t,e){const{line:n,target:r,property:i,color:s,scale:o,clip:a}=e,l=uq(n,r,i);for(const{source:c,target:u,start:f,end:m}of l){const{style:{backgroundColor:p=s}={}}=c,y=r!==!0;t.save(),t.fillStyle=p,Cq(t,o,a,y&&Ty(i,f,m)),t.beginPath();const x=!!n.pathSegment(t,c);let k;if(y){x?t.closePath():bT(t,r,m,i);const v=!!r.pathSegment(t,u,{move:x,reverse:!0});k=x&&v,k||bT(t,r,f,i)}t.closePath(),t.fill(k?"evenodd":"nonzero"),t.restore()}}function Cq(t,e,n,r){const i=e.chart.chartArea,{property:s,start:o,end:a}=r||{};if(s==="x"||s==="y"){let l,c,u,f;s==="x"?(l=o,c=i.top,u=a,f=i.bottom):(l=i.left,c=o,u=i.right,f=a),t.beginPath(),n&&(l=Math.max(l,n.left),u=Math.min(u,n.right),c=Math.max(c,n.top),f=Math.min(f,n.bottom)),t.rect(l,c,u-l,f-c),t.clip()}}function bT(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var vR={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let s,o,a,l;for(o=0;o<r;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof Kr&&(l={visible:t.isDatasetVisible(o),index:o,fill:fq(a,o,r),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,i.push(l);for(o=0;o<r;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=hq(i,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&mg(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;vT(s)&&mg(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!vT(r)||n.drawTime!=="beforeDatasetDraw"||mg(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const _T=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},Pq=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class kT extends ys{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Oe(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=Ft(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=_T(r,s);let c,u;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let f=e;s.textAlign="left",s.textBaseline="middle";let m=-1,p=-u;return this.legendItems.forEach((y,x)=>{const k=r+n/2+s.measureText(y.text).width;(x===0||c[c.length-1]+k+2*a>o)&&(f+=u,c[c.length-(x>0?0:1)]=0,p+=u,m++),l[x]={left:0,top:p,row:m,width:k,height:i},c[c.length-1]+=k+a}),f}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let f=a,m=0,p=0,y=0,x=0;return this.legendItems.forEach((k,v)=>{const{itemWidth:w,itemHeight:_}=Aq(r,n,s,k,i);v>0&&p+_+2*a>u&&(f+=m+a,c.push({width:m,height:p}),y+=m+a,x++,m=p=0),l[v]={left:y,top:p,col:x,width:w,height:_},m=Math.max(m,w),p+=_+a}),f+=m,c.push({width:m,height:p}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=fa(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Dt(r,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Dt(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=Dt(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Dt(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Pm(e,this),this._draw(),Am(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=tt.color,l=fa(e.rtl,this.left,this.width),c=Ft(o.font),{padding:u}=o,f=c.size,m=f/2;let p;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:y,boxHeight:x,itemHeight:k}=_T(o,f),v=function(N,T,E){if(isNaN(y)||y<=0||isNaN(x)||x<0)return;i.save();const S=fe(E.lineWidth,1);if(i.fillStyle=fe(E.fillStyle,a),i.lineCap=fe(E.lineCap,"butt"),i.lineDashOffset=fe(E.lineDashOffset,0),i.lineJoin=fe(E.lineJoin,"miter"),i.lineWidth=S,i.strokeStyle=fe(E.strokeStyle,a),i.setLineDash(fe(E.lineDash,[])),o.usePointStyle){const C={radius:x*Math.SQRT2/2,pointStyle:E.pointStyle,rotation:E.rotation,borderWidth:S},M=l.xPlus(N,y/2),D=T+m;HN(i,C,M,D,o.pointStyleWidth&&y)}else{const C=T+Math.max((f-x)/2,0),M=l.leftForLtr(N,y),D=Ec(E.borderRadius);i.beginPath(),Object.values(D).some(R=>R!==0)?by(i,{x:M,y:C,w:y,h:x,radius:D}):i.rect(M,C,y,x),i.fill(),S!==0&&i.stroke()}i.restore()},w=function(N,T,E){fu(i,E.text,N,T+k/2,c,{strikethrough:E.hidden,textAlign:l.textAlign(E.textAlign)})},_=this.isHorizontal(),P=this._computeTitleHeight();_?p={x:Dt(s,this.left+u,this.right-r[0]),y:this.top+u+P,line:0}:p={x:this.left+u,y:Dt(s,this.top+P+u,this.bottom-n[0].height),line:0},XN(this.ctx,e.textDirection);const A=k+u;this.legendItems.forEach((N,T)=>{i.strokeStyle=N.fontColor,i.fillStyle=N.fontColor;const E=i.measureText(N.text).width,S=l.textAlign(N.textAlign||(N.textAlign=o.textAlign)),C=y+m+E;let M=p.x,D=p.y;l.setWidth(this.width),_?T>0&&M+C+u>this.right&&(D=p.y+=A,p.line++,M=p.x=Dt(s,this.left+u,this.right-r[p.line])):T>0&&D+A>this.bottom&&(M=p.x=M+n[p.line].width+u,p.line++,D=p.y=Dt(s,this.top+P+u,this.bottom-n[p.line].height));const R=l.x(M);if(v(R,D,N),M=b$(S,M+y+m,_?M+C:this.right,e.rtl),w(l.x(M),D,N),_)p.x+=C+u;else if(typeof N.text!="string"){const ie=c.lineHeight;p.y+=xR(N,ie)+u}else p.y+=A}),JN(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=Ft(n.font),i=zn(n.padding);if(!n.display)return;const s=fa(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=i.top+l;let u,f=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),u=this.top+c,f=Dt(e.align,f,this.right-m);else{const y=this.columnSizes.reduce((x,k)=>Math.max(x,k.height),0);u=c+Dt(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}const p=Dt(a,f,f+m);o.textAlign=s.textAlign(pw(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,fu(o,n.text,p,u,r)}_computeTitleHeight(){const e=this.options.title,n=Ft(e.font),r=zn(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(Us(e,this.left,this.right)&&Us(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],Us(e,i.left,i.left+i.width)&&Us(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!Mq(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=Pq(i,r);i&&!s&&Oe(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&Oe(n.onHover,[e,r,this],this)}else r&&Oe(n.onClick,[e,r,this],this)}}function Aq(t,e,n,r,i){const s=Nq(r,t,e,n),o=Rq(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function Nq(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function Rq(t,e,n){let r=t;return typeof e.text!="string"&&(r=xR(e,n)),r}function xR(t,e){const n=t.text?t.text.length:0;return e*n}function Mq(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var wR={id:"legend",_element:kT,start(t,e,n){const r=t.legend=new kT({ctx:t.ctx,options:n,chart:t});On.configure(t,r,n),On.addBox(t,r)},stop(t){On.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;On.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=zn(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class bR extends ys{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=ct(r.text)?r.text.length:1;this._padding=zn(r.padding);const s=i*Ft(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,u,f;return this.isHorizontal()?(u=Dt(a,r,s),f=n+e,c=s-r):(o.position==="left"?(u=r+e,f=Dt(a,i,n),l=Ie*-.5):(u=s-e,f=Dt(a,n,i),l=Ie*.5),c=i-n),{titleX:u,titleY:f,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=Ft(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);fu(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:pw(n.align),textBaseline:"middle",translation:[o,a]})}}function Dq(t,e){const n=new bR({ctx:t.ctx,options:e,chart:t});On.configure(t,n,e),On.addBox(t,n),t.titleBlock=n}var jq={id:"title",_element:bR,start(t,e,n){Dq(t,n)},stop(t){const e=t.titleBlock;On.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;On.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Zl={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),i+=l.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=vy(e,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function lr(t,e){return e&&(ct(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Mr(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function Oq(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function ET(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=Ft(e.bodyFont),c=Ft(e.titleFont),u=Ft(e.footerFont),f=s.length,m=i.length,p=r.length,y=zn(e.padding);let x=y.height,k=0,v=r.reduce((P,A)=>P+A.before.length+A.lines.length+A.after.length,0);if(v+=t.beforeBody.length+t.afterBody.length,f&&(x+=f*c.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),v){const P=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;x+=p*P+(v-p)*l.lineHeight+(v-1)*e.bodySpacing}m&&(x+=e.footerMarginTop+m*u.lineHeight+(m-1)*e.footerSpacing);let w=0;const _=function(P){k=Math.max(k,n.measureText(P).width+w)};return n.save(),n.font=c.string,Se(t.title,_),n.font=l.string,Se(t.beforeBody.concat(t.afterBody),_),w=e.displayColors?o+2+e.boxPadding:0,Se(r,P=>{Se(P.before,_),Se(P.lines,_),Se(P.after,_)}),w=0,n.font=u.string,Se(t.footer,_),n.restore(),k+=y.width,{width:k,height:x}}function Lq(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function Vq(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function Fq(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),Vq(c,t,e,n)&&(c="center"),c}function TT(t,e,n){const r=n.yAlign||e.yAlign||Lq(t,n);return{xAlign:n.xAlign||e.xAlign||Fq(t,e,n,r),yAlign:r}}function Uq(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function Bq(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function ST(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:u,topRight:f,bottomLeft:m,bottomRight:p}=Ec(o);let y=Uq(e,a);const x=Bq(e,l,c);return l==="center"?a==="left"?y+=c:a==="right"&&(y-=c):a==="left"?y-=Math.max(u,m)+i:a==="right"&&(y+=Math.max(f,p)+i),{x:Xt(y,0,r.width-e.width),y:Xt(x,0,r.height-e.height)}}function Gd(t,e,n){const r=zn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function IT(t){return lr([],Mr(t))}function zq(t,e,n){return So(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function CT(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const _R={beforeTitle:Pr,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:Pr,beforeBody:Pr,beforeLabel:Pr,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Me(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Pr,afterBody:Pr,beforeFooter:Pr,footer:Pr,afterFooter:Pr};function rn(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?_R[e].call(n,r):i}class Sy extends ys{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new rR(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=zq(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=rn(r,"beforeTitle",this,e),s=rn(r,"title",this,e),o=rn(r,"afterTitle",this,e);let a=[];return a=lr(a,Mr(i)),a=lr(a,Mr(s)),a=lr(a,Mr(o)),a}getBeforeBody(e,n){return IT(rn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return Se(e,s=>{const o={before:[],lines:[],after:[]},a=CT(r,s);lr(o.before,Mr(rn(a,"beforeLabel",this,s))),lr(o.lines,rn(a,"label",this,s)),lr(o.after,Mr(rn(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return IT(rn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=rn(r,"beforeFooter",this,e),s=rn(r,"footer",this,e),o=rn(r,"afterFooter",this,e);let a=[];return a=lr(a,Mr(i)),a=lr(a,Mr(s)),a=lr(a,Mr(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(Oq(this.chart,n[l]));return e.filter&&(a=a.filter((u,f,m)=>e.filter(u,f,m,r))),e.itemSort&&(a=a.sort((u,f)=>e.itemSort(u,f,r))),Se(a,u=>{const f=CT(e.callbacks,u);i.push(rn(f,"labelColor",this,u)),s.push(rn(f,"labelPointStyle",this,u)),o.push(rn(f,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=Zl[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=ET(this,r),c=Object.assign({},a,l),u=TT(this.chart,r,c),f=ST(r,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:f}=Ec(a),{x:m,y:p}=e,{width:y,height:x}=n;let k,v,w,_,P,A;return s==="center"?(P=p+x/2,i==="left"?(k=m,v=k-o,_=P+o,A=P-o):(k=m+y,v=k+o,_=P-o,A=P+o),w=k):(i==="left"?v=m+Math.max(l,u)+o:i==="right"?v=m+y-Math.max(c,f)-o:v=this.caretX,s==="top"?(_=p,P=_-o,k=v-o,w=v+o):(_=p+x,P=_+o,k=v+o,w=v-o),A=_),{x1:k,x2:v,x3:w,y1:_,y2:P,y3:A}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=fa(r.rtl,this.x,this.width);for(e.x=Gd(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=Ft(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,u=Ft(s.bodyFont),f=Gd(this,"left",s),m=i.x(f),p=l<u.lineHeight?(u.lineHeight-l)/2:0,y=n.y+p;if(s.usePointStyle){const x={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},k=i.leftForLtr(m,c)+c/2,v=y+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,wy(e,x,k,v),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,wy(e,x,k,v)}else{e.lineWidth=xe(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const x=i.leftForLtr(m,c),k=i.leftForLtr(i.xPlus(m,1),c-2),v=Ec(o.borderRadius);Object.values(v).some(w=>w!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,by(e,{x,y,w:c,h:l,radius:v}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),by(e,{x:k,y:y+1,w:c-2,h:l-2,radius:v}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(x,y,c,l),e.strokeRect(x,y,c,l),e.fillStyle=o.backgroundColor,e.fillRect(k,y+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=r,f=Ft(r.bodyFont);let m=f.lineHeight,p=0;const y=fa(r.rtl,this.x,this.width),x=function(E){n.fillText(E,y.x(e.x+p),e.y+m/2),e.y+=m+s},k=y.textAlign(o);let v,w,_,P,A,N,T;for(n.textAlign=o,n.textBaseline="middle",n.font=f.string,e.x=Gd(this,k,r),n.fillStyle=r.bodyColor,Se(this.beforeBody,x),p=a&&k!=="right"?o==="center"?c/2+u:c+2+u:0,P=0,N=i.length;P<N;++P){for(v=i[P],w=this.labelTextColors[P],n.fillStyle=w,Se(v.before,x),_=v.lines,a&&_.length&&(this._drawColorBox(n,e,P,y,r),m=Math.max(f.lineHeight,l)),A=0,T=_.length;A<T;++A)x(_[A]),m=f.lineHeight;Se(v.after,x)}p=0,m=f.lineHeight,Se(this.afterBody,x),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=fa(r.rtl,this.x,this.width);for(e.x=Gd(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=Ft(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=r,{topLeft:f,topRight:m,bottomLeft:p,bottomRight:y}=Ec(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+f,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+c-m,l),n.quadraticCurveTo(a+c,l,a+c,l+m),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+c,l+u-y),n.quadraticCurveTo(a+c,l+u,a+c-y,l+u),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+p,l+u),n.quadraticCurveTo(a,l+u,a,l+u-p),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+f),n.quadraticCurveTo(a,l,a+f,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=Zl[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=ET(this,e),l=Object.assign({},o,this._size),c=TT(n,e,l),u=ST(e,l,c,n);(i._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=zn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),XN(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),JN(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!Cf(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!Cf(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=Zl[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}ee(Sy,"positioners",Zl);var kR={id:"tooltip",_element:Sy,positioners:Zl,afterInit(t,e,n){n&&(t.tooltip=new Sy({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:_R},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const $q=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function Wq(t,e,n,r){const i=t.indexOf(e);if(i===-1)return $q(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const Hq=(t,e)=>t===null?null:Xt(Math.round(t),0,e);function PT(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class jf extends al{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Me(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:Wq(r,e,fe(n,e),this._addedLabels),Hq(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return PT.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ee(jf,"id","category"),ee(jf,"defaults",{ticks:{callback:PT}});function qq(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:f,includeBounds:m}=t,p=s||1,y=u-1,{min:x,max:k}=e,v=!Me(o),w=!Me(a),_=!Me(c),P=(k-x)/(f+1);let A=PE((k-x)/y/p)*p,N,T,E,S;if(A<1e-14&&!v&&!w)return[{value:x},{value:k}];S=Math.ceil(k/A)-Math.floor(x/A),S>y&&(A=PE(S*A/y/p)*p),Me(l)||(N=Math.pow(10,l),A=Math.ceil(A*N)/N),i==="ticks"?(T=Math.floor(x/A)*A,E=Math.ceil(k/A)*A):(T=x,E=k),v&&w&&s&&d$((a-o)/s,A/1e3)?(S=Math.round(Math.min((a-o)/A,u)),A=(a-o)/S,T=o,E=a):_?(T=v?o:T,E=w?a:E,S=c-1,A=(E-T)/S):(S=(E-T)/A,bc(S,Math.round(S),A/1e3)?S=Math.round(S):S=Math.ceil(S));const C=Math.max(AE(A),AE(T));N=Math.pow(10,Me(l)?C:l),T=Math.round(T*N)/N,E=Math.round(E*N)/N;let M=0;for(v&&(m&&T!==o?(n.push({value:o}),T<o&&M++,bc(Math.round((T+M*A)*N)/N,o,AT(o,P,t))&&M++):T<o&&M++);M<S;++M){const D=Math.round((T+M*A)*N)/N;if(w&&D>a)break;n.push({value:D})}return w&&m&&E!==a?n.length&&bc(n[n.length-1].value,a,AT(a,P,t))?n[n.length-1].value=a:n.push({value:a}):(!w||E===a)&&n.push({value:E}),n}function AT(t,e,{horizontal:n,minRotation:r}){const i=qr(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class Kq extends al{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Me(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=Ha(i),c=Ha(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=qq(i,s);return e.bounds==="ticks"&&h$(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return yw(e,this.chart.options.locale,this.options.ticks.format)}}class Of extends Kq{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=zt(e)?e:0,this.max=zt(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=qr(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ee(Of,"id","linear"),ee(Of,"defaults",{ticks:{callback:WN.formatters.numeric}});const Dm={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},cn=Object.keys(Dm);function NT(t,e){return t-e}function RT(t,e){if(Me(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),zt(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(uu(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function MT(t,e,n,r){const i=cn.length;for(let s=cn.indexOf(t);s<i-1;++s){const o=Dm[cn[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return cn[s]}return cn[i-1]}function Gq(t,e,n,r,i){for(let s=cn.length-1;s>=cn.indexOf(n);s--){const o=cn[s];if(Dm[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return cn[n?cn.indexOf(n):0]}function Qq(t){for(let e=cn.indexOf(t)+1,n=cn.length;e<n;++e)if(Dm[cn[e]].common)return cn[e]}function DT(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=mw(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function Yq(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function jT(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:Yq(t,r,i,n)}class Lf extends al{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new UW._date(e.adapters.date);i.init(n),wc(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:RT(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=zt(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=zt(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=y$(i,s,o);return this._unit=n.unit||(r.autoSkip?MT(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):Gq(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:Qq(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),jT(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Xt(n,0,o),r=Xt(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||MT(s.minUnit,n,r,this._getLabelCapacity(n)),a=fe(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=uu(l)||l===!0,u={};let f=n,m,p;if(c&&(f=+e.startOf(f,"isoWeek",l)),f=+e.startOf(f,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const y=i.ticks.source==="data"&&this.getDataTimestamps();for(m=f,p=0;m<r;m=+e.add(m,a,o),p++)DT(u,m,y);return(m===r||i.bounds==="ticks"||p===1)&&DT(u,m,y),Object.keys(u).sort(NT).map(x=>+x)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return Oe(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],f=c&&a[c],m=r[n],p=c&&f&&m&&m.major;return this._adapter.format(e,i||(p?f:u))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=qr(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,jT(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(RT(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return x$(e.sort(NT))}}ee(Lf,"id","time"),ee(Lf,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Qd(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=Bs(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=Bs(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class OT extends Lf{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Qd(n,this.min),this._tableRange=Qd(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],l=i[o-1],c=i[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Qd(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return Qd(this._table,r*this._tableRange+this._minPos,!0)}}ee(OT,"id","timeseries"),ee(OT,"defaults",Lf.defaults);const ER="label";function LT(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function Xq(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function TR(t,e){t.labels=e}function SR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ER;const r=[];t.datasets=e.map(i=>{const s=t.datasets.find(o=>o[n]===i[n]);return!s||!i.data||r.includes(s)?{...i}:(r.push(s),Object.assign(s,i),s)})}function Jq(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ER;const n={labels:[],datasets:[]};return TR(n,t.labels),SR(n,t.datasets,e),n}function Zq(t,e){const{height:n=150,width:r=300,redraw:i=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:f,...m}=t,p=O.useRef(null),y=O.useRef(null),x=()=>{p.current&&(y.current=new Wu(p.current,{type:o,data:Jq(a,s),options:l&&{...l},plugins:c}),LT(e,y.current))},k=()=>{LT(e,null),y.current&&(y.current.destroy(),y.current=null)};return O.useEffect(()=>{!i&&y.current&&l&&Xq(y.current,l)},[i,l]),O.useEffect(()=>{!i&&y.current&&TR(y.current.config.data,a.labels)},[i,a.labels]),O.useEffect(()=>{!i&&y.current&&a.datasets&&SR(y.current.config.data,a.datasets,s)},[i,a.datasets]),O.useEffect(()=>{y.current&&(i?(k(),setTimeout(x)):y.current.update(f))},[i,l,a.labels,a.datasets,f]),O.useEffect(()=>{y.current&&(k(),setTimeout(x))},[o]),O.useEffect(()=>(x(),()=>k()),[]),Zn.createElement("canvas",{ref:p,role:"img",height:n,width:r,...m},u)}const eK=O.forwardRef(Zq);function IR(t,e){return Wu.register(e),O.forwardRef((n,r)=>Zn.createElement(eK,{...n,ref:r,type:t}))}const CR=IR("line",Eh),tK=IR("doughnut",Yl);Wu.register(jf,Of,Tc,Kr,vR,kR,wR);function PR({labels:t,datasets:e,weightData:n,units:r="metric"}){const i=lw(r),s={labels:n?n.map(a=>a.week):t,datasets:n?[{label:`Weight (${i})`,data:n.map(a=>a.weight),borderColor:"rgba(34, 197, 94, 1)",backgroundColor:"rgba(34, 197, 94, 0.15)",tension:.4,fill:!0,pointBackgroundColor:"rgba(34, 197, 94, 1)",pointBorderColor:"#fff",pointBorderWidth:2,pointRadius:6,pointHoverRadius:8}]:e??[{label:"Exercise",data:t.map((a,l)=>Math.round(Math.sin(l/4)*10+20)),borderColor:"rgba(59,130,246,1)",backgroundColor:"rgba(59,130,246,0.15)",tension:.4,fill:!0},{label:"Meals",data:t.map((a,l)=>Math.round(Math.cos(l/6)*8+14)),borderColor:"rgba(239,68,68,1)",backgroundColor:"rgba(239,68,68,0.12)",tension:.4,fill:!0},{label:"Sleep",data:t.map((a,l)=>Math.round(6+Math.abs(Math.sin(l/8))*2)),borderColor:"rgba(16,185,129,1)",backgroundColor:"rgba(16,185,129,0.12)",tension:.4,fill:!0}]},o={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{color:n?"#22c55e":void 0,font:{size:12,weight:"bold"}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",borderColor:"#22c55e",borderWidth:1,callbacks:n?{label:function(a){return`Weight: ${a.parsed.y} ${i}`}}:void 0}},scales:{x:{grid:{display:!1},ticks:{maxTicksLimit:12},title:{display:!!n,text:n?"Week of 3 Months":void 0,color:"#666",font:{size:12}}},y:{grid:{color:"rgba(0,0,0,0.05)"},title:{display:!!n,text:n?`Weight (${i})`:void 0,color:"#666",font:{size:12}},ticks:n?{callback:function(a){return a+` ${i}`},stepSize:5,min:20,max:void 0}:void 0,min:n?20:void 0}}};return h.jsx("div",{className:"bg-card rounded-xl p-4 shadow-sm aspect-[4/3]",children:h.jsx("div",{className:"h-full",children:h.jsx(CR,{data:s,options:o})})})}function nK({onClose:t,labels:e,weightData:n,onUpdateWeight:r,currentWeight:i,isUpdating:s=!1,isSuccess:o=!1,units:a="metric"}){const[l,c]=O.useState("");O.useEffect(()=>{o&&c("")},[o]);const u=async m=>{if(m.preventDefault(),!l||l.trim().length===0){alert("Please enter a weight value");return}const p=parseFloat(l);if(isNaN(p)){alert("Please enter a valid number");return}if(p<=0){alert("Weight must be greater than 0");return}if(p>1e3){alert("Weight must be less than 1000 kg");return}if(!r){console.error("onUpdateWeight callback is not provided");return}if(!s)try{await r(p)}catch(y){console.error("Failed to update weight:",y);const x=(y==null?void 0:y.message)||"Failed to update weight. Please try again.";alert(x)}},f=m=>{m.stopPropagation()};return h.jsx("div",{className:"fixed inset-0 bg-black/95 z-50 flex items-center justify-center",onClick:t,children:h.jsxs("div",{className:"bg-card rounded-xl p-6 shadow-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto",onClick:f,children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h2",{className:"text-2xl font-bold",children:"Weight Progress"}),h.jsx("button",{onClick:t,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Close"})]}),h.jsx("div",{className:"mt-4 text-sm text-gray-100 dark:text-gray-300 mb-4",children:"Track your weight progress over the last 3 months. Update your weight to see real-time changes in your chart."}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[h.jsx("div",{className:"lg:col-span-1 space-y-4",children:r&&h.jsxs("div",{className:"p-4 bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-xl border border-green-200 dark:border-green-800",children:[h.jsx("h4",{className:"text-lg font-semibold text-green-800 dark:text-green-200 mb-3",children:"Update Weight"}),h.jsxs("div",{className:"mb-2",children:[h.jsx("span",{className:"text-sm text-green-700 dark:text-green-300",children:"Current Weight: "}),h.jsxs("span",{className:"font-bold text-green-800 dark:text-green-200",children:[i||"N/A"," kg"]})]}),h.jsxs("form",{onSubmit:u,className:"space-y-3",children:[h.jsx("div",{children:h.jsx("input",{type:"number",step:"0.1",min:"0",className:"w-full px-3 py-2 border border-green-300 dark:border-green-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Enter new weight (kg)",value:l,onChange:m=>c(m.target.value),disabled:s})}),h.jsx(Z.button,{type:"submit",disabled:s||!l,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-semibold rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Updating...":o?"✓ Updated!":"Update Weight"})]})]})}),h.jsx("div",{className:"lg:col-span-2 h-[60vh]",children:h.jsx(PR,{labels:e,weightData:n,units:a})})]})]})})}const Ol=({title:t,icon:e,children:n})=>h.jsxs(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20 dark:border-gray-700/50",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[h.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:e}),h.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:t})]}),n]}),Mt=({label:t,description:e,children:n,warning:r})=>h.jsx("div",{className:`p-4 rounded-xl border transition-all duration-200 ${r?"border-orange-200 dark:border-orange-800 bg-orange-50/50 dark:bg-orange-900/20":"border-gray-200 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-900/20"}`,children:h.jsxs("div",{className:"flex items-start justify-between gap-4",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:t}),e&&h.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:e})]}),h.jsx("div",{className:"flex-shrink-0",children:n})]})});function rK(){const{user:t,logout:e}=pn(),n=$n(),r=aw(),[i,s]=O.useState(!1),[o,a]=O.useState(!1),[l,c]=O.useState(""),[u,f]=O.useState(""),[m,p]=O.useState(""),[y,x]=O.useState(!1),{data:k}=Qt({queryKey:["user","profile",t==null?void 0:t.uid],queryFn:()=>ou(t.uid),enabled:!!(t!=null&&t.uid)}),v=k||t,w=_n({mutationFn:N=>Tm(t.uid,N),onSuccess:()=>{n.invalidateQueries({queryKey:["user","profile",t==null?void 0:t.uid]}),alert("Settings updated successfully!")}}),_=async()=>{if(t!=null&&t.uid)try{const[N,T,E,S]=await Promise.all([zu.getLogs(t.uid),gy.getHistory(t.uid),cw(t.uid),Cm(t.uid)]),C={profile:v,workoutLogs:N,weightHistory:T,goals:E,schedule:S,exportDate:new Date().toISOString(),version:"1.0"},M=new Blob([JSON.stringify(C,null,2)],{type:"application/json"}),D=URL.createObjectURL(M),R=document.createElement("a");R.href=D,R.download=`myfitness-data-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(R),R.click(),document.body.removeChild(R),URL.revokeObjectURL(D),alert("Data exported successfully!")}catch(N){console.error("Export failed:",N),alert("Failed to export data. Please try again.")}},P=async()=>{if(t!=null&&t.uid)try{alert("Account deletion is not implemented yet. Please contact support."),s(!1)}catch(N){console.error("Delete account failed:",N),alert("Failed to delete account. Please try again.")}},A=async()=>{if(u!==m){alert("New passwords do not match!");return}if(u.length<6){alert("Password must be at least 6 characters long!");return}try{alert("Password change is not implemented yet. Please use Firebase Auth directly."),a(!1),c(""),f(""),p("")}catch(N){console.error("Password change failed:",N),alert("Failed to change password. Please try again.")}};return h.jsxs("div",{className:"min-h-screen gradient-modern-light dark:gradient-modern-dark",children:[h.jsxs("div",{className:"max-w-4xl mx-auto py-8 px-6",children:[h.jsx(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-8",children:h.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[h.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:h.jsx(rP,{className:"w-6 h-6 text-white"})}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-4xl font-black bg-gradient-to-r from-slate-900 via-blue-900 to-indigo-900 dark:from-white dark:via-blue-100 dark:to-indigo-100 bg-clip-text text-transparent",children:"Settings"}),h.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 mt-2 font-medium",children:"Manage your account preferences and app settings"})]})]})}),h.jsxs("div",{className:"space-y-8",children:[h.jsx(Ol,{title:"Account",icon:h.jsx(im,{className:"w-5 h-5 text-white"}),children:h.jsxs("div",{className:"space-y-4",children:[h.jsx(Mt,{label:"Email Address",description:"Your account email address",children:h.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 font-mono",children:(v==null?void 0:v.email)||"Not set"})}),h.jsx(Mt,{label:"Display Name",description:"Your public display name",children:h.jsx("input",{type:"text",value:(v==null?void 0:v.name)||"",onChange:N=>w.mutate({name:N.target.value}),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your name"})}),h.jsx(Mt,{label:"Change Password",description:"Update your account password",children:h.jsx("button",{onClick:()=>a(!0),className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors duration-200",children:"Change Password"})}),h.jsx(Mt,{label:"Account Deletion",description:"Permanently delete your account and all data",warning:!0,children:h.jsxs("button",{onClick:()=>s(!0),className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors duration-200 flex items-center gap-2",children:[h.jsx(Kp,{className:"w-4 h-4"}),"Delete Account"]})})]})}),h.jsx(Ol,{title:"Privacy & Security",icon:h.jsx(V6,{className:"w-5 h-5 text-white"}),children:h.jsxs("div",{className:"space-y-4",children:[h.jsx(Mt,{label:"Profile Visibility",description:"Control who can see your profile information",children:h.jsxs("select",{value:r.privacy,onChange:N=>r.setPrivacy(N.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[h.jsx("option",{value:"private",children:"Private"}),h.jsx("option",{value:"friends",children:"Friends Only"}),h.jsx("option",{value:"public",children:"Public"})]})}),h.jsx(Mt,{label:"Data Sharing",description:"Allow anonymous usage data to improve the app",children:h.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[h.jsx("input",{type:"checkbox",checked:r.dataSharing,onChange:N=>r.setDataSharing(N.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),h.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Enable data sharing"})]})}),h.jsx(Mt,{label:"Activity Tracking",description:"Track your workout activities and progress",children:h.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[h.jsx("input",{type:"checkbox",checked:r.activityTracking,onChange:N=>r.setActivityTracking(N.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),h.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Enable activity tracking"})]})})]})}),h.jsx(Ol,{title:"Notifications",icon:h.jsx(l6,{className:"w-5 h-5 text-white"}),children:h.jsxs("div",{className:"space-y-4",children:[h.jsx(Mt,{label:"Workout Reminders",description:"Get notified about scheduled workouts",children:h.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[h.jsx("input",{type:"checkbox",checked:r.notifications.workoutReminders,onChange:N=>r.setNotifications({workoutReminders:N.target.checked}),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),h.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Enable reminders"})]})}),h.jsx(Mt,{label:"Goal Achievements",description:"Celebrate when you reach your fitness goals",children:h.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[h.jsx("input",{type:"checkbox",checked:r.notifications.goalAchievements,onChange:N=>r.setNotifications({goalAchievements:N.target.checked}),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),h.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Enable achievement notifications"})]})}),h.jsx(Mt,{label:"Weekly Progress",description:"Receive weekly progress summaries",children:h.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[h.jsx("input",{type:"checkbox",checked:r.notifications.weeklyProgress,onChange:N=>r.setNotifications({weeklyProgress:N.target.checked}),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),h.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Enable weekly summaries"})]})})]})}),h.jsx(Ol,{title:"App Preferences",icon:h.jsx(I6,{className:"w-5 h-5 text-white"}),children:h.jsxs("div",{className:"space-y-4",children:[h.jsx(Mt,{label:"Theme",description:"Choose your preferred color theme",children:h.jsxs("select",{value:r.theme,onChange:N=>r.setTheme(N.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[h.jsx("option",{value:"light",children:"Light"}),h.jsx("option",{value:"dark",children:"Dark"}),h.jsx("option",{value:"system",children:"System"})]})}),h.jsx(Mt,{label:"Units",description:"Choose your preferred measurement units",children:h.jsxs("select",{value:r.units,onChange:N=>r.setUnits(N.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[h.jsx("option",{value:"metric",children:"Metric (kg, cm)"}),h.jsx("option",{value:"imperial",children:"Imperial (lbs, ft)"})]})}),h.jsx(Mt,{label:"Language",description:"Select your preferred language",children:h.jsxs("select",{value:r.language,onChange:N=>r.setLanguage(N.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[h.jsx("option",{value:"en",children:"English"}),h.jsx("option",{value:"es",children:"Español"}),h.jsx("option",{value:"fr",children:"Français"}),h.jsx("option",{value:"de",children:"Deutsch"})]})})]})}),h.jsx(Ol,{title:"Data Management",icon:h.jsx(i1,{className:"w-5 h-5 text-white"}),children:h.jsxs("div",{className:"space-y-4",children:[h.jsx(Mt,{label:"Export Data",description:"Download all your fitness data as a JSON file",children:h.jsxs("button",{onClick:_,className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors duration-200 flex items-center gap-2",children:[h.jsx(i1,{className:"w-4 h-4"}),"Export Data"]})}),h.jsx(Mt,{label:"Import Data",description:"Import fitness data from a JSON file",children:h.jsxs("button",{onClick:()=>{alert("Data import is not implemented yet.")},className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors duration-200 flex items-center gap-2",children:[h.jsx(G6,{className:"w-4 h-4"}),"Import Data"]})}),h.jsx(Mt,{label:"Clear All Data",description:"Remove all your workout logs, goals, and progress data",warning:!0,children:h.jsxs("button",{onClick:()=>{confirm("Are you sure you want to clear all your data? This action cannot be undone.")&&alert("Data clearing is not implemented yet.")},className:"px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg transition-colors duration-200 flex items-center gap-2",children:[h.jsx(Kp,{className:"w-4 h-4"}),"Clear Data"]})})]})})]})]}),o&&h.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[h.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>a(!1)}),h.jsxs(Z.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},className:"relative bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-2xl w-full max-w-md border border-white/20 dark:border-gray-700/50",children:[h.jsx("h3",{className:"text-2xl font-bold mb-6 text-gray-900 dark:text-gray-100",children:"Change Password"}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Password"}),h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:y?"text":"password",value:l,onChange:N=>c(N.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-10"}),h.jsx("button",{type:"button",onClick:()=>x(!y),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:y?h.jsx(of,{className:"w-4 h-4"}):h.jsx(af,{className:"w-4 h-4"})})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Password"}),h.jsx("input",{type:y?"text":"password",value:u,onChange:N=>f(N.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm New Password"}),h.jsx("input",{type:y?"text":"password",value:m,onChange:N=>p(N.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),h.jsxs("div",{className:"flex gap-3 mt-6",children:[h.jsx("button",{onClick:()=>a(!1),className:"flex-1 px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg transition-colors duration-200",children:"Cancel"}),h.jsxs("button",{onClick:A,className:"flex-1 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors duration-200 flex items-center justify-center gap-2",children:[h.jsx(nP,{className:"w-4 h-4"}),"Save Changes"]})]})]})]}),i&&h.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[h.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>s(!1)}),h.jsxs(Z.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},className:"relative bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-2xl w-full max-w-md border border-white/20 dark:border-gray-700/50",children:[h.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[h.jsx("div",{className:"w-12 h-12 rounded-xl bg-red-500 flex items-center justify-center",children:h.jsx(iP,{className:"w-6 h-6 text-white"})}),h.jsx("h3",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:"Delete Account"})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Are you sure you want to delete your account? This action cannot be undone and will permanently remove:"}),h.jsxs("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1 ml-4",children:[h.jsx("li",{children:"• All your workout logs and progress"}),h.jsx("li",{children:"• Your goals and achievements"}),h.jsx("li",{children:"• Your schedule and preferences"}),h.jsx("li",{children:"• Your profile information"})]}),h.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:h.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 font-medium",children:"⚠️ This action is permanent and cannot be reversed."})})]}),h.jsxs("div",{className:"flex gap-3 mt-6",children:[h.jsx("button",{onClick:()=>s(!1),className:"flex-1 px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg transition-colors duration-200",children:"Cancel"}),h.jsxs("button",{onClick:P,className:"flex-1 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors duration-200 flex items-center justify-center gap-2",children:[h.jsx(Kp,{className:"w-4 h-4"}),"Delete Account"]})]})]})]})]})}const iK={low:{bg:"bg-blue-50 dark:bg-blue-900/20",text:"text-blue-600 dark:text-blue-400",border:"border-blue-200 dark:border-blue-800"},medium:{bg:"bg-yellow-50 dark:bg-yellow-900/20",text:"text-yellow-600 dark:text-yellow-400",border:"border-yellow-200 dark:border-yellow-800"},high:{bg:"bg-red-50 dark:bg-red-900/20",text:"text-red-600 dark:text-red-400",border:"border-red-200 dark:border-red-800"}};function sK(){const{user:t}=pn(),e=$n(),[n,r]=O.useState("all"),[i,s]=O.useState(""),{data:o=[],isLoading:a}=Qt({queryKey:["workouts","logs",t==null?void 0:t.uid],queryFn:()=>zu.getLogs(t.uid),enabled:!!(t!=null&&t.uid),staleTime:0,refetchOnMount:"always",refetchOnWindowFocus:!0});O.useEffect(()=>{t!=null&&t.uid&&e.refetchQueries({queryKey:["workouts","logs",t.uid]})},[t==null?void 0:t.uid,e]);const l=m=>{for(const p of ts){const y=p.exercises.find(x=>x.id===m);if(y)return y.name}return"Unknown Exercise"},c=m=>{for(const p of ts){const y=p.exercises.find(x=>x.id===m);if(y)return y.imageUrl}return null},u=O.useMemo(()=>{let m=o;return n!=="all"&&(m=m.filter(p=>p.intensity===n)),i&&(m=m.filter(p=>l(p.exerciseId).toLowerCase().includes(i.toLowerCase()))),m.sort((p,y)=>{const x=new Date(p.date).getTime();return new Date(y.date).getTime()-x})},[o,n,i]),f=O.useMemo(()=>{const m=o.length,p=o.reduce((v,w)=>v+w.durationMinutes,0),y=o.reduce((v,w)=>v+w.caloriesBurned,0),x=o.length>0?o.reduce((v,w)=>{const _=w.intensity==="low"?1:w.intensity==="medium"?2:3;return v+_},0)/o.length:0,k=x<1.5?"Low":x<2.5?"Medium":"High";return{totalWorkouts:m,totalMinutes:Math.round(p),totalCalories:y,avgIntensity:k}},[o]);return a?h.jsx("div",{className:"flex items-center justify-center py-12",children:h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):h.jsxs("div",{className:"space-y-6",children:[h.jsx("div",{className:"flex items-center justify-between",children:h.jsxs("div",{children:[h.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Workout Logs"}),h.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"View all your completed workout sessions"})]})}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[h.jsxs(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 p-4 rounded-xl border border-blue-200/50 dark:border-blue-700/50",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx(Yi,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),h.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400 font-medium",children:"Total Workouts"})]}),h.jsx("div",{className:"text-3xl font-bold text-blue-700 dark:text-blue-300",children:f.totalWorkouts})]}),h.jsxs(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/30 dark:to-purple-800/30 p-4 rounded-xl border border-purple-200/50 dark:border-purple-700/50",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx(Yc,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),h.jsx("div",{className:"text-sm text-purple-600 dark:text-purple-400 font-medium",children:"Total Minutes"})]}),h.jsx("div",{className:"text-3xl font-bold text-purple-700 dark:text-purple-300",children:f.totalMinutes})]}),h.jsxs(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/30 dark:to-orange-800/30 p-4 rounded-xl border border-orange-200/50 dark:border-orange-700/50",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx(lf,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"}),h.jsx("div",{className:"text-sm text-orange-600 dark:text-orange-400 font-medium",children:"Total Calories"})]}),h.jsx("div",{className:"text-3xl font-bold text-orange-700 dark:text-orange-300",children:f.totalCalories})]}),h.jsxs(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-800/30 p-4 rounded-xl border border-green-200/50 dark:border-green-700/50",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx(Yi,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),h.jsx("div",{className:"text-sm text-green-600 dark:text-green-400 font-medium",children:"Avg Intensity"})]}),h.jsx("div",{className:"text-3xl font-bold text-green-700 dark:text-green-300",children:f.avgIntensity})]})]}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[h.jsx("div",{className:"flex-1",children:h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:"text",placeholder:"Search workouts by exercise name...",value:i,onChange:m=>s(m.target.value),className:"w-full px-4 py-2 pl-10 rounded-xl border-2 border-gray-300 dark:border-gray-600 bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:border-blue-500 transition-all duration-300"}),h.jsx("svg",{className:"absolute left-3 top-2.5 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(x6,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),h.jsxs("select",{value:n,onChange:m=>r(m.target.value),className:"px-4 py-2 rounded-xl border-2 border-gray-300 dark:border-gray-600 bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:border-blue-500 transition-all duration-300",children:[h.jsx("option",{value:"all",children:"All Intensities"}),h.jsx("option",{value:"low",children:"Low Intensity"}),h.jsx("option",{value:"medium",children:"Medium Intensity"}),h.jsx("option",{value:"high",children:"High Intensity"})]})]})]}),h.jsx("div",{className:"space-y-4",children:u.length===0?h.jsxs("div",{className:"text-center py-12 bg-white/50 dark:bg-gray-800/50 rounded-2xl border border-gray-200 dark:border-gray-700",children:[h.jsx(Yi,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),h.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg font-medium",children:o.length===0?"No workouts logged yet":"No workouts match your filters"}),h.jsx("p",{className:"text-gray-500 dark:text-gray-500 text-sm mt-2",children:o.length===0?"Complete a timer workout to see it here!":"Try adjusting your search or filter"})]}):u.map((m,p)=>{const y=l(m.exerciseId),x=c(m.exerciseId),k=iK[m.intensity],w=new Date(m.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"});return h.jsx(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:p*.05},className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-xl p-6 shadow-lg border border-gray-200/50 dark:border-gray-700/50 hover:shadow-xl transition-all duration-200",children:h.jsxs("div",{className:"flex items-start gap-4",children:[x&&h.jsx("div",{className:"flex-shrink-0",children:h.jsx("img",{src:x,alt:y,className:"w-20 h-20 rounded-xl object-cover border-2 border-gray-200 dark:border-gray-700"})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-start justify-between gap-4 mb-2",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-1",children:y}),h.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600 dark:text-gray-400",children:[h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx(sf,{className:"w-4 h-4"}),h.jsx("span",{children:w})]}),h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx(Yc,{className:"w-4 h-4"}),h.jsxs("span",{children:[m.durationMinutes.toFixed(1)," mins"]})]}),h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx(lf,{className:"w-4 h-4"}),h.jsxs("span",{children:[m.caloriesBurned," kcal"]})]})]})]}),h.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-semibold ${k.bg} ${k.text} border ${k.border}`,children:m.intensity.charAt(0).toUpperCase()+m.intensity.slice(1)})]}),m.notes&&h.jsx("div",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400 italic bg-gray-50 dark:bg-gray-900/50 rounded-lg p-2",children:m.notes})]})]})},m.id)})})]})}Wu.register(jf,Of,Tc,Kr,jq,kR,vR,wR,Jl);const oK=t=>{const e=[];for(let n=t-1;n>=0;n--){const r=new Date;r.setDate(r.getDate()-n),e.push(r.toLocaleDateString("en-US",{month:"short",day:"numeric"}))}return e},VT={cardio:{bg:"bg-blue-100 dark:bg-blue-900/30",text:"text-blue-700 dark:text-blue-300"},strength:{bg:"bg-red-100 dark:bg-red-900/30",text:"text-red-700 dark:text-red-300"},stretching:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-700 dark:text-green-300"},full_body:{bg:"bg-purple-100 dark:bg-purple-900/30",text:"text-purple-700 dark:text-purple-300"}},gg={low:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-700 dark:text-green-300",ring:"ring-green-500/20"},medium:{bg:"bg-yellow-100 dark:bg-yellow-900/30",text:"text-yellow-700 dark:text-yellow-300",ring:"ring-yellow-500/20"},high:{bg:"bg-red-100 dark:bg-red-900/30",text:"text-red-700 dark:text-red-300",ring:"ring-red-500/20"}};function aK({open:t,title:e,progress:n,data:r,isExercise:i,onClose:s,onOpenGif:o}){if(!t)return null;const a=n?Math.round(n.value/Math.max(1,n.total)*100):0,l=oK(7),c=Zn.useMemo(()=>{if(!i||!r)return null;const y=r.map(k=>({...k,exercise:bI.find(v=>v.id===k.exerciseId)})),x=y.reduce((k,v)=>{var _;const w=((_=v.exercise)==null?void 0:_.category)||"other";return k[w]=(k[w]||0)+(v.durationMinutes??0),k},{});return{logs:y,categories:x}},[r,i]),[u,f]=Zn.useState(null);Zn.useEffect(()=>{var y,x;c&&c.logs.length>0&&((x=(y=c.logs[0])==null?void 0:y.exercise)!=null&&x.id)?f(c.logs[0].exercise.id):f(null)},[c]);const m={labels:l,datasets:[{label:e,data:i?l.map(y=>(r.filter(k=>(k.date??"").includes(y.split(" ")[1]??""))||[]).reduce((k,v)=>k+(v.durationMinutes??0),0)):(r==null?void 0:r.slice(-7).map(y=>y.value))??l.map(()=>Math.round(Math.random()*50+50)),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.3,fill:!0}]},p={responsive:!0,maintainAspectRatio:!1,animation:{duration:750,easing:"easeInOutQuart"},plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1,backgroundColor:"rgb(17 24 39 / 0.8)",titleColor:"rgb(243 244 246)",bodyColor:"rgb(243 244 246)",borderColor:"rgb(75 85 99)",borderWidth:1}},scales:{y:{beginAtZero:!1,grid:{color:"rgba(107, 114, 128, 0.1)"},ticks:{color:"#666",font:{size:11}}},x:{grid:{display:!1},ticks:{color:"#666",font:{size:11}}}}};return h.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[h.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:s}),h.jsxs(Z.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.25},className:"relative z-10 w-full max-w-lg bg-white dark:bg-neutral-800 rounded-xl p-6 shadow-lg max-h-[90vh] overflow-y-auto",children:[h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-black dark:text-white",children:e}),h.jsx("div",{className:"text-sm text-muted-foreground",children:"Detailed progress"})]}),h.jsx("button",{onClick:s,className:"text-muted-foreground hover:text-black dark:hover:text-white",children:"✕"})]}),i&&c&&(()=>{var x,k;const y=c.logs??[];return h.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-sm text-muted-foreground",children:"Exercises"}),h.jsxs("div",{className:"text-2xl font-bold",children:[y.length," Workouts"]})]}),h.jsx("div",{className:"w-28 h-28 rounded-xl overflow-hidden bg-gray-100 dark:bg-gray-900 flex items-center justify-center",children:u?h.jsx("img",{src:(k=(x=y.find(v=>{var w;return((w=v.exercise)==null?void 0:w.id)===u}))==null?void 0:x.exercise)==null?void 0:k.imageUrl,alt:"exercise gif",className:"w-full h-full object-cover"}):h.jsx("div",{className:"text-sm text-muted-foreground",children:"No image"})})]}),h.jsx("div",{className:"grid grid-cols-3 gap-3",children:y.map(v=>{var w,_,P,A;return h.jsx("button",{onClick:()=>{var T,E;const N=((T=v.exercise)==null?void 0:T.id)??null;N&&o?o(N):f(((E=v.exercise)==null?void 0:E.id)??null)},className:`rounded-lg overflow-hidden border ${u===((w=v.exercise)==null?void 0:w.id)?"ring-2 ring-blue-400":"border-transparent"}`,title:`${(_=v.exercise)==null?void 0:_.name} • ${v.durationMinutes} mins`,children:h.jsx("img",{src:(P=v.exercise)==null?void 0:P.imageUrl,alt:(A=v.exercise)==null?void 0:A.name,className:"w-full h-20 object-cover"})},v.id)})})]})})(),h.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-6",children:[h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsxs("div",{className:"w-28 h-28 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-2xl font-bold",children:[a,"%"]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm text-muted-foreground",children:"Progress"}),h.jsxs("div",{className:"text-xl font-semibold",children:[(n==null?void 0:n.value)??0,"/",(n==null?void 0:n.total)??0]}),h.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:n!=null&&n.total&&(n!=null&&n.value)?`${n.total-n.value} remaining`:"No target set"})]})]}),i&&c&&h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{className:"space-y-4",children:[h.jsx("h4",{className:"font-medium",children:"Exercise Categories"}),h.jsx("div",{className:"space-y-2",children:Object.entries(c.categories).map(([y,x])=>{var k,v;return h.jsxs("div",{className:`flex items-center justify-between p-2 rounded-lg ${((k=VT[y])==null?void 0:k.bg)||"bg-gray-100"}`,children:[h.jsx("span",{className:`capitalize ${((v=VT[y])==null?void 0:v.text)||"text-gray-700"}`,children:y}),h.jsxs("span",{className:"font-medium",children:[x,"min"]})]},y)})})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("h4",{className:"font-medium",children:"Exercise Distribution"}),h.jsx("div",{className:"h-48",children:h.jsx(tK,{data:{labels:Object.keys(c.categories).map(y=>y.charAt(0).toUpperCase()+y.slice(1)),datasets:[{data:Object.values(c.categories),backgroundColor:["#3B82F6","#EF4444","#10B981","#8B5CF6"],borderWidth:0}]},options:{plugins:{legend:{position:"bottom",labels:{boxWidth:10,padding:10}}}}})})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("h4",{className:"font-medium",children:"Progress History"}),h.jsxs("select",{className:"text-sm bg-transparent border-gray-200 dark:border-gray-700 rounded-md",children:[h.jsx("option",{children:"Last 7 days"}),h.jsx("option",{children:"Last 30 days"}),h.jsx("option",{children:"Last 3 months"})]})]}),h.jsx("div",{className:"h-64",children:h.jsx(CR,{data:m,options:p})})]}),i&&c?(()=>{const y=c.logs??[],x=y.reduce((v,w)=>v+(w.caloriesBurned??0),0),k=y.length?Math.round(y.reduce((v,w)=>v+(w.durationMinutes??0),0)/y.length):0;return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[h.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 p-4 rounded-lg text-center",children:[h.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Total Calories"}),h.jsx("div",{className:"text-2xl font-bold",children:x}),h.jsx("div",{className:"text-sm text-muted-foreground",children:"kcal burned"})]}),h.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 p-4 rounded-lg text-center",children:[h.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Avg. Duration"}),h.jsx("div",{className:"text-2xl font-bold",children:k}),h.jsx("div",{className:"text-sm text-muted-foreground",children:"mins/session"})]}),h.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 p-4 rounded-lg text-center",children:[h.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Intensity Split"}),h.jsx("div",{className:"flex justify-center items-center gap-1 mt-2",children:["low","medium","high"].map(v=>{var _;const w=y.filter(P=>P.intensity===v).length;return h.jsx("div",{className:`h-8 w-3 rounded-full ${((_=gg[v])==null?void 0:_.bg)||"bg-gray-300"} ${w>0?"opacity-100":"opacity-30"}`,style:{height:`${y!=null&&y.length?w/y.length*32:0}px`}},v)})})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("h4",{className:"font-medium",children:"Recent Workouts"}),h.jsx("div",{className:"space-y-3",children:y.slice(0,3).map(v=>{var w,_,P,A,N;return h.jsx("div",{className:"bg-gray-50 dark:bg-gray-900/50 p-4 rounded-lg",children:h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{className:"space-y-1",children:[h.jsx("div",{className:"font-medium",children:((w=v.exercise)==null?void 0:w.name)||"Unknown Exercise"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${((_=gg[v.intensity])==null?void 0:_.bg)||"bg-gray-300"} ${((P=gg[v.intensity])==null?void 0:P.text)||"text-gray-700"}`,children:((A=v.intensity)==null?void 0:A.charAt(0).toUpperCase())+(((N=v.intensity)==null?void 0:N.slice(1))??"")}),h.jsx("span",{className:"text-sm text-muted-foreground",children:v.date?new Date(v.date).toLocaleDateString():"Unknown date"})]})]}),h.jsxs("div",{className:"text-right space-y-1",children:[h.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[h.jsxs("span",{className:"font-medium",children:[v.durationMinutes," mins"]}),h.jsx("span",{className:"text-sm text-muted-foreground",children:"•"}),h.jsxs("span",{className:"font-medium",children:[v.caloriesBurned," kcal"]})]}),v.notes&&h.jsx("div",{className:"text-sm text-muted-foreground italic",children:v.notes})]})]})},v.id)})})]})]})})():h.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[h.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 p-3 rounded-lg",children:[h.jsx("div",{className:"text-sm text-muted-foreground",children:"Average"}),h.jsx("div",{className:"font-semibold mt-1",children:r?Math.round(r.reduce((y,x)=>y+x.value,0)/r.length):"-"})]}),h.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 p-3 rounded-lg",children:[h.jsx("div",{className:"text-sm text-muted-foreground",children:"Best"}),h.jsx("div",{className:"font-semibold mt-1",children:r?Math.max(...r.map(y=>y.value)):"-"})]}),h.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 p-3 rounded-lg",children:[h.jsx("div",{className:"text-sm text-muted-foreground",children:"Recent"}),h.jsx("div",{className:"font-semibold mt-1",children:r?r[r.length-1].value:"-"})]})]})]})]})]})}const Ar=[{text:"The only bad workout is the one that didn't happen.",author:"Unknown"},{text:"It's not about being the best. It's about being better than you were yesterday.",author:"Unknown"},{text:"Your body can stand almost anything. It's your mind that you have to convince.",author:"Unknown"},{text:"The hard days are the best because that's when champions are made.",author:"Gabrielle Reece"},{text:"Don't wish for it. Work for it.",author:"Unknown"},{text:"Push yourself because no one else is going to do it for you.",author:"Unknown"},{text:"The only way to do great work is to love what you do.",author:"Steve Jobs"},{text:"Success is the sum of small efforts repeated day in and day out.",author:"Robert Collier"},{text:"The pain you feel today will be the strength you feel tomorrow.",author:"Unknown"},{text:"Motivation gets you started. Habit keeps you going.",author:"Jim Ryun"},{text:"Strength does not come from physical capacity. It comes from an indomitable will.",author:"Mahatma Gandhi"},{text:"Take care of your body. It's the only place you have to live.",author:"Jim Rohn"},{text:"The difference between try and triumph is just a little umph!",author:"Unknown"},{text:"If you want something you've never had, you must be willing to do something you've never done.",author:"Unknown"},{text:"The secret of getting ahead is getting started.",author:"Mark Twain"},{text:"You don't have to be great to start, but you have to start to be great.",author:"Zig Ziglar"},{text:"Fall seven times, stand up eight.",author:"Japanese Proverb"},{text:"Do something today that your future self will thank you for.",author:"Unknown"},{text:"Excellence is not a skill, it's an attitude.",author:"Ralph Marston"},{text:"The only person you should try to be better than is the person you were yesterday.",author:"Unknown"}];function ta(){const[t,e]=O.useState(0);O.useEffect(()=>{if(!Ar||Ar.length===0){console.error("MotivationCard: No quotes available");return}const r=setInterval(()=>{e(i=>{let s,o=0;do if(s=Math.floor(Math.random()*Ar.length),o++,o>100)break;while(s===i&&Ar.length>1);return s<0||s>=Ar.length?0:s})},8e3);try{const i=Math.floor(Math.random()*Ar.length);i>=0&&i<Ar.length&&e(i)}catch(i){console.error("MotivationCard: Error setting initial quote:",i),e(0)}return()=>clearInterval(r)},[]);const n=Ar[t]||Ar[0]||{text:"Stay strong and keep pushing!",author:"Unknown"};return h.jsxs(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"bg-gradient-to-br from-orange-400 to-pink-600 rounded-2xl p-6 text-white relative overflow-hidden",children:[h.jsx("svg",{className:"h-8 w-8 text-orange-200 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),h.jsx(Xv,{mode:"wait",children:h.jsxs(Z.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.5},children:[h.jsxs("blockquote",{className:"text-xl font-medium min-h-[3rem]",children:['"',n.text,'"']}),h.jsxs("p",{className:"mt-2 text-orange-200",children:["— ",n.author]})]},t)})]})}function lK({goals:t}){const e=t.filter(i=>{const s=i.current/i.target*100;return s>0&&s<100}).length,n=t.filter(i=>i.current/i.target*100>=100).length,r=t.length>0?Math.round(t.reduce((i,s)=>i+Math.min(100,s.current/s.target*100),0)/t.length):0;return h.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20 dark:border-gray-700/50 space-y-6",children:[h.jsx("div",{className:"text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Goal Insights"}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 p-4 rounded-xl border border-blue-200/50 dark:border-blue-700/50",children:[h.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400 font-medium",children:"Goals in progress"}),h.jsx("div",{className:"text-3xl font-bold text-blue-700 dark:text-blue-300 mt-2",children:e})]}),h.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-800/30 p-4 rounded-xl border border-green-200/50 dark:border-green-700/50",children:[h.jsx("div",{className:"text-sm text-green-600 dark:text-green-400 font-medium",children:"Completed goals"}),h.jsx("div",{className:"text-3xl font-bold text-green-700 dark:text-green-300 mt-2",children:n})]}),h.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 dark:from-purple-900/30 dark:to-purple-800/30 p-4 rounded-xl border border-purple-200/50 dark:border-purple-700/50",children:[h.jsx("div",{className:"text-sm text-purple-600 dark:text-purple-400 font-medium",children:"Average completion"}),h.jsxs("div",{className:"text-3xl font-bold text-purple-700 dark:text-purple-300 mt-2",children:[r,"%"]})]})]})]})}function cK({schedule:t,onCreateSchedule:e,onEditSchedule:n,onDeleteSchedule:r,isDeleting:i}){return h.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20 dark:border-gray-700/50 space-y-6",children:[h.jsx("div",{className:"text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Schedule Actions"}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("button",{onClick:e,className:"w-full rounded-xl px-4 py-3 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-medium transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:"Create Schedule"}),h.jsx("button",{onClick:n,className:"w-full rounded-xl px-4 py-3 bg-white/80 dark:bg-gray-700/80 hover:bg-white dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 font-medium transition-all duration-200 border border-gray-200 dark:border-gray-600",children:"Edit Schedule"}),h.jsx("button",{onClick:r,disabled:!t||i,className:"w-full rounded-xl px-4 py-3 bg-red-500/10 hover:bg-red-500/20 text-red-600 dark:text-red-400 font-medium transition-all duration-200 border border-red-200 dark:border-red-800 disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Deleting...":"Delete Schedule"})]})]})}function uK({currentUser:t}){const n=(()=>{if(!(t!=null&&t.weightKg)||!(t!=null&&t.heightCm)||t.weightKg<=0||t.heightCm<=0)return null;const s=t.heightCm/100;return(t.weightKg/(s*s)).toFixed(1)})(),i=(()=>{if(!n)return null;const s=parseFloat(n);return s<18.5?{status:"Underweight",color:"blue",bg:"from-blue-50 to-cyan-100",text:"text-blue-600",border:"border-blue-200"}:s<25?{status:"Normal",color:"green",bg:"from-green-50 to-emerald-100",text:"text-green-600",border:"border-green-200"}:s<30?{status:"Overweight",color:"yellow",bg:"from-yellow-50 to-amber-100",text:"text-yellow-600",border:"border-yellow-200"}:{status:"Obese",color:"red",bg:"from-red-50 to-orange-100",text:"text-red-600",border:"border-red-200"}})();return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20 dark:border-gray-700/50 space-y-6",children:[h.jsx("div",{className:"text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Account Details"}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 p-4 rounded-xl border border-blue-200/50 dark:border-blue-700/50",children:[h.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400 font-medium",children:"Member Since"}),h.jsx("div",{className:"text-2xl font-bold text-blue-700 dark:text-blue-300 mt-2",children:new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"})})]}),h.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-800/30 p-4 rounded-xl border border-green-200/50 dark:border-green-700/50",children:[h.jsx("div",{className:"text-sm text-green-600 dark:text-green-400 font-medium",children:"Last Active"}),h.jsx("div",{className:"text-2xl font-bold text-green-700 dark:text-green-300 mt-2",children:"Today"})]}),!n||!i?h.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-900/30 dark:to-gray-800/30 p-4 rounded-xl border border-gray-200/50 dark:border-gray-700/50",children:[h.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 font-medium",children:"Health Status"}),h.jsx("div",{className:"text-lg font-bold text-gray-700 dark:text-gray-300 mt-2",children:"Complete profile to see BMI"})]}):h.jsxs("div",{className:`bg-gradient-to-r ${i.bg} dark:from-${i.color}-900/30 dark:to-${i.color}-800/30 p-4 rounded-xl border ${i.border} dark:border-${i.color}-700/50`,children:[h.jsx("div",{className:`text-sm ${i.text} dark:text-${i.color}-400 font-medium`,children:"Health Status"}),h.jsx("div",{className:`text-2xl font-bold ${i.text} dark:text-${i.color}-300 mt-2`,children:i.status}),h.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2",children:["BMI: ",n]})]})]})]}),h.jsx(ta,{})]})}function dK({title:t,weekLine:e,onNav:n}){return h.jsx("div",{className:"max-w-7xl mx-auto px-6 py-6",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{className:"flex items-center space-x-8",children:h.jsx(Z.h1,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"text-5xl font-black tracking-tight bg-gradient-to-r from-slate-900 via-blue-900 to-indigo-900 dark:from-white dark:via-blue-100 dark:to-indigo-100 bg-clip-text text-transparent",children:t})}),h.jsxs("div",{className:"flex items-center gap-6",children:[e&&h.jsx(Z.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.4},className:"text-sm font-semibold text-gray-700 dark:text-gray-300 bg-gray-50 dark:bg-gray-800 px-4 py-2.5 rounded-2xl border border-gray-200 dark:border-gray-700",children:e}),n&&h.jsxs(Z.button,{initial:{opacity:0,scale:.9,y:-5},animate:{opacity:1,scale:1,y:0},transition:{delay:.3,duration:.4,ease:"easeOut"},whileHover:{scale:1.05,boxShadow:"0 20px 40px -12px rgba(99, 102, 241, 0.5)"},whileTap:{scale:.97},onClick:r=>{r.preventDefault(),n==null||n("exercises")},className:"group relative px-7 py-4 rounded-2xl bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 hover:from-blue-500 hover:via-indigo-500 hover:to-purple-500 text-white font-bold text-base tracking-wide transition-all duration-300 shadow-2xl hover:shadow-indigo-500/50 border border-white/20 overflow-hidden",children:[h.jsx(Z.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent",initial:{x:"-100%"},whileHover:{x:"200%"},transition:{duration:.6,ease:"easeInOut"}}),h.jsxs("div",{className:"relative flex items-center gap-2.5",children:[h.jsx(Z.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0,repeatDelay:3,ease:"easeInOut"},children:h.jsx($6,{className:"w-5 h-5",strokeWidth:2.5})}),h.jsx("span",{className:"relative z-10",children:"Exercise with Timer"}),h.jsx(Z.div,{initial:{x:-4,opacity:0},animate:{x:0,opacity:1},transition:{delay:.5},whileHover:{x:2},children:h.jsx(P6,{className:"w-4 h-4",strokeWidth:3})})]})]})]})]})})}function AR({exercise:t,onClose:e}){const{user:n}=pn(),r=$n(),[i,s]=O.useState(1),[o,a]=O.useState(0),[l,c]=O.useState(!1),u=O.useRef(null),f=O.useRef(0),m=O.useRef(0),p=O.useRef(!1),y=O.useRef(!1),[x,k]=O.useState(!1),[v,w]=O.useState(!1),[_,P]=O.useState(1),[A,N]=O.useState(!1),[T,E]=O.useState({x:0,y:0}),[S,C]=O.useState({x:0,y:0}),M=_n({mutationFn:async H=>{if(!(n!=null&&n.uid))throw new Error("User not authenticated");return zu.logWorkout(n.uid,{exerciseId:H.exerciseId,durationMinutes:Math.round(H.durationMinutes*10)/10,intensity:H.intensity,caloriesBurned:H.caloriesBurned,date:H.date,notes:H.notes||`Workout session: ${H.exerciseName} completed via timer`})},onSuccess:async(H,ne)=>{if(H&&Array.isArray(H)&&r.setQueryData(["workouts","logs",n==null?void 0:n.uid],H),await r.invalidateQueries({queryKey:["workouts","logs",n==null?void 0:n.uid]}),await r.invalidateQueries({queryKey:["achievements",n==null?void 0:n.uid]}),n!=null&&n.uid){const{logUserActivity:ge}=await Xn(async()=>{const{logUserActivity:Ae}=await Promise.resolve().then(()=>dr);return{logUserActivity:Ae}},void 0);ge(n.uid,{type:"workout_completed",metadata:{exerciseId:ne.exerciseId,exerciseName:ne.exerciseName,durationMinutes:ne.durationMinutes,caloriesBurned:ne.caloriesBurned,intensity:ne.intensity}})}k(!0),setTimeout(()=>{k(!1)},3e3)},onError:H=>{console.error("Failed to log workout:",H),p.current=!1}});O.useEffect(()=>(l?u.current=setInterval(()=>{a(H=>{if(H>0)return H-1;{let ne=0,ge=!1;return s(Ae=>Ae>0?(ne=59,Ae-1):(console.log("✅ Timer countdown finished - reached 0:00 inside interval"),ne=0,ge=!0,0)),ge&&(u.current&&(clearInterval(u.current),u.current=null),c(!1),w(!0),console.log("✅ Timer completion state set")),ne}})},1e3):u.current&&(clearInterval(u.current),u.current=null),()=>{u.current&&(clearInterval(u.current),u.current=null)}),[l]),O.useEffect(()=>{!l&&i===0&&o===0&&!v&&!y.current&&f.current>0&&(console.log("✅ Timer reached 0:00 via state check - triggering completion"),w(!0))},[l,i,o,v]),O.useEffect(()=>{!l&&i===0&&o===0&&console.log("🔍 Timer reached 0:00 - state check",{timerCompleted:v,hasLoggedWorkout:p.current,wasPaused:y.current,hasUser:!!(n!=null&&n.uid),initialMinutes:f.current,initialSeconds:m.current,exercise:t.name})},[l,i,o,v,t.name,n==null?void 0:n.uid]),O.useEffect(()=>{if(console.log("🔍 timerCompleted effect triggered",{timerCompleted:v,hasLoggedWorkout:p.current,wasPaused:y.current,hasUser:!!(n!=null&&n.uid),initialMinutes:f.current,initialSeconds:m.current}),v&&!p.current&&!y.current&&(n!=null&&n.uid)){const H=f.current>0||f.current===0&&m.current>0;if(console.log("🔍 Checking conditions for logging",{hasInitialValue:H}),H){p.current=!0,console.log("✅ Timer completed (via timerCompleted state) - logging workout",{initialMinutes:f.current,initialSeconds:m.current,exercise:t.name});const ne=f.current+m.current/60;let ge="low";ne>=30?ge="high":ne>=15&&(ge="medium");const Be=Math.round(ne*(ge==="high"?10:ge==="medium"?9:8)),Sn=new Date().toISOString().split("T")[0],jm=new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});console.log("Attempting to log workout:",{exerciseId:t.id,exerciseName:t.name,durationMinutes:ne,date:Sn,intensity:ge,caloriesBurned:Be}),M.mutate({exerciseId:t.id,exerciseName:t.name,durationMinutes:ne,date:Sn,intensity:ge,caloriesBurned:Be,notes:`Workout session: ${t.name} completed via timer at ${jm}`})}else console.warn("⚠️ Timer completed but no initial values captured - cannot log workout")}},[v,t,n==null?void 0:n.uid,M]);const D=()=>{f.current===0&&m.current===0?(f.current=i,m.current=o,console.log("✅ Fresh timer start - captured initial values",{minutes:i,seconds:o,exercise:t.name}),y.current=!1):i===f.current&&o===m.current?(console.log("✅ Starting after reset with same initial values - will log on completion"),y.current=!1):(console.log("⚠️ Resuming timer after pause - will NOT log on completion"),y.current=!0),p.current=!1,w(!1),k(!1),c(!0)},R=()=>{c(!1),y.current=!0,console.log("Timer paused/stopped - will not log on completion")},ie=()=>{c(!1),s(1),a(0),p.current=!1,y.current=!1,w(!1),k(!1),console.log("Timer reset - initial values preserved:",{initialMinutes:f.current,initialSeconds:m.current})},se=()=>{P(H=>Math.min(H+.25,3))},X=()=>{P(H=>Math.max(H-.25,.5))},G=()=>{P(1),C({x:0,y:0})},F=H=>{_>1&&H.preventDefault();const ne=H.deltaY>0?-.1:.1;P(ge=>Math.max(.5,Math.min(3,ge+ne)))},$=H=>{_>1&&(N(!0),E({x:H.clientX-S.x,y:H.clientY-S.y}))},K=H=>{A&&_>1&&C({x:H.clientX-T.x,y:H.clientY-T.y})},de=()=>{N(!1)};return h.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 overflow-y-auto",children:[h.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:e}),h.jsxs(Z.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.25},className:"relative z-10 bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto border border-white/20 dark:border-gray-700/50 my-4",children:[h.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors","aria-label":"Close modal",children:h.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),h.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-6",children:t.name}),h.jsxs("div",{className:"relative bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 rounded-xl overflow-hidden mb-4 max-h-[50vh] border border-gray-200/50 dark:border-gray-700/50",children:[h.jsxs("div",{className:"absolute top-4 right-4 z-20 flex flex-col gap-2",children:[h.jsx(Z.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:se,className:"w-10 h-10 bg-white/90 dark:bg-gray-800/90 backdrop-blur-xl rounded-xl flex items-center justify-center shadow-lg hover:shadow-xl transition-all duration-200 border border-gray-200/50 dark:border-gray-700/50","aria-label":"Zoom in",children:h.jsx("svg",{className:"w-5 h-5 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),h.jsx(Z.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:X,className:"w-10 h-10 bg-white/90 dark:bg-gray-800/90 backdrop-blur-xl rounded-xl flex items-center justify-center shadow-lg hover:shadow-xl transition-all duration-200 border border-gray-200/50 dark:border-gray-700/50","aria-label":"Zoom out",children:h.jsx("svg",{className:"w-5 h-5 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 12H6"})})}),h.jsx(Z.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:G,className:"w-10 h-10 bg-white/90 dark:bg-gray-800/90 backdrop-blur-xl rounded-xl flex items-center justify-center shadow-lg hover:shadow-xl transition-all duration-200 border border-gray-200/50 dark:border-gray-700/50","aria-label":"Reset zoom",children:h.jsx("svg",{className:"w-5 h-5 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),h.jsx("div",{className:"absolute top-4 left-4 z-20 bg-white/90 dark:bg-gray-800/90 backdrop-blur-xl rounded-xl px-3 py-2 shadow-lg border border-gray-200/50 dark:border-gray-700/50",children:h.jsxs("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:[Math.round(_*100),"%"]})}),h.jsx("div",{className:"absolute bottom-4 left-4 z-20 bg-white/90 dark:bg-gray-800/90 backdrop-blur-xl rounded-xl px-3 py-2 shadow-lg border border-gray-200/50 dark:border-gray-700/50",children:h.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Scroll to zoom • Drag to pan"})}),h.jsx("div",{className:"w-full h-full min-h-[40vh] flex items-center justify-center overflow-hidden cursor-grab active:cursor-grabbing",onWheel:F,onMouseDown:$,onMouseMove:K,onMouseUp:de,onMouseLeave:de,style:{cursor:A?"grabbing":"grab"},children:h.jsx("img",{src:t.imageUrl,alt:t.name,className:"transition-transform duration-200 ease-out",style:{transform:`scale(${_}) translate(${S.x/_}px, ${S.y/_}px)`,transformOrigin:"center center",maxWidth:"none",maxHeight:"none",width:"auto",height:"auto"},draggable:!1})})]}),h.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-xl p-4 border border-blue-200/50 dark:border-blue-700/50",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-2 text-center",children:"Exercise Timer"}),h.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 text-center mb-3",children:t.name}),x&&h.jsx(Z.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mb-4 p-3 bg-green-500/10 border border-green-500/30 rounded-lg text-center",children:h.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-600 dark:text-green-400",children:[h.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),h.jsx("span",{className:"font-medium",children:"Workout session saved!"})]})}),h.jsxs("div",{className:"text-center mb-4",children:[h.jsxs("div",{className:`text-4xl font-mono font-bold transition-colors duration-300 ${i===0&&o===0&&v?"text-red-600 dark:text-red-400 animate-pulse":"text-blue-600 dark:text-blue-400"}`,children:[String(i).padStart(2,"0"),":",String(o).padStart(2,"0")]}),i===0&&o===0&&v&&h.jsx(Z.p,{initial:{opacity:0},animate:{opacity:1},className:"text-sm font-medium text-red-600 dark:text-red-400 mt-2",children:"Timer completed!"})]}),h.jsxs("div",{className:"flex flex-wrap gap-3 justify-center",children:[h.jsxs("div",{className:"flex items-center gap-2 bg-white dark:bg-gray-700 rounded-lg px-4 py-2",children:[h.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Minutes:"}),h.jsx("input",{type:"number",min:"0",max:"99",value:i,onChange:H=>{const ne=parseInt(H.target.value)||0;ne>=0&&ne<=99&&s(ne)},disabled:l,className:"w-16 px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 disabled:opacity-50"})]}),h.jsxs("div",{className:"flex items-center gap-2 bg-white dark:bg-gray-700 rounded-lg px-4 py-2",children:[h.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Seconds:"}),h.jsx("input",{type:"number",min:"0",max:"59",value:o,onChange:H=>{const ne=parseInt(H.target.value)||0;ne>=0&&ne<=59&&a(ne)},disabled:l,className:"w-16 px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 disabled:opacity-50"})]})]}),h.jsxs("div",{className:"flex gap-3 justify-center mt-4",children:[l?h.jsxs("button",{onClick:R,className:"px-6 py-3 rounded-xl bg-gradient-to-r from-yellow-500 to-orange-600 hover:from-yellow-600 hover:to-orange-700 text-white font-medium transition-all duration-200 shadow-lg hover:shadow-xl flex items-center gap-2",children:[h.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-2 0v6a1 1 0 102 0V7z",clipRule:"evenodd"})}),"Pause"]}):h.jsxs("button",{onClick:D,disabled:i===0&&o===0,className:"px-6 py-3 rounded-xl bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-medium transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[h.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"})}),"Start"]}),h.jsxs("button",{onClick:ie,className:"px-6 py-3 rounded-xl bg-white dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 font-medium transition-all duration-200 border border-gray-300 dark:border-gray-600 flex items-center gap-2",children:[h.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})}),"Reset"]})]})]})]})]})}function hK({onOpenExercise:t}){var l;const[e,n]=O.useState("Cardio"),[r,i]=O.useState(null),[s,o]=O.useState(!1),a=c=>{i(c),o(!0),t==null||t(c)};return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"bg-white/90 dark:bg-gray-900/90 backdrop-blur-xl rounded-3xl p-8 shadow-2xl border border-gray-200/50 dark:border-gray-700/50",children:[h.jsxs("div",{className:"flex items-center justify-between mb-8 gap-6 flex-wrap",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"w-2 h-10 bg-gradient-to-b from-blue-500 to-indigo-600 rounded-full"}),h.jsx("h2",{className:"text-4xl font-black text-gray-900 dark:text-gray-100",children:"Browse Exercises"})]}),h.jsx("select",{id:"category-select",value:e,onChange:c=>n(c.target.value),className:"px-6 py-3 rounded-2xl border-2 border-gray-300 dark:border-gray-600 bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:border-blue-500 transition-all duration-300 shadow-lg hover:shadow-xl font-semibold cursor-pointer","aria-label":"Select exercise category",children:ts.map(c=>h.jsx("option",{value:c.category,className:"bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:c.category},c.category))})]}),h.jsx("div",{children:h.jsx("div",{className:"grid grid-cols-2 gap-8",children:(l=ts.find(c=>c.category===e))==null?void 0:l.exercises.map(c=>h.jsxs(Z.button,{whileHover:{scale:1.02,y:-4},whileTap:{scale:.98},onClick:()=>a(c),className:"group relative overflow-hidden rounded-3xl bg-white/90 dark:bg-gray-800/90 backdrop-blur-xl border border-gray-200/50 dark:border-gray-700/50 hover:border-blue-500/50 dark:hover:border-blue-400/50 transition-all duration-300 aspect-square shadow-lg hover:shadow-2xl","aria-label":`View ${c.name} exercise`,children:[h.jsx("img",{src:c.imageUrl,alt:c.name,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",loading:"lazy"}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),h.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6",children:h.jsx("span",{className:"text-white font-bold text-lg block group-hover:text-white transition-colors duration-300",children:c.name})}),h.jsx("div",{className:"absolute top-4 right-4 w-8 h-8 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:h.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h1m4 0h1m-6-8h8a2 2 0 012 2v8a2 2 0 01-2 2H8a2 2 0 01-2-2V8a2 2 0 012-2z"})})})]},c.id))})})]}),s&&r&&h.jsx(AR,{exercise:r,onClose:()=>{o(!1),i(null)}})]})}function fK({onNav:t}){const{user:e}=pn(),n=$n(),[r,i]=O.useState(null),{data:s,isLoading:o}=Qt({queryKey:["schedule",e==null?void 0:e.uid],queryFn:()=>Cm(e.uid),enabled:!!(e!=null&&e.uid)});_n({mutationFn:u=>NN(e.uid,u),onSuccess:()=>{n.invalidateQueries({queryKey:["schedule",e==null?void 0:e.uid]})}});const a=new Date().toLocaleDateString("en-US",{weekday:"long"}),l=a.toLowerCase(),c=(s==null?void 0:s[l])||[];return o?h.jsxs("div",{className:"bg-white/90 dark:bg-gray-900/90 backdrop-blur-xl rounded-3xl p-8 shadow-2xl border border-gray-200/50 dark:border-gray-700/50 h-full",children:[h.jsx("div",{className:"text-lg font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-6",children:"Today's Schedule"}),h.jsx("div",{className:"flex items-center justify-center py-8",children:h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})]}):h.jsxs("div",{className:"bg-white/90 dark:bg-gray-900/90 backdrop-blur-xl rounded-3xl p-8 shadow-2xl border border-gray-200/50 dark:border-gray-700/50 h-full",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("div",{children:h.jsx("div",{className:"text-lg font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Today's Schedule"})}),h.jsxs("button",{onClick:u=>{u.preventDefault(),t==null||t("schedule")},className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium transition-colors flex items-center gap-1",children:[h.jsx(sf,{className:"w-4 h-4"}),"View All"]})]}),h.jsx("div",{className:"space-y-4",children:c.length===0?h.jsxs("div",{className:"text-center py-8",children:[h.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx(sf,{className:"w-8 h-8 text-gray-400"})}),h.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-4",children:"No activities scheduled for today"}),h.jsx("button",{onClick:u=>{u.preventDefault(),t==null||t("schedule")},className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-medium rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:"Create Schedule"})]}):Array.isArray(c)&&c.map((u,f)=>h.jsx(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:f*.1},className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 p-4 rounded-xl border border-blue-200/50 dark:border-blue-700/50 hover:shadow-lg transition-all duration-200",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("div",{className:"bg-blue-500/10 p-2 rounded-lg",children:h.jsx(Yc,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),h.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:u.time})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Yi,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),h.jsx("span",{className:"font-semibold text-sm text-gray-800 dark:text-white",children:u.activity})]})]})},f))}),c.length>0&&h.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700"}),h.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-4 font-medium text-center",children:a})]})}function mK({labels:t,weightData:e,units:n,onUpdateWeight:r}){return h.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20 dark:border-gray-700/50",children:[h.jsxs("div",{className:"flex items-center justify-between mb-6",children:[h.jsxs("div",{className:"text-lg font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:["Weight progress for 3 months (",lw(n),")"]}),h.jsx("button",{onClick:r,className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium transition-colors",children:"Update weight →"})]}),h.jsx(PR,{labels:t,weightData:e,units:n})]})}function pK({labels:t,weightData:e,units:n,onUpdateWeight:r,onNav:i,onOpenExercise:s}){return h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"bg-white/90 dark:bg-gray-900/90 backdrop-blur-xl rounded-3xl p-8 shadow-2xl border border-gray-200/50 dark:border-gray-700/50",children:h.jsx(dK,{title:"FITNESS TRACKER",onNav:i})}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[h.jsx("div",{className:"lg:col-span-2",children:h.jsx(hK,{onOpenExercise:s})}),h.jsx("div",{className:"lg:col-span-1",children:h.jsx(fK,{onNav:i})})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[h.jsx("div",{className:"lg:col-span-2",children:h.jsx(mK,{labels:t,weightData:e,units:n,onUpdateWeight:r})}),h.jsx("div",{className:"lg:col-span-1 space-y-6",children:h.jsx(ta,{})})]})]})}function gK({onNav:t,onOpenGif:e,centerPage:n}){const{user:r}=pn(),i=$n(),s=aw();O.useRef(0);const o=O.useRef(n);O.useEffect(()=>{const R=sessionStorage.getItem("sidebar_nav")==="true";if(o.current!==n)if(R){const G=`myfitness_scroll_${n}`;sessionStorage.removeItem(G),sessionStorage.removeItem("sidebar_nav"),requestAnimationFrame(()=>{window.scrollTo({top:0,behavior:"smooth"})})}else{const G=`myfitness_scroll_${n}`,F=sessionStorage.getItem(G);if(F){const $=parseInt(F,10);!isNaN($)&&$>0?requestAnimationFrame(()=>{window.scrollTo({top:$,behavior:"instant"})}):requestAnimationFrame(()=>{window.scrollTo({top:0,behavior:"instant"})})}else requestAnimationFrame(()=>{window.scrollTo({top:0,behavior:"instant"})})}const ie=`myfitness_scroll_${n}`,se=()=>{sessionStorage.getItem("sidebar_nav")!=="true"&&sessionStorage.setItem(ie,String(window.scrollY))},X=setTimeout(()=>{window.addEventListener("scroll",se,{passive:!0})},1e3);return o.current=n,()=>{clearTimeout(X),window.removeEventListener("scroll",se)}},[n]);const{data:a}=Qt({queryKey:["user","profile",r==null?void 0:r.uid],queryFn:async()=>{if(!(r!=null&&r.uid))return null;const{getUserFromFirestore:R}=await Xn(async()=>{const{getUserFromFirestore:ie}=await Promise.resolve().then(()=>a7);return{getUserFromFirestore:ie}},void 0);return R(r.uid)},enabled:!!(r!=null&&r.uid),staleTime:5*60*1e3,refetchOnWindowFocus:!1}),l=a||(r?{uid:r.uid,name:r.name,email:r.email,age:r.age,weightKg:r.weightKg,heightCm:r.heightCm,theme:r.theme,fitnessGoal:r.fitnessGoal,units:"metric",language:"en",privacy:"private",notifications:{workoutReminders:!0,goalAchievements:!0,weeklyProgress:!1},dataSharing:!0,activityTracking:!0}:null),{data:c=[]}=Qt({queryKey:["weight","history",r==null?void 0:r.uid],queryFn:()=>gy.getHistory(r.uid),enabled:!!(r!=null&&r.uid)}),{data:u=[]}=Qt({queryKey:["goals",r==null?void 0:r.uid],queryFn:()=>cw(r.uid),enabled:!!(r!=null&&r.uid)}),m=(()=>{var se;const R=(l==null?void 0:l.weightKg)||70,ie=["Week 1","Week 2","Week 3","Week 4","Week 5","Week 6","Week 7","Week 8","Week 9","Week 10","Week 11","Week 12"];if(c.length>0){const X=c.sort((K,de)=>new Date(K.date).getTime()-new Date(de.date).getTime()),G=new Date,F=new Date(G.getTime()-12*7*24*60*60*1e3),$=X.filter(K=>new Date(K.date)>=F);if($.length>0){const K=[];for(let de=0;de<12;de++){const H=new Date(F.getTime()+de*7*24*60*60*1e3),ne=new Date(H.getTime()+7*24*60*60*1e3),ge=$.filter(Ae=>{const Be=new Date(Ae.date);return Be>=H&&Be<ne});if(ge.length>0){const Ae=ge[ge.length-1];Ae?K.push({week:ie[de],weight:Ae.weight}):K.push({week:ie[de],weight:R})}else if(K.length>0){const Ae=((se=K[K.length-1])==null?void 0:se.weight)||R;K.push({week:ie[de],weight:Ae})}else K.push({week:ie[de],weight:R})}return K}}return ie.map((X,G)=>{if(G===11)return{week:X,weight:R};{const F=(Math.random()-.5)*1,$=Math.round((R+F)*10)/10;return{week:X,weight:$}}})})(),p=h7(m,s.units),y=Array.from({length:12}).map((R,ie)=>`W${ie+1}`),[x,k]=Zn.useState(null),[v,w]=Zn.useState(!1),[_,P]=Zn.useState(!1),[A,N]=Zn.useState(!1),[T,E]=Zn.useState(!1),{data:S}=Qt({queryKey:["schedule",r==null?void 0:r.uid],queryFn:()=>Cm(r.uid),enabled:!!(r!=null&&r.uid)}),C=_n({mutationFn:R=>y7(r.uid,R),onSuccess:()=>{i.invalidateQueries({queryKey:["schedule",r==null?void 0:r.uid]}),w(!1)}}),M=_n({mutationFn:()=>v7(r.uid),onSuccess:()=>{i.invalidateQueries({queryKey:["schedule",r==null?void 0:r.uid]}),alert("Schedule deleted successfully!")}}),D=_n({mutationFn:R=>gy.addEntry(r.uid,R),onSuccess:()=>{i.invalidateQueries({queryKey:["weight","history",r==null?void 0:r.uid]}),i.invalidateQueries({queryKey:["user","profile",r==null?void 0:r.uid]})}});return h.jsx(h.Fragment,{children:h.jsxs("div",{className:"min-h-screen gradient-elegant-light dark:gradient-elegant-dark",children:[h.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[h.jsx("div",{className:"absolute -top-40 -right-40 w-96 h-96 bg-blue-200/10 dark:bg-blue-900/10 rounded-full mix-blend-multiply dark:mix-blend-screen filter blur-3xl opacity-60 animate-pulse"}),h.jsx("div",{className:"absolute -bottom-40 -left-40 w-96 h-96 bg-indigo-200/10 dark:bg-indigo-900/10 rounded-full mix-blend-multiply dark:mix-blend-screen filter blur-3xl opacity-60 animate-pulse",style:{animationDelay:"2s"}}),h.jsx("div",{className:"absolute top-40 left-1/2 w-96 h-96 bg-emerald-200/10 dark:bg-emerald-900/10 rounded-full mix-blend-multiply dark:mix-blend-screen filter blur-3xl opacity-60 animate-pulse",style:{animationDelay:"4s"}})]}),h.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto py-8 grid grid-cols-1 lg:grid-cols-12 gap-8",children:[h.jsx("div",{className:"lg:col-span-3",children:h.jsx(f7,{profile:l,onNav:t})}),h.jsxs("div",{className:"lg:col-span-9 space-y-8",children:[n==="goals"?h.jsx("div",{className:"space-y-6",children:h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[h.jsx("div",{className:"lg:col-span-2",children:h.jsx("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20 dark:border-gray-700/50",children:h.jsx(x7,{})})}),h.jsx("div",{className:"lg:col-span-1",children:h.jsx(lK,{goals:u})})]})}):n==="profile"?h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[h.jsx("div",{className:"lg:col-span-2",children:h.jsx("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 dark:border-gray-700/50 overflow-hidden",children:h.jsx(b7,{onClose:()=>t==null?void 0:t("dashboard")})})}),h.jsx("div",{className:"lg:col-span-1",children:h.jsx(uK,{currentUser:l})})]}):n==="schedule"?h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[h.jsx("div",{className:"lg:col-span-2",children:h.jsx("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20 dark:border-gray-700/50",children:h.jsx(E7,{})})}),h.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[h.jsx(cK,{schedule:S||null,onCreateSchedule:()=>w(!0),onEditSchedule:()=>N(!0),onDeleteSchedule:()=>E(!0),isDeleting:M.isPending}),h.jsx(ta,{})]})]}):n==="achievements"?h.jsx("div",{className:"space-y-6",children:h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[h.jsx("div",{className:"lg:col-span-2",children:h.jsx("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20 dark:border-gray-700/50",children:h.jsx(N7,{})})}),h.jsx("div",{className:"lg:col-span-1 space-y-6",children:h.jsx(ta,{})})]})}):n==="settings"?h.jsx("div",{className:"space-y-6",children:h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[h.jsx("div",{className:"lg:col-span-2",children:h.jsx("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20 dark:border-gray-700/50",children:h.jsx(rK,{})})}),h.jsx("div",{className:"lg:col-span-1 space-y-6",children:h.jsx(ta,{})})]})}):n==="workouts"||n==="workout-logs"?h.jsx("div",{className:"space-y-6",children:h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[h.jsx("div",{className:"lg:col-span-2",children:h.jsx("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20 dark:border-gray-700/50",children:h.jsx(sK,{})})}),h.jsx("div",{className:"lg:col-span-1 space-y-6",children:h.jsx(ta,{})})]})}):h.jsx(pK,{labels:y,weightData:p,units:s.units,onUpdateWeight:()=>P(!0),onNav:t,onOpenExercise:R=>e==null?void 0:e(R.id)}),x&&h.jsx(aK,{open:!!x,title:x.title,progress:x.progress,data:x.data,isExercise:x.isExercise,onClose:()=>k(null),onOpenGif:R=>{k(null),e==null||e(R)}}),v&&h.jsx(S7,{onClose:()=>w(!1),onSave:R=>{const ie={monday:R.monday||[],tuesday:R.tuesday||[],wednesday:R.wednesday||[],thursday:R.thursday||[],friday:R.friday||[],saturday:R.saturday||[],sunday:R.sunday||[]};C.mutate(ie)}}),_&&h.jsx(nK,{onClose:()=>P(!1),labels:y,weightData:p,onUpdateWeight:R=>D.mutate(R),currentWeight:l==null?void 0:l.weightKg,isUpdating:D.isPending,isSuccess:D.isSuccess,units:s.units}),A&&h.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[h.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>N(!1)}),h.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-2xl w-full max-w-md border border-white/20 dark:border-gray-700/50",children:[h.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[h.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:h.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),h.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Edit Schedule"})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:"To edit your schedule, simply click on any day card in your weekly schedule. You can add, modify, or remove activities for each day."}),h.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 p-4 rounded-xl border border-blue-200 dark:border-blue-700",children:h.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"💡 Tip: You can click on any day (Monday through Sunday) to open the edit form for that specific day."})})]}),h.jsx("div",{className:"mt-6 flex justify-end",children:h.jsx("button",{onClick:()=>N(!1),className:"px-6 py-3 rounded-xl bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-medium transition-all duration-200 shadow-lg hover:shadow-xl",children:"Got it!"})})]})]}),T&&h.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[h.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>E(!1)}),h.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-2xl w-full max-w-md border border-white/20 dark:border-gray-700/50",children:[h.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[h.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-red-500 to-red-600 flex items-center justify-center",children:h.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),h.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-red-600 to-red-700 bg-clip-text text-transparent",children:"Delete Schedule"})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:"Are you sure you want to delete your entire workout schedule? This action cannot be undone and will remove all your scheduled activities for all days of the week."}),h.jsx("div",{className:"bg-gradient-to-r from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 p-4 rounded-xl border border-red-200 dark:border-red-700",children:h.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"⚠️ Warning: This will permanently delete all your scheduled workouts and activities."})})]}),h.jsxs("div",{className:"mt-6 flex space-x-3 justify-end",children:[h.jsx("button",{onClick:()=>E(!1),className:"px-6 py-3 rounded-xl bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 font-medium transition-all duration-200",children:"Cancel"}),h.jsx("button",{onClick:()=>{M.mutate(),E(!1)},disabled:M.isPending,className:"px-6 py-3 rounded-xl bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-medium transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:M.isPending?"Deleting...":"Delete Schedule"})]})]})]})]})]})]})})}function yK({onBack:t}){const[e,n]=O.useState(!1),[r,i]=O.useState(null),[s,o]=O.useState(""),[a,l]=O.useState({message:"",type:null}),[c,u]=O.useState(!1),f=100,m=O.useCallback(v=>{if(!v||v.trim().length===0)return{valid:!0};const w=v.trim();return w.length>f?{valid:!1,error:`Search query must be less than ${f} characters`}:/[<>{}[\]]/g.test(w)?{valid:!1,error:"Search query contains invalid characters"}:{valid:!0}},[]),p=O.useCallback(v=>{const w=v.target.value;l({message:"",type:null});const _=m(w);if(!_.valid&&_.error){l({message:_.error,type:"invalid_input"});return}o(w),w.trim().length>0?u(!0):u(!1)},[m]),y=O.useCallback(()=>{o(""),l({message:"",type:null}),u(!1)},[]),x=O.useMemo(()=>{try{if(!s||s.trim().length===0)return ts;const v=s.trim().toLowerCase(),w=ts.map(_=>{const P=_.exercises.filter(A=>{try{const N=A.name.toLowerCase(),T=_.category.toLowerCase();return N.includes(v)||T.includes(v)}catch(N){return console.error("Error filtering exercise:",N),!1}});return P.length>0?{..._,exercises:P}:null}).filter(_=>_!==null);return w.length===0&&c?l({message:`No exercises found for "${s}"`,type:"no_results"}):l({message:"",type:null}),w}catch(v){return console.error("Error filtering exercises:",v),l({message:"An error occurred while searching. Please try again.",type:"network_error"}),ts}},[s,c]),k=O.useMemo(()=>x.reduce((v,w)=>v+w.exercises.length,0),[x]);return h.jsxs("div",{className:"min-h-screen gradient-clean-light dark:gradient-clean-dark",children:[h.jsxs("div",{className:"max-w-7xl mx-auto py-12 px-6",children:[h.jsxs(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-12",children:[h.jsxs("div",{className:"flex items-center gap-6 mb-6",children:[t&&h.jsx(Z.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,className:"p-3 rounded-2xl bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-300 shadow-lg hover:shadow-xl border border-gray-200/50 dark:border-gray-700/50",children:h.jsx("svg",{className:"w-6 h-6 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h1",{className:"text-5xl font-black bg-gradient-to-r from-slate-900 via-blue-900 to-indigo-900 dark:from-white dark:via-blue-100 dark:to-indigo-100 bg-clip-text text-transparent",children:"Exercise Library"}),h.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 mt-2 font-medium",children:"Click on any exercise to start exercising"})]})]}),h.jsxs(Z.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4,delay:.2},className:"mb-8",children:[h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:h.jsx(s1,{className:"h-5 w-5 text-gray-400 dark:text-gray-500"})}),h.jsx("input",{type:"text",value:s,onChange:p,placeholder:"Search exercises by name or category...",maxLength:f,className:"w-full pl-12 pr-12 py-4 bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl border border-gray-200/50 dark:border-gray-700/50 rounded-2xl text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 shadow-lg hover:shadow-xl"}),s&&h.jsx("button",{onClick:y,className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors","aria-label":"Clear search",children:h.jsx(sP,{className:"h-5 w-5"})})]}),c&&h.jsx(Z.p,{initial:{opacity:0},animate:{opacity:1},className:"text-sm text-gray-600 dark:text-gray-400 mt-2 ml-1",children:k>0?`Found ${k} exercise${k!==1?"s":""}`:"No results found"}),h.jsx(Xv,{children:a.message&&h.jsxs(Z.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mt-3 flex items-center gap-2 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl",children:[h.jsx(tP,{className:"h-5 w-5 text-red-600 dark:text-red-400 flex-shrink-0"}),h.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:a.message})]})})]})]}),x.length>0?h.jsx("div",{className:"space-y-16",children:x.map((v,w)=>h.jsxs(Z.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:w*.1},children:[h.jsxs("h2",{className:"text-3xl font-bold mb-8 text-gray-900 dark:text-gray-100 flex items-center gap-3",children:[h.jsx("div",{className:"w-2 h-8 bg-gradient-to-b from-blue-500 to-indigo-600 rounded-full"}),v.category]}),h.jsx("div",{className:"grid grid-cols-4 gap-8",children:v.exercises.map((_,P)=>h.jsxs(Z.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.4,delay:w*.1+P*.05},whileHover:{scale:1.02,y:-4},whileTap:{scale:.98},onClick:()=>{try{i(_),n(!0)}catch(A){console.error("Error opening exercise modal:",A),l({message:"Failed to open exercise. Please try again.",type:"network_error"})}},className:"group relative overflow-hidden rounded-3xl bg-white/90 dark:bg-gray-800/90 backdrop-blur-xl border border-gray-200/50 dark:border-gray-700/50 hover:border-blue-500/50 dark:hover:border-blue-400/50 transition-all duration-300 aspect-square shadow-lg hover:shadow-2xl",children:[h.jsx("img",{src:_.imageUrl,alt:_.name,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",onError:A=>{console.error("Error loading exercise image:",_.imageUrl);const N=A.target;N.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="200" height="200"%3E%3Crect fill="%23ddd" width="200" height="200"/%3E%3Ctext fill="%23999" font-family="sans-serif" font-size="14" x="50%25" y="50%25" text-anchor="middle" dy=".3em"%3EImage%3C/text%3E%3C/svg%3E',N.alt=`${_.name} (image unavailable)`},loading:"lazy"}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),h.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6",children:h.jsx("span",{className:"text-white font-bold text-lg block group-hover:text-white transition-colors duration-300",children:_.name})}),h.jsx("div",{className:"absolute top-4 right-4 w-8 h-8 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:h.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h1m4 0h1m-6-8h8a2 2 0 012 2v8a2 2 0 01-2 2H8a2 2 0 01-2-2V8a2 2 0 012-2z"})})})]},_.id))})]},v.category))}):h.jsx(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-16",children:h.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl rounded-3xl p-12 border border-gray-200/50 dark:border-gray-700/50 shadow-lg",children:[h.jsx("div",{className:"w-24 h-24 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-6",children:h.jsx(s1,{className:"w-12 h-12 text-gray-400 dark:text-gray-500"})}),h.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"No exercises found"}),h.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6 max-w-md mx-auto",children:[`We couldn't find any exercises matching "`,s,'". Try searching with different keywords or browse all exercises.']}),h.jsx("button",{onClick:y,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-medium rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl",children:"Clear Search & Show All"})]})})]}),e&&r&&h.jsx(AR,{exercise:r,onClose:()=>{n(!1),i(null)}})]})}function vK(){const{user:t}=pn();$n();const{data:e}=Qt({queryKey:["userPreferences",t==null?void 0:t.uid],queryFn:()=>RN(t.uid),enabled:!!(t!=null&&t.uid)}),[n,r]=O.useState(()=>{if(e!=null&&e.lastActivePage&&["dashboard","profile","goals","gifs","achievements","exercises","workouts","schedule","settings"].includes(e.lastActivePage))return e.lastActivePage;const l=localStorage.getItem("myfitness_active_page");return l&&["dashboard","profile","goals","gifs","achievements","exercises","workouts","schedule","settings"].includes(l)?l:"dashboard"});O.useEffect(()=>{e!=null&&e.lastActivePage&&["dashboard","profile","goals","gifs","achievements","exercises","workouts","schedule","settings"].includes(e.lastActivePage)&&r(e.lastActivePage)},[e==null?void 0:e.lastActivePage]);const[i,s]=O.useState(()=>(e==null?void 0:e.lastSelectedGifId)||null),o=_n({mutationFn:l=>MN(t.uid,l)});O.useEffect(()=>{t!=null&&t.uid&&n&&(localStorage.setItem("myfitness_active_page",n),o.mutate({lastActivePage:n}),xc(t.uid,{type:"page_view",page:n}))},[n,t==null?void 0:t.uid]),O.useEffect(()=>{t!=null&&t.uid&&i?o.mutate({lastSelectedGifId:i}):t!=null&&t.uid},[i,t==null?void 0:t.uid]);const a=l=>{const c=n;c&&sessionStorage.setItem(`myfitness_scroll_${c}`,String(window.scrollY)),r(l)};return h.jsx("div",{children:n==="exercises"?h.jsx(yK,{onBack:()=>a("dashboard")}):h.jsxs(h.Fragment,{children:[h.jsx(gK,{onNav:a,onOpenGif:l=>{s(l),a("gifs")},centerPage:n}),n==="gifs"&&h.jsx(vO,{exerciseId:i,onBack:()=>a("dashboard")})]})})}function xK(){return h.jsx(t7,{children:h.jsx(vK,{})})}function wK({children:t}){const[e]=O.useState(()=>new iO({defaultOptions:{queries:{staleTime:0,retry:!1}}}));return h.jsx(sO,{client:e,children:t})}class bK extends O.Component{constructor(n){super(n);ee(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n,errorInfo:null}}componentDidCatch(n,r){console.error("ErrorBoundary caught an error:",n,r),this.setState({error:n,errorInfo:r})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 p-4",children:h.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-200 dark:border-gray-700 p-8 max-w-md w-full",children:[h.jsx("div",{className:"flex items-center justify-center mb-6",children:h.jsx("div",{className:"bg-red-100 dark:bg-red-900/20 p-4 rounded-full",children:h.jsx(iP,{className:"w-12 h-12 text-red-600 dark:text-red-400"})})}),h.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white text-center mb-4",children:"Something went wrong"}),h.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"We're sorry, but something unexpected happened. Please try refreshing the page."}),this.state.error&&!1,h.jsxs("div",{className:"flex gap-4",children:[h.jsxs("button",{onClick:this.handleReset,className:"flex-1 px-4 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-medium rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl flex items-center justify-center gap-2",children:[h.jsx(N6,{className:"w-4 h-4"}),"Try Again"]}),h.jsx("button",{onClick:()=>window.location.reload(),className:"flex-1 px-4 py-3 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 font-medium rounded-xl transition-all duration-200",children:"Reload Page"})]})]})}):this.props.children}}yg.createRoot(document.getElementById("root")).render(h.jsx(Zn.StrictMode,{children:h.jsx(bK,{children:h.jsx(i7,{children:h.jsx(wK,{children:h.jsx(yO,{children:h.jsx(l7,{children:h.jsx(xK,{})})})})})})}));
